import e,{Buffer as t}from"buffer";import n from"crypto";import r from"node:crypto";import i from"events";import o from"@react-native-async-storage/async-storage";var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var d={exports:{}};d.exports=s.fetch,d.exports.default=s.fetch,d.exports.fetch=s.fetch,d.exports.Headers=s.Headers,d.exports.Request=s.Request,d.exports.Response=s.Response;var u=a(d.exports),l={},f={},h={};const{Buffer:p}=e,{createHash:A,createHmac:g}=n,m={},v=e=>{switch(e){case"sha256":case"sha3-256":case"blake2s256":return 32;case"sha512":case"sha3-512":case"blake2b512":return 64;case"sha224":case"sha3-224":return 28;case"sha384":case"sha3-384":return 48;case"sha1":return 20;case"md5":return 16;default:{let t=m[e];return void 0===t&&(t=A(e).digest().length,m[e]=t),t}}},b=(e,t,n,r)=>{const i=p.isBuffer(n)?n:p.from(n),o=r&&r.length?p.from(r):p.alloc(t,0);return g(e,o).update(i).digest()},y=(e,t,n,r,i)=>{const o=p.isBuffer(i)?i:p.from(i||""),s=o.length,a=Math.ceil(r/t);if(a>255)throw new Error(`OKM length ${r} is too long for ${e} hash`);const c=p.alloc(t*a+s+1);for(let r=1,i=0,d=0;r<=a;++r)o.copy(c,d),c[d+s]=r,g(e,n).update(c.slice(i,d+s+1)).digest().copy(c,d),i=d,d+=t;return c.slice(0,r)};function w(e,t,{salt:n="",info:r="",hash:i="SHA-256"}={}){i=i.toLowerCase().replace("-","");const o=v(i),s=b(i,o,e,n);return y(i,o,s,t,r)}Object.defineProperties(w,{hash_length:{configurable:!1,enumerable:!1,writable:!1,value:v},extract:{configurable:!1,enumerable:!1,writable:!1,value:b},expand:{configurable:!1,enumerable:!1,writable:!1,value:y}});var E=w;const S="Impossible case. Please create issue.",_="The tweak was out of range or the resulted private key is invalid",C="The tweak was out of range or equal to zero",M="Unknow error on context randomization",k="Private Key is invalid",I="Public Key could not be parsed",R="Public Key serialization error",O="The sum of the public keys is not valid",x="Signature could not be parsed",T="The nonce generation function failed, or the private key was invalid",P="Public key could not be recover",N="Scalar was invalid (zero or overflow)";function L(e,t){if(!e)throw new Error(t)}function D(e,t,n){if(L(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),void 0!==n)if(Array.isArray(n)){const r=`Expected ${e} to be an Uint8Array with length [${n.join(", ")}]`;L(n.includes(t.length),r)}else{const r=`Expected ${e} to be an Uint8Array with length ${n}`;L(t.length===n,r)}}function j(e){L("Boolean"===F(e),"Expected compressed to be a Boolean")}function B(e=(e=>new Uint8Array(e)),t){return"function"==typeof e&&(e=e(t)),D("output",e,t),e}function F(e){return Object.prototype.toString.call(e).slice(8,-1)}var K={},$="6.5.4",U={},z={exports:{}},q=c(Object.freeze({__proto__:null,default:{}}));!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:q.Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function a(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=a(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=a(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,d=0,u=n;u<a;u+=r)d=c(e,u,u+r,t),this.imuln(i),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==s){var l=1;for(d=c(e,u,e.length,t),u=0;u<s;u++)l*=t;this.imuln(l),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;n.words[0]=a;for(var d=1;d<r;d++){for(var u=c>>>26,l=67108863&c,f=Math.min(d,t.length-1),h=Math.max(0,d-e.length+1);h<=f;h++){var p=d-h|0;u+=(s=(i=0|e.words[p])*(o=0|t.words[h])+l)/67108864|0,l=67108863&s}n.words[d]=0|l,c=0|u}return 0!==c?n.words[d]=0|c:n.length--,n.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?d[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var f=u[e],h=l[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var A=p.modn(h).toString(e);r=(p=p.idivn(h)).isZero()?A+r:d[f-A.length]+A+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,d=new e(o),u=this.clone();if(c){for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),d[a]=s;for(;a<o;a++)d[a]=0}else{for(a=0;a<o-i;a++)d[a]=0;for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),d[o-a-1]=s}return d},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var h=function(e,t,n){var r,i,o,s=e.words,a=t.words,c=n.words,d=0,u=0|s[0],l=8191&u,f=u>>>13,h=0|s[1],p=8191&h,A=h>>>13,g=0|s[2],m=8191&g,v=g>>>13,b=0|s[3],y=8191&b,w=b>>>13,E=0|s[4],S=8191&E,_=E>>>13,C=0|s[5],M=8191&C,k=C>>>13,I=0|s[6],R=8191&I,O=I>>>13,x=0|s[7],T=8191&x,P=x>>>13,N=0|s[8],L=8191&N,D=N>>>13,j=0|s[9],B=8191&j,F=j>>>13,K=0|a[0],$=8191&K,U=K>>>13,z=0|a[1],q=8191&z,V=z>>>13,H=0|a[2],W=8191&H,J=H>>>13,G=0|a[3],Y=8191&G,Q=G>>>13,X=0|a[4],Z=8191&X,ee=X>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,de=ae>>>13,ue=0|a[8],le=8191&ue,fe=ue>>>13,he=0|a[9],pe=8191&he,Ae=he>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(d+(r=Math.imul(l,$))|0)+((8191&(i=(i=Math.imul(l,U))+Math.imul(f,$)|0))<<13)|0;d=((o=Math.imul(f,U))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,$),i=(i=Math.imul(p,U))+Math.imul(A,$)|0,o=Math.imul(A,U);var me=(d+(r=r+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,V)|0)+Math.imul(f,q)|0))<<13)|0;d=((o=o+Math.imul(f,V)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(m,$),i=(i=Math.imul(m,U))+Math.imul(v,$)|0,o=Math.imul(v,U),r=r+Math.imul(p,q)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,V)|0;var ve=(d+(r=r+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;d=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(y,$),i=(i=Math.imul(y,U))+Math.imul(w,$)|0,o=Math.imul(w,U),r=r+Math.imul(m,q)|0,i=(i=i+Math.imul(m,V)|0)+Math.imul(v,q)|0,o=o+Math.imul(v,V)|0,r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0;var be=(d+(r=r+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,Q)|0)+Math.imul(f,Y)|0))<<13)|0;d=((o=o+Math.imul(f,Q)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,$),i=(i=Math.imul(S,U))+Math.imul(_,$)|0,o=Math.imul(_,U),r=r+Math.imul(y,q)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,V)|0,r=r+Math.imul(m,W)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(A,Y)|0,o=o+Math.imul(A,Q)|0;var ye=(d+(r=r+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(f,Z)|0))<<13)|0;d=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(M,$),i=(i=Math.imul(M,U))+Math.imul(k,$)|0,o=Math.imul(k,U),r=r+Math.imul(S,q)|0,i=(i=i+Math.imul(S,V)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,V)|0,r=r+Math.imul(y,W)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,J)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,Q)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,Q)|0,r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,ee)|0;var we=(d+(r=r+Math.imul(l,ne)|0)|0)+((8191&(i=(i=i+Math.imul(l,re)|0)+Math.imul(f,ne)|0))<<13)|0;d=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(R,$),i=(i=Math.imul(R,U))+Math.imul(O,$)|0,o=Math.imul(O,U),r=r+Math.imul(M,q)|0,i=(i=i+Math.imul(M,V)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,V)|0,r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,r=r+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,Q)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0;var Ee=(d+(r=r+Math.imul(l,oe)|0)|0)+((8191&(i=(i=i+Math.imul(l,se)|0)+Math.imul(f,oe)|0))<<13)|0;d=((o=o+Math.imul(f,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(T,$),i=(i=Math.imul(T,U))+Math.imul(P,$)|0,o=Math.imul(P,U),r=r+Math.imul(R,q)|0,i=(i=i+Math.imul(R,V)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,V)|0,r=r+Math.imul(M,W)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,J)|0,r=r+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,Q)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,Q)|0,r=r+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(m,ne)|0,i=(i=i+Math.imul(m,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0;var Se=(d+(r=r+Math.imul(l,ce)|0)|0)+((8191&(i=(i=i+Math.imul(l,de)|0)+Math.imul(f,ce)|0))<<13)|0;d=((o=o+Math.imul(f,de)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,$),i=(i=Math.imul(L,U))+Math.imul(D,$)|0,o=Math.imul(D,U),r=r+Math.imul(T,q)|0,i=(i=i+Math.imul(T,V)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,V)|0,r=r+Math.imul(R,W)|0,i=(i=i+Math.imul(R,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,r=r+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,Q)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,Q)|0,r=r+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(y,ne)|0,i=(i=i+Math.imul(y,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(m,oe)|0,i=(i=i+Math.imul(m,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(A,ce)|0,o=o+Math.imul(A,de)|0;var _e=(d+(r=r+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,fe)|0)+Math.imul(f,le)|0))<<13)|0;d=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,U))+Math.imul(F,$)|0,o=Math.imul(F,U),r=r+Math.imul(L,q)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,V)|0,r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,J)|0,r=r+Math.imul(R,Y)|0,i=(i=i+Math.imul(R,Q)|0)+Math.imul(O,Y)|0,o=o+Math.imul(O,Q)|0,r=r+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(m,ce)|0,i=(i=i+Math.imul(m,de)|0)+Math.imul(v,ce)|0,o=o+Math.imul(v,de)|0,r=r+Math.imul(p,le)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(A,le)|0,o=o+Math.imul(A,fe)|0;var Ce=(d+(r=r+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,Ae)|0)+Math.imul(f,pe)|0))<<13)|0;d=((o=o+Math.imul(f,Ae)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,V))+Math.imul(F,q)|0,o=Math.imul(F,V),r=r+Math.imul(L,W)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(D,W)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,Q)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,Q)|0,r=r+Math.imul(R,Z)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,ee)|0,r=r+Math.imul(M,ne)|0,i=(i=i+Math.imul(M,re)|0)+Math.imul(k,ne)|0,o=o+Math.imul(k,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,r=r+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(w,ce)|0,o=o+Math.imul(w,de)|0,r=r+Math.imul(m,le)|0,i=(i=i+Math.imul(m,fe)|0)+Math.imul(v,le)|0,o=o+Math.imul(v,fe)|0;var Me=(d+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,Ae)|0)+Math.imul(A,pe)|0))<<13)|0;d=((o=o+Math.imul(A,Ae)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,J))+Math.imul(F,W)|0,o=Math.imul(F,J),r=r+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,Q)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,Q)|0,r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,ee)|0,r=r+Math.imul(R,ne)|0,i=(i=i+Math.imul(R,re)|0)+Math.imul(O,ne)|0,o=o+Math.imul(O,re)|0,r=r+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,se)|0,r=r+Math.imul(S,ce)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(_,ce)|0,o=o+Math.imul(_,de)|0,r=r+Math.imul(y,le)|0,i=(i=i+Math.imul(y,fe)|0)+Math.imul(w,le)|0,o=o+Math.imul(w,fe)|0;var ke=(d+(r=r+Math.imul(m,pe)|0)|0)+((8191&(i=(i=i+Math.imul(m,Ae)|0)+Math.imul(v,pe)|0))<<13)|0;d=((o=o+Math.imul(v,Ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(B,Y),i=(i=Math.imul(B,Q))+Math.imul(F,Y)|0,o=Math.imul(F,Q),r=r+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,re)|0,r=r+Math.imul(R,oe)|0,i=(i=i+Math.imul(R,se)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,se)|0,r=r+Math.imul(M,ce)|0,i=(i=i+Math.imul(M,de)|0)+Math.imul(k,ce)|0,o=o+Math.imul(k,de)|0,r=r+Math.imul(S,le)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(_,le)|0,o=o+Math.imul(_,fe)|0;var Ie=(d+(r=r+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,Ae)|0)+Math.imul(w,pe)|0))<<13)|0;d=((o=o+Math.imul(w,Ae)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,Z),i=(i=Math.imul(B,ee))+Math.imul(F,Z)|0,o=Math.imul(F,ee),r=r+Math.imul(L,ne)|0,i=(i=i+Math.imul(L,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,se)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,se)|0,r=r+Math.imul(R,ce)|0,i=(i=i+Math.imul(R,de)|0)+Math.imul(O,ce)|0,o=o+Math.imul(O,de)|0,r=r+Math.imul(M,le)|0,i=(i=i+Math.imul(M,fe)|0)+Math.imul(k,le)|0,o=o+Math.imul(k,fe)|0;var Re=(d+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,Ae)|0)+Math.imul(_,pe)|0))<<13)|0;d=((o=o+Math.imul(_,Ae)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(T,ce)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(P,ce)|0,o=o+Math.imul(P,de)|0,r=r+Math.imul(R,le)|0,i=(i=i+Math.imul(R,fe)|0)+Math.imul(O,le)|0,o=o+Math.imul(O,fe)|0;var Oe=(d+(r=r+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,Ae)|0)+Math.imul(k,pe)|0))<<13)|0;d=((o=o+Math.imul(k,Ae)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(L,ce)|0,i=(i=i+Math.imul(L,de)|0)+Math.imul(D,ce)|0,o=o+Math.imul(D,de)|0,r=r+Math.imul(T,le)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(P,le)|0,o=o+Math.imul(P,fe)|0;var xe=(d+(r=r+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,Ae)|0)+Math.imul(O,pe)|0))<<13)|0;d=((o=o+Math.imul(O,Ae)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ce),i=(i=Math.imul(B,de))+Math.imul(F,ce)|0,o=Math.imul(F,de),r=r+Math.imul(L,le)|0,i=(i=i+Math.imul(L,fe)|0)+Math.imul(D,le)|0,o=o+Math.imul(D,fe)|0;var Te=(d+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,Ae)|0)+Math.imul(P,pe)|0))<<13)|0;d=((o=o+Math.imul(P,Ae)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,le),i=(i=Math.imul(B,fe))+Math.imul(F,le)|0,o=Math.imul(F,fe);var Pe=(d+(r=r+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,Ae)|0)+Math.imul(D,pe)|0))<<13)|0;d=((o=o+Math.imul(D,Ae)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Ne=(d+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,Ae))+Math.imul(F,pe)|0))<<13)|0;return d=((o=Math.imul(F,Ae))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,c[0]=ge,c[1]=me,c[2]=ve,c[3]=be,c[4]=ye,c[5]=we,c[6]=Ee,c[7]=Se,c[8]=_e,c[9]=Ce,c[10]=Me,c[11]=ke,c[12]=Ie,c[13]=Re,c[14]=Oe,c[15]=xe,c[16]=Te,c[17]=Pe,c[18]=Ne,0!==d&&(c[19]=d,n.length++),n};function p(e,t,n){return(new A).mulp(e,t,n)}function A(e,t){this.x=e,this.y=t}Math.imul||(h=f),i.prototype.mulTo=function(e,t){var n,r=this.length+e.length;return n=10===this.length&&10===e.length?h(this,e,t):r<63?f(this,e,t):r<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,c=Math.min(o,t.length-1),d=Math.max(0,o-e.length+1);d<=c;d++){var u=o-d,l=(0|e.words[u])*(0|t.words[d]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):p(this,e,t),n},A.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},A.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},A.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},A.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),d=Math.sin(2*Math.PI/a),u=0;u<i;u+=a)for(var l=c,f=d,h=0;h<s;h++){var p=n[u+h],A=r[u+h],g=n[u+h+s],m=r[u+h+s],v=l*g-f*m;m=l*m+f*g,g=v,n[u+h]=p+g,r[u+h]=A+m,n[u+h+s]=p-g,r[u+h+s]=A-m,h!==a&&(v=c*l-d*f,f=c*f+d*l,l=v)}},A.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},A.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},A.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},A.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(0==(-8192&o))},A.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},A.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),c=new Array(r),d=new Array(r),u=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,d,r),this.transform(s,o,a,c,r,i),this.transform(d,o,u,l,r,i);for(var h=0;h<r;h++){var p=a[h]*u[h]-c[h]*l[h];c[h]=a[h]*l[h]+c[h]*u[h],a[h]=p}return this.conjugate(a,c,r),this.transform(a,c,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),p(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<r;this.words[t]=c|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var d=0;d<s;d++)c.words[d]=this.words[d];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,d=0;d<this.length;d++)this.words[d]=this.words[d+s];else this.words[0]=0,this.length=1;var u=0;for(d=this.length-1;d>=0&&(0!==u||d>=i);d--){var l=0|this.words[d];this.words[d]=u<<26-o|l>>>o,u=l&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,s=0|o.words[o.length-1];0!=(n=26-this._countBits(s))&&(o=o.ushln(n),r.iushln(n),s=0|o.words[o.length-1]);var a,c=r.length-o.length;if("mod"!==t){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var d=0;d<a.length;d++)a.words[d]=0}var u=r.clone()._ishlnsubmul(o,1,c);0===u.negative&&(r=u,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|r.words[o.length+l])+(0|r.words[o.length+l-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(o,f,l);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,l),r.isZero()||(r.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(o=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:o,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,s,a},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),s=new i(0),a=new i(0),c=new i(1),d=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++d;for(var u=r.clone(),l=t.clone();!t.isZero();){for(var f=0,h=1;0==(t.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(u),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var p=0,A=1;0==(r.words[0]&A)&&p<26;++p,A<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a),s.isub(c)):(r.isub(t),a.isub(o),c.isub(s))}return{a:a,b:c,gcd:r.iushln(d)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,s=new i(1),a=new i(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var d=0,u=1;0==(t.words[0]&u)&&d<26;++d,u<<=1);if(d>0)for(t.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0==(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return(o=0===t.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new E(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},r(v,m),v.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(b,m),r(y,m),r(w,m),w.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new b;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return g[e]=t,t},E.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},E.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);n(!o.isZero());var a=new i(1).toRed(this),c=a.redNeg(),d=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,d).cmp(c);)u.redIAdd(c);for(var l=this.pow(u,o),f=this.pow(e,o.addn(1).iushrn(1)),h=this.pow(e,o),p=s;0!==h.cmp(a);){for(var A=h,g=0;0!==A.cmp(a);g++)A=A.redSqr();n(g<p);var m=this.pow(l,new i(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),h=h.redMul(l),p=g}return f},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var d=t.words[r],u=c-1;u>=0;u--){var l=d>>u&1;o!==n[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4==++a||0===r&&0===u)&&(o=this.mul(o,n[s]),a=0,s=0)):a=0}c=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new S(e)},r(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(z,s);var V=z.exports,H=W;function W(e,t){if(!e)throw new Error(t||"Assertion failed")}W.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var J={};!function(e){var t=J;function n(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var i=e.charCodeAt(r),o=i>>8,s=255&i;o?n.push(o,s):n.push(s)}return n},t.zero2=n,t.toHex=r,t.encode=function(e,t){return"hex"===t?r(e):e}}(),function(e){var t=U,n=V,r=H,i=J;t.assert=r,t.toArray=i.toArray,t.zero2=i.zero2,t.toHex=i.toHex,t.encode=i.encode,t.getNAF=function(e,t,n){var r=new Array(Math.max(e.bitLength(),n)+1);r.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<r.length;s++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,r[s]=a,o.iushrn(1)}return r},t.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,c=e.andln(3)+i&3,d=t.andln(3)+o&3;3===c&&(c=-1),3===d&&(d=-1),s=0==(1&c)?0:3!==(r=e.andln(7)+i&7)&&5!==r||2!==d?c:-c,n[0].push(s),a=0==(1&d)?0:3!==(r=t.andln(7)+o&7)&&5!==r||2!==c?d:-d,n[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return n},t.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},t.parseBytes=function(e){return"string"==typeof e?t.toArray(e,"hex"):e},t.intFromLE=function(e){return new n(e,"hex","le")}}();var G,Y={exports:{}};function Q(e){this.rand=e}if(Y.exports=function(e){return G||(G=new Q(null)),G.generate(e)},Y.exports.Rand=Q,Q.prototype.generate=function(e){return this._rand(e)},Q.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Q.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Q.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(Q.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var X=q;if("function"!=typeof X.randomBytes)throw new Error("Not supported");Q.prototype._rand=function(e){return X.randomBytes(e)}}catch(u){}var Z=Y.exports,ee={},te=V,ne=U,re=ne.getNAF,ie=ne.getJSF,oe=ne.assert;function se(e,t){this.type=e,this.p=new te(t.p,16),this.red=t.prime?te.red(t.prime):te.mont(this.p),this.zero=new te(0).toRed(this.red),this.one=new te(1).toRed(this.red),this.two=new te(2).toRed(this.red),this.n=t.n&&new te(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ae=se;function ce(e,t){this.curve=e,this.type=t,this.precomputed=null}se.prototype.point=function(){throw new Error("Not implemented")},se.prototype.validate=function(){throw new Error("Not implemented")},se.prototype._fixedNafMul=function(e,t){oe(e.precomputed);var n=e._getDoubles(),r=re(t,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<r.length;o+=n.step){s=0;for(var c=o+n.step-1;c>=o;c--)s=(s<<1)+r[c];a.push(s)}for(var d=this.jpoint(null,null,null),u=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<a.length;o++)(s=a[o])===l?u=u.mixedAdd(n.points[o]):s===-l&&(u=u.mixedAdd(n.points[o].neg()));d=d.add(u)}return d.toP()},se.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var i=r.points,o=re(t,n,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var c=0;a>=0&&0===o[a];a--)c++;if(a>=0&&c++,s=s.dblp(c),a<0)break;var d=o[a];oe(0!==d),s="affine"===e.type?d>0?s.mixedAdd(i[d-1>>1]):s.mixedAdd(i[-d-1>>1].neg()):d>0?s.add(i[d-1>>1]):s.add(i[-d-1>>1].neg())}return"affine"===e.type?s.toP():s},se.prototype._wnafMulAdd=function(e,t,n,r,i){var o,s,a,c=this._wnafT1,d=this._wnafT2,u=this._wnafT3,l=0;for(o=0;o<r;o++){var f=(a=t[o])._getNAFPoints(e);c[o]=f.wnd,d[o]=f.points}for(o=r-1;o>=1;o-=2){var h=o-1,p=o;if(1===c[h]&&1===c[p]){var A=[t[h],null,null,t[p]];0===t[h].y.cmp(t[p].y)?(A[1]=t[h].add(t[p]),A[2]=t[h].toJ().mixedAdd(t[p].neg())):0===t[h].y.cmp(t[p].y.redNeg())?(A[1]=t[h].toJ().mixedAdd(t[p]),A[2]=t[h].add(t[p].neg())):(A[1]=t[h].toJ().mixedAdd(t[p]),A[2]=t[h].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=ie(n[h],n[p]);for(l=Math.max(m[0].length,l),u[h]=new Array(l),u[p]=new Array(l),s=0;s<l;s++){var v=0|m[0][s],b=0|m[1][s];u[h][s]=g[3*(v+1)+(b+1)],u[p][s]=0,d[h]=A}}else u[h]=re(n[h],c[h],this._bitLength),u[p]=re(n[p],c[p],this._bitLength),l=Math.max(u[h].length,l),l=Math.max(u[p].length,l)}var y=this.jpoint(null,null,null),w=this._wnafT4;for(o=l;o>=0;o--){for(var E=0;o>=0;){var S=!0;for(s=0;s<r;s++)w[s]=0|u[s][o],0!==w[s]&&(S=!1);if(!S)break;E++,o--}if(o>=0&&E++,y=y.dblp(E),o<0)break;for(s=0;s<r;s++){var _=w[s];0!==_&&(_>0?a=d[s][_-1>>1]:_<0&&(a=d[s][-_-1>>1].neg()),y="affine"===a.type?y.mixedAdd(a):y.add(a))}}for(o=0;o<r;o++)d[o]=null;return i?y:y.toP()},se.BasePoint=ce,ce.prototype.eq=function(){throw new Error("Not implemented")},ce.prototype.validate=function(){return this.curve.validate(this)},se.prototype.decodePoint=function(e,t){e=ne.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?oe(e[e.length-1]%2==0):7===e[0]&&oe(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},ce.prototype.encodeCompressed=function(e){return this.encode(e,!0)},ce.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},ce.prototype.encode=function(e,t){return ne.encode(this._encode(t),e)},ce.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},ce.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},ce.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)r=r.dbl();n.push(r)}return{step:e,points:n}},ce.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(r);return{wnd:e,points:t}},ce.prototype._getBeta=function(){return null},ce.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var de={exports:{}};"function"==typeof Object.create?de.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:de.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var ue=de.exports,le=V,fe=ue,he=ae,pe=U.assert;function Ae(e){he.call(this,"short",e),this.a=new le(e.a,16).toRed(this.red),this.b=new le(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}fe(Ae,he);var ge=Ae;function me(e,t,n,r){he.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new le(t,16),this.y=new le(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ve(e,t,n,r){he.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new le(0)):(this.x=new le(t,16),this.y=new le(n,16),this.z=new le(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ae.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new le(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new le(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?n=i[0]:(n=i[1],pe(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new le(e.a,16),b:new le(e.b,16)}})):this._getEndoBasis(n)}}},Ae.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:le.mont(e),n=new le(2).toRed(t).redInvm(),r=n.redNeg(),i=new le(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},Ae.prototype._getEndoBasis=function(e){for(var t,n,r,i,o,s,a,c,d,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),h=new le(1),p=new le(0),A=new le(0),g=new le(1),m=0;0!==l.cmpn(0);){var v=f.div(l);c=f.sub(v.mul(l)),d=A.sub(v.mul(h));var b=g.sub(v.mul(p));if(!r&&c.cmp(u)<0)t=a.neg(),n=h,r=c.neg(),i=d;else if(r&&2==++m)break;a=c,f=l,l=c,A=h,h=d,g=p,p=b}o=c.neg(),s=d;var y=r.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(y)>=0&&(o=t,s=n),r.negative&&(r=r.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:r,b:i},{a:o,b:s}]},Ae.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],i=r.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),s=i.mul(n.a),a=o.mul(r.a),c=i.mul(n.b),d=o.mul(r.b);return{k1:e.sub(s).sub(a),k2:c.add(d).neg()}},Ae.prototype.pointFromX=function(e,t){(e=new le(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},Ae.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},Ae.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),r[2*o]=a,r[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var d=this._wnafMulAdd(1,r,i,2*o,n),u=0;u<2*o;u++)r[u]=null,i[u]=null;return d},fe(me,he.BasePoint),Ae.prototype.point=function(e,t,n){return new me(this,e,t,n)},Ae.prototype.pointFromJSON=function(e,t){return me.fromJSON(this,e,t)},me.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},me.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},me.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function i(t){return e.point(t[0],t[1],n)}var o=t[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},me.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},me.prototype.isInfinity=function(){return this.inf},me.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},me.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},me.prototype.getX=function(){return this.x.fromRed()},me.prototype.getY=function(){return this.y.fromRed()},me.prototype.mul=function(e){return e=new le(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},me.prototype.mulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},me.prototype.jmulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},me.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},me.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},me.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},fe(ve,he.BasePoint),Ae.prototype.jpoint=function(e,t,n){return new ve(this,e,t,n)},ve.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},ve.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ve.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),i=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),a=r.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),u=d.redMul(a),l=r.redMul(d),f=c.redSqr().redIAdd(u).redISub(l).redISub(l),h=c.redMul(l.redISub(f)).redISub(o.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,h,p)},ve.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=n.redSub(r),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),d=c.redMul(s),u=n.redMul(c),l=a.redSqr().redIAdd(d).redISub(u).redISub(u),f=a.redMul(u.redISub(l)).redISub(i.redMul(d)),h=this.z.redMul(s);return this.curve.jpoint(l,f,h)},ve.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),d=s.redAdd(s);for(t=0;t<e;t++){var u=o.redSqr(),l=d.redSqr(),f=l.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(c)),p=o.redMul(l),A=h.redSqr().redISub(p.redAdd(p)),g=p.redISub(A),m=h.redMul(g);m=m.redIAdd(m).redISub(f);var v=d.redMul(a);t+1<e&&(c=c.redMul(f)),o=A,a=v,d=m}return this.curve.jpoint(o,d.redMul(i),a)},ve.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ve.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r),c=a.redSqr().redISub(s).redISub(s),d=o.redIAdd(o);d=(d=d.redIAdd(d)).redIAdd(d),e=c,t=a.redMul(s.redISub(c)).redISub(d),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),h=this.x.redAdd(l).redSqr().redISub(u).redISub(f);h=h.redIAdd(h);var p=u.redAdd(u).redIAdd(u),A=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),e=A.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},ve.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var d=o.redIAdd(o);d=(d=d.redIAdd(d)).redIAdd(d),t=a.redMul(s.redISub(c)).redISub(d),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var p=f.redIAdd(f),A=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(A),n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(u);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=h.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},ve.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=t.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),d=(c=c.redIAdd(c)).redMul(s),u=a.redSqr().redISub(d.redAdd(d)),l=d.redISub(u),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=a.redMul(l).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(u,h,p)},ve.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(r),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var d=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),u=t.redMul(d);u=(u=u.redIAdd(u)).redIAdd(u);var l=this.x.redMul(a).redISub(u);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(d.redMul(c.redISub(d)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(l,f,h)},ve.prototype.mul=function(e,t){return e=new le(e,t),this.curve._wnafMul(this,e)},ve.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(r)).cmpn(0)},ve.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},ve.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ve.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var be=V,ye=ue,we=ae,Ee=U;function Se(e){we.call(this,"mont",e),this.a=new be(e.a,16).toRed(this.red),this.b=new be(e.b,16).toRed(this.red),this.i4=new be(4).toRed(this.red).redInvm(),this.two=new be(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}ye(Se,we);var _e=Se;function Ce(e,t,n){we.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new be(t,16),this.z=new be(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Se.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},ye(Ce,we.BasePoint),Se.prototype.decodePoint=function(e,t){return this.point(Ee.toArray(e,t),1)},Se.prototype.point=function(e,t){return new Ce(this,e,t)},Se.prototype.pointFromJSON=function(e){return Ce.fromJSON(this,e)},Ce.prototype.precompute=function(){},Ce.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Ce.fromJSON=function(e,t){return new Ce(e,t[0],t[1]||e.one)},Ce.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Ce.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Ce.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),i=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},Ce.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Ce.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(n),s=i.redMul(r),a=t.z.redMul(o.redAdd(s).redSqr()),c=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},Ce.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},Ce.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Ce.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Ce.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},Ce.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Ce.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Me=V,ke=ue,Ie=ae,Re=U.assert;function Oe(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,Ie.call(this,"edwards",e),this.a=new Me(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Me(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Me(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Re(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}ke(Oe,Ie);var xe=Oe;function Te(e,t,n,r,i){Ie.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Me(t,16),this.y=new Me(n,16),this.z=r?new Me(r,16):this.curve.one,this.t=i&&new Me(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Oe.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},Oe.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},Oe.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},Oe.prototype.pointFromX=function(e,t){(e=new Me(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),i=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=r.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)},Oe.prototype.pointFromY=function(e,t){(e=new Me(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=n.redSub(this.c2),i=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=r.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},Oe.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(i)},ke(Te,Ie.BasePoint),Oe.prototype.pointFromJSON=function(e){return Te.fromJSON(this,e)},Oe.prototype.point=function(e,t,n,r){return new Te(this,e,t,n,r)},Te.fromJSON=function(e,t){return new Te(e,t[0],t[1],t[2])},Te.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Te.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Te.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=r.redAdd(t),s=o.redSub(n),a=r.redSub(t),c=i.redMul(s),d=o.redMul(a),u=i.redMul(a),l=s.redMul(o);return this.curve.point(c,d,l,u)},Te.prototype._projDbl=function(){var e,t,n,r,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var d=(r=this.curve._mulA(a)).redAdd(c);this.zOne?(e=s.redSub(a).redSub(c).redMul(d.redSub(this.curve.two)),t=d.redMul(r.redSub(c)),n=d.redSqr().redSub(d).redSub(d)):(i=this.z.redSqr(),o=d.redSub(i).redISub(i),e=s.redSub(a).redISub(c).redMul(o),t=d.redMul(r.redSub(c)),n=d.redMul(o))}else r=a.redAdd(c),i=this.curve._mulC(this.z).redSqr(),o=r.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(r)).redMul(o),t=this.curve._mulC(r).redMul(a.redISub(c)),n=r.redMul(o);return this.curve.point(e,t,n)},Te.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Te.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),s=i.redSub(r),a=i.redAdd(r),c=n.redAdd(t),d=o.redMul(s),u=a.redMul(c),l=o.redMul(c),f=s.redMul(a);return this.curve.point(d,u,f,l)},Te.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),i=r.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),c=i.redSub(a),d=i.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),l=r.redMul(c).redMul(u);return this.curve.twisted?(t=r.redMul(d).redMul(s.redSub(this.curve._mulA(o))),n=c.redMul(d)):(t=r.redMul(d).redMul(s.redSub(o)),n=this.curve._mulC(c).redMul(d)),this.curve.point(l,t,n)},Te.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Te.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Te.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},Te.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},Te.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Te.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Te.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Te.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Te.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},Te.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},Te.prototype.toP=Te.prototype.normalize,Te.prototype.mixedAdd=Te.prototype.add,function(e){var t=e;t.base=ae,t.short=ge,t.mont=_e,t.edwards=xe}(ee);var Pe={},Ne={},Le={},De=H,je=ue;function Be(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function Fe(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function Ke(e){return 1===e.length?"0"+e:e}function $e(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}Le.inherits=je,Le.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?n[r++]=o:o<2048?(n[r++]=o>>6|192,n[r++]=63&o|128):Be(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=63&o|128):(n[r++]=o>>12|224,n[r++]=o>>6&63|128,n[r++]=63&o|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},Le.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=Ke(e[n].toString(16));return t},Le.htonl=Fe,Le.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];"little"===t&&(i=Fe(i)),n+=$e(i.toString(16))}return n},Le.zero2=Ke,Le.zero8=$e,Le.join32=function(e,t,n,r){var i=n-t;De(i%4==0);for(var o=new Array(i/4),s=0,a=t;s<o.length;s++,a+=4){var c;c="big"===r?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],o[s]=c>>>0}return o},Le.split32=function(e,t){for(var n=new Array(4*e.length),r=0,i=0;r<e.length;r++,i+=4){var o=e[r];"big"===t?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},Le.rotr32=function(e,t){return e>>>t|e<<32-t},Le.rotl32=function(e,t){return e<<t|e>>>32-t},Le.sum32=function(e,t){return e+t>>>0},Le.sum32_3=function(e,t,n){return e+t+n>>>0},Le.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},Le.sum32_5=function(e,t,n,r,i){return e+t+n+r+i>>>0},Le.sum64=function(e,t,n,r){var i=e[t],o=r+e[t+1]>>>0,s=(o<r?1:0)+n+i;e[t]=s>>>0,e[t+1]=o},Le.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},Le.sum64_lo=function(e,t,n,r){return t+r>>>0},Le.sum64_4_hi=function(e,t,n,r,i,o,s,a){var c=0,d=t;return c+=(d=d+r>>>0)<t?1:0,c+=(d=d+o>>>0)<o?1:0,e+n+i+s+(c+=(d=d+a>>>0)<a?1:0)>>>0},Le.sum64_4_lo=function(e,t,n,r,i,o,s,a){return t+r+o+a>>>0},Le.sum64_5_hi=function(e,t,n,r,i,o,s,a,c,d){var u=0,l=t;return u+=(l=l+r>>>0)<t?1:0,u+=(l=l+o>>>0)<o?1:0,u+=(l=l+a>>>0)<a?1:0,e+n+i+s+c+(u+=(l=l+d>>>0)<d?1:0)>>>0},Le.sum64_5_lo=function(e,t,n,r,i,o,s,a,c,d){return t+r+o+a+d>>>0},Le.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},Le.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},Le.shr64_hi=function(e,t,n){return e>>>n},Le.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0};var Ue={},ze=Le,qe=H;function Ve(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ue.BlockHash=Ve,Ve.prototype.update=function(e,t){if(e=ze.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=ze.join32(e,0,e.length-n,this.endian);for(var r=0;r<e.length;r+=this._delta32)this._update(e,r,r+this._delta32)}return this},Ve.prototype.digest=function(e){return this.update(this._pad()),qe(null===this.pending),this._digest(e)},Ve.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r};var He={},We={},Je=Le.rotr32;function Ge(e,t,n){return e&t^~e&n}function Ye(e,t,n){return e&t^e&n^t&n}function Qe(e,t,n){return e^t^n}We.ft_1=function(e,t,n,r){return 0===e?Ge(t,n,r):1===e||3===e?Qe(t,n,r):2===e?Ye(t,n,r):void 0},We.ch32=Ge,We.maj32=Ye,We.p32=Qe,We.s0_256=function(e){return Je(e,2)^Je(e,13)^Je(e,22)},We.s1_256=function(e){return Je(e,6)^Je(e,11)^Je(e,25)},We.g0_256=function(e){return Je(e,7)^Je(e,18)^e>>>3},We.g1_256=function(e){return Je(e,17)^Je(e,19)^e>>>10};var Xe=Le,Ze=Ue,et=We,tt=Xe.rotl32,nt=Xe.sum32,rt=Xe.sum32_5,it=et.ft_1,ot=Ze.BlockHash,st=[1518500249,1859775393,2400959708,3395469782];function at(){if(!(this instanceof at))return new at;ot.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Xe.inherits(at,ot);var ct=at;at.blockSize=512,at.outSize=160,at.hmacStrength=80,at.padLength=64,at.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=tt(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4];for(r=0;r<n.length;r++){var d=~~(r/20),u=rt(tt(i,5),it(d,o,s,a),c,n[r],st[d]);c=a,a=s,s=tt(o,30),o=i,i=u}this.h[0]=nt(this.h[0],i),this.h[1]=nt(this.h[1],o),this.h[2]=nt(this.h[2],s),this.h[3]=nt(this.h[3],a),this.h[4]=nt(this.h[4],c)},at.prototype._digest=function(e){return"hex"===e?Xe.toHex32(this.h,"big"):Xe.split32(this.h,"big")};var dt=Le,ut=Ue,lt=We,ft=H,ht=dt.sum32,pt=dt.sum32_4,At=dt.sum32_5,gt=lt.ch32,mt=lt.maj32,vt=lt.s0_256,bt=lt.s1_256,yt=lt.g0_256,wt=lt.g1_256,Et=ut.BlockHash,St=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _t(){if(!(this instanceof _t))return new _t;Et.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=St,this.W=new Array(64)}dt.inherits(_t,Et);var Ct=_t;_t.blockSize=512,_t.outSize=256,_t.hmacStrength=192,_t.padLength=64,_t.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=pt(wt(n[r-2]),n[r-7],yt(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],d=this.h[5],u=this.h[6],l=this.h[7];for(ft(this.k.length===n.length),r=0;r<n.length;r++){var f=At(l,bt(c),gt(c,d,u),this.k[r],n[r]),h=ht(vt(i),mt(i,o,s));l=u,u=d,d=c,c=ht(a,f),a=s,s=o,o=i,i=ht(f,h)}this.h[0]=ht(this.h[0],i),this.h[1]=ht(this.h[1],o),this.h[2]=ht(this.h[2],s),this.h[3]=ht(this.h[3],a),this.h[4]=ht(this.h[4],c),this.h[5]=ht(this.h[5],d),this.h[6]=ht(this.h[6],u),this.h[7]=ht(this.h[7],l)},_t.prototype._digest=function(e){return"hex"===e?dt.toHex32(this.h,"big"):dt.split32(this.h,"big")};var Mt=Le,kt=Ct;function It(){if(!(this instanceof It))return new It;kt.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Mt.inherits(It,kt);var Rt=It;It.blockSize=512,It.outSize=224,It.hmacStrength=192,It.padLength=64,It.prototype._digest=function(e){return"hex"===e?Mt.toHex32(this.h.slice(0,7),"big"):Mt.split32(this.h.slice(0,7),"big")};var Ot=Le,xt=Ue,Tt=H,Pt=Ot.rotr64_hi,Nt=Ot.rotr64_lo,Lt=Ot.shr64_hi,Dt=Ot.shr64_lo,jt=Ot.sum64,Bt=Ot.sum64_hi,Ft=Ot.sum64_lo,Kt=Ot.sum64_4_hi,$t=Ot.sum64_4_lo,Ut=Ot.sum64_5_hi,zt=Ot.sum64_5_lo,qt=xt.BlockHash,Vt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ht(){if(!(this instanceof Ht))return new Ht;qt.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Vt,this.W=new Array(160)}Ot.inherits(Ht,qt);var Wt=Ht;function Jt(e,t,n,r,i){var o=e&n^~e&i;return o<0&&(o+=4294967296),o}function Gt(e,t,n,r,i,o){var s=t&r^~t&o;return s<0&&(s+=4294967296),s}function Yt(e,t,n,r,i){var o=e&n^e&i^n&i;return o<0&&(o+=4294967296),o}function Qt(e,t,n,r,i,o){var s=t&r^t&o^r&o;return s<0&&(s+=4294967296),s}function Xt(e,t){var n=Pt(e,t,28)^Pt(t,e,2)^Pt(t,e,7);return n<0&&(n+=4294967296),n}function Zt(e,t){var n=Nt(e,t,28)^Nt(t,e,2)^Nt(t,e,7);return n<0&&(n+=4294967296),n}function en(e,t){var n=Pt(e,t,14)^Pt(e,t,18)^Pt(t,e,9);return n<0&&(n+=4294967296),n}function tn(e,t){var n=Nt(e,t,14)^Nt(e,t,18)^Nt(t,e,9);return n<0&&(n+=4294967296),n}function nn(e,t){var n=Pt(e,t,1)^Pt(e,t,8)^Lt(e,t,7);return n<0&&(n+=4294967296),n}function rn(e,t){var n=Nt(e,t,1)^Nt(e,t,8)^Dt(e,t,7);return n<0&&(n+=4294967296),n}function on(e,t){var n=Pt(e,t,19)^Pt(t,e,29)^Lt(e,t,6);return n<0&&(n+=4294967296),n}function sn(e,t){var n=Nt(e,t,19)^Nt(t,e,29)^Dt(e,t,6);return n<0&&(n+=4294967296),n}Ht.blockSize=1024,Ht.outSize=512,Ht.hmacStrength=192,Ht.padLength=128,Ht.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var i=on(n[r-4],n[r-3]),o=sn(n[r-4],n[r-3]),s=n[r-14],a=n[r-13],c=nn(n[r-30],n[r-29]),d=rn(n[r-30],n[r-29]),u=n[r-32],l=n[r-31];n[r]=Kt(i,o,s,a,c,d,u,l),n[r+1]=$t(i,o,s,a,c,d,u,l)}},Ht.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],c=this.h[5],d=this.h[6],u=this.h[7],l=this.h[8],f=this.h[9],h=this.h[10],p=this.h[11],A=this.h[12],g=this.h[13],m=this.h[14],v=this.h[15];Tt(this.k.length===n.length);for(var b=0;b<n.length;b+=2){var y=m,w=v,E=en(l,f),S=tn(l,f),_=Jt(l,f,h,p,A),C=Gt(l,f,h,p,A,g),M=this.k[b],k=this.k[b+1],I=n[b],R=n[b+1],O=Ut(y,w,E,S,_,C,M,k,I,R),x=zt(y,w,E,S,_,C,M,k,I,R);y=Xt(r,i),w=Zt(r,i),E=Yt(r,i,o,s,a),S=Qt(r,i,o,s,a,c);var T=Bt(y,w,E,S),P=Ft(y,w,E,S);m=A,v=g,A=h,g=p,h=l,p=f,l=Bt(d,u,O,x),f=Ft(u,u,O,x),d=a,u=c,a=o,c=s,o=r,s=i,r=Bt(O,x,T,P),i=Ft(O,x,T,P)}jt(this.h,0,r,i),jt(this.h,2,o,s),jt(this.h,4,a,c),jt(this.h,6,d,u),jt(this.h,8,l,f),jt(this.h,10,h,p),jt(this.h,12,A,g),jt(this.h,14,m,v)},Ht.prototype._digest=function(e){return"hex"===e?Ot.toHex32(this.h,"big"):Ot.split32(this.h,"big")};var an=Le,cn=Wt;function dn(){if(!(this instanceof dn))return new dn;cn.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}an.inherits(dn,cn);var un=dn;dn.blockSize=1024,dn.outSize=384,dn.hmacStrength=192,dn.padLength=128,dn.prototype._digest=function(e){return"hex"===e?an.toHex32(this.h.slice(0,12),"big"):an.split32(this.h.slice(0,12),"big")},He.sha1=ct,He.sha224=Rt,He.sha256=Ct,He.sha384=un,He.sha512=Wt;var ln={},fn=Le,hn=Ue,pn=fn.rotl32,An=fn.sum32,gn=fn.sum32_3,mn=fn.sum32_4,vn=hn.BlockHash;function bn(){if(!(this instanceof bn))return new bn;vn.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function yn(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function wn(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function En(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}fn.inherits(bn,vn),ln.ripemd160=bn,bn.blockSize=512,bn.outSize=160,bn.hmacStrength=192,bn.padLength=64,bn.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=n,c=r,d=i,u=o,l=s,f=0;f<80;f++){var h=An(pn(mn(n,yn(f,r,i,o),e[Sn[f]+t],wn(f)),Cn[f]),s);n=s,s=o,o=pn(i,10),i=r,r=h,h=An(pn(mn(a,yn(79-f,c,d,u),e[_n[f]+t],En(f)),Mn[f]),l),a=l,l=u,u=pn(d,10),d=c,c=h}h=gn(this.h[1],i,u),this.h[1]=gn(this.h[2],o,l),this.h[2]=gn(this.h[3],s,a),this.h[3]=gn(this.h[4],n,c),this.h[4]=gn(this.h[0],r,d),this.h[0]=h},bn.prototype._digest=function(e){return"hex"===e?fn.toHex32(this.h,"little"):fn.split32(this.h,"little")};var Sn=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Cn=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Mn=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],kn=Le,In=H;function Rn(e,t,n){if(!(this instanceof Rn))return new Rn(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(kn.toArray(t,n))}var On,xn,Tn=Rn;Rn.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),In(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Rn.prototype.update=function(e,t){return this.inner.update(e,t),this},Rn.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=Ne;t.utils=Le,t.common=Ue,t.sha=He,t.ripemd=ln,t.hmac=Tn,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(),function(e){var t,n=Pe,r=Ne,i=ee,o=U.assert;function s(e){"short"===e.type?this.curve=new i.short(e):"edwards"===e.type?this.curve=new i.edwards(e):this.curve=new i.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new s(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{t=xn?On:(xn=1,On={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}})}catch(e){t=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",t]})}();var Pn=Ne,Nn=J,Ln=H;function Dn(e){if(!(this instanceof Dn))return new Dn(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Nn.toArray(e.entropy,e.entropyEnc||"hex"),n=Nn.toArray(e.nonce,e.nonceEnc||"hex"),r=Nn.toArray(e.pers,e.persEnc||"hex");Ln(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}var jn=Dn;Dn.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},Dn.prototype._hmac=function(){return new Pn.hmac(this.hash,this.K)},Dn.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Dn.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=Nn.toArray(e,t),n=Nn.toArray(n,r),Ln(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},Dn.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=n,n=t,t=null),n&&(n=Nn.toArray(n,r||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(n),this._reseed++,Nn.encode(o,t)};var Bn=V,Fn=U.assert;function Kn(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var $n=Kn;Kn.fromPublic=function(e,t,n){return t instanceof Kn?t:new Kn(e,{pub:t,pubEnc:n})},Kn.fromPrivate=function(e,t,n){return t instanceof Kn?t:new Kn(e,{priv:t,privEnc:n})},Kn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Kn.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Kn.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Kn.prototype._importPrivate=function(e,t){this.priv=new Bn(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Kn.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Fn(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Fn(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Kn.prototype.derive=function(e){return e.validate()||Fn(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Kn.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},Kn.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Kn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Un=V,zn=U,qn=zn.assert;function Vn(e,t){if(e instanceof Vn)return e;this._importDER(e,t)||(qn(e.r&&e.s,"Signature without r or s"),this.r=new Un(e.r,16),this.s=new Un(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Hn=Vn;function Wn(){this.place=0}function Jn(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,o=0,s=t.place;o<r;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function Gn(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function Yn(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}Vn.prototype._importDER=function(e,t){e=zn.toArray(e,t);var n=new Wn;if(48!==e[n.place++])return!1;var r=Jn(e,n);if(!1===r)return!1;if(r+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var i=Jn(e,n);if(!1===i)return!1;var o=e.slice(n.place,i+n.place);if(n.place+=i,2!==e[n.place++])return!1;var s=Jn(e,n);if(!1===s)return!1;if(e.length!==s+n.place)return!1;var a=e.slice(n.place,s+n.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new Un(o),this.s=new Un(a),this.recoveryParam=null,!0},Vn.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=Gn(t),n=Gn(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];Yn(r,t.length),(r=r.concat(t)).push(2),Yn(r,n.length);var i=r.concat(n),o=[48];return Yn(o,i.length),o=o.concat(i),zn.encode(o,e)};var Qn=V,Xn=jn,Zn=Pe,er=Z,tr=U.assert,nr=$n,rr=Hn;function ir(e){if(!(this instanceof ir))return new ir(e);"string"==typeof e&&(tr(Object.prototype.hasOwnProperty.call(Zn,e),"Unknown curve "+e),e=Zn[e]),e instanceof Zn.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var or=ir;ir.prototype.keyPair=function(e){return new nr(this,e)},ir.prototype.keyFromPrivate=function(e,t){return nr.fromPrivate(this,e,t)},ir.prototype.keyFromPublic=function(e,t){return nr.fromPublic(this,e,t)},ir.prototype.genKeyPair=function(e){e||(e={});for(var t=new Xn({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||er(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new Qn(2));;){var i=new Qn(t.generate(n));if(!(i.cmp(r)>0))return i.iaddn(1),this.keyFromPrivate(i)}},ir.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},ir.prototype.sign=function(e,t,n,r){"object"==typeof n&&(r=n,n=null),r||(r={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new Qn(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),s=e.toArray("be",i),a=new Xn({hash:this.hash,entropy:o,nonce:s,pers:r.pers,persEnc:r.persEnc||"utf8"}),c=this.n.sub(new Qn(1)),d=0;;d++){var u=r.k?r.k(d):new Qn(a.generate(this.n.byteLength()));if(!((u=this._truncateToN(u,!0)).cmpn(1)<=0||u.cmp(c)>=0)){var l=this.g.mul(u);if(!l.isInfinity()){var f=l.getX(),h=f.umod(this.n);if(0!==h.cmpn(0)){var p=u.invm(this.n).mul(h.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var A=(l.getY().isOdd()?1:0)|(0!==f.cmp(h)?2:0);return r.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),A^=1),new rr({r:h,s:p,recoveryParam:A})}}}}}},ir.prototype.verify=function(e,t,n,r){e=this._truncateToN(new Qn(e,16)),n=this.keyFromPublic(n,r);var i=(t=new rr(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),c=a.mul(e).umod(this.n),d=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,n.getPublic(),d)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(c,n.getPublic(),d)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},ir.prototype.recoverPubKey=function(e,t,n,r){tr((3&n)===n,"The recovery param is more than two bits"),t=new rr(t,r);var i=this.n,o=new Qn(e),s=t.r,a=t.s,c=1&n,d=n>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");s=d?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var u=t.r.invm(i),l=i.sub(o).mul(u).umod(i),f=a.mul(u).umod(i);return this.g.mulAdd(l,s,f)},ir.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new rr(t,r)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")};var sr=U,ar=sr.assert,cr=sr.parseBytes,dr=sr.cachedProperty;function ur(e,t){this.eddsa=e,this._secret=cr(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=cr(t.pub)}ur.fromPublic=function(e,t){return t instanceof ur?t:new ur(e,{pub:t})},ur.fromSecret=function(e,t){return t instanceof ur?t:new ur(e,{secret:t})},ur.prototype.secret=function(){return this._secret},dr(ur,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),dr(ur,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),dr(ur,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),dr(ur,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),dr(ur,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),dr(ur,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),ur.prototype.sign=function(e){return ar(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},ur.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},ur.prototype.getSecret=function(e){return ar(this._secret,"KeyPair is public only"),sr.encode(this.secret(),e)},ur.prototype.getPublic=function(e){return sr.encode(this.pubBytes(),e)};var lr=ur,fr=V,hr=U,pr=hr.assert,Ar=hr.cachedProperty,gr=hr.parseBytes;function mr(e,t){this.eddsa=e,"object"!=typeof t&&(t=gr(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),pr(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof fr&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Ar(mr,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),Ar(mr,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),Ar(mr,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),Ar(mr,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),mr.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},mr.prototype.toHex=function(){return hr.encode(this.toBytes(),"hex").toUpperCase()};var vr=mr,br=Ne,yr=Pe,wr=U,Er=wr.assert,Sr=wr.parseBytes,_r=lr,Cr=vr;function Mr(e){if(Er("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof Mr))return new Mr(e);e=yr[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=br.sha512}var kr=Mr;Mr.prototype.sign=function(e,t){e=Sr(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),i=this.g.mul(r),o=this.encodePoint(i),s=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),a=r.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:a,Rencoded:o})},Mr.prototype.verify=function(e,t,n){e=Sr(e),t=this.makeSignature(t);var r=this.keyFromPublic(n),i=this.hashInt(t.Rencoded(),r.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(r.pub().mul(i)).eq(o)},Mr.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return wr.intFromLE(e.digest()).umod(this.curve.n)},Mr.prototype.keyFromPublic=function(e){return _r.fromPublic(this,e)},Mr.prototype.keyFromSecret=function(e){return _r.fromSecret(this,e)},Mr.prototype.makeSignature=function(e){return e instanceof Cr?e:new Cr(this,e)},Mr.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},Mr.prototype.decodePoint=function(e){var t=(e=wr.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),i=wr.intFromLE(n);return this.curve.pointFromY(i,r)},Mr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},Mr.prototype.decodeInt=function(e){return wr.intFromLE(e)},Mr.prototype.isPoint=function(e){return e instanceof this.pointClass},function(e){var t=K;t.version=$,t.utils=U,t.rand=Z,t.curve=ee,t.curves=Pe,t.ec=or,t.eddsa=kr}();const Ir=new(0,K.ec)("secp256k1"),Rr=Ir.curve,Or=Rr.n.constructor;function xr(e){const t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){let n=new Or(t);if(n.cmp(Rr.p)>=0)return null;n=n.toRed(Rr.red);let r=n.redSqr().redIMul(n).redIAdd(Rr.b).redSqrt();return 3===e!==r.isOdd()&&(r=r.redNeg()),Ir.keyPair({pub:{x:n,y:r}})}(t,e.subarray(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,n){let r=new Or(t),i=new Or(n);if(r.cmp(Rr.p)>=0||i.cmp(Rr.p)>=0)return null;if(r=r.toRed(Rr.red),i=i.toRed(Rr.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;const o=r.redSqr().redIMul(r);return i.redSqr().redISub(o.redIAdd(Rr.b)).isZero()?Ir.keyPair({pub:{x:r,y:i}}):null}(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function Tr(e,t){const n=t.encode(null,33===e.length);for(let t=0;t<e.length;++t)e[t]=n[t]}var Pr,Nr={contextRandomize:()=>0,privateKeyVerify(e){const t=new Or(e);return t.cmp(Rr.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){const t=new Or(e),n=Rr.n.sub(t).umod(Rr.n).toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakAdd(e,t){const n=new Or(t);if(n.cmp(Rr.n)>=0)return 1;if(n.iadd(new Or(e)),n.cmp(Rr.n)>=0&&n.isub(Rr.n),n.isZero())return 1;const r=n.toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakMul(e,t){let n=new Or(t);if(n.cmp(Rr.n)>=0||n.isZero())return 1;n.imul(new Or(e)),n.cmp(Rr.n)>=0&&(n=n.umod(Rr.n));const r=n.toArrayLike(Uint8Array,"be",32);return e.set(r),0},publicKeyVerify:e=>null===xr(e)?1:0,publicKeyCreate(e,t){const n=new Or(t);if(n.cmp(Rr.n)>=0||n.isZero())return 1;return Tr(e,Ir.keyFromPrivate(t).getPublic()),0},publicKeyConvert(e,t){const n=xr(t);if(null===n)return 1;return Tr(e,n.getPublic()),0},publicKeyNegate(e,t){const n=xr(t);if(null===n)return 1;const r=n.getPublic();return r.y=r.y.redNeg(),Tr(e,r),0},publicKeyCombine(e,t){const n=new Array(t.length);for(let e=0;e<t.length;++e)if(n[e]=xr(t[e]),null===n[e])return 1;let r=n[0].getPublic();for(let e=1;e<n.length;++e)r=r.add(n[e].pub);return r.isInfinity()?2:(Tr(e,r),0)},publicKeyTweakAdd(e,t,n){const r=xr(t);if(null===r)return 1;if((n=new Or(n)).cmp(Rr.n)>=0)return 2;const i=r.getPublic().add(Rr.g.mul(n));return i.isInfinity()?2:(Tr(e,i),0)},publicKeyTweakMul(e,t,n){const r=xr(t);if(null===r)return 1;if((n=new Or(n)).cmp(Rr.n)>=0||n.isZero())return 2;return Tr(e,r.getPublic().mul(n)),0},signatureNormalize(e){const t=new Or(e.subarray(0,32)),n=new Or(e.subarray(32,64));return t.cmp(Rr.n)>=0||n.cmp(Rr.n)>=0?1:(1===n.cmp(Ir.nh)&&e.set(Rr.n.sub(n).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){const n=t.subarray(0,32),r=t.subarray(32,64);if(new Or(n).cmp(Rr.n)>=0)return 1;if(new Or(r).cmp(Rr.n)>=0)return 1;const{output:i}=e;let o=i.subarray(4,37);o[0]=0,o.set(n,1);let s=33,a=0;for(;s>1&&0===o[a]&&!(128&o[a+1]);--s,++a);if(o=o.subarray(a),128&o[0])return 1;if(s>1&&0===o[0]&&!(128&o[1]))return 1;let c=i.subarray(39,72);c[0]=0,c.set(r,1);let d=33,u=0;for(;d>1&&0===c[u]&&!(128&c[u+1]);--d,++u);return c=c.subarray(u),128&c[0]||d>1&&0===c[0]&&!(128&c[1])?1:(e.outputlen=6+s+d,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+s]=2,i[5+s]=c.length,i.set(c,6+s),0)},signatureImport(e,t){if(t.length<8)return 1;if(t.length>72)return 1;if(48!==t[0])return 1;if(t[1]!==t.length-2)return 1;if(2!==t[2])return 1;const n=t[3];if(0===n)return 1;if(5+n>=t.length)return 1;if(2!==t[4+n])return 1;const r=t[5+n];if(0===r)return 1;if(6+n+r!==t.length)return 1;if(128&t[4])return 1;if(n>1&&0===t[4]&&!(128&t[5]))return 1;if(128&t[n+6])return 1;if(r>1&&0===t[n+6]&&!(128&t[n+7]))return 1;let i=t.subarray(4,4+n);if(33===i.length&&0===i[0]&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+n);if(33===o.length&&0===o[0]&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let s=new Or(i);s.cmp(Rr.n)>=0&&(s=new Or(0));let a=new Or(t.subarray(6+n));return a.cmp(Rr.n)>=0&&(a=new Or(0)),e.set(s.toArrayLike(Uint8Array,"be",32),0),e.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,n,r,i){if(i){const e=i;i=i=>{const o=e(t,n,null,r,i);if(!(o instanceof Uint8Array&&32===o.length))throw new Error("This is the way");return new Or(o)}}const o=new Or(n);if(o.cmp(Rr.n)>=0||o.isZero())return 1;let s;try{s=Ir.sign(t,n,{canonical:!0,k:i,pers:r})}catch(e){return 1}return e.signature.set(s.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(s.s.toArrayLike(Uint8Array,"be",32),32),e.recid=s.recoveryParam,0},ecdsaVerify(e,t,n){const r={r:e.subarray(0,32),s:e.subarray(32,64)},i=new Or(r.r),o=new Or(r.s);if(i.cmp(Rr.n)>=0||o.cmp(Rr.n)>=0)return 1;if(1===o.cmp(Ir.nh)||i.isZero()||o.isZero())return 3;const s=xr(n);if(null===s)return 2;const a=s.getPublic();return Ir.verify(t,r,a)?0:3},ecdsaRecover(e,t,n,r){const i={r:t.slice(0,32),s:t.slice(32,64)},o=new Or(i.r),s=new Or(i.s);if(o.cmp(Rr.n)>=0||s.cmp(Rr.n)>=0)return 1;if(o.isZero()||s.isZero())return 2;let a;try{a=Ir.recoverPubKey(r,i,n)}catch(e){return 2}return Tr(e,a),0},ecdh(e,t,n,r,i,o,s){const a=xr(t);if(null===a)return 1;const c=new Or(n);if(c.cmp(Rr.n)>=0||c.isZero())return 2;const d=a.getPublic().mul(c);if(void 0===i){const t=d.encode(null,!0),n=Ir.hash().update(t).digest();for(let t=0;t<32;++t)e[t]=n[t]}else{o||(o=new Uint8Array(32));const t=d.getX().toArray("be",32);for(let e=0;e<32;++e)o[e]=t[e];s||(s=new Uint8Array(32));const n=d.getY().toArray("be",32);for(let e=0;e<32;++e)s[e]=n[e];const a=i(o,s,r);if(!(a instanceof Uint8Array&&a.length===e.length))return 2;e.set(a)}return 0}},Lr=(e=>({contextRandomize(t){if(L(null===t||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==t&&D("seed",t,32),1===e.contextRandomize(t))throw new Error(M)},privateKeyVerify:t=>(D("private key",t,32),0===e.privateKeyVerify(t)),privateKeyNegate(t){switch(D("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(S)}},privateKeyTweakAdd(t,n){switch(D("private key",t,32),D("tweak",n,32),e.privateKeyTweakAdd(t,n)){case 0:return t;case 1:throw new Error(_)}},privateKeyTweakMul(t,n){switch(D("private key",t,32),D("tweak",n,32),e.privateKeyTweakMul(t,n)){case 0:return t;case 1:throw new Error(C)}},publicKeyVerify:t=>(D("public key",t,[33,65]),0===e.publicKeyVerify(t)),publicKeyCreate(t,n=!0,r){switch(D("private key",t,32),j(n),r=B(r,n?33:65),e.publicKeyCreate(r,t)){case 0:return r;case 1:throw new Error(k);case 2:throw new Error(R)}},publicKeyConvert(t,n=!0,r){switch(D("public key",t,[33,65]),j(n),r=B(r,n?33:65),e.publicKeyConvert(r,t)){case 0:return r;case 1:throw new Error(I);case 2:throw new Error(R)}},publicKeyNegate(t,n=!0,r){switch(D("public key",t,[33,65]),j(n),r=B(r,n?33:65),e.publicKeyNegate(r,t)){case 0:return r;case 1:throw new Error(I);case 2:throw new Error(S);case 3:throw new Error(R)}},publicKeyCombine(t,n=!0,r){L(Array.isArray(t),"Expected public keys to be an Array"),L(t.length>0,"Expected public keys array will have more than zero items");for(const e of t)D("public key",e,[33,65]);switch(j(n),r=B(r,n?33:65),e.publicKeyCombine(r,t)){case 0:return r;case 1:throw new Error(I);case 2:throw new Error(O);case 3:throw new Error(R)}},publicKeyTweakAdd(t,n,r=!0,i){switch(D("public key",t,[33,65]),D("tweak",n,32),j(r),i=B(i,r?33:65),e.publicKeyTweakAdd(i,t,n)){case 0:return i;case 1:throw new Error(I);case 2:throw new Error(_)}},publicKeyTweakMul(t,n,r=!0,i){switch(D("public key",t,[33,65]),D("tweak",n,32),j(r),i=B(i,r?33:65),e.publicKeyTweakMul(i,t,n)){case 0:return i;case 1:throw new Error(I);case 2:throw new Error(C)}},signatureNormalize(t){switch(D("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(x)}},signatureExport(t,n){D("signature",t,64);const r={output:n=B(n,72),outputlen:72};switch(e.signatureExport(r,t)){case 0:return n.slice(0,r.outputlen);case 1:throw new Error(x);case 2:throw new Error(S)}},signatureImport(t,n){switch(D("signature",t),n=B(n,64),e.signatureImport(n,t)){case 0:return n;case 1:throw new Error(x);case 2:throw new Error(S)}},ecdsaSign(t,n,r={},i){D("message",t,32),D("private key",n,32),L("Object"===F(r),"Expected options to be an Object"),void 0!==r.data&&D("options.data",r.data),void 0!==r.noncefn&&L("Function"===F(r.noncefn),"Expected options.noncefn to be a Function");const o={signature:i=B(i,64),recid:null};switch(e.ecdsaSign(o,t,n,r.data,r.noncefn)){case 0:return o;case 1:throw new Error(T);case 2:throw new Error(S)}},ecdsaVerify(t,n,r){switch(D("signature",t,64),D("message",n,32),D("public key",r,[33,65]),e.ecdsaVerify(t,n,r)){case 0:return!0;case 3:return!1;case 1:throw new Error(x);case 2:throw new Error(I)}},ecdsaRecover(t,n,r,i=!0,o){switch(D("signature",t,64),L("Number"===F(n)&&n>=0&&n<=3,"Expected recovery id to be a Number within interval [0, 3]"),D("message",r,32),j(i),o=B(o,i?33:65),e.ecdsaRecover(o,t,n,r)){case 0:return o;case 1:throw new Error(x);case 2:throw new Error(P);case 3:throw new Error(S)}},ecdh(t,n,r={},i){switch(D("public key",t,[33,65]),D("private key",n,32),L("Object"===F(r),"Expected options to be an Object"),void 0!==r.data&&D("options.data",r.data),void 0!==r.hashfn?(L("Function"===F(r.hashfn),"Expected options.hashfn to be a Function"),void 0!==r.xbuf&&D("options.xbuf",r.xbuf,32),void 0!==r.ybuf&&D("options.ybuf",r.ybuf,32),D("output",i)):i=B(i,32),e.ecdh(i,t,n,r.data,r.hashfn,r.xbuf,r.ybuf)){case 0:return i;case 1:throw new Error(I);case 2:throw new Error(N)}}}))(Nr),Dr={},jr={};Pr=jr,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.SECRET_KEY_LENGTH=Pr.AES_IV_PLUS_TAG_LENGTH=Pr.AES_TAG_LENGTH=Pr.AES_IV_LENGTH=Pr.UNCOMPRESSED_PUBLIC_KEY_SIZE=void 0,Pr.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,Pr.AES_IV_LENGTH=16,Pr.AES_TAG_LENGTH=16,Pr.AES_IV_PLUS_TAG_LENGTH=Pr.AES_IV_LENGTH+Pr.AES_TAG_LENGTH,Pr.SECRET_KEY_LENGTH=32;var Br=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.aesDecrypt=Dr.aesEncrypt=Dr.getValidSecret=Dr.decodeHex=Dr.remove0x=void 0;var Fr=n,Kr=Br(Lr),$r=jr;function Ur(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e}Dr.remove0x=Ur,Dr.decodeHex=function(e){return Buffer.from(Ur(e),"hex")},Dr.getValidSecret=function(){var e;do{e=(0,Fr.randomBytes)($r.SECRET_KEY_LENGTH)}while(!Kr.default.privateKeyVerify(e));return e},Dr.aesEncrypt=function(e,t){var n=(0,Fr.randomBytes)($r.AES_IV_LENGTH),r=(0,Fr.createCipheriv)("aes-256-gcm",e,n),i=Buffer.concat([r.update(t),r.final()]),o=r.getAuthTag();return Buffer.concat([n,o,i])},Dr.aesDecrypt=function(e,t){var n=t.slice(0,$r.AES_IV_LENGTH),r=t.slice($r.AES_IV_LENGTH,$r.AES_IV_PLUS_TAG_LENGTH),i=t.slice($r.AES_IV_PLUS_TAG_LENGTH),o=(0,Fr.createDecipheriv)("aes-256-gcm",e,n);return o.setAuthTag(r),Buffer.concat([o.update(i),o.final()])};var zr={},qr=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zr,"__esModule",{value:!0});var Vr=qr(E),Hr=qr(Lr),Wr=Dr,Jr=jr,Gr=function(){function e(e){this.uncompressed=Buffer.from(Hr.default.publicKeyConvert(e,!1)),this.compressed=Buffer.from(Hr.default.publicKeyConvert(e,!0))}return e.fromHex=function(t){var n=(0,Wr.decodeHex)(t);if(n.length===Jr.UNCOMPRESSED_PUBLIC_KEY_SIZE-1){var r=Buffer.from([4]);return new e(Buffer.concat([r,n]))}return new e(n)},e.prototype.toHex=function(e){return void 0===e&&(e=!0),e?this.compressed.toString("hex"):this.uncompressed.toString("hex")},e.prototype.decapsulate=function(e){var t=Buffer.concat([this.uncompressed,e.multiply(this)]);return(0,Vr.default)(t,32,{hash:"SHA-256"})},e.prototype.equals=function(e){return this.uncompressed.equals(e.uncompressed)},e}();zr.default=Gr;var Yr=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(h,"__esModule",{value:!0});var Qr=Yr(E),Xr=Yr(Lr),Zr=Dr,ei=Yr(zr),ti=function(){function e(e){if(this.secret=e||(0,Zr.getValidSecret)(),!Xr.default.privateKeyVerify(this.secret))throw new Error("Invalid private key");this.publicKey=new ei.default(Buffer.from(Xr.default.publicKeyCreate(this.secret)))}return e.fromHex=function(t){return new e((0,Zr.decodeHex)(t))},e.prototype.toHex=function(){return"0x".concat(this.secret.toString("hex"))},e.prototype.encapsulate=function(e){var t=Buffer.concat([this.publicKey.uncompressed,this.multiply(e)]);return(0,Qr.default)(t,32,{hash:"SHA-256"})},e.prototype.multiply=function(e){return Buffer.from(Xr.default.publicKeyTweakMul(e.compressed,this.secret,!1))},e.prototype.equals=function(e){return this.secret.equals(e.secret)},e}();h.default=ti,function(e){var t=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.PrivateKey=void 0;var n=h;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return t(n).default}});var r=zr;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return t(r).default}})}(f),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.PublicKey=e.PrivateKey=e.decrypt=e.encrypt=void 0;var t=f,n=Dr,r=jr;e.encrypt=function(e,r){var i=new t.PrivateKey,o=e instanceof Buffer?new t.PublicKey(e):t.PublicKey.fromHex(e),s=i.encapsulate(o),a=(0,n.aesEncrypt)(s,r);return Buffer.concat([i.publicKey.uncompressed,a])},e.decrypt=function(e,i){var o=e instanceof Buffer?new t.PrivateKey(e):t.PrivateKey.fromHex(e),s=new t.PublicKey(i.slice(0,r.UNCOMPRESSED_PUBLIC_KEY_SIZE)),a=i.slice(r.UNCOMPRESSED_PUBLIC_KEY_SIZE),c=s.decapsulate(o);return(0,n.aesDecrypt)(c,a)};var i=f;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return i.PrivateKey}}),Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return i.PublicKey}}),e.utils={aesDecrypt:n.aesDecrypt,aesEncrypt:n.aesEncrypt,decodeHex:n.decodeHex,getValidSecret:n.getValidSecret,remove0x:n.remove0x}}(l);var ni={exports:{}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(e,t){!function(t){var n=Object.hasOwnProperty,r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i="object"==typeof process&&"function"==typeof process.nextTick,o="function"==typeof Symbol,s="object"==typeof Reflect,a="function"==typeof setImmediate?setImmediate:setTimeout,c=o?s&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function d(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==t&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function l(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var f=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function h(e,n){for(var r={},i=e.length,o=n?n.length:0,s=0;s<i;s++)r[e[s]]=s<o?n[s]:t;return r}function p(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function A(e,r,i,o){var s=Object.assign({},r);if(!e)return s;if("object"!=typeof e)throw TypeError("options must be an object");var a,c,d,u=Object.keys(e),l=u.length;function f(e){throw Error('Invalid "'+a+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<l;h++){if(a=u[h],!o&&!n.call(r,a))throw Error('Unknown "'+a+'" option');(c=e[a])!==t&&(d=i[a],s[a]=d?d(c,f):c)}return s}function g(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function m(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var o=typeof e;if(o===r||o===i)return e;n(t)}:function(r,i){for(var o=typeof r,s=n;s-- >0;)if(o===e[s])return r;i(t)}}Object.assign(p.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,o=this._emitter,s=this._listeners,a=function(){var r=f.apply(null,arguments),s={data:r,name:t,original:e};n?!1!==n.call(i,s)&&o.emit.apply(o,[s.name].concat(r)):o.emit.apply(o,[t].concat(r))};if(s[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===s[e]&&(s[e]=a,r._on.call(i,e,a))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&s[e]&&(s[e]=null,r._off.call(i,e,a))},s[e]=null,o.on("removeListener",this._onRemoveListener)):(s[e]=a,r._on.call(i,e,a))},unsubscribe:function(e){var t,n,r,i=this,o=this._listeners,s=this._emitter,a=this._off,d=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function u(){i._onNewListener&&(s.off("newListener",i._onNewListener),s.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=w.call(s,i);s._observers.splice(e,1)}if(e){if(!(t=o[e]))return;a.call(d,e,t),delete o[e],--this._listenersCount||u()}else{for(r=(n=c(o)).length;r-- >0;)e=n[r],a.call(d,e,o[e]);this._listeners={},this._listenersCount=0,u()}}});var v=m(["function"]),b=m(["object","function"]);function y(e,t,n){var r,i,o,s=0,a=new e((function(c,d,u){function l(){i&&(i=null),s&&(clearTimeout(s),s=0)}n=A(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var f=function(e){l(),c(e)},h=function(e){l(),d(e)};r?t(f,h,u):(i=[function(e){h(e||Error("canceled"))}],t(f,h,(function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),o=!0),n.timeout>0&&(s=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",s=0,a.cancel(e),d(e)}),n.timeout))}));return r||(a.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),a}function w(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function E(e,t,n,r,i){if(!n)return null;if(0===r){var o=typeof t;if("string"===o){var s,a,d=0,u=0,l=this.delimiter,f=l.length;if(-1!==(a=t.indexOf(l))){s=new Array(5);do{s[d++]=t.slice(u,a),u=a+f}while(-1!==(a=t.indexOf(l,u)));s[d++]=t.slice(u),t=s,i=d}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var h,p,A,g,m,v,b,y=null,w=t[r],S=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),y=[n]):(e&&e.push.apply(e,n._listeners),y=[n]));else{if("*"===w){for(a=(v=c(n)).length;a-- >0;)"_listeners"!==(h=v[a])&&(b=E(e,t,n[h],r+1,i))&&(y?y.push.apply(y,b):y=b);return y}if("**"===w){for((m=r+1===i||r+2===i&&"*"===S)&&n._listeners&&(y=E(e,t,n,i,i)),a=(v=c(n)).length;a-- >0;)"_listeners"!==(h=v[a])&&("*"===h||"**"===h?(n[h]._listeners&&!m&&(b=E(e,t,n[h],i,i))&&(y?y.push.apply(y,b):y=b),b=E(e,t,n[h],r,i)):b=E(e,t,n[h],h===S?r+2:r,i),b&&(y?y.push.apply(y,b):y=b));return y}n[w]&&(y=E(e,t,n[w],r+1,i))}if((p=n["*"])&&E(e,t,p,r+1,i),A=n["**"])if(r<i)for(A._listeners&&E(e,t,A,i,i),a=(v=c(A)).length;a-- >0;)"_listeners"!==(h=v[a])&&(h===S?E(e,t,A[h],r+2,i):h===w?E(e,t,A[h],r+1,i):((g={})[h]=A[h],E(e,t,{"**":g},r+1,i)));else A._listeners?E(e,t,A,i,i):A["*"]&&A["*"]._listeners&&E(e,t,A["*"],i,i);return y}function S(e,t,n){var r,i,o=0,s=0,a=this.delimiter,c=a.length;if("string"==typeof e)if(-1!==(r=e.indexOf(a))){i=new Array(5);do{i[o++]=e.slice(s,r),s=r+c}while(-1!==(r=e.indexOf(a,s)));i[o++]=e.slice(s)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var d,u=this.listenerTree;for(r=0;r<o;r++)if(u=u[d=i[r]]||(u[d]={}),r===o-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,l.call(this,u._listeners.length,d))):u._listeners=t,!0;return!0}function _(e,t,n,r){for(var i,o,s,a,d=c(e),u=d.length,l=e._listeners;u-- >0;)i=e[o=d[u]],s="_listeners"===o?n:n?n.concat(o):[o],a=r||"symbol"==typeof o,l&&t.push(a?s:s.join(this.delimiter)),"object"==typeof i&&_.call(this,i,t,s,a);return t}function C(e){for(var t,n,r,i=c(e),o=i.length;o-- >0;)(t=e[n=i[o]])&&(r=!0,"_listeners"===n||C(t)||delete e[n]);return r}function M(e,t,n){this.emitter=e,this.event=t,this.listener=n}function k(e,n,r){if(!0===r)s=!0;else if(!1===r)o=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var o=r.async,s=r.promisify,c=r.nextTick,d=r.objectify}if(o||c||s){var u=n,l=n._origin||n;if(c&&!i)throw Error("process.nextTick is not supported");s===t&&(s="AsyncFunction"===n.constructor.name),n=function(){var e=arguments,t=this,n=this.event;return s?c?Promise.resolve():new Promise((function(e){a(e)})).then((function(){return t.event=n,u.apply(t,e)})):(c?process.nextTick:a)((function(){t.event=n,u.apply(t,e)}))},n._async=!0,n._origin=l}return[n,d?new M(this,e,n):this]}function I(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}M.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},I.EventEmitter2=I,I.prototype.listenTo=function(e,n,i){if("object"!=typeof e)throw TypeError("target musts be an object");var o=this;function s(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,r=i.reducers,s=w.call(o,e);n=-1===s?new p(o,e,i):o._observers[s];for(var a,d=c(t),u=d.length,l="function"==typeof r,f=0;f<u;f++)a=d[f],n.subscribe(a,t[a]||a,l?r:r&&r[a])}return i=A(i,{on:t,off:t,reducers:t},{on:v,off:v,reducers:b}),r(n)?s(h(n)):s("string"==typeof n?h(n.split(/\s+/)):n),this},I.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),o=!0);return o},I.prototype.delimiter=".",I.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},I.prototype.getMaxListeners=function(){return this._maxListeners},I.prototype.event="",I.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},I.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},I.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},I.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},I.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},I.prototype._many=function(e,t,n,r,i){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function s(){return 0==--t&&o.off(e,s),n.apply(this,arguments)}return s._origin=n,this._on(e,s,r,i)},I.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var e,t,n,r,i,s,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,o)for(r=0;r<n;r++)if("symbol"==typeof a[r]){s=!0;break}s||(a=a.join(this.delimiter))}var u,l=arguments.length;if(this._all&&this._all.length)for(r=0,n=(u=this._all.slice()).length;r<n;r++)switch(this.event=a,l){case 1:u[r].call(this,a);break;case 2:u[r].call(this,a,arguments[1]);break;case 3:u[r].call(this,a,arguments[1],arguments[2]);break;default:u[r].apply(this,arguments)}if(c)u=[],E.call(this,u,e,this.listenerTree,0,n);else{if("function"==typeof(u=this._events[a])){switch(this.event=a,l){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];u.apply(this,t)}return!0}u&&(u=u.slice())}if(u&&u.length){if(l>3)for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];for(r=0,n=u.length;r<n;r++)switch(this.event=a,l){case 1:u[r].call(this);break;case 2:u[r].call(this,arguments[1]);break;case 3:u[r].call(this,arguments[1],arguments[2]);break;default:u[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},I.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var e,t,n,r,i,s,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(r=a.length,o)for(i=0;i<r;i++)if("symbol"==typeof a[i]){t=!0;break}t||(a=a.join(this.delimiter))}var u,l=[],f=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=a,f){case 1:l.push(this._all[i].call(this,a));break;case 2:l.push(this._all[i].call(this,a,arguments[1]));break;case 3:l.push(this._all[i].call(this,a,arguments[1],arguments[2]));break;default:l.push(this._all[i].apply(this,arguments))}if(c?(u=[],E.call(this,u,e,this.listenerTree,0)):u=this._events[a],"function"==typeof u)switch(this.event=a,f){case 1:l.push(u.call(this));break;case 2:l.push(u.call(this,arguments[1]));break;case 3:l.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(f-1),s=1;s<f;s++)n[s-1]=arguments[s];l.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),f>3)for(n=new Array(f-1),s=1;s<f;s++)n[s-1]=arguments[s];for(i=0,r=u.length;i<r;i++)switch(this.event=a,f){case 1:l.push(u[i].call(this));break;case 2:l.push(u[i].call(this,arguments[1]));break;case 3:l.push(u[i].call(this,arguments[1],arguments[2]));break;default:l.push(u[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},I.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},I.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},I.prototype.onAny=function(e){return this._onAny(e,!1)},I.prototype.prependAny=function(e){return this._onAny(e,!0)},I.prototype.addListener=I.prototype.on,I.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},I.prototype._on=function(e,n,r,i){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");this._events||d.call(this);var o,s=this;return i!==t&&(n=(o=k.call(this,e,n,i))[0],s=o[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(S.call(this,e,n,r),s):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,l.call(this,this._events[e].length,e))):this._events[e]=n,s)},I.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(i=E.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var s=0;s<i.length;s++){var a=i[s];if(n=a._listeners,r(n)){for(var c=-1,d=0,u=n.length;d<u;d++)if(n[d]===t||n[d].listener&&n[d].listener===t||n[d]._origin&&n[d]._origin===t){c=d;break}if(c<0)continue;return this.wildcard?a._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete a._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&C(this.listenerTree),this},I.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},I.prototype.removeListener=I.prototype.off,I.prototype.removeAllListeners=function(e){if(e===t)return!this._events||d.call(this),this;if(this.wildcard){var n,r=E.call(this,null,e,this.listenerTree,0);if(!r)return this;for(n=0;n<r.length;n++)r[n]._listeners=null;this.listenerTree&&C(this.listenerTree)}else this._events&&(this._events[e]=null);return this},I.prototype.listeners=function(e){var n,r,i,o,s,a=this._events;if(e===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!a)return[];for(o=(n=c(a)).length,i=[];o-- >0;)"function"==typeof(r=a[n[o]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(s=this.listenerTree))return[];var d=[],u="string"==typeof e?e.split(this.delimiter):e.slice();return E.call(this,d,u,s,0),d}return a&&(r=a[e])?"function"==typeof r?[r]:r:[]},I.prototype.eventNames=function(e){var t=this._events;return this.wildcard?_.call(this,this.listenerTree,[],null,e):t?c(t):[]},I.prototype.listenerCount=function(e){return this.listeners(e).length},I.prototype.hasListeners=function(e){if(this.wildcard){var n=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return E.call(this,n,r,this.listenerTree,0),n.length>0}var i=this._events,o=this._all;return!!(o&&o.length||i&&(e===t?c(i).length:i[e]))},I.prototype.listenersAny=function(){return this._all?this._all:[]},I.prototype.waitFor=function(e,n){var r=this,i=typeof n;return"number"===i?n={timeout:n}:"function"===i&&(n={filter:n}),y((n=A(n,{timeout:0,filter:t,handleError:!1,Promise:Promise,overload:!1},{filter:v,Promise:g})).Promise,(function(t,i,o){function s(){var o=n.filter;if(!o||o.apply(r,arguments))if(r.off(e,s),n.handleError){var a=arguments[0];a?i(a):t(f.apply(null,arguments).slice(1))}else t(f.apply(null,arguments))}o((function(){r.off(e,s)})),r._on(e,s,!1)}),{timeout:n.timeout,overload:n.overload})};var R=I.prototype;Object.defineProperties(I,{defaultMaxListeners:{get:function(){return R._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");R._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return y((n=A(n,{Promise:Promise,timeout:0,overload:!1},{Promise:g})).Promise,(function(n,r,i){var o;if("function"==typeof e.addEventListener)return o=function(){n(f.apply(null,arguments))},i((function(){e.removeEventListener(t,o)})),void e.addEventListener(t,o,{once:!0});var s,a=function(){s&&e.removeListener("error",s),n(f.apply(null,arguments))};"error"!==t&&(s=function(n){e.removeListener(t,a),r(n)},e.once("error",s)),i((function(){s&&e.removeListener("error",s),e.removeListener(t,a)})),e.once(t,a)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(R,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),"function"==typeof t&&t.amd?t((function(){return I})):e.exports=I}()}(ni);var ri,ii=ni.exports,oi=new Uint8Array(16);function si(){if(!ri&&!(ri="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ri(oi)}var ai=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ci(e){return"string"==typeof e&&ai.test(e)}for(var di=[],ui=0;ui<256;++ui)di.push((ui+256).toString(16).substr(1));function li(e,t,n){var r=(e=e||{}).random||(e.rng||si)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(di[e[t+0]]+di[e[t+1]]+di[e[t+2]]+di[e[t+3]]+"-"+di[e[t+4]]+di[e[t+5]]+"-"+di[e[t+6]]+di[e[t+7]]+"-"+di[e[t+8]]+di[e[t+9]]+"-"+di[e[t+10]]+di[e[t+11]]+di[e[t+12]]+di[e[t+13]]+di[e[t+14]]+di[e[t+15]]).toLowerCase();if(!ci(n))throw TypeError("Stringified UUID is invalid");return n}(r)}const fi=Object.create(null);fi.open="0",fi.close="1",fi.ping="2",fi.pong="3",fi.message="4",fi.upgrade="5",fi.noop="6";const hi=Object.create(null);Object.keys(fi).forEach((e=>{hi[fi[e]]=e}));const pi={type:"error",data:"parser error"},Ai="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),gi="function"==typeof ArrayBuffer,mi=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,vi=({type:e,data:t},n,r)=>Ai&&t instanceof Blob?n?r(t):bi(t,r):gi&&(t instanceof ArrayBuffer||mi(t))?n?r(t):bi(new Blob([t]),r):r(fi[e]+(t||"")),bi=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function yi(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let wi;function Ei(e,t){return Ai&&e.data instanceof Blob?e.data.arrayBuffer().then(yi).then(t):gi&&(e.data instanceof ArrayBuffer||mi(e.data))?t(yi(e.data)):void vi(e,!1,(e=>{wi||(wi=new TextEncoder),t(wi.encode(e))}))}const Si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_i="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)_i[Si.charCodeAt(e)]=e;const Ci="function"==typeof ArrayBuffer,Mi=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Ii(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:ki(e.substring(1),t)};return hi[n]?e.length>1?{type:hi[n],data:e.substring(1)}:{type:hi[n]}:pi},ki=(e,t)=>{if(Ci){const n=(e=>{let t,n,r,i,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const d=new ArrayBuffer(s),u=new Uint8Array(d);for(t=0;t<a;t+=4)n=_i[e.charCodeAt(t)],r=_i[e.charCodeAt(t+1)],i=_i[e.charCodeAt(t+2)],o=_i[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|i>>2,u[c++]=(3&i)<<6|63&o;return d})(e);return Ii(n,t)}return{base64:!0,data:e}},Ii=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Ri=String.fromCharCode(30);let Oi;var xi=Ti;function Ti(e){if(e)return function(e){for(var t in Ti.prototype)e[t]=Ti.prototype[t];return e}(e)}Ti.prototype.on=Ti.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Ti.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Ti.prototype.off=Ti.prototype.removeListener=Ti.prototype.removeAllListeners=Ti.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Ti.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},Ti.prototype.emitReserved=Ti.prototype.emit,Ti.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Ti.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Pi="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Ni(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Li=Pi.setTimeout,Di=Pi.clearTimeout;function ji(e,t){t.useNativeTimers?(e.setTimeoutFn=Li.bind(Pi),e.clearTimeoutFn=Di.bind(Pi)):(e.setTimeoutFn=Pi.setTimeout.bind(Pi),e.clearTimeoutFn=Pi.clearTimeout.bind(Pi))}var Bi,Fi,Ki={exports:{}};function $i(){if(Fi)return Bi;Fi=1;var e=1e3,t=60*e,n=60*t,r=24*n,i=7*r,o=365.25*r;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}return Bi=function(a,c){c=c||{};var d=typeof a;if("string"===d&&a.length>0)return function(s){if((s=String(s)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(a);if("number"===d&&isFinite(a))return c.long?function(i){var o=Math.abs(i);if(o>=r)return s(i,o,r,"day");if(o>=n)return s(i,o,n,"hour");if(o>=t)return s(i,o,t,"minute");if(o>=e)return s(i,o,e,"second");return i+" ms"}(a):function(i){var o=Math.abs(i);if(o>=r)return Math.round(i/r)+"d";if(o>=n)return Math.round(i/n)+"h";if(o>=t)return Math.round(i/t)+"m";if(o>=e)return Math.round(i/e)+"s";return i+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))},Bi}var Ui=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=$i(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=Ui(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(Ki,Ki.exports);var zi=a(Ki.exports);const qi=zi("engine.io-client:transport");class Vi extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Hi extends xi{constructor(e){super(),this.writable=!1,ji(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new Vi(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):qi("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Mi(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}const Wi="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ji=64,Gi={};let Yi,Qi=0,Xi=0;function Zi(e){let t="";do{t=Wi[e%Ji]+t,e=Math.floor(e/Ji)}while(e>0);return t}function eo(){const e=Zi(+new Date);return e!==Yi?(Qi=0,Yi=e):e+"."+Zi(Qi++)}for(;Xi<Ji;Xi++)Gi[Wi[Xi]]=Xi;let to=!1;try{to="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const no=to;function ro(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||no))return new XMLHttpRequest}catch(e){}if(!t)try{return new(Pi[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const io=zi("engine.io-client:polling");function oo(){}const so=null!=new ro({xdomain:!1}).responseType;class ao extends xi{constructor(e,t){super(),ji(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;const t=Ni(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const n=this.xhr=new ro(t);try{io("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(n)),4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof n.status?n.status:0)}),0))},io("xhr data %s",this.data),n.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=ao.requestsCount++,ao.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=oo,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete ao.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(ao.requestsCount=0,ao.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",co);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Pi?"pagehide":"unload",co,!1)}function co(){for(let e in ao.requests)ao.requests.hasOwnProperty(e)&&ao.requests[e].abort()}const uo="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),lo=Pi.WebSocket||Pi.MozWebSocket,fo=zi("engine.io-client:websocket"),ho="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const po=zi("engine.io-client:webtransport");function Ao(e,t){return"message"===e.type&&"string"!=typeof e.data&&t[0]>=48&&t[0]<=54}const go={websocket:class extends Hi{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=ho?{}:Ni(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=ho?new lo(e,t,n):t?new lo(e,t):new lo(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;vi(n,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(e){fo("websocket closed before onclose event")}r&&uo((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=eo()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!lo}},webtransport:class extends Hi{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{po("transport closed gracefully"),this.onClose()})).catch((e=>{po("transport closed due to %s",e),this.onError("webtransport error",e)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((e=>{const t=e.readable.getReader();let n;this.writer=e.writable.getWriter();const r=()=>{t.read().then((({done:e,value:t})=>{e?po("session is closed"):(po("received chunk: %o",t),n||1!==t.byteLength||54!==t[0]?(this.onPacket(function(e,t,n){Oi||(Oi=new TextDecoder);const r=t||e[0]<48||e[0]>54;return Mi(r?e:Oi.decode(e),n)}(t,n,"arraybuffer")),n=!1):n=!0,r())})).catch((e=>{po("an error occurred while reading: %s",e)}))};r();const i=this.query.sid?`0{"sid":"${this.query.sid}"}`:"0";this.writer.write((new TextEncoder).encode(i)).then((()=>this.onOpen()))}))})))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Ei(n,(e=>{Ao(n,e)&&(po("writing binary header"),this.writer.write(Uint8Array.of(54))),po("writing chunk: %o",e),this.writer.write(e).then((()=>{r&&uo((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}))}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class extends Hi{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}const t=e&&e.forceBase64;this.supportsBinary=so&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{io("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(io("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){io("pre-pause polling complete"),--e||t()}))),this.writable||(io("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){io("pre-pause writing complete"),--e||t()})))}else t()}poll(){io("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){io("polling got data %s",e);((e,t)=>{const n=e.split(Ri),r=[];for(let e=0;e<n.length;e++){const i=Mi(n[e],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this.poll():io('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{io("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(io("transport open - closing"),e()):(io("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach(((e,o)=>{vi(e,!1,(e=>{r[o]=e,++i===n&&t(r.join(Ri))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=eo()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ao(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){io("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},mo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,vo=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function bo(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=mo.exec(e||""),o={},s=14;for(;s--;)o[vo[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}const yo=zi("engine.io-client:socket");let wo=class e extends xi{constructor(e,t={}){super(),this.writeBuffer=[],e&&"object"==typeof e&&(t=e,e=null),e?(e=bo(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=bo(t.host).host),ji(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){yo('creating transport "%s"',e);const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return yo("options: %j",n),new go[e](n)}open(){let t;if(this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(e){return yo("error while creating transport: %s",e),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(e){yo("setting transport %s",e.name),this.transport&&(yo("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(t){yo('probing transport "%s"',t);let n=this.createTransport(t),r=!1;e.priorWebsocketSuccess=!1;const i=()=>{r||(yo('probe transport "%s" opened',t),n.send([{type:"ping",data:"probe"}]),n.once("packet",(i=>{if(!r)if("pong"===i.type&&"probe"===i.data){if(yo('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;e.priorWebsocketSuccess="websocket"===n.name,yo('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{r||"closed"!==this.readyState&&(yo("changing transport and sending upgrade packet"),u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())}))}else{yo('probe transport "%s" failed',t);const e=new Error("probe error");e.transport=n.name,this.emitReserved("upgradeError",e)}})))};function o(){r||(r=!0,u(),n.close(),n=null)}const s=e=>{const r=new Error("probe error: "+e);r.transport=n.name,o(),yo('probe transport "%s" failed because of error: %s',t,e),this.emitReserved("upgradeError",r)};function a(){s("transport closed")}function c(){s("socket closed")}function d(e){n&&e.name!==n.name&&(yo('"%s" works - aborting "%s"',e.name,n.name),o())}const u=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),this.off("close",c),this.off("upgrading",d)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",c),this.once("upgrading",d),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn((()=>{r||n.open()}),200):n.open()}onOpen(){if(yo("socket open"),this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){yo("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(yo('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else yo('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();yo("flushing %d packets in socket",e.length),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this.maxPayload)return yo("only send %d out of %d packets",n,this.writeBuffer.length),this.writeBuffer.slice(0,n);e+=2}var t;return yo("payload size is %d (max: %d)",e,this.maxPayload),this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),yo("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(t){yo("socket error %j",t),e.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(yo('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}};wo.protocol=4,wo.protocol;const Eo=zi("socket.io-client:url");const So="function"==typeof ArrayBuffer,_o=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Co=Object.prototype.toString,Mo="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Co.call(Blob),ko="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Co.call(File);function Io(e){return So&&(e instanceof ArrayBuffer||_o(e))||Mo&&e instanceof Blob||ko&&e instanceof File}function Ro(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Ro(e[t]))return!0;return!1}if(Io(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Ro(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Ro(e[t]))return!0;return!1}function Oo(e){const t=[],n=e.data,r=e;return r.data=xo(n,t),r.attachments=t.length,{packet:r,buffers:t}}function xo(e,t){if(!e)return e;if(Io(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=xo(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=xo(e[r],t));return n}return e}function To(e,t){return e.data=Po(e.data,t),delete e.attachments,e}function Po(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Po(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Po(e[n],t));return e}const No=zi("socket.io-parser"),Lo=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Do;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Do||(Do={}));function jo(e){return"[object Object]"===Object.prototype.toString.call(e)}class Bo extends xi{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Do.BINARY_EVENT;n||t.type===Do.BINARY_ACK?(t.type=n?Do.EVENT:Do.ACK,this.reconstructor=new Fo(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Io(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Do[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Do.BINARY_EVENT||n.type===Do.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Bo.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return No("decoded %s as %j",e,n),n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case Do.CONNECT:return jo(t);case Do.DISCONNECT:return void 0===t;case Do.CONNECT_ERROR:return"string"==typeof t||jo(t);case Do.EVENT:case Do.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Lo.indexOf(t[0]));case Do.ACK:case Do.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Fo{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=To(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Ko=Object.freeze({__proto__:null,Decoder:Bo,Encoder:class{constructor(e){this.replacer=e}encode(e){return No("encoding packet %j",e),e.type!==Do.EVENT&&e.type!==Do.ACK||!Ro(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Do.EVENT?Do.BINARY_EVENT:Do.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Do.BINARY_EVENT&&e.type!==Do.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),No("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=Oo(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}},get PacketType(){return Do},protocol:5});function $o(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Uo=zi("socket.io-client:socket"),zo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qo extends xi{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$o(e,"open",this.onopen.bind(this)),$o(e,"packet",this.onpacket.bind(this)),$o(e,"error",this.onerror.bind(this)),$o(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(zo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const n={type:Do.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++;Uo("emitting packet with ack id %d",e);const r=t.pop();this._registerAckCallback(e,r),n.id=e}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?Uo("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const i=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(Uo("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));Uo("event with ack id %d has timed out after %d ms",e,r),t.call(this,new Error("operation has timed out"))}),r);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,[null,...e])}}emitWithAck(e,...t){const n=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((r,i)=>{t.push(((e,t)=>n?e?i(e):r(t):r(e))),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n!==this._queue[0])return;return null!==e?n.tryCount>this._opts.retries&&(Uo("packet [%d] is discarded after %d tries",n.id,n.tryCount),this._queue.shift(),t&&t(e)):(Uo("packet [%d] was successfully sent",n.id),this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(Uo("draining queue"),!this.connected||0===this._queue.length)return;const t=this._queue[0];!t.pending||e?(t.pending=!0,t.tryCount++,Uo("sending packet [%d] (try n%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)):Uo("packet [%d] has already been sent and is waiting for an ack",t.id)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Uo("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Do.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){Uo("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Do.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Do.EVENT:case Do.BINARY_EVENT:this.onevent(e);break;case Do.ACK:case Do.BINARY_ACK:this.onack(e);break;case Do.DISCONNECT:this.ondisconnect();break;case Do.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];Uo("emitting event %j",t),null!=e.id&&(Uo("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,Uo("sending ack %j",r),t.packet({type:Do.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(Uo("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):Uo("bad ack %s",e.id)}onconnect(e,t){Uo("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){Uo("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Uo("performing disconnect (%s)",this.nsp),this.packet({type:Do.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Vo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Vo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Vo.prototype.reset=function(){this.attempts=0},Vo.prototype.setMin=function(e){this.ms=e},Vo.prototype.setMax=function(e){this.max=e},Vo.prototype.setJitter=function(e){this.jitter=e};const Ho=zi("socket.io-client:manager");class Wo extends xi{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,ji(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Vo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Ko;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(Ho("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;Ho("opening %s",this.uri),this.engine=new wo(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=$o(t,"open",(function(){n.onopen(),e&&e()})),i=t=>{Ho("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=$o(t,"error",i);if(!1!==this._timeout){const e=this._timeout;Ho("connect attempt will timeout after %d",e);const n=this.setTimeoutFn((()=>{Ho("connect attempt timed out after %d",e),r(),i(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){Ho("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($o(e,"ping",this.onping.bind(this)),$o(e,"data",this.ondata.bind(this)),$o(e,"error",this.onerror.bind(this)),$o(e,"close",this.onclose.bind(this)),$o(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){uo((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){Ho("error",e),this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new qo(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return void Ho("socket %s is still active, skipping close",e)}this._close()}_packet(e){Ho("writing packet %j",e);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){Ho("cleanup"),this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){Ho("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){Ho("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Ho("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();Ho("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(Ho("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(Ho("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(Ho("reconnect success"),e.onreconnect())})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Jo=zi("socket.io-client"),Go={};function Yo(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(Eo("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),Eo("parse %s",e),r=bo(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=Go[i]&&o in Go[i].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?(Jo("ignoring socket cache for %s",r),a=new Wo(r,t)):(Go[i]||(Jo("new io instance for %s",r),Go[i]=new Wo(r,t)),a=Go[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}function Qo(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}Object.assign(Yo,{Manager:Wo,Socket:qo,io:Yo,connect:Yo}),"function"==typeof SuppressedError&&SuppressedError;var Xo,Zo,es={exports:{}};var ts=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=function(){if(Zo)return Xo;Zo=1;var e=1e3,t=60*e,n=60*t,r=24*n;function i(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}return Xo=function(o,s){s=s||{};var a=typeof o;if("string"===a&&o.length>0)return function(i){if(!((i=String(i)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*t;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(o);if("number"===a&&isFinite(o))return s.long?function(o){var s=Math.abs(o);return s>=r?i(o,s,r,"day"):s>=n?i(o,s,n,"hour"):s>=t?i(o,s,t,"minute"):s>=e?i(o,s,e,"second"):o+" ms"}(o):function(i){var o=Math.abs(i);return o>=r?Math.round(i/r)+"d":o>=n?Math.round(i/n)+"h":o>=t?Math.round(i/t)+"m":o>=e?Math.round(i/e)+"s":i+"ms"}(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}}(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=ts(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(es,es.exports);var ns=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(es.exports);const rs=ns("KeyExchange:Layer"),is=ns("SocketService:Layer"),os=ns("Ecies:Layer"),ss=ns("RemoteCommunication:Layer");rs.color="##95c44e",is.color="#f638d7",os.color="#465b9c",ss.color="#47a2be";const as={KeyExchange:rs,SocketService:is,Ecies:os,RemoteCommunication:ss};let cs,ds=[],us=[];function ls(e){return Qo(this,void 0,void 0,(function*(){if(!cs||!e)return;!function(){const e=us;us=ds,ds=e}();const t=cs.endsWith("/")?`${cs}debug`:`${cs}/debug`,n=Object.assign({},e);if(delete n.params,e.params)for(const[t,r]of Object.entries(e.params))n[t]=r;const r=JSON.stringify(n);as.RemoteCommunication(`[sendBufferedEvents] Sending ${ds.length} analytics events to ${t}`);try{const e=yield u(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:r}),n=yield e.text();as.RemoteCommunication(`[sendBufferedEvents] Response: ${n}`),ds.length=0}catch(e){console.warn("Error sending analytics",e)}}))}const fs=(e,t)=>Qo(void 0,void 0,void 0,(function*(){var n;cs=t,n=e,us.push(n),ls(e).catch((()=>{}))}));class hs{constructor(e){this.enabled=!0,(null==e?void 0:e.debug)&&ns.enable("Ecies:Layer"),(null==e?void 0:e.pkey)?this.ecies=l.PrivateKey.fromHex(e.pkey):this.ecies=new l.PrivateKey,as.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),as.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),as.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new l.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{as.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=t.from(e),o=l.encrypt(n,i);r=t.from(o).toString("base64")}catch(t){throw as.Ecies("[ECIES: encrypt()] error encrypt:",t),as.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),as.Ecies("[ECIES: encrypt()] data: ",e),as.Ecies("[ECIES: encrypt()] otherkey: ",n),t}return r}decrypt(e){let n=e;if(this.enabled)try{as.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=t.from(e.toString(),"base64");n=l.decrypt(this.ecies.toHex(),r).toString()}catch(t){throw as.Ecies("[ECIES: decrypt()] error decrypt",t),as.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),as.Ecies("[ECIES: decrypt()] encryptedData: ",e),t}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){as.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var ps="0.18.5";const As="https://metamask-sdk.api.cx.metamask.io/",gs=["websocket"],ms=6048e5,vs={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",ETH_REQUESTACCOUNTS:"eth_requestAccounts"};function bs(e){const{context:t}=e;as.RemoteCommunication(`[RemoteCommunication: clean()] context=${t}`),e.channelConfig=void 0,e.ready=!1,e.originatorConnectStarted=!1}var ys,ws,Es,Ss,_s;!function(e){e.DISCONNECTED="disconnected",e.WAITING="waiting",e.TIMEOUT="timeout",e.LINKED="linked",e.PAUSED="paused",e.TERMINATED="terminated"}(ys||(ys={})),function(e){e.KEY_INFO="key_info",e.SERVICE_STATUS="service_status",e.PROVIDER_UPDATE="provider_update",e.RPC_UPDATE="rpc_update",e.KEYS_EXCHANGED="keys_exchanged",e.JOIN_CHANNEL="join_channel",e.CHANNEL_CREATED="channel_created",e.CLIENTS_CONNECTED="clients_connected",e.CLIENTS_DISCONNECTED="clients_disconnected",e.CLIENTS_WAITING="clients_waiting",e.CLIENTS_READY="clients_ready",e.SOCKET_DISCONNECTED="socket_disconnected",e.SOCKET_RECONNECT="socket_reconnect",e.OTP="otp",e.SDK_RPC_CALL="sdk_rpc_call",e.AUTHORIZED="authorized",e.CONNECTION_STATUS="connection_status",e.MESSAGE="message",e.TERMINATE="terminate"}(ws||(ws={})),(Es||(Es={})).KEY_EXCHANGE="key_exchange",function(e){e.KEY_HANDSHAKE_START="key_handshake_start",e.KEY_HANDSHAKE_CHECK="key_handshake_check",e.KEY_HANDSHAKE_SYN="key_handshake_SYN",e.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",e.KEY_HANDSHAKE_ACK="key_handshake_ACK",e.KEY_HANDSHAKE_NONE="none"}(Ss||(Ss={}));class Cs extends ii.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:t,context:n,ecies:r,logging:i}){super(),this.keysExchanged=!1,this.step=Ss.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=n,this.myECIES=new hs(Object.assign(Object.assign({},r),{debug:null==i?void 0:i.eciesLayer})),this.communicationLayer=e,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=!0===(null==i?void 0:i.keyExchangeLayer),(null==i?void 0:i.keyExchangeLayer)&&ns.enable("KeyExchange:Layer"),t&&this.setOtherPublicKey(t),this.communicationLayer.on(Es.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){as.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged}`,e);const{message:t}=e;this.keysExchanged&&as.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(ws.KEY_INFO,t.type),t.type===Ss.KEY_HANDSHAKE_SYN?(this.checkStep([Ss.KEY_HANDSHAKE_NONE,Ss.KEY_HANDSHAKE_ACK]),as.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",t),t.pubkey&&this.setOtherPublicKey(t.pubkey),this.communicationLayer.sendMessage({type:Ss.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}),this.setStep(Ss.KEY_HANDSHAKE_ACK)):t.type===Ss.KEY_HANDSHAKE_SYNACK?(this.checkStep([Ss.KEY_HANDSHAKE_SYNACK,Ss.KEY_HANDSHAKE_ACK,Ss.KEY_HANDSHAKE_NONE]),as.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),t.pubkey&&this.setOtherPublicKey(t.pubkey),this.communicationLayer.sendMessage({type:Ss.KEY_HANDSHAKE_ACK}),this.keysExchanged=!0,this.setStep(Ss.KEY_HANDSHAKE_ACK),this.emit(ws.KEYS_EXCHANGED)):t.type===Ss.KEY_HANDSHAKE_ACK&&(as.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Ss.KEY_HANDSHAKE_ACK,Ss.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Ss.KEY_HANDSHAKE_ACK),this.emit(ws.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new hs(e)}clean(){as.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Ss.KEY_HANDSHAKE_NONE),this.emit(ws.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:t}){as.KeyExchange(`[KeyExchange: start()] context=${this.context} isOriginator=${e} step=${this.step} force=${t} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==Ss.KEY_HANDSHAKE_NONE&&this.step!==Ss.KEY_HANDSHAKE_SYNACK)||t?(as.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${t}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Ss.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Ss.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey})):as.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&!0!==t?as.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):(this.communicationLayer.sendMessage({type:Ss.KEY_HANDSHAKE_START}),this.clean())}setStep(e){this.step=e,this.emit(ws.KEY_INFO,e)}checkStep(e){e.length>0&&-1===e.indexOf(this.step.toString())&&console.warn(`[KeyExchange: checkStep()]  Wrong Step "${this.step}" not within ${e}`)}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){as.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}!function(e){e.TERMINATE="terminate",e.ANSWER="answer",e.OFFER="offer",e.CANDIDATE="candidate",e.JSONRPC="jsonrpc",e.WALLET_INFO="wallet_info",e.ORIGINATOR_INFO="originator_info",e.PAUSE="pause",e.OTP="otp",e.AUTHORIZED="authorized",e.PING="ping",e.READY="ready"}(_s||(_s={}));const Ms=e=>new Promise((t=>{setTimeout(t,e)})),ks=(e,t,n=200)=>Qo(void 0,void 0,void 0,(function*(){let r;const i=Date.now();let o=!1;for(;!o;){if(o=Date.now()-i>3e5,r=t[e],void 0!==r.elapsedTime)return r;yield Ms(n)}throw new Error(`RPC ${e} timed out`)})),Is=e=>Qo(void 0,void 0,void 0,(function*(){var t,n,r,i,o;return as.SocketService(`[SocketService: reconnectSocket()] instance.state.socket?.connected=${null===(t=e.state.socket)||void 0===t?void 0:t.connected} trying to reconnect after socketio disconnection`,e),yield Ms(200),(null===(n=e.state.socket)||void 0===n?void 0:n.connected)||(e.state.resumed=!0,null===(r=e.state.socket)||void 0===r||r.connect(),e.emit(ws.SOCKET_RECONNECT),null===(i=e.state.socket)||void 0===i||i.emit(ws.JOIN_CHANNEL,e.state.channelId,`${e.state.context}connect_again`)),yield Ms(100),null===(o=e.state.socket)||void 0===o?void 0:o.connected}));var Rs;!function(e){e.REQUEST="sdk_connect_request_started",e.REQUEST_MOBILE="sdk_connect_request_started_mobile",e.RECONNECT="sdk_reconnect_request_started",e.CONNECTED="sdk_connection_established",e.CONNECTED_MOBILE="sdk_connection_established_mobile",e.AUTHORIZED="sdk_connection_authorized",e.REJECTED="sdk_connection_rejected",e.TERMINATED="sdk_connection_terminated",e.DISCONNECTED="sdk_disconnected",e.SDK_USE_EXTENSION="sdk_use_extension",e.SDK_RPC_REQUEST="sdk_rpc_request",e.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",e.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",e.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",e.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(Rs||(Rs={}));var Os;!function(e){e.RPC_CHECK="rpcCheck",e.SKIPPED_RPC="skippedRpc"}(Os||(Os={}));const xs=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map((e=>e.toLowerCase()));function Ts(e,t){var n,r,i,o;if(!e.state.channelId)throw new Error("Create a channel first");as.SocketService(`[SocketService: handleSendMessage()] context=${e.state.context} areKeysExchanged=${null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged()}`,t),(null===(r=null==t?void 0:t.type)||void 0===r?void 0:r.startsWith("key_handshake"))?function(e,t){var n;as.SocketService(`[SocketService: handleKeyHandshake()] context=${e.state.context}`,t),null===(n=e.state.socket)||void 0===n||n.emit(ws.MESSAGE,{id:e.state.channelId,context:e.state.context,message:t})}(e,t):(function(e,t){var n;if(!(null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged()))throw as.SocketService(`[SocketService: validateKeyExchange()] context=${e.state.context} ERROR keys not exchanged`,t),new Error("Keys not exchanged BBB")}(e,t),function(e,t){var n;const r=null!==(n=null==t?void 0:t.method)&&void 0!==n?n:"",i=null==t?void 0:t.id;e.state.isOriginator&&i&&(e.state.rpcMethodTracker[i]={id:i,timestamp:Date.now(),method:r},e.emit(ws.RPC_UPDATE,e.state.rpcMethodTracker[i]))}(e,t),function(e,t){var n,r;const i=null===(n=e.state.keyExchange)||void 0===n?void 0:n.encryptMessage(JSON.stringify(t)),o={id:e.state.channelId,context:e.state.context,message:i,plaintext:e.state.hasPlaintext?JSON.stringify(t):void 0};as.SocketService(`[SocketService: encryptAndSendMessage()] context=${e.state.context}`,o),t.type===_s.TERMINATE&&(e.state.manualDisconnect=!0),null===(r=e.state.socket)||void 0===r||r.emit(ws.MESSAGE,o)}(e,t),e.remote.state.analytics&&e.remote.state.isOriginator&&t.method&&xs.includes(t.method.toLowerCase())&&fs({id:null!==(i=e.remote.state.channelId)&&void 0!==i?i:"",event:Rs.SDK_RPC_REQUEST,sdkVersion:e.remote.state.sdkVersion,commLayerVersion:ps,walletVersion:null===(o=e.remote.state.walletInfo)||void 0===o?void 0:o.version,params:{method:t.method,from:"mobile"}},e.remote.state.communicationServerUrl).catch((e=>{console.error("Cannot send analytics",e)})),function(e,t){var n;return Qo(this,void 0,void 0,(function*(){const r=null==t?void 0:t.id,i=null!==(n=null==t?void 0:t.method)&&void 0!==n?n:"";if(e.state.isOriginator&&r)try{const n=ks(r,e.state.rpcMethodTracker,200).then((e=>({type:Os.RPC_CHECK,result:e}))),o=(()=>Qo(this,void 0,void 0,(function*(){const t=yield(({rpcId:e,instance:t})=>Qo(void 0,void 0,void 0,(function*(){for(;t.state.lastRpcId===e||void 0===t.state.lastRpcId;)yield Ms(200);return t.state.lastRpcId})))({instance:e,rpcId:r}),n=yield ks(t,e.state.rpcMethodTracker,200);return{type:Os.SKIPPED_RPC,result:n}})))(),s=yield Promise.race([n,o]);if(s.type===Os.RPC_CHECK){const e=s.result;as.SocketService(`[SocketService:handleRpcReplies()] id=${t.id} ${i} ( ${e.elapsedTime} ms)`,e.result)}else{if(s.type!==Os.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${r}`);{const{result:t}=s;console.warn(`[SocketService handleRpcReplies()] RPC METHOD HAS BEEN SKIPPED rpcid=${r} method=${i}`,t);const n=Object.assign(Object.assign({},e.state.rpcMethodTracker[r]),{error:new Error("SDK_CONNECTION_ISSUE")});e.emit(ws.RPC_UPDATE,n);const o={data:Object.assign(Object.assign({},n),{jsonrpc:"2.0"}),name:"metamask-provider"};e.emit(ws.MESSAGE,{message:o})}}}catch(e){throw console.warn(`[SocketService handleRpcReplies()] Error rpcId=${t.id} ${i}`,e),e}}))}(e,t).catch((e=>{console.warn("Error handleRpcReplies",e)})))}const Ps=[{event:"clients_connected",handler:function(e,t){return n=>Qo(this,void 0,void 0,(function*(){var n,r,i,o,s,a,c,d;as.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected-${t}'  resumed=${e.state.resumed}  clientsPaused=${e.state.clientsPaused} keysExchanged=${null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged()} isOriginator=${e.state.isOriginator}`),e.emit(ws.CLIENTS_CONNECTED,{isOriginator:e.state.isOriginator,keysExchanged:null===(r=e.state.keyExchange)||void 0===r?void 0:r.areKeysExchanged(),context:e.state.context}),e.state.resumed?(e.state.isOriginator||(as.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} 'clients_connected' / keysExchanged=${null===(i=e.state.keyExchange)||void 0===i?void 0:i.areKeysExchanged()} -- backward compatibility`),null===(o=e.state.keyExchange)||void 0===o||o.start({isOriginator:null!==(s=e.state.isOriginator)&&void 0!==s&&s})),e.state.resumed=!1):e.state.clientsPaused?as.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause"):e.state.isOriginator||(as.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${null===(a=e.state.keyExchange)||void 0===a?void 0:a.areKeysExchanged()} -- backward compatibility`),null===(c=e.state.keyExchange)||void 0===c||c.start({isOriginator:null!==(d=e.state.isOriginator)&&void 0!==d&&d,force:!0})),e.state.clientsConnected=!0,e.state.clientsPaused=!1}))}},{event:"channel_created",handler:function(e,t){return n=>{as.SocketService(`[SocketService: handleChannelCreated()] context=${e.state.context} on 'channel_created-${t}'`,n),e.emit(ws.CHANNEL_CREATED,n)}}},{event:"clients_disconnected",handler:function(e,t){return()=>{var n;e.state.clientsConnected=!1,as.SocketService(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}'`),e.state.isOriginator&&!e.state.clientsPaused&&(null===(n=e.state.keyExchange)||void 0===n||n.clean()),e.emit(ws.CLIENTS_DISCONNECTED,t)}}},{event:"message",handler:function(e,t){return({id:n,message:r,error:i})=>{var o,s,a,c,d,u,l,f,h,p,A,g,m,v,b,y,w;if(as.SocketService(`[SocketService handleMessage()] context=${e.state.context} on 'message' ${t} keysExchanged=${null===(o=e.state.keyExchange)||void 0===o?void 0:o.areKeysExchanged()}`,r),i)throw as.SocketService(`\n      [SocketService handleMessage()] context=${e.state.context}::on 'message' error=${i}`),new Error(i);try{!function(e,t){if(t!==e.channelId)throw e.debug&&console.error(`Wrong id ${t} - should be ${e.channelId}`),new Error("Wrong id")}(e.state,n)}catch(e){return void console.error("ignore message --- wrong id ",r)}if(e.state.isOriginator&&(null==r?void 0:r.type)===Ss.KEY_HANDSHAKE_START)return as.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received HANDSHAKE_START isOriginator=${e.state.isOriginator}`,r),void(null===(s=e.state.keyExchange)||void 0===s||s.start({isOriginator:null!==(a=e.state.isOriginator)&&void 0!==a&&a,force:!0}));if((null==r?void 0:r.type)===_s.PING)return as.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' ping `),void e.emit(ws.MESSAGE,{message:{type:"ping"}});if(as.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' originator=${e.state.isOriginator}, type=${null==r?void 0:r.type}, keysExchanged=${null===(c=e.state.keyExchange)||void 0===c?void 0:c.areKeysExchanged()}`),null===(d=null==r?void 0:r.type)||void 0===d?void 0:d.startsWith("key_handshake"))return as.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' emit KEY_EXCHANGE`,r),void e.emit(Es.KEY_EXCHANGE,{message:r,context:e.state.context});if(null===(u=e.state.keyExchange)||void 0===u?void 0:u.areKeysExchanged()){if(-1!==r.toString().indexOf("type"))return console.warn("[SocketService handleMessage() ::on 'message' received non encrypted unkwown message"),void e.emit(ws.MESSAGE,r)}else{let t=!1;try{null===(l=e.state.keyExchange)||void 0===l||l.decryptMessage(r),t=!0}catch(e){}if(!t)return e.state.isOriginator?null===(h=e.state.keyExchange)||void 0===h||h.start({isOriginator:null!==(p=e.state.isOriginator)&&void 0!==p&&p}):e.sendMessage({type:Ss.KEY_HANDSHAKE_START}),void console.warn(`Message ignored because invalid key exchange status. step=${null===(A=e.state.keyExchange)||void 0===A?void 0:A.getKeyInfo().step}`,null===(g=e.state.keyExchange)||void 0===g?void 0:g.getKeyInfo(),r);console.warn("Invalid key exchange status detected --- updating it."),null===(f=e.state.keyExchange)||void 0===f||f.setKeysExchanged(!0)}const E=null===(m=e.state.keyExchange)||void 0===m?void 0:m.decryptMessage(r),S=JSON.parse(null!=E?E:"{}");if((null==S?void 0:S.type)===_s.PAUSE?e.state.clientsPaused=!0:e.state.clientsPaused=!1,e.state.isOriginator&&S.data){const t=S.data,n=e.state.rpcMethodTracker[t.id];if(n){const r=Date.now()-n.timestamp;as.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received answer for id=${t.id} method=${n.method} responseTime=${r}`,S),e.remote.state.analytics&&xs.includes(n.method.toLowerCase())&&fs({id:null!==(v=e.remote.state.channelId)&&void 0!==v?v:"",event:Rs.SDK_RPC_REQUEST_DONE,sdkVersion:e.remote.state.sdkVersion,commLayerVersion:ps,walletVersion:null===(b=e.remote.state.walletInfo)||void 0===b?void 0:b.version,params:{method:n.method,from:"mobile"}},e.remote.state.communicationServerUrl).catch((e=>{console.error("Cannot send analytics",e)}));const i=Object.assign(Object.assign({},n),{result:t.result,error:t.error?{code:null===(y=t.error)||void 0===y?void 0:y.code,message:null===(w=t.error)||void 0===w?void 0:w.message}:void 0,elapsedTime:r});e.state.rpcMethodTracker[t.id]=i,e.emit(ws.RPC_UPDATE,i)}}e.emit(ws.MESSAGE,{message:S})}}},{event:"clients_waiting_to_join",handler:function(e,t){return n=>{as.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${e.state.context} on 'clients_waiting_to_join-${t}'`,n),e.emit(ws.CLIENTS_WAITING,n)}}}],Ns=[{event:ws.KEY_INFO,handler:function(e){return t=>{as.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",t),e.emit(ws.KEY_INFO,t)}}},{event:ws.KEYS_EXCHANGED,handler:function(e){return()=>{var t,n;as.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged()}`),e.emit(ws.KEYS_EXCHANGED,{keysExchanged:null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged(),isOriginator:e.state.isOriginator});const r={keyInfo:e.getKeyInfo()};e.emit(ws.SERVICE_STATUS,r)}}}];function Ls(e,t){as.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} setting socket listeners for channel ${t}...`);const{socket:n}=e.state,{keyExchange:r}=e.state;e.state.setupChannelListeners&&console.warn(`[SocketService: setupChannelListener()] context=${e.state.context} socket listeners already set up for channel ${t}`),n&&e.state.isOriginator&&(e.state.debug&&(null==n||n.io.on("error",(t=>{as.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=error`,t)})),null==n||n.io.on("reconnect",(t=>{as.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect`,t)})),null==n||n.io.on("reconnect_error",(t=>{as.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_error`,t)})),null==n||n.io.on("reconnect_failed",(()=>{as.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_failed`)})),null==n||n.io.on("ping",(()=>{as.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=ping`)}))),null==n||n.on("disconnect",(t=>(as.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${t}' begin recovery...`),function(e){return t=>{as.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${e.state.manualDisconnect}`,t),e.state.manualDisconnect||(e.emit(ws.SOCKET_DISCONNECTED),function(e){"undefined"!=typeof window&&"undefined"!=typeof document&&(as.SocketService(`[SocketService: checkFocusAndReconnect()] hasFocus=${document.hasFocus()}`,e),document.hasFocus()?Is(e).then((t=>{as.SocketService(`SocketService::checkFocus reconnectSocket success=${t}`,e)})).catch((e=>{console.error("SocketService::checkFocus Error reconnecting socket",e)})):window.addEventListener("focus",(()=>{Is(e).catch((e=>{console.error("SocketService::checkFocus Error reconnecting socket",e)}))}),{once:!0}))}(e))}}(e)(t))))),Ps.forEach((({event:r,handler:i})=>{const o=`${r}-${t}`;null==n||n.on(o,i(e,t))})),Ns.forEach((({event:t,handler:n})=>{null==r||r.on(t,n(e))})),e.state.setupChannelListeners=!0}class Ds extends ii.EventEmitter2{constructor({otherPublicKey:e,reconnect:t,communicationLayerPreference:n,transports:r,communicationServerUrl:i,context:o,ecies:s,remote:a,logging:c}){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:""},this.state.resumed=t,this.state.context=o,this.state.communicationLayerPreference=n,this.state.debug=!0===(null==c?void 0:c.serviceLayer),this.remote=a,!0===(null==c?void 0:c.serviceLayer)&&ns.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==As&&!0===(null==c?void 0:c.plaintext);const d={autoConnect:!1,transports:gs,withCredentials:!0};r&&(d.transports=r),as.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.state.socket=Yo(i,d);const u={communicationLayer:this,otherPublicKey:e,sendPublicKey:!1,context:this.state.context,ecies:s,logging:c};this.state.keyExchange=new Cs(u)}resetKeys(){return this,as.SocketService("[SocketService: resetKeys()] Resetting keys."),void(null===(e=this.state.keyExchange)||void 0===e||e.resetKeys());var e}createChannel(){return function(e){var t,n,r,i;as.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),(null===(t=e.state.socket)||void 0===t?void 0:t.connected)||null===(n=e.state.socket)||void 0===n||n.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const o=li();return e.state.channelId=o,Ls(e,o),null===(r=e.state.socket)||void 0===r||r.emit(ws.JOIN_CHANNEL,o,`${e.state.context}createChannel`),{channelId:o,pubKey:(null===(i=e.state.keyExchange)||void 0===i?void 0:i.getMyPublicKey())||""}}(this)}connectToChannel({channelId:e,isOriginator:t=!1,withKeyExchange:n=!1}){return function({options:e,instance:t}){var n,r,i,o;const{channelId:s,withKeyExchange:a,isOriginator:c}=e;if(as.SocketService(`[SocketService: connectToChannel()] context=${t.state.context} channelId=${s} isOriginator=${c}`,null===(n=t.state.keyExchange)||void 0===n?void 0:n.toString()),null===(r=t.state.socket)||void 0===r?void 0:r.connected)throw new Error("socket already connected");t.state.manualDisconnect=!1,null===(i=t.state.socket)||void 0===i||i.connect(),t.state.withKeyExchange=a,t.state.isOriginator=c,t.state.channelId=s,Ls(t,s),null===(o=t.state.socket)||void 0===o||o.emit(ws.JOIN_CHANNEL,s,`${t.state.context}_connectToChannel`)}({options:{channelId:e,isOriginator:t,withKeyExchange:n},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,t;null===(t=(e=this).state.socket)||void 0===t||t.emit(ws.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Ss.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return Ts(this,e)}ping(){return e=this,as.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged()}`),e.state.isOriginator&&((null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged())?(console.warn(`[SocketService:ping()] context=${e.state.context} sending READY message`),e.sendMessage({type:_s.READY})):(console.warn(`[SocketService: ping()] context=${e.state.context} starting key exchange`),null===(r=e.state.keyExchange)||void 0===r||r.start({isOriginator:null!==(i=e.state.isOriginator)&&void 0!==i&&i}))),void(null===(o=e.state.socket)||void 0===o||o.emit(ws.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:_s.PING}}));var e,t,n,r,i,o}pause(){return e=this,as.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,(null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged())&&e.sendMessage({type:_s.PAUSE}),void(null===(n=e.state.socket)||void 0===n||n.disconnect());var e,t,n}isConnected(){var e;return null===(e=this.state.socket)||void 0===e?void 0:e.connected}resume(){return e=this,as.SocketService(`[SocketService: resume()] context=${e.state.context} connected=${null===(t=e.state.socket)||void 0===t?void 0:t.connected} manualDisconnect=${e.state.manualDisconnect} resumed=${e.state.resumed} keysExchanged=${null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged()}`),(null===(r=e.state.socket)||void 0===r?void 0:r.connected)?as.SocketService("[SocketService: resume()] already connected."):(null===(i=e.state.socket)||void 0===i||i.connect(),as.SocketService(`[SocketService: resume()] after connecting socket --\x3e connected=${null===(o=e.state.socket)||void 0===o?void 0:o.connected}`),null===(s=e.state.socket)||void 0===s||s.emit(ws.JOIN_CHANNEL,e.state.channelId,`${e.state.context}_resume`)),(null===(a=e.state.keyExchange)||void 0===a?void 0:a.areKeysExchanged())?e.state.isOriginator||e.sendMessage({type:_s.READY}):e.state.isOriginator||null===(c=e.state.keyExchange)||void 0===c||c.start({isOriginator:null!==(d=e.state.isOriginator)&&void 0!==d&&d}),e.state.manualDisconnect=!1,void(e.state.resumed=!0);var e,t,n,r,i,o,s,a,c,d}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return function(e,t){var n,r;as.SocketService(`[SocketService: disconnect()] context=${e.state.context}`,t),(null==t?void 0:t.terminate)&&(e.state.channelId=t.channelId,null===(n=e.state.keyExchange)||void 0===n||n.clean()),e.state.rpcMethodTracker={},e.state.manualDisconnect=!0,null===(r=e.state.socket)||void 0===r||r.disconnect()}(this,e)}}var js,Bs,Fs;function Ks(e){return()=>Qo(this,void 0,void 0,(function*(){var t,n,r;const{state:i}=e;if(i.authorized)return;yield(()=>Qo(this,void 0,void 0,(function*(){for(;!i.walletInfo;)yield Ms(500)})))();const o="7.3".localeCompare((null===(t=i.walletInfo)||void 0===t?void 0:t.version)||"");if(as.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${null===(n=i.walletInfo)||void 0===n?void 0:n.version} compareValue=${o}`),1!==o)return;const s=i.platformType===Bs.MobileWeb||i.platformType===Bs.ReactNative||i.platformType===Bs.MetaMaskMobileWebview;as.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${s} channel=${i.channelId} walletVersion=${null===(r=i.walletInfo)||void 0===r?void 0:r.version}`),s&&(i.authorized=!0,e.emit(ws.AUTHORIZED))}))}function $s(e){return t=>{const{state:n}=e;as.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${t}`),e.emit(ws.CHANNEL_CREATED,t)}}function Us(e,t){return()=>{var n,r,i,o;const{state:s}=e;if(as.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${s.channelId} keysExchanged=${null===(r=null===(n=s.communicationLayer)||void 0===n?void 0:n.getKeyInfo())||void 0===r?void 0:r.keysExchanged}`),s.analytics){const e=s.isOriginator?Rs.REQUEST:Rs.REQUEST_MOBILE;fs(Object.assign(Object.assign({id:null!==(i=s.channelId)&&void 0!==i?i:"",event:s.reconnection?Rs.RECONNECT:e},s.originatorInfo),{commLayer:t,sdkVersion:s.sdkVersion,walletVersion:null===(o=s.walletInfo)||void 0===o?void 0:o.version,commLayerVersion:ps}),s.communicationServerUrl).catch((e=>{console.error("Cannot send analytics",e)}))}s.clientsConnected=!0,s.originatorInfoSent=!1,e.emit(ws.CLIENTS_CONNECTED)}}function zs(e,t){return n=>{var r;const{state:i}=e;as.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${i.context} on 'clients_disconnected' channelId=${n}`),i.clientsConnected=!1,e.emit(ws.CLIENTS_DISCONNECTED,i.channelId),e.setConnectionStatus(ys.DISCONNECTED),i.ready=!1,i.authorized=!1,i.analytics&&i.channelId&&fs({id:i.channelId,event:Rs.DISCONNECTED,sdkVersion:i.sdkVersion,commLayer:t,commLayerVersion:ps,walletVersion:null===(r=i.walletInfo)||void 0===r?void 0:r.version},i.communicationServerUrl).catch((e=>{console.error("Cannot send analytics",e)}))}}function qs(e){return t=>{var n;const{state:r}=e;if(as.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${t} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),e.setConnectionStatus(ys.WAITING),e.emit(ws.CLIENTS_WAITING,t),r.originatorConnectStarted){as.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const t=(null===(n=r.autoConnectOptions)||void 0===n?void 0:n.timeout)||3e3,i=setTimeout((()=>{as.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${t}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||e.setConnectionStatus(ys.TIMEOUT),clearTimeout(i)}),t)}}}function Vs(e,t){return n=>{var r,i,o,s,a;const{state:c}=e;as.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${c.context} on commLayer.'keys_exchanged' channel=${c.channelId}`,n),(null===(i=null===(r=c.communicationLayer)||void 0===r?void 0:r.getKeyInfo())||void 0===i?void 0:i.keysExchanged)&&e.setConnectionStatus(ys.LINKED),function(e,t){var n,r,i,o;const{state:s}=e;as.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${s.channelId}`,t);const a={channelId:null!==(n=s.channelId)&&void 0!==n?n:"",validUntil:null!==(i=null===(r=s.channelConfig)||void 0===r?void 0:r.validUntil)&&void 0!==i?i:0,lastActive:t.getTime()};null===(o=s.storageManager)||void 0===o||o.persistChannelConfig(a)}(e,new Date),c.analytics&&c.channelId&&fs({id:c.channelId,event:n.isOriginator?Rs.CONNECTED:Rs.CONNECTED_MOBILE,sdkVersion:c.sdkVersion,commLayer:t,commLayerVersion:ps,walletVersion:null===(o=c.walletInfo)||void 0===o?void 0:o.version},c.communicationServerUrl).catch((e=>{console.error("Cannot send analytics",e)})),c.isOriginator=n.isOriginator,n.isOriginator||(null===(s=c.communicationLayer)||void 0===s||s.sendMessage({type:_s.READY}),c.ready=!0,c.paused=!1),n.isOriginator&&!c.originatorInfoSent&&(null===(a=c.communicationLayer)||void 0===a||a.sendMessage({type:_s.ORIGINATOR_INFO,originatorInfo:c.originatorInfo,originator:c.originatorInfo}),c.originatorInfoSent=!0)}}function Hs(e){return t=>{let n=t;t.message&&(n=n.message),function(e,t){const{state:n}=t;if(as.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${n.context} on 'message' typeof=${typeof e}`,e),t.state.ready=!0,n.isOriginator||e.type!==_s.ORIGINATOR_INFO)if(n.isOriginator&&e.type===_s.WALLET_INFO)!function(e,t){const{state:n}=e;n.walletInfo=t.walletInfo,n.paused=!1}(t,e);else{if(e.type===_s.TERMINATE)!function(e){const{state:t}=e;t.isOriginator&&(Gs({options:{terminate:!0,sendMessage:!1},instance:e}),console.debug(),e.emit(ws.TERMINATE))}(t);else if(e.type===_s.PAUSE)!function(e){const{state:t}=e;t.paused=!0,e.setConnectionStatus(ys.PAUSED)}(t);else if(e.type===_s.READY&&n.isOriginator)!function(e){const{state:t}=e;e.setConnectionStatus(ys.LINKED);const n=t.paused;t.paused=!1,e.emit(ws.CLIENTS_READY,{isOriginator:t.isOriginator,walletInfo:t.walletInfo}),n&&(t.authorized=!0,e.emit(ws.AUTHORIZED))}(t);else{if(e.type===_s.OTP&&n.isOriginator)return void function(e,t){var n;const{state:r}=e;e.emit(ws.OTP,t.otpAnswer),1==="6.6".localeCompare((null===(n=r.walletInfo)||void 0===n?void 0:n.version)||"")&&(console.warn("RemoteCommunication::on 'otp' -- backward compatibility <6.6 -- triger eth_requestAccounts"),e.emit(ws.SDK_RPC_CALL,{method:vs.ETH_REQUESTACCOUNTS,params:[]}))}(t,e);e.type===_s.AUTHORIZED&&n.isOriginator&&function(e){const{state:t}=e;t.authorized=!0,e.emit(ws.AUTHORIZED)}(t)}t.emit(ws.MESSAGE,e)}else!function(e,t){var n;const{state:r}=e;null===(n=r.communicationLayer)||void 0===n||n.sendMessage({type:_s.WALLET_INFO,walletInfo:r.walletInfo}),r.originatorInfo=t.originatorInfo||t.originator,e.emit(ws.CLIENTS_READY,{isOriginator:r.isOriginator,originatorInfo:r.originatorInfo}),r.paused=!1}(t,e)}(n,e)}}function Ws(e){return()=>{const{state:t}=e;as.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),t.ready=!1,t.authorized=!1,bs(t),e.emitServiceStatusEvent()}}function Js(e){return()=>{const{state:t}=e;as.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),t.ready=!1}}function Gs({options:e,instance:t}){var n,r,i,o,s,a;const{state:c}=t;as.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${c.channelId}`,e),c.ready=!1,c.paused=!1,(null==e?void 0:e.terminate)?(null===(n=c.storageManager)||void 0===n||n.terminate(null!==(r=c.channelId)&&void 0!==r?r:""),(null===(i=c.communicationLayer)||void 0===i?void 0:i.getKeyInfo().keysExchanged)&&(null==e?void 0:e.sendMessage)&&(null===(o=c.communicationLayer)||void 0===o||o.sendMessage({type:_s.TERMINATE})),c.channelId=li(),e.channelId=c.channelId,c.channelConfig=void 0,c.originatorConnectStarted=!1,null===(s=c.communicationLayer)||void 0===s||s.disconnect(e),t.setConnectionStatus(ys.TERMINATED)):(null===(a=c.communicationLayer)||void 0===a||a.disconnect(e),t.setConnectionStatus(ys.DISCONNECTED))}(js||(js={})).SOCKET="socket",function(e){e.NonBrowser="nodejs",e.MetaMaskMobileWebview="in-app-browser",e.DesktopWeb="web-desktop",e.MobileWeb="web-mobile",e.ReactNative="react-native"}(Bs||(Bs={}));class Ys extends ii.EventEmitter2{constructor({platformType:e,communicationLayerPreference:t,otherPublicKey:n,reconnect:r,walletInfo:i,dappMetadata:o,transports:s,context:a,ecies:c,analytics:d=!1,storage:u,sdkVersion:l,communicationServerUrl:f=As,logging:h,autoConnect:p={timeout:3e3}}){super(),this.state={ready:!1,authorized:!1,isOriginator:!1,paused:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:As,context:"",clientsConnected:!1,sessionDuration:ms,originatorConnectStarted:!1,debug:!1,_connectionStatus:ys.DISCONNECTED},this.state.otherPublicKey=n,this.state.dappMetadata=o,this.state.walletInfo=i,this.state.transports=s,this.state.platformType=e,this.state.analytics=d,this.state.isOriginator=!n,this.state.communicationServerUrl=f,this.state.context=a,this.state.sdkVersion=l,this.setMaxListeners(50),this.setConnectionStatus(ys.DISCONNECTED),(null==u?void 0:u.duration)&&(this.state.sessionDuration=ms),this.state.storageOptions=u,this.state.autoConnectOptions=p,this.state.debug=!0===(null==h?void 0:h.remoteLayer),!0===(null==h?void 0:h.remoteLayer)&&ns.enable("RemoteCommunication:Layer"),this.state.logging=h,(null==u?void 0:u.storageManager)&&(this.state.storageManager=u.storageManager),this.initCommunicationLayer({communicationLayerPreference:t,otherPublicKey:n,reconnect:r,ecies:c,communicationServerUrl:f}),this.emitServiceStatusEvent()}initCommunicationLayer({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,ecies:r,communicationServerUrl:i=As}){return function({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,ecies:r,communicationServerUrl:i=As,instance:o}){var s,a,c,d,u,l,f,h,p;const{state:A}=o;if(e!==js.SOCKET)throw new Error("Invalid communication protocol");A.communicationLayer=new Ds({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,transports:A.transports,communicationServerUrl:i,context:A.context,ecies:r,logging:A.logging,remote:o});let g="undefined"!=typeof document&&document.URL||"",m="undefined"!=typeof document&&document.title||"";(null===(s=A.dappMetadata)||void 0===s?void 0:s.url)&&(g=A.dappMetadata.url),(null===(a=A.dappMetadata)||void 0===a?void 0:a.name)&&(m=A.dappMetadata.name);const v={url:g,title:m,source:null===(c=A.dappMetadata)||void 0===c?void 0:c.source,dappId:"undefined"==typeof window?null!==(f=null!==(u=null===(d=A.dappMetadata)||void 0===d?void 0:d.name)&&void 0!==u?u:null===(l=A.dappMetadata)||void 0===l?void 0:l.url)&&void 0!==f?f:"unkown":window.location.hostname,icon:(null===(h=A.dappMetadata)||void 0===h?void 0:h.iconUrl)||(null===(p=A.dappMetadata)||void 0===p?void 0:p.base64Icon),platform:A.platformType,apiVersion:ps};A.originatorInfo=v;const b={[ws.AUTHORIZED]:Ks(o),[ws.MESSAGE]:Hs(o),[ws.CLIENTS_CONNECTED]:Us(o,e),[ws.KEYS_EXCHANGED]:Vs(o,e),[ws.SOCKET_DISCONNECTED]:Js(o),[ws.SOCKET_RECONNECT]:Ws(o),[ws.CLIENTS_DISCONNECTED]:zs(o,e),[ws.KEY_INFO]:()=>{o.emitServiceStatusEvent()},[ws.CHANNEL_CREATED]:$s(o),[ws.CLIENTS_WAITING]:qs(o),[ws.RPC_UPDATE]:e=>{o.emit(ws.RPC_UPDATE,e)}};for(const[e,n]of Object.entries(b))try{A.communicationLayer.on(e,n)}catch(t){console.error(`Error registering handler for ${e}:`,t)}}({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,ecies:r,communicationServerUrl:i,instance:this})}originatorSessionConnect(){return Qo(this,void 0,void 0,(function*(){return yield function(e){var t,n,r;return Qo(this,void 0,void 0,(function*(){const{state:i}=e;if(!i.storageManager)return void as.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const o=yield i.storageManager.getPersistedChannelConfig(null!==(t=i.channelId)&&void 0!==t?t:"");if(as.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${i.originatorConnectStarted} channelConfig`,o),null===(n=i.communicationLayer)||void 0===n?void 0:n.isConnected())return as.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),o;if(o){if(o.validUntil>Date.now())return i.channelConfig=o,i.originatorConnectStarted=!0,i.channelId=null==o?void 0:o.channelId,i.reconnection=!0,null===(r=i.communicationLayer)||void 0===r||r.connectToChannel({channelId:o.channelId,isOriginator:!0}),o;as.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}i.originatorConnectStarted=!1}))}(this)}))}generateChannelIdConnect(){return Qo(this,void 0,void 0,(function*(){return function(e){var t,n,r,i,o;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(null===(t=e.communicationLayer)||void 0===t?void 0:t.isConnected()))return console.warn("Channel already exists -- interrupt generateChannelId",e.channelConfig),e.channelConfig={channelId:e.channelId,validUntil:Date.now()+e.sessionDuration},null===(n=e.storageManager)||void 0===n||n.persistChannelConfig(e.channelConfig),{channelId:e.channelId,pubKey:null===(i=null===(r=e.communicationLayer)||void 0===r?void 0:r.getKeyInfo())||void 0===i?void 0:i.ecies.public};as.RemoteCommunication("[RemoteCommunication: generateChannelId()]"),bs(e);const s=e.communicationLayer.createChannel();as.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",s);const a={channelId:s.channelId,validUntil:Date.now()+e.sessionDuration};return e.channelId=s.channelId,e.channelConfig=a,null===(o=e.storageManager)||void 0===o||o.persistChannelConfig(a),{channelId:e.channelId,pubKey:s.pubKey}}(this.state)}))}clean(){return bs(this.state)}connectToChannel(e,t){return function({channelId:e,withKeyExchange:t,state:n}){var r,i,o;if(!ci(e))throw as.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${n.context} invalid channel channelId=${e}`),new Error(`Invalid channel ${e}`);if(as.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${n.context} channelId=${e}`),null===(r=n.communicationLayer)||void 0===r?void 0:r.isConnected())return void as.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${n.context} already connected - interrupt connection.`);n.channelId=e,null===(i=n.communicationLayer)||void 0===i||i.connectToChannel({channelId:e,withKeyExchange:t});const s={channelId:e,validUntil:Date.now()+n.sessionDuration};n.channelConfig=s,null===(o=n.storageManager)||void 0===o||o.persistChannelConfig(s)}({channelId:e,withKeyExchange:t,state:this.state})}sendMessage(e){return function(e,t){var n,r;return Qo(this,void 0,void 0,(function*(){const{state:i}=e;as.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${i.context} paused=${i.paused} ready=${i.ready} authorized=${i.authorized} socket=${null===(n=i.communicationLayer)||void 0===n?void 0:n.isConnected()} clientsConnected=${i.clientsConnected} status=${i._connectionStatus}`,t),!i.paused&&i.ready&&(null===(r=i.communicationLayer)||void 0===r?void 0:r.isConnected())&&i.clientsConnected||(as.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${i.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise((t=>{e.once(ws.CLIENTS_READY,t)})),as.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${i.context}  AFTER SKIP / READY -- sending pending message`));try{yield function(e,t){return Qo(this,void 0,void 0,(function*(){return new Promise((n=>{var r,i,o,s;const{state:a}=e;if(as.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${a.context} ready=${a.ready} authorized=${a.authorized} method=${t.method}`),1==="7.3".localeCompare((null===(r=a.walletInfo)||void 0===r?void 0:r.version)||""))return as.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] compatibility hack wallet version > ${null===(i=a.walletInfo)||void 0===i?void 0:i.version}`),null===(o=a.communicationLayer)||void 0===o||o.sendMessage(t),void n();!a.isOriginator||a.authorized?(null===(s=a.communicationLayer)||void 0===s||s.sendMessage(t),n()):e.once(ws.AUTHORIZED,(()=>{var e;as.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${a.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),null===(e=a.communicationLayer)||void 0===e||e.sendMessage(t),n()}))}))}))}(e,t)}catch(e){throw console.error(`[RemoteCommunication: sendMessage()] context=${i.context}  ERROR`,e),e}}))}(this,e)}testStorage(){return Qo(this,void 0,void 0,(function*(){return function(e){var t,n;return Qo(this,void 0,void 0,(function*(){const r=yield null===(t=e.storageManager)||void 0===t?void 0:t.getPersistedChannelConfig(null!==(n=e.channelId)&&void 0!==n?n:"");as.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)}))}(this.state)}))}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){var e;as.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),null===(e=this.state.communicationLayer)||void 0===e||e.ping()}keyCheck(){var e;as.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),null===(e=this.state.communicationLayer)||void 0===e||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(ws.CONNECTION_STATUS,e),this.emitServiceStatusEvent())}emitServiceStatusEvent(){this.emit(ws.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getKeyInfo()}resetKeys(){var e;null===(e=this.state.communicationLayer)||void 0===e||e.resetKeys()}setOtherPublicKey(e){var t;const n=null===(t=this.state.communicationLayer)||void 0===t?void 0:t.getKeyExchange();if(!n)throw new Error("KeyExchange is not initialized.");n.getOtherPublicKey()!==e&&n.setOtherPublicKey(e)}pause(){var e;as.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),null===(e=this.state.communicationLayer)||void 0===e||e.pause(),this.setConnectionStatus(ys.PAUSED)}getVersion(){return ps}resume(){return function(e){var t;const{state:n}=e;as.RemoteCommunication(`[RemoteCommunication: resume()] channel=${n.channelId}`),null===(t=n.communicationLayer)||void 0===t||t.resume(),e.setConnectionStatus(ys.LINKED)}(this)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getRPCMethodTracker()}disconnect(e){return Gs({options:e,instance:this})}}function Qs(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function Xs(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function Zs(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}!function(e){e.RENEW="renew",e.LINK="link"}(Fs||(Fs={})),"function"==typeof SuppressedError&&SuppressedError;var ea="ERC721",ta="ERC1155",na={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`MetaMask: Connected to chain with ID "${e}".`},warnings:{chainIdDeprecation:"MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",networkVersionDeprecation:"MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",selectedAddressDeprecation:"MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",enableDeprecation:"MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sendDeprecation:"MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",events:{close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},rpc:{ethDecryptDeprecation:"MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",ethGetEncryptionPublicKeyDeprecation:"MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",walletWatchAssetNFTExperimental:"MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle"},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function ra(e){const t={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{t.ethDecryptDeprecation||"eth_decrypt"!==n.method?t.ethGetEncryptionPublicKeyDeprecation||"eth_getEncryptionPublicKey"!==n.method?!t.walletWatchAssetNFTExperimental&&"wallet_watchAsset"===n.method&&[ea,ta].includes(n.params?.type||"")&&(e.warn(na.warnings.rpc.walletWatchAssetNFTExperimental),t.walletWatchAssetNFTExperimental=!0):(e.warn(na.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),t.ethGetEncryptionPublicKeyDeprecation=!0):(e.warn(na.warnings.rpc.ethDecryptDeprecation),t.ethDecryptDeprecation=!0),i()}}var ia={},oa={},sa=s&&s.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(oa,"__esModule",{value:!0}),oa.createAsyncMiddleware=void 0,oa.createAsyncMiddleware=function(e){return(t,n,r,i)=>sa(this,void 0,void 0,(function*(){let o;const s=new Promise((e=>{o=e}));let a=null,c=!1;const d=()=>sa(this,void 0,void 0,(function*(){return c=!0,r((e=>{a=e,o()})),s}));try{yield e(t,n,d),c?(yield s,a(null)):i(null)}catch(e){a?a(e):i(e)}}))};var aa={};Object.defineProperty(aa,"__esModule",{value:!0}),aa.createScaffoldMiddleware=void 0,aa.createScaffoldMiddleware=function(e){return(t,n,r,i)=>{const o=e[t.method];return void 0===o?r():"function"==typeof o?o(t,n,r,i):(n.result=o,i())}};var ca={};Object.defineProperty(ca,"__esModule",{value:!0}),ca.getUniqueId=void 0;const da=4294967295;let ua=Math.floor(Math.random()*da);ca.getUniqueId=function(){return ua=(ua+1)%da,ua};var la={};Object.defineProperty(la,"__esModule",{value:!0}),la.createIdRemapMiddleware=void 0;const fa=ca;la.createIdRemapMiddleware=function(){return(e,t,n,r)=>{const i=e.id,o=(0,fa.getUniqueId)();e.id=o,t.id=o,n((n=>{e.id=i,t.id=i,n()}))}};var ha={},pa={},Aa={},ga={},ma={},va={};Object.defineProperty(va,"__esModule",{value:!0});va.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},va.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};var ba={},ya={},wa={},Ea={},Sa={},_a={};Object.defineProperty(_a,"__esModule",{value:!0});var Ca=(e=>(e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date",e))(Ca||{}),Ma=/"|\\|\n|\r|\t/gu;function ka(e){return e.charCodeAt(0)<=127}_a.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},_a.isNullOrUndefined=function(e){return null==e},_a.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},_a.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),_a.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},_a.JsonSize=Ca,_a.ESCAPE_CHARACTERS_REGEXP=Ma,_a.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},_a.isASCII=ka,_a.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>ka(t)?e+1:e+2),0)+(t=e.match(Ma),n=()=>[],null!=t?t:n()).length;var t,n},_a.calculateNumberSize=function(e){return e.toString().length};let Ia=class e extends Error{constructor(t,{cause:n}={}){super(t),this.name=e.name,n&&(this.cause=n),this.message=t}};var Ra=c(Object.freeze({__proto__:null,ErrorWithCause:Ia}));const Oa=e=>{if(e&&"object"==typeof e&&"cause"in e){if("function"==typeof e.cause){const t=e.cause();return t instanceof Error?t:void 0}return e.cause instanceof Error?e.cause:void 0}},xa=(e,t)=>{if(!(e instanceof Error))return"";const n=e.stack||"";if(t.has(e))return n+"\ncauses have become circular...";const r=Oa(e);return r?(t.add(e),n+"\ncaused by: "+xa(r,t)):n},Ta=(e,t,n)=>{if(!(e instanceof Error))return"";const r=n?"":e.message||"";if(t.has(e))return r+": ...";const i=Oa(e);if(i){t.add(e);const n="cause"in e&&"function"==typeof e.cause;return r+(n?"":": ")+Ta(i,t,n)}return r};var Pa=c(Object.freeze({__proto__:null,findCauseByReference:(e,t)=>{if(!e||!t)return;if(!(e instanceof Error))return;if(!(t.prototype instanceof Error)&&t!==Error)return;const n=new Set;let r=e;for(;r&&!n.has(r);){if(n.add(r),r instanceof t)return r;r=Oa(r)}},getErrorCause:Oa,messageWithCauses:e=>Ta(e,new Set),stackWithCauses:e=>xa(e,new Set)}));const{ErrorWithCause:Na}=Ra,{findCauseByReference:La,getErrorCause:Da,messageWithCauses:ja,stackWithCauses:Ba}=Pa;var Fa={ErrorWithCause:Na,findCauseByReference:La,getErrorCause:Da,stackWithCauses:Ba,messageWithCauses:ja};Object.defineProperty(Sa,"__esModule",{value:!0});var Ka=_a,$a=Fa;function Ua(e){return"object"==typeof e&&null!==e&&"code"in e}function za(e){return"object"==typeof e&&null!==e&&"message"in e}Sa.isErrorWithCode=Ua,Sa.isErrorWithMessage=za,Sa.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},Sa.getErrorMessage=function(e){return za(e)&&"string"==typeof e.message?e.message:Ka.isNullOrUndefined.call(void 0,e)?"":String(e)},Sa.wrapError=function(e,t){if((n=e)instanceof Error||Ka.isObject.call(void 0,n)&&"Error"===n.constructor.name){let n;return n=2===Error.length?new Error(t,{cause:e}):new $a.ErrorWithCause(t,{cause:e}),Ua(e)&&(n.code=e.code),n}var n;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))};var qa={exports:{}};!function(e){class t extends TypeError{constructor(e,t){let n;const{message:r,explanation:i,...o}=e,{path:s}=e,a=0===s.length?r:`At path: ${s.join(".")} -- ${r}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function n(e){return r(e)&&"function"==typeof e[Symbol.iterator]}function r(e){return"object"==typeof e&&null!=e}function i(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function o(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function s(e){const{done:t,value:n}=e.next();return t?void 0:n}function a(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:a}=n,{refinement:c,message:d=`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${o(r)}\``}=e;return{value:r,type:a,refinement:c,key:i[i.length-1],path:i,branch:s,...e,message:d}}function*c(e,t,r,i){n(e)||(e=[e]);for(const n of e){const e=a(n,t,r,i);e&&(yield e)}}function*d(e,t,n={}){const{path:i=[],branch:o=[e],coerce:s=!1,mask:a=!1}=n,c={path:i,branch:o};if(s&&(e=t.coercer(e,c),a&&"type"!==t.type&&r(t.schema)&&r(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let u="valid";for(const r of t.validator(e,c))r.explanation=n.message,u="not_valid",yield[r,void 0];for(let[l,f,h]of t.entries(e,c)){const t=d(f,h,{path:void 0===l?i:[...i,l],branch:void 0===l?o:[...o,f],coerce:s,mask:a,message:n.message});for(const n of t)n[0]?(u=null!=n[0].refinement?"not_refined":"not_valid",yield[n[0],void 0]):s&&(f=n[1],void 0===l?e=f:e instanceof Map?e.set(l,f):e instanceof Set?e.add(f):r(e)&&(void 0!==f||l in e)&&(e[l]=f))}if("not_valid"!==u)for(const r of t.refiner(e,c))r.explanation=n.message,u="not_refined",yield[r,void 0];"valid"===u&&(yield[void 0,e])}class u{constructor(e){const{type:t,schema:n,validator:r,refiner:i,coercer:o=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=n,this.entries=s,this.coercer=o,this.validator=r?(e,t)=>c(r(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>c(i(e,t),t,this,e):()=>[]}assert(e,t){return l(e,this,t)}create(e,t){return f(e,this,t)}is(e){return p(e,this)}mask(e,t){return h(e,this,t)}validate(e,t={}){return A(e,this,t)}}function l(e,t,n){const r=A(e,t,{message:n});if(r[0])throw r[0]}function f(e,t,n){const r=A(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function h(e,t,n){const r=A(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function p(e,t){return!A(e,t)[0]}function A(e,n,r={}){const i=d(e,n,r),o=s(i);if(o[0]){const e=new t(o[0],(function*(){for(const e of i)e[0]&&(yield e[0])}));return[e,void 0]}return[void 0,o[1]]}function g(...e){const t="type"===e[0].type,n=e.map((e=>e.schema)),r=Object.assign({},...n);return t?W(r):K(r)}function m(e,t){return new u({type:e,schema:null,validator:t})}function v(e,t){return new u({...e,refiner:(t,n)=>void 0===t||e.refiner(t,n),validator:(n,r)=>void 0===n||(t(n,r),e.validator(n,r))})}function b(e){return new u({type:"dynamic",schema:null,*entries(t,n){const r=e(t,n);yield*r.entries(t,n)},validator:(t,n)=>e(t,n).validator(t,n),coercer:(t,n)=>e(t,n).coercer(t,n),refiner:(t,n)=>e(t,n).refiner(t,n)})}function y(e){let t;return new u({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function w(e,t){const{schema:n}=e,r={...n};for(const e of t)delete r[e];return"type"===e.type?W(r):K(r)}function E(e){const t=e instanceof u?{...e.schema}:{...e};for(const e in t)t[e]=$(t[e]);return K(t)}function S(e,t){const{schema:n}=e,r={};for(const e of t)r[e]=n[e];return K(r)}function _(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),m(e,t)}function C(){return m("any",(()=>!0))}function M(e){return new u({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${o(e)}`})}function k(){return m("bigint",(e=>"bigint"==typeof e))}function I(){return m("boolean",(e=>"boolean"==typeof e))}function R(){return m("date",(e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${o(e)}`))}function O(e){const t={},n=e.map((e=>o(e))).join();for(const n of e)t[n]=n;return new u({type:"enums",schema:t,validator:t=>e.includes(t)||`Expected one of \`${n}\`, but received: ${o(t)}`})}function x(){return m("func",(e=>"function"==typeof e||`Expected a function, but received: ${o(e)}`))}function T(e){return m("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${o(t)}`))}function P(){return m("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${o(e)}`))}function N(e){return new u({type:"intersection",schema:null,*entries(t,n){for(const r of e)yield*r.entries(t,n)},*validator(t,n){for(const r of e)yield*r.validator(t,n)},*refiner(t,n){for(const r of e)yield*r.refiner(t,n)}})}function L(e){const t=o(e),n=typeof e;return new u({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${o(n)}`})}function D(e,t){return new u({type:"map",schema:null,*entries(n){if(e&&t&&n instanceof Map)for(const[r,i]of n.entries())yield[r,r,e],yield[r,i,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${o(e)}`})}function j(){return m("never",(()=>!1))}function B(e){return new u({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function F(){return m("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${o(e)}`))}function K(e){const t=e?Object.keys(e):[],n=j();return new u({type:"object",schema:e||null,*entries(i){if(e&&r(i)){const r=new Set(Object.keys(i));for(const n of t)r.delete(n),yield[n,i[n],e[n]];for(const e of r)yield[e,i[e],n]}},validator:e=>r(e)||`Expected an object, but received: ${o(e)}`,coercer:e=>r(e)?{...e}:e})}function $(e){return new u({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function U(e,t){return new u({type:"record",schema:null,*entries(n){if(r(n))for(const r in n){const i=n[r];yield[r,r,e],yield[r,i,t]}},validator:e=>r(e)||`Expected an object, but received: ${o(e)}`})}function z(){return m("regexp",(e=>e instanceof RegExp))}function q(e){return new u({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const n of t)yield[n,n,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${o(e)}`})}function V(){return m("string",(e=>"string"==typeof e||`Expected a string, but received: ${o(e)}`))}function H(e){const t=j();return new u({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${o(e)}`})}function W(e){const t=Object.keys(e);return new u({type:"type",schema:e,*entries(n){if(r(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>r(e)||`Expected an object, but received: ${o(e)}`,coercer:e=>r(e)?{...e}:e})}function J(e){const t=e.map((e=>e.type)).join(" | ");return new u({type:"union",schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){const i=[];for(const t of e){const[...e]=d(n,t,r),[o]=e;if(!o[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${o(n)}`,...i]}})}function G(){return m("unknown",(()=>!0))}function Y(e,t,n){return new u({...e,coercer:(r,i)=>p(r,t)?e.coercer(n(r,i),i):e.coercer(r,i)})}function Q(e,t,n={}){return Y(e,G(),(e=>{const r="function"==typeof t?t():t;if(void 0===e)return r;if(!n.strict&&i(e)&&i(r)){const t={...e};let n=!1;for(const e in r)void 0===t[e]&&(t[e]=r[e],n=!0);if(n)return t}return e}))}function X(e){return Y(e,V(),(e=>e.trim()))}function Z(e){return se(e,"empty",(t=>{const n=ee(t);return 0===n||`Expected an empty ${e.type} but received one with a size of \`${n}\``}))}function ee(e){return e instanceof Map||e instanceof Set?e.size:e.length}function te(e,t,n={}){const{exclusive:r}=n;return se(e,"max",(n=>r?n<t:n<=t||`Expected a ${e.type} less than ${r?"":"or equal to "}${t} but received \`${n}\``))}function ne(e,t,n={}){const{exclusive:r}=n;return se(e,"min",(n=>r?n>t:n>=t||`Expected a ${e.type} greater than ${r?"":"or equal to "}${t} but received \`${n}\``))}function re(e){return se(e,"nonempty",(t=>ee(t)>0||`Expected a nonempty ${e.type} but received an empty one`))}function ie(e,t){return se(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${n}"`))}function oe(e,t,n=t){const r=`Expected a ${e.type}`,i=t===n?`of \`${t}\``:`between \`${t}\` and \`${n}\``;return se(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=n||`${r} ${i} but received \`${e}\``;if(e instanceof Map||e instanceof Set){const{size:o}=e;return t<=o&&o<=n||`${r} with a size ${i} but received one with a size of \`${o}\``}{const{length:o}=e;return t<=o&&o<=n||`${r} with a length ${i} but received one with a length of \`${o}\``}}))}function se(e,t,n){return new u({...e,*refiner(r,i){yield*e.refiner(r,i);const o=c(n(r,i),i,e,r);for(const e of o)yield{...e,refinement:t}}})}e.Struct=u,e.StructError=t,e.any=C,e.array=M,e.assert=l,e.assign=g,e.bigint=k,e.boolean=I,e.coerce=Y,e.create=f,e.date=R,e.defaulted=Q,e.define=m,e.deprecated=v,e.dynamic=b,e.empty=Z,e.enums=O,e.func=x,e.instance=T,e.integer=P,e.intersection=N,e.is=p,e.lazy=y,e.literal=L,e.map=D,e.mask=h,e.max=te,e.min=ne,e.never=j,e.nonempty=re,e.nullable=B,e.number=F,e.object=K,e.omit=w,e.optional=$,e.partial=E,e.pattern=ie,e.pick=S,e.record=U,e.refine=se,e.regexp=z,e.set=q,e.size=oe,e.string=V,e.struct=_,e.trimmed=X,e.tuple=H,e.type=W,e.union=J,e.unknown=G,e.validate=A}(qa.exports);var Va=qa.exports;Object.defineProperty(Ea,"__esModule",{value:!0});var Ha=Sa,Wa=Va;function Ja(e,t){return Boolean("string"==typeof function(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}([e,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.constructor,"optionalAccess",e=>e.name]))?new e({message:t}):e({message:t})}var Ga=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};Ea.AssertionError=Ga,Ea.assert=function(e,t="Assertion failed.",n=Ga){if(!e){if(t instanceof Error)throw t;throw Ja(n,t)}},Ea.assertStruct=function(e,t,n="Assertion failed",r=Ga){try{Wa.assert.call(void 0,e,t)}catch(e){throw Ja(r,`${n}: ${function(e){return Ha.getErrorMessage.call(void 0,e).replace(/\.$/u,"")}(e)}.`)}},Ea.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")};var Ya={},Qa={};function Xa(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Za(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function ec(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function tc(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Xa(e.outputLen),Xa(e.blockLen)}function nc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function rc(e,t){ec(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.output=Qa.exists=Qa.hash=Qa.bytes=Qa.bool=Qa.number=void 0,Qa.number=Xa,Qa.bool=Za,Qa.bytes=ec,Qa.hash=tc,Qa.exists=nc,Qa.output=rc;const ic={number:Xa,bool:Za,bytes:ec,hash:tc,exists:nc,output:rc};Qa.default=ic;var oc={};Object.defineProperty(oc,"__esModule",{value:!0}),oc.add5L=oc.add5H=oc.add4H=oc.add4L=oc.add3H=oc.add3L=oc.add=oc.rotlBL=oc.rotlBH=oc.rotlSL=oc.rotlSH=oc.rotr32L=oc.rotr32H=oc.rotrBL=oc.rotrBH=oc.rotrSL=oc.rotrSH=oc.shrSL=oc.shrSH=oc.toBig=oc.split=oc.fromBig=void 0;const sc=BigInt(2**32-1),ac=BigInt(32);function cc(e,t=!1){return t?{h:Number(e&sc),l:Number(e>>ac&sc)}:{h:0|Number(e>>ac&sc),l:0|Number(e&sc)}}function dc(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=cc(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]}oc.fromBig=cc,oc.split=dc;const uc=(e,t)=>BigInt(e>>>0)<<ac|BigInt(t>>>0);oc.toBig=uc;const lc=(e,t,n)=>e>>>n;oc.shrSH=lc;const fc=(e,t,n)=>e<<32-n|t>>>n;oc.shrSL=fc;const hc=(e,t,n)=>e>>>n|t<<32-n;oc.rotrSH=hc;const pc=(e,t,n)=>e<<32-n|t>>>n;oc.rotrSL=pc;const Ac=(e,t,n)=>e<<64-n|t>>>n-32;oc.rotrBH=Ac;const gc=(e,t,n)=>e>>>n-32|t<<64-n;oc.rotrBL=gc;const mc=(e,t)=>t;oc.rotr32H=mc;const vc=(e,t)=>e;oc.rotr32L=vc;const bc=(e,t,n)=>e<<n|t>>>32-n;oc.rotlSH=bc;const yc=(e,t,n)=>t<<n|e>>>32-n;oc.rotlSL=yc;const wc=(e,t,n)=>t<<n-32|e>>>64-n;oc.rotlBH=wc;const Ec=(e,t,n)=>e<<n-32|t>>>64-n;function Sc(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}}oc.rotlBL=Ec,oc.add=Sc;const _c=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);oc.add3L=_c;const Cc=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;oc.add3H=Cc;const Mc=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);oc.add4L=Mc;const kc=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0;oc.add4H=kc;const Ic=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0);oc.add5L=Ic;const Rc=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0;oc.add5H=Rc;const Oc={fromBig:cc,split:dc,toBig:uc,shrSH:lc,shrSL:fc,rotrSH:hc,rotrSL:pc,rotrBH:Ac,rotrBL:gc,rotr32H:mc,rotr32L:vc,rotlSH:bc,rotlSL:yc,rotlBH:wc,rotlBL:Ec,add:Sc,add3L:_c,add3H:Cc,add4L:Mc,add4H:kc,add5H:Rc,add5L:Ic};oc.default=Oc;var xc={},Tc={};Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.crypto=void 0;const Pc=r;Tc.crypto=Pc&&"object"==typeof Pc&&"webcrypto"in Pc?Pc.webcrypto:void 0,function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=Tc,n=e=>e instanceof Uint8Array;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.rotr=(e,t)=>e<<32-t|e>>>t,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n};function i(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function o(e){if("string"==typeof e&&(e=i(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e}e.nextTick=async()=>{},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let o=0;o<t;o++){r(o);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=i,e.toBytes=o,e.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!n(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t};e.Hash=class{clone(){return this._cloneInto()}};const s={}.toString;e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==s.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(o(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(o(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.randomBytes=function(e=32){if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}(xc),Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.shake256=Ya.shake128=Ya.keccak_512=Ya.keccak_384=Ya.keccak_256=Ya.keccak_224=Ya.sha3_512=Ya.sha3_384=Ya.sha3_256=Ya.sha3_224=Ya.Keccak=Ya.keccakP=void 0;const Nc=Qa,Lc=oc,Dc=xc,[jc,Bc,Fc]=[[],[],[]],Kc=BigInt(0),$c=BigInt(1),Uc=BigInt(2),zc=BigInt(7),qc=BigInt(256),Vc=BigInt(113);for(let e=0,t=$c,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],jc.push(2*(5*r+n)),Bc.push((e+1)*(e+2)/2%64);let i=Kc;for(let e=0;e<7;e++)t=(t<<$c^(t>>zc)*Vc)%qc,t&Uc&&(i^=$c<<($c<<BigInt(e))-$c);Fc.push(i)}const[Hc,Wc]=(0,Lc.split)(Fc,!0),Jc=(e,t,n)=>n>32?(0,Lc.rotlBH)(e,t,n):(0,Lc.rotlSH)(e,t,n),Gc=(e,t,n)=>n>32?(0,Lc.rotlBL)(e,t,n):(0,Lc.rotlSL)(e,t,n);function Yc(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,i=(t+2)%10,o=n[i],s=n[i+1],a=Jc(o,s,1)^n[r],c=Gc(o,s,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=c}let t=e[2],i=e[3];for(let n=0;n<24;n++){const r=Bc[n],o=Jc(t,i,r),s=Gc(t,i,r),a=jc[n];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=Hc[r],e[1]^=Wc[r]}n.fill(0)}Ya.keccakP=Yc;class Qc extends Dc.Hash{constructor(e,t,n,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Nc.number)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Dc.u32)(this.state)}keccak(){Yc(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,Nc.exists)(this);const{blockLen:t,state:n}=this,r=(e=(0,Dc.toBytes)(e)).length;for(let i=0;i<r;){const o=Math.min(t-this.pos,r-i);for(let t=0;t<o;t++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!=(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,Nc.exists)(this,!1),(0,Nc.bytes)(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Nc.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Nc.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new Qc(t,n,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}Ya.Keccak=Qc;const Xc=(e,t,n)=>(0,Dc.wrapConstructor)((()=>new Qc(t,e,n)));Ya.sha3_224=Xc(6,144,28),Ya.sha3_256=Xc(6,136,32),Ya.sha3_384=Xc(6,104,48),Ya.sha3_512=Xc(6,72,64),Ya.keccak_224=Xc(1,144,28),Ya.keccak_256=Xc(1,136,32),Ya.keccak_384=Xc(1,104,48),Ya.keccak_512=Xc(1,72,64);const Zc=(e,t,n)=>(0,Dc.wrapXOFConstructorWithOpts)(((r={})=>new Qc(t,e,void 0===r.dkLen?n:r.dkLen,!0)));Ya.shake128=Zc(31,168,16),Ya.shake256=Zc(31,136,32);var ed={};!function(e){function t(...e){const t=(e,t)=>n=>e(t(n)),n=Array.from(e).reverse().reduce(((e,n)=>e?t(e,n.encode):n.encode),void 0),r=e.reduce(((e,n)=>e?t(e,n.decode):n.decode),void 0);return{encode:n,decode:r}}function n(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function r(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function i(e,t="="){if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function o(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function s(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],o=Array.from(e);for(o.forEach((e=>{if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let i=r;i<o.length;i++){const a=o[i],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");e=c%n;const d=Math.floor(c/n);if(o[i]=d,!Number.isSafeInteger(d)||d*n+e!==c)throw new Error("convertRadix: carry overflow");s&&(d?s=!1:r=i)}if(i.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0,e.assertNumber=function(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)};const a=(e,t)=>t?a(t,e%t):e,c=(e,t)=>e+(t-a(e,t));function d(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(c(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${c(t,n)}`);let i=0,o=0;const s=2**n-1,a=[];for(const r of e){if(r>=2**t)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(i=i<<t|r,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)a.push((i>>o-n&s)>>>0);i&=2**o-1}if(i=i<<n-o&s,!r&&o>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function u(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return s(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(s(t,e,256))}}}function l(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(c(8,e)>32||c(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(d(n,e,8,t))}}}function f(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function h(e,t){if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}e.utils={alphabet:n,chain:t,checksum:h,radix:u,radix2:l,join:r,padding:i},e.base16=t(l(4),n("0123456789ABCDEF"),r("")),e.base32=t(l(5),n("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),i(5),r("")),e.base32hex=t(l(5),n("0123456789ABCDEFGHIJKLMNOPQRSTUV"),i(5),r("")),e.base32crockford=t(l(5),n("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),r(""),o((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),e.base64=t(l(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i(6),r("")),e.base64url=t(l(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(6),r("")),e.base64urlnopad=t(l(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),r(""));const p=e=>t(u(58),n(e),r(""));e.base58=p("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=p("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=p("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const A=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(t){let n="";for(let r=0;r<t.length;r+=8){const i=t.subarray(r,r+8);n+=e.base58.encode(i).padStart(A[i.length],"1")}return n},decode(t){let n=[];for(let r=0;r<t.length;r+=11){const i=t.slice(r,r+11),o=A.indexOf(i.length),s=e.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(n)}};e.base58check=n=>t(h(4,(e=>n(n(e)))),e.base58);const g=t(n("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),r("")),m=[996825010,642813549,513874426,1027748829,705979059];function v(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<m.length;e++)1==(t>>e&1)&&(n^=m[e]);return n}function b(e,t,n=1){const r=e.length;let i=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=v(i)^n>>5}i=v(i);for(let t=0;t<r;t++)i=v(i)^31&e.charCodeAt(t);for(let e of t)i=v(i)^e;for(let e=0;e<6;e++)i=v(i);return i^=n,g.encode(d([i%2**30],30,5,!1))}function y(e){const t="bech32"===e?1:734539939,n=l(5),r=n.decode,i=n.encode,o=f(r);function s(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=g.decode(s).slice(0,-6),c=b(o,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);const o=e.toLowerCase(),s=b(o,n,t);return`${o}1${g.encode(n)}${s}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:f(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}e.bech32=y("bech32"),e.bech32m=y("bech32m"),e.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},e.hex=t(l(4),n("0123456789abcdef"),r(""),o((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const w={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},E="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";e.bytesToString=(e,t)=>{if("string"!=typeof e||!w.hasOwnProperty(e))throw new TypeError(E);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return w[e].encode(t)},e.str=e.bytesToString;e.stringToBytes=(e,t)=>{if(!w.hasOwnProperty(e))throw new TypeError(E);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return w[e].decode(t)},e.bytes=e.stringToBytes}(ed),Object.defineProperty(wa,"__esModule",{value:!0});var td=Ea,nd=Ya,rd=Va,id=ed,od=48,sd=58,ad=87;var cd=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function dd(e){return e instanceof Uint8Array}function ud(e){td.assert.call(void 0,dd(e),"Value must be a Uint8Array.")}function ld(e){if(ud(e),0===e.length)return"0x";const t=cd(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return kd(n.join(""))}function fd(e){ud(e);const t=ld(e);return BigInt(t)}function hd(e){if("0x"===function(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}([e,"optionalAccess",e=>e.toLowerCase,"optionalCall",e=>e()]))return new Uint8Array;_d(e);const t=Id(e).toLowerCase(),n=t.length%2==0?t:`0${t}`,r=new Uint8Array(n.length/2);for(let e=0;e<r.length;e++){const t=n.charCodeAt(2*e),i=n.charCodeAt(2*e+1),o=t-(t<sd?od:ad),s=i-(i<sd?od:ad);r[e]=16*o+s}return r}function pd(e){td.assert.call(void 0,"bigint"==typeof e,"Value must be a bigint."),td.assert.call(void 0,e>=BigInt(0),"Value must be a non-negative bigint.");return hd(e.toString(16))}function Ad(e){td.assert.call(void 0,"number"==typeof e,"Value must be a number."),td.assert.call(void 0,e>=0,"Value must be a non-negative number."),td.assert.call(void 0,Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return hd(e.toString(16))}function gd(e){return td.assert.call(void 0,"string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function md(e){if("bigint"==typeof e)return pd(e);if("number"==typeof e)return Ad(e);if("string"==typeof e)return e.startsWith("0x")?hd(e):gd(e);if(dd(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}var vd=rd.pattern.call(void 0,rd.string.call(void 0),/^(?:0x)?[0-9a-f]+$/iu),bd=rd.pattern.call(void 0,rd.string.call(void 0),/^0x[0-9a-f]+$/iu),yd=rd.pattern.call(void 0,rd.string.call(void 0),/^0x[0-9a-f]{40}$/u),wd=rd.pattern.call(void 0,rd.string.call(void 0),/^0x[0-9a-fA-F]{40}$/u);function Ed(e){return rd.is.call(void 0,e,vd)}function Sd(e){return rd.is.call(void 0,e,bd)}function _d(e){td.assert.call(void 0,Ed(e),"Value must be a hexadecimal string.")}function Cd(e){td.assert.call(void 0,rd.is.call(void 0,e,wd),"Invalid hex address.");const t=Id(e.toLowerCase()),n=Id(ld(nd.keccak_256.call(void 0,t)));return`0x${t.split("").map(((e,t)=>{const r=n[t];return td.assert.call(void 0,rd.is.call(void 0,r,rd.string.call(void 0)),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function Md(e){return!!rd.is.call(void 0,e,wd)&&Cd(e)===e}function kd(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`}function Id(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}wa.HexStruct=vd,wa.StrictHexStruct=bd,wa.HexAddressStruct=yd,wa.HexChecksumAddressStruct=wd,wa.isHexString=Ed,wa.isStrictHexString=Sd,wa.assertIsHexString=_d,wa.assertIsStrictHexString=function(e){td.assert.call(void 0,Sd(e),'Value must be a hexadecimal string, starting with "0x".')},wa.isValidHexAddress=function(e){return rd.is.call(void 0,e,yd)||Md(e)},wa.getChecksumAddress=Cd,wa.isValidChecksumAddress=Md,wa.add0x=kd,wa.remove0x=Id,wa.isBytes=dd,wa.assertIsBytes=ud,wa.bytesToHex=ld,wa.bytesToBigInt=fd,wa.bytesToSignedBigInt=function(e){ud(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(8*e.length,t)},wa.bytesToNumber=function(e){ud(e);const t=fd(e);return td.assert.call(void 0,t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},wa.bytesToString=function(e){return ud(e),(new TextDecoder).decode(e)},wa.bytesToBase64=function(e){return ud(e),id.base64.encode(e)},wa.hexToBytes=hd,wa.bigIntToBytes=pd,wa.signedBigIntToBytes=function(e,t){td.assert.call(void 0,"bigint"==typeof e,"Value must be a bigint."),td.assert.call(void 0,"number"==typeof t,"Byte length must be a number."),td.assert.call(void 0,t>0,"Byte length must be greater than 0."),td.assert.call(void 0,function(e,t){td.assert.call(void 0,t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let n=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return r.reverse()},wa.numberToBytes=Ad,wa.stringToBytes=gd,wa.base64ToBytes=function(e){return td.assert.call(void 0,"string"==typeof e,"Value must be a string."),id.base64.decode(e)},wa.valueToBytes=md,wa.concatBytes=function(e){const t=new Array(e.length);let n=0;for(let r=0;r<e.length;r++){const i=md(e[r]);t[r]=i,n+=i.length}const r=new Uint8Array(n);for(let e=0,n=0;e<t.length;e++)r.set(t[e],n),n+=t[e].length;return r},wa.createDataView=function(e){if("undefined"!=typeof Buffer&&e instanceof Buffer){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)},Object.defineProperty(ya,"__esModule",{value:!0});var Rd=wa,Od=Ea;ya.numberToHex=e=>(Od.assert.call(void 0,"number"==typeof e,"Value must be a number."),Od.assert.call(void 0,e>=0,"Value must be a non-negative number."),Od.assert.call(void 0,Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),Rd.add0x.call(void 0,e.toString(16))),ya.bigIntToHex=e=>(Od.assert.call(void 0,"bigint"==typeof e,"Value must be a bigint."),Od.assert.call(void 0,e>=0,"Value must be a non-negative bigint."),Rd.add0x.call(void 0,e.toString(16))),ya.hexToNumber=e=>{Rd.assertIsHexString.call(void 0,e);const t=parseInt(e,16);return Od.assert.call(void 0,Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t},ya.hexToBigInt=e=>(Rd.assertIsHexString.call(void 0,e),BigInt(Rd.add0x.call(void 0,e)));var xd={};Object.defineProperty(xd,"__esModule",{value:!0}),xd.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,n;const r=new Promise(((e,r)=>{t=e,n=r}));return e&&r.catch((e=>{})),{promise:r,resolve:t,reject:n}};var Td={};Object.defineProperty(Td,"__esModule",{value:!0});var Pd=(e=>(e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year",e))(Pd||{}),Nd=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};Td.Duration=Pd,Td.inMilliseconds=function(e,t){return Nd(e,"count"),e*t},Td.timeSince=function(e){return Nd(e,"timestamp"),Date.now()-e};var Ld={},Dd={exports:{}};var jd={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var Bd="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=jd,o=Bd,s=(t=e.exports={}).re=[],a=t.safeRe=[],c=t.src=[],d=t.t={};let u=0;const l="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[l,r]],h=(e,t,n)=>{const r=(e=>{for(const[t,n]of f)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=u++;o(e,i,t),d[e]=i,c[i]=t,s[i]=new RegExp(t,n?"g":void 0),a[i]=new RegExp(r,n?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${l}*`),h("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[d.NUMERICIDENTIFIER]}|${c[d.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NUMERICIDENTIFIERLOOSE]}|${c[d.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${l}+`),h("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),h("FULL",`^${c[d.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),h("LOOSE",`^${c[d.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),h("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[d.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Dd,Dd.exports);var Fd=Dd.exports;const Kd=Object.freeze({loose:!0}),$d=Object.freeze({});var Ud=e=>e?"object"!=typeof e?Kd:e:$d;const zd=/^[0-9]+$/,qd=(e,t)=>{const n=zd.test(e),r=zd.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var Vd={compareIdentifiers:qd,rcompareIdentifiers:(e,t)=>qd(t,e)};const Hd=Bd,{MAX_LENGTH:Wd,MAX_SAFE_INTEGER:Jd}=jd,{safeRe:Gd,t:Yd}=Fd,Qd=Ud,{compareIdentifiers:Xd}=Vd;var Zd=class e{constructor(t,n){if(n=Qd(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Wd)throw new TypeError(`version is longer than ${Wd} characters`);Hd("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Gd[Yd.LOOSE]:Gd[Yd.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Jd||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Jd||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Jd||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Jd)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Hd("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Xd(this.major,t.major)||Xd(this.minor,t.minor)||Xd(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const e=this.prerelease[n],r=t.prerelease[n];if(Hd("prerelease compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return Xd(e,r)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let n=0;do{const e=this.build[n],r=t.build[n];if(Hd("prerelease compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return Xd(e,r)}while(++n)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===Xd(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const eu=Zd;var tu=(e,t,n=!1)=>{if(e instanceof eu)return e;try{return new eu(e,t)}catch(e){if(!n)return null;throw e}};const nu=tu;var ru=(e,t)=>{const n=nu(e,t);return n?n.version:null};const iu=tu;var ou=(e,t)=>{const n=iu(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};const su=Zd;var au=(e,t,n,r,i)=>{"string"==typeof n&&(i=r,r=n,n=void 0);try{return new su(e instanceof su?e.version:e,n).inc(t,r,i).version}catch(e){return null}};const cu=tu;var du=(e,t)=>{const n=cu(e,null,!0),r=cu(t,null,!0),i=n.compare(r);if(0===i)return null;const o=i>0,s=o?n:r,a=o?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return a.patch||a.minor?s.patch?"patch":s.minor?"minor":"major":"major";const d=c?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"};const uu=Zd;var lu=(e,t)=>new uu(e,t).major;const fu=Zd;var hu=(e,t)=>new fu(e,t).minor;const pu=Zd;var Au=(e,t)=>new pu(e,t).patch;const gu=tu;var mu=(e,t)=>{const n=gu(e,t);return n&&n.prerelease.length?n.prerelease:null};const vu=Zd;var bu=(e,t,n)=>new vu(e,n).compare(new vu(t,n));const yu=bu;var wu=(e,t,n)=>yu(t,e,n);const Eu=bu;var Su=(e,t)=>Eu(e,t,!0);const _u=Zd;var Cu=(e,t,n)=>{const r=new _u(e,n),i=new _u(t,n);return r.compare(i)||r.compareBuild(i)};const Mu=Cu;var ku=(e,t)=>e.sort(((e,n)=>Mu(e,n,t)));const Iu=Cu;var Ru=(e,t)=>e.sort(((e,n)=>Iu(n,e,t)));const Ou=bu;var xu=(e,t,n)=>Ou(e,t,n)>0;const Tu=bu;var Pu=(e,t,n)=>Tu(e,t,n)<0;const Nu=bu;var Lu=(e,t,n)=>0===Nu(e,t,n);const Du=bu;var ju=(e,t,n)=>0!==Du(e,t,n);const Bu=bu;var Fu=(e,t,n)=>Bu(e,t,n)>=0;const Ku=bu;var $u=(e,t,n)=>Ku(e,t,n)<=0;const Uu=Lu,zu=ju,qu=xu,Vu=Fu,Hu=Pu,Wu=$u;var Ju=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Uu(e,n,r);case"!=":return zu(e,n,r);case">":return qu(e,n,r);case">=":return Vu(e,n,r);case"<":return Hu(e,n,r);case"<=":return Wu(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};const Gu=Zd,Yu=tu,{safeRe:Qu,t:Xu}=Fd;var Zu,el,tl,nl,rl,il,ol,sl,al,cl,dl=(e,t)=>{if(e instanceof Gu)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=Qu[Xu.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),Qu[Xu.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;Qu[Xu.COERCERTL].lastIndex=-1}else n=e.match(Qu[Xu.COERCE]);return null===n?null:Yu(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};function ul(){if(nl)return tl;function e(t){var n=this;if(n instanceof e||(n=new e),n.tail=null,n.head=null,n.length=0,t&&"function"==typeof t.forEach)t.forEach((function(e){n.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)n.push(arguments[r]);return n}function t(e,t,n){var r=t===e.head?new i(n,null,t,e):new i(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function n(e,t){e.tail=new i(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function r(e,t){e.head=new i(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function i(e,t,n,r){if(!(this instanceof i))return new i(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}nl=1,tl=e,e.Node=i,e.create=e,e.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},e.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},e.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},e.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n(this,arguments[e]);return this.length},e.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},e.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},e.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},e.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},e.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},e.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},e.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},e.prototype.map=function(t,n){n=n||this;for(var r=new e,i=this.head;null!==i;)r.push(t.call(n,i.value,this)),i=i.next;return r},e.prototype.mapReverse=function(t,n){n=n||this;for(var r=new e,i=this.tail;null!==i;)r.push(t.call(n,i.value,this)),i=i.prev;return r},e.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},e.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},e.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},e.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},e.prototype.slice=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var r=new e;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<n;i++,o=o.next)r.push(o.value);return r},e.prototype.sliceReverse=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var r=new e;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);for(var i=this.length,o=this.tail;null!==o&&i>n;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)r.push(o.value);return r},e.prototype.splice=function(e,n,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;var s=[];for(i=0;o&&i<n;i++)s.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(i=0;i<r.length;i++)o=t(this,o,r[i]);return s},e.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(el?Zu:(el=1,Zu=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}))(e)}catch(e){}return tl}function ll(){if(sl)return ol;sl=1;class e{constructor(t,n){if(n=r(n),t instanceof e)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new e(t.raw,n);if(t instanceof i)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!p(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&A(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+e,r=n.get(t);if(r)return r;const s=this.options.loose,A=s?a[c.HYPHENRANGELOOSE]:a[c.HYPHENRANGE];e=e.replace(A,k(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(a[c.COMPARATORTRIM],d),o("comparator trim",e),e=e.replace(a[c.TILDETRIM],u),o("tilde trim",e),e=e.replace(a[c.CARETTRIM],l),o("caret trim",e);let g=e.split(" ").map((e=>m(e,this.options))).join(" ").split(/\s+/).map((e=>M(e,this.options)));s&&(g=g.filter((e=>(o("loose invalid filter",e,this.options),!!e.match(a[c.COMPARATORLOOSE]))))),o("range list",g);const v=new Map,b=g.map((e=>new i(e,this.options)));for(const e of b){if(p(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const y=[...v.values()];return n.set(t,y),y}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>g(e,n)&&t.set.some((t=>g(t,n)&&e.every((e=>t.every((t=>e.intersects(t,n)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(I(this.set[t],e,this.options))return!0;return!1}}ol=e;const t=function(){if(il)return rl;il=1;const e=ul(),t=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),i=Symbol("allowStale"),o=Symbol("maxAge"),s=Symbol("dispose"),a=Symbol("noDisposeOnSet"),c=Symbol("lruList"),d=Symbol("cache"),u=Symbol("updateAgeOnGet"),l=()=>1,f=(e,t,n)=>{const r=e[d].get(t);if(r){const t=r.value;if(h(e,t)){if(A(e,r),!e[i])return}else n&&(e[u]&&(r.value.now=Date.now()),e[c].unshiftNode(r));return t.value}},h=(e,t)=>{if(!t||!t.maxAge&&!e[o])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[o]&&n>e[o]},p=e=>{if(e[n]>e[t])for(let r=e[c].tail;e[n]>e[t]&&null!==r;){const t=r.prev;A(e,r),r=t}},A=(e,t)=>{if(t){const r=t.value;e[s]&&e[s](r.key,r.value),e[n]-=r.length,e[d].delete(r.key),e[c].removeNode(t)}};class g{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const m=(e,t,n,r)=>{let o=n.value;h(e,o)&&(A(e,n),e[i]||(o=void 0)),o&&t.call(r,o.value,o.key,e)};return rl=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[t]=e.max||1/0;const n=e.length||l;if(this[r]="function"!=typeof n?l:n,this[i]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[o]=e.maxAge||0,this[s]=e.dispose,this[a]=e.noDisposeOnSet||!1,this[u]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[t]=e||1/0,p(this)}get max(){return this[t]}set allowStale(e){this[i]=!!e}get allowStale(){return this[i]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[o]=e,p(this)}get maxAge(){return this[o]}set lengthCalculator(e){"function"!=typeof e&&(e=l),e!==this[r]&&(this[r]=e,this[n]=0,this[c].forEach((e=>{e.length=this[r](e.value,e.key),this[n]+=e.length}))),p(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[c].length}rforEach(e,t){t=t||this;for(let n=this[c].tail;null!==n;){const r=n.prev;m(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[c].head;null!==n;){const r=n.next;m(this,e,n,t),n=r}}keys(){return this[c].toArray().map((e=>e.key))}values(){return this[c].toArray().map((e=>e.value))}reset(){this[s]&&this[c]&&this[c].length&&this[c].forEach((e=>this[s](e.key,e.value))),this[d]=new Map,this[c]=new e,this[n]=0}dump(){return this[c].map((e=>!h(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[c]}set(e,i,u){if((u=u||this[o])&&"number"!=typeof u)throw new TypeError("maxAge must be a number");const l=u?Date.now():0,f=this[r](i,e);if(this[d].has(e)){if(f>this[t])return A(this,this[d].get(e)),!1;const r=this[d].get(e).value;return this[s]&&(this[a]||this[s](e,r.value)),r.now=l,r.maxAge=u,r.value=i,this[n]+=f-r.length,r.length=f,this.get(e),p(this),!0}const h=new g(e,i,f,l,u);return h.length>this[t]?(this[s]&&this[s](e,i),!1):(this[n]+=h.length,this[c].unshift(h),this[d].set(e,this[c].head),p(this),!0)}has(e){if(!this[d].has(e))return!1;const t=this[d].get(e).value;return!h(this,t)}get(e){return f(this,e,!0)}peek(e){return f(this,e,!1)}pop(){const e=this[c].tail;return e?(A(this,e),e.value):null}del(e){A(this,this[d].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[d].forEach(((e,t)=>f(this,t,!1)))}},rl}(),n=new t({max:1e3}),r=Ud,i=fl(),o=Bd,s=Zd,{safeRe:a,t:c,comparatorTrimReplace:d,tildeTrimReplace:u,caretTrimReplace:l}=Fd,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=jd,p=e=>"<0.0.0-0"===e.value,A=e=>""===e.value,g=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},m=(e,t)=>(o("comp",e,t),e=w(e,t),o("caret",e),e=b(e,t),o("tildes",e),e=S(e,t),o("xrange",e),e=C(e,t),o("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>y(e,t))).join(" "),y=(e,t)=>{const n=t.loose?a[c.TILDELOOSE]:a[c.TILDE];return e.replace(n,((t,n,r,i,s)=>{let a;return o("tilde",e,t,n,r,i,s),v(n)?a="":v(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:v(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:s?(o("replaceTilde pr",s),a=`>=${n}.${r}.${i}-${s} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,o("tilde return",a),a}))},w=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{o("caret",e,t);const n=t.loose?a[c.CARETLOOSE]:a[c.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,s,a)=>{let c;return o("caret",e,t,n,i,s,a),v(n)?c="":v(i)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:v(s)?c="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(o("replaceCaret pr",a),c="0"===n?"0"===i?`>=${n}.${i}.${s}-${a} <${n}.${i}.${+s+1}-0`:`>=${n}.${i}.${s}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${s}-${a} <${+n+1}.0.0-0`):(o("no pr"),c="0"===n?"0"===i?`>=${n}.${i}.${s}${r} <${n}.${i}.${+s+1}-0`:`>=${n}.${i}.${s}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${s} <${+n+1}.0.0-0`),o("caret return",c),c}))},S=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map((e=>_(e,t))).join(" ")),_=(e,t)=>{e=e.trim();const n=t.loose?a[c.XRANGELOOSE]:a[c.XRANGE];return e.replace(n,((n,r,i,s,a,c)=>{o("xRange",e,n,r,i,s,a,c);const d=v(i),u=d||v(s),l=u||v(a),f=l;return"="===r&&f&&(r=""),c=t.includePrerelease?"-0":"",d?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(u&&(s=0),a=0,">"===r?(r=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):"<="===r&&(r="<",u?i=+i+1:s=+s+1),"<"===r&&(c="-0"),n=`${r+i}.${s}.${a}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:l&&(n=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),o("xRange return",n),n}))},C=(e,t)=>(o("replaceStars",e,t),e.trim().replace(a[c.STAR],"")),M=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(a[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),k=e=>(t,n,r,i,o,s,a,c,d,u,l,f,h)=>`${n=v(r)?"":v(i)?`>=${r}.0.0${e?"-0":""}`:v(o)?`>=${r}.${i}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=v(d)?"":v(u)?`<${+d+1}.0.0-0`:v(l)?`<${d}.${+u+1}.0-0`:f?`<=${d}.${u}.${l}-${f}`:e?`<${d}.${u}.${+l+1}-0`:`<=${c}`}`.trim(),I=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(o(e[n].semver),e[n].semver!==i.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0};return ol}function fl(){if(cl)return al;cl=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(r,i){if(i=n(i),r instanceof t){if(r.loose===!!i.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),s("comparator",r,i),this.options=i,this.loose=!!i.loose,this.parse(r),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const n=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],o=t.match(n);if(!o)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new a(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch(e){return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,r).test(this.value):""===e.operator?""===e.value||new c(this.value,r).test(e.semver):(!(r=n(r)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(o(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(o(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}al=t;const n=Ud,{safeRe:r,t:i}=Fd,o=Ju,s=Bd,a=Zd,c=ll();return al}const hl=ll();var pl=(e,t,n)=>{try{t=new hl(t,n)}catch(e){return!1}return t.test(e)};const Al=ll();var gl=(e,t)=>new Al(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const ml=Zd,vl=ll();var bl=(e,t,n)=>{let r=null,i=null,o=null;try{o=new vl(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new ml(r,n)))})),r};const yl=Zd,wl=ll();var El=(e,t,n)=>{let r=null,i=null,o=null;try{o=new wl(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new yl(r,n)))})),r};const Sl=Zd,_l=ll(),Cl=xu;var Ml=(e,t)=>{e=new _l(e,t);let n=new Sl("0.0.0");if(e.test(n))return n;if(n=new Sl("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let i=null;r.forEach((e=>{const t=new Sl(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!Cl(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!Cl(n,i)||(n=i)}return n&&e.test(n)?n:null};const kl=ll();var Il=(e,t)=>{try{return new kl(e,t).range||"*"}catch(e){return null}};const Rl=Zd,Ol=fl(),{ANY:xl}=Ol,Tl=ll(),Pl=pl,Nl=xu,Ll=Pu,Dl=$u,jl=Fu;var Bl=(e,t,n,r)=>{let i,o,s,a,c;switch(e=new Rl(e,r),t=new Tl(t,r),n){case">":i=Nl,o=Dl,s=Ll,a=">",c=">=";break;case"<":i=Ll,o=jl,s=Nl,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Pl(e,t,r))return!1;for(let n=0;n<t.set.length;++n){const d=t.set[n];let u=null,l=null;if(d.forEach((e=>{e.semver===xl&&(e=new Ol(">=0.0.0")),u=u||e,l=l||e,i(e.semver,u.semver,r)?u=e:s(e.semver,l.semver,r)&&(l=e)})),u.operator===a||u.operator===c)return!1;if((!l.operator||l.operator===a)&&o(e,l.semver))return!1;if(l.operator===c&&s(e,l.semver))return!1}return!0};const Fl=Bl;var Kl=(e,t,n)=>Fl(e,t,">",n);const $l=Bl;var Ul=(e,t,n)=>$l(e,t,"<",n);const zl=ll();var ql=(e,t,n)=>(e=new zl(e,n),t=new zl(t,n),e.intersects(t,n));const Vl=pl,Hl=bu;const Wl=ll(),Jl=fl(),{ANY:Gl}=Jl,Yl=pl,Ql=bu,Xl=[new Jl(">=0.0.0-0")],Zl=[new Jl(">=0.0.0")],ef=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===Gl){if(1===t.length&&t[0].semver===Gl)return!0;e=n.includePrerelease?Xl:Zl}if(1===t.length&&t[0].semver===Gl){if(n.includePrerelease)return!0;t=Zl}const r=new Set;let i,o,s,a,c,d,u;for(const t of e)">"===t.operator||">="===t.operator?i=tf(i,t,n):"<"===t.operator||"<="===t.operator?o=nf(o,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&o){if(s=Ql(i.semver,o.semver,n),s>0)return null;if(0===s&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of r){if(i&&!Yl(e,String(i),n))return null;if(o&&!Yl(e,String(o),n))return null;for(const r of t)if(!Yl(e,String(r),n))return!1;return!0}let l=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver,f=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;l&&1===l.prerelease.length&&"<"===o.operator&&0===l.prerelease[0]&&(l=!1);for(const e of t){if(u=u||">"===e.operator||">="===e.operator,d=d||"<"===e.operator||"<="===e.operator,i)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),">"===e.operator||">="===e.operator){if(a=tf(i,e,n),a===e&&a!==i)return!1}else if(">="===i.operator&&!Yl(i.semver,String(e),n))return!1;if(o)if(l&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===l.major&&e.semver.minor===l.minor&&e.semver.patch===l.patch&&(l=!1),"<"===e.operator||"<="===e.operator){if(c=nf(o,e,n),c===e&&c!==o)return!1}else if("<="===o.operator&&!Yl(o.semver,String(e),n))return!1;if(!e.operator&&(o||i)&&0!==s)return!1}return!(i&&d&&!o&&0!==s)&&(!(o&&u&&!i&&0!==s)&&(!f&&!l))},tf=(e,t,n)=>{if(!e)return t;const r=Ql(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},nf=(e,t,n)=>{if(!e)return t;const r=Ql(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};var rf=(e,t,n={})=>{if(e===t)return!0;e=new Wl(e,n),t=new Wl(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=ef(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0};const of=Fd,sf=jd,af=Zd,cf=Vd,df=(e,t,n)=>{const r=[];let i=null,o=null;const s=e.sort(((e,t)=>Hl(e,t,n)));for(const e of s){Vl(e,t,n)?(o=e,i||(i=e)):(o&&r.push([i,o]),o=null,i=null)}i&&r.push([i,null]);const a=[];for(const[e,t]of r)e===t?a.push(e):t||e!==s[0]?t?e===s[0]?a.push(`<=${t}`):a.push(`${e} - ${t}`):a.push(`>=${e}`):a.push("*");const c=a.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t};var uf={parse:tu,valid:ru,clean:ou,inc:au,diff:du,major:lu,minor:hu,patch:Au,prerelease:mu,compare:bu,rcompare:wu,compareLoose:Su,compareBuild:Cu,sort:ku,rsort:Ru,gt:xu,lt:Pu,eq:Lu,neq:ju,gte:Fu,lte:$u,cmp:Ju,coerce:dl,Comparator:fl(),Range:ll(),satisfies:pl,toComparators:gl,maxSatisfying:bl,minSatisfying:El,minVersion:Ml,validRange:Il,outside:Bl,gtr:Kl,ltr:Ul,intersects:ql,simplifyRange:df,subset:rf,SemVer:af,re:of.re,src:of.src,tokens:of.t,SEMVER_SPEC_VERSION:sf.SEMVER_SPEC_VERSION,RELEASE_TYPES:sf.RELEASE_TYPES,compareIdentifiers:cf.compareIdentifiers,rcompareIdentifiers:cf.rcompareIdentifiers};Object.defineProperty(Ld,"__esModule",{value:!0});var lf=Ea,ff=uf,hf=Va,pf=hf.refine.call(void 0,hf.string.call(void 0),"Version",(e=>null!==ff.valid.call(void 0,e)||`Expected SemVer version, got "${e}"`)),Af=hf.refine.call(void 0,hf.string.call(void 0),"Version range",(e=>null!==ff.validRange.call(void 0,e)||`Expected SemVer range, got "${e}"`));Ld.VersionStruct=pf,Ld.VersionRangeStruct=Af,Ld.isValidSemVerVersion=function(e){return hf.is.call(void 0,e,pf)},Ld.isValidSemVerRange=function(e){return hf.is.call(void 0,e,Af)},Ld.assertIsSemVerVersion=function(e){lf.assertStruct.call(void 0,e,pf)},Ld.assertIsSemVerRange=function(e){lf.assertStruct.call(void 0,e,Af)},Ld.gtVersion=function(e,t){return ff.gt.call(void 0,e,t)},Ld.gtRange=function(e,t){return ff.gtr.call(void 0,e,t)},Ld.satisfiesVersionRange=function(e,t){return ff.satisfies.call(void 0,e,t,{includePrerelease:!0})};var gf={};Object.defineProperty(gf,"__esModule",{value:!0});var mf=Ea,vf=_a,bf=Va,yf=e=>bf.object.call(void 0,e);function wf({path:e,branch:t}){const n=e[e.length-1];return vf.hasProperty.call(void 0,t[t.length-2],n)}function Ef(e){return new bf.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!wf(n)||e.validator(t,n),refiner:(t,n)=>!wf(n)||e.refiner(t,n)})}var Sf=bf.union.call(void 0,[bf.literal.call(void 0,null),bf.boolean.call(void 0),bf.define.call(void 0,"finite number",(e=>bf.is.call(void 0,e,bf.number.call(void 0))&&Number.isFinite(e))),bf.string.call(void 0),bf.array.call(void 0,bf.lazy.call(void 0,(()=>Sf))),bf.record.call(void 0,bf.string.call(void 0),bf.lazy.call(void 0,(()=>Sf)))]),_f=bf.coerce.call(void 0,Sf,bf.any.call(void 0),(e=>(mf.assertStruct.call(void 0,e,Sf),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function Cf(e){return bf.create.call(void 0,e,_f)}var Mf=bf.literal.call(void 0,"2.0"),kf=bf.nullable.call(void 0,bf.union.call(void 0,[bf.number.call(void 0),bf.string.call(void 0)])),If=yf({code:bf.integer.call(void 0),message:bf.string.call(void 0),data:Ef(_f),stack:Ef(bf.string.call(void 0))}),Rf=bf.union.call(void 0,[bf.record.call(void 0,bf.string.call(void 0),_f),bf.array.call(void 0,_f)]),Of=yf({id:kf,jsonrpc:Mf,method:bf.string.call(void 0),params:Ef(Rf)}),xf=yf({jsonrpc:Mf,method:bf.string.call(void 0),params:Ef(Rf)});var Tf=bf.object.call(void 0,{id:kf,jsonrpc:Mf,result:bf.optional.call(void 0,bf.unknown.call(void 0)),error:bf.optional.call(void 0,If)}),Pf=yf({id:kf,jsonrpc:Mf,result:_f}),Nf=yf({id:kf,jsonrpc:Mf,error:If}),Lf=bf.union.call(void 0,[Pf,Nf]);gf.object=yf,gf.exactOptional=Ef,gf.UnsafeJsonStruct=Sf,gf.JsonStruct=_f,gf.isValidJson=function(e){try{return Cf(e),!0}catch(e){return!1}},gf.getSafeJson=Cf,gf.getJsonSize=function(e){mf.assertStruct.call(void 0,e,_f,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},gf.jsonrpc2="2.0",gf.JsonRpcVersionStruct=Mf,gf.JsonRpcIdStruct=kf,gf.JsonRpcErrorStruct=If,gf.JsonRpcParamsStruct=Rf,gf.JsonRpcRequestStruct=Of,gf.JsonRpcNotificationStruct=xf,gf.isJsonRpcNotification=function(e){return bf.is.call(void 0,e,xf)},gf.assertIsJsonRpcNotification=function(e,t){mf.assertStruct.call(void 0,e,xf,"Invalid JSON-RPC notification",t)},gf.isJsonRpcRequest=function(e){return bf.is.call(void 0,e,Of)},gf.assertIsJsonRpcRequest=function(e,t){mf.assertStruct.call(void 0,e,Of,"Invalid JSON-RPC request",t)},gf.PendingJsonRpcResponseStruct=Tf,gf.JsonRpcSuccessStruct=Pf,gf.JsonRpcFailureStruct=Nf,gf.JsonRpcResponseStruct=Lf,gf.isPendingJsonRpcResponse=function(e){return bf.is.call(void 0,e,Tf)},gf.assertIsPendingJsonRpcResponse=function(e,t){mf.assertStruct.call(void 0,e,Tf,"Invalid pending JSON-RPC response",t)},gf.isJsonRpcResponse=function(e){return bf.is.call(void 0,e,Lf)},gf.assertIsJsonRpcResponse=function(e,t){mf.assertStruct.call(void 0,e,Lf,"Invalid JSON-RPC response",t)},gf.isJsonRpcSuccess=function(e){return bf.is.call(void 0,e,Pf)},gf.assertIsJsonRpcSuccess=function(e,t){mf.assertStruct.call(void 0,e,Pf,"Invalid JSON-RPC success response",t)},gf.isJsonRpcFailure=function(e){return bf.is.call(void 0,e,Nf)},gf.assertIsJsonRpcFailure=function(e,t){mf.assertStruct.call(void 0,e,Nf,"Invalid JSON-RPC failure response",t)},gf.isJsonRpcError=function(e){return bf.is.call(void 0,e,If)},gf.assertIsJsonRpcError=function(e,t){mf.assertStruct.call(void 0,e,If,"Invalid JSON-RPC error",t)},gf.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)};var Df,jf,Bf={},Ff={exports:{}};function Kf(){if(jf)return Df;jf=1;var e=1e3,t=60*e,n=60*t,r=24*n,i=7*r,o=365.25*r;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}return Df=function(a,c){c=c||{};var d=typeof a;if("string"===d&&a.length>0)return function(s){if((s=String(s)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(a);if("number"===d&&isFinite(a))return c.long?function(i){var o=Math.abs(i);if(o>=r)return s(i,o,r,"day");if(o>=n)return s(i,o,n,"hour");if(o>=t)return s(i,o,t,"minute");if(o>=e)return s(i,o,e,"second");return i+" ms"}(a):function(i){var o=Math.abs(i);if(o>=r)return Math.round(i/r)+"d";if(o>=n)return Math.round(i/n)+"h";if(o>=t)return Math.round(i/t)+"m";if(o>=e)return Math.round(i/e)+"s";return i+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}}var $f=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Kf(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=$f(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(Ff,Ff.exports);var Uf=Ff.exports,zf=a(Uf);Object.defineProperty(Bf,"__esModule",{value:!0});var qf,Vf=((qf=Uf)&&qf.__esModule?qf:{default:qf}).default.call(void 0,"metamask");Bf.createProjectLogger=function(e){return Vf.extend(e)},Bf.createModuleLogger=function(e,t){return e.extend(t)};var Hf={};function Wf(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}Object.defineProperty(Hf,"__esModule",{value:!0});var Jf=Va,Gf=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,Yf=/^[-a-z0-9]{3,8}$/u,Qf=/^[-_a-zA-Z0-9]{1,32}$/u,Xf=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,Zf=/^[-.%a-zA-Z0-9]{1,128}$/u,eh=Jf.pattern.call(void 0,Jf.string.call(void 0),Gf),th=Jf.pattern.call(void 0,Jf.string.call(void 0),Yf),nh=Jf.pattern.call(void 0,Jf.string.call(void 0),Qf),rh=Jf.pattern.call(void 0,Jf.string.call(void 0),Xf),ih=Jf.pattern.call(void 0,Jf.string.call(void 0),Zf);Hf.CAIP_CHAIN_ID_REGEX=Gf,Hf.CAIP_NAMESPACE_REGEX=Yf,Hf.CAIP_REFERENCE_REGEX=Qf,Hf.CAIP_ACCOUNT_ID_REGEX=Xf,Hf.CAIP_ACCOUNT_ADDRESS_REGEX=Zf,Hf.CaipChainIdStruct=eh,Hf.CaipNamespaceStruct=th,Hf.CaipReferenceStruct=nh,Hf.CaipAccountIdStruct=rh,Hf.CaipAccountAddressStruct=ih,Hf.isCaipChainId=function(e){return Jf.is.call(void 0,e,eh)},Hf.isCaipNamespace=function(e){return Jf.is.call(void 0,e,th)},Hf.isCaipReference=function(e){return Jf.is.call(void 0,e,nh)},Hf.isCaipAccountId=function(e){return Jf.is.call(void 0,e,rh)},Hf.isCaipAccountAddress=function(e){return Jf.is.call(void 0,e,ih)},Hf.parseCaipChainId=function(e){const t=Gf.exec(e);if(!Wf([t,"optionalAccess",e=>e.groups]))throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},Hf.parseCaipAccountId=function(e){const t=Xf.exec(e);if(!Wf([t,"optionalAccess",e=>e.groups]))throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}};var oh={},sh={};function ah(e,t){return null!=e?e:t()}Object.defineProperty(sh,"__esModule",{value:!0});var ch=Ea,dh=Va;sh.base64=(e,t={})=>{const n=ah(t.paddingRequired,(()=>!1)),r=ah(t.characterSet,(()=>"base64"));let i,o;return"base64"===r?i=String.raw`[A-Za-z0-9+\/]`:(ch.assert.call(void 0,"base64url"===r),i=String.raw`[-_A-Za-z0-9]`),o=n?new RegExp(`^(?:${i}{4})*(?:${i}{3}=|${i}{2}==)?$`,"u"):new RegExp(`^(?:${i}{4})*(?:${i}{2,3}|${i}{3}=|${i}{2}==)?$`,"u"),dh.pattern.call(void 0,e,o)},Object.defineProperty(oh,"__esModule",{value:!0});var uh=sh,lh=Va,fh=lh.size.call(void 0,uh.base64.call(void 0,lh.string.call(void 0),{paddingRequired:!0}),44,44);oh.ChecksumStruct=fh;var hh={};Object.defineProperty(hh,"__esModule",{value:!0});var ph=wa,Ah=Ea,gh=Va,mh=gh.union.call(void 0,[gh.number.call(void 0),gh.bigint.call(void 0),gh.string.call(void 0),ph.StrictHexStruct]),vh=gh.coerce.call(void 0,gh.number.call(void 0),mh,Number),bh=gh.coerce.call(void 0,gh.bigint.call(void 0),mh,BigInt);gh.union.call(void 0,[ph.StrictHexStruct,gh.instance.call(void 0,Uint8Array)]);var yh=gh.coerce.call(void 0,gh.instance.call(void 0,Uint8Array),gh.union.call(void 0,[ph.StrictHexStruct]),ph.hexToBytes),wh=gh.coerce.call(void 0,ph.StrictHexStruct,gh.instance.call(void 0,Uint8Array),ph.bytesToHex);hh.createNumber=function(e){try{const t=gh.create.call(void 0,e,vh);return Ah.assert.call(void 0,Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof gh.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},hh.createBigInt=function(e){try{return gh.create.call(void 0,e,bh)}catch(e){if(e instanceof gh.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},hh.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return gh.create.call(void 0,e,yh)}catch(e){if(e instanceof gh.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},hh.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return gh.create.call(void 0,e,wh)}catch(e){if(e instanceof gh.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}};var Eh={},Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});var _h=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};Sh.__privateGet=(e,t,n)=>(_h(e,t,"read from private field"),n?n.call(e):t.get(e)),Sh.__privateAdd=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Sh.__privateSet=(e,t,n,r)=>(_h(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Object.defineProperty(Eh,"__esModule",{value:!0});var Ch,Mh,kh=Sh,Ih=class{constructor(e){kh.__privateAdd.call(void 0,this,Ch,void 0),kh.__privateSet.call(void 0,this,Ch,new Map(e)),Object.freeze(this)}get size(){return kh.__privateGet.call(void 0,this,Ch).size}[Symbol.iterator](){return kh.__privateGet.call(void 0,this,Ch)[Symbol.iterator]()}entries(){return kh.__privateGet.call(void 0,this,Ch).entries()}forEach(e,t){return kh.__privateGet.call(void 0,this,Ch).forEach(((n,r,i)=>e.call(t,n,r,this)))}get(e){return kh.__privateGet.call(void 0,this,Ch).get(e)}has(e){return kh.__privateGet.call(void 0,this,Ch).has(e)}keys(){return kh.__privateGet.call(void 0,this,Ch).keys()}values(){return kh.__privateGet.call(void 0,this,Ch).values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}};Ch=new WeakMap;var Rh=class{constructor(e){kh.__privateAdd.call(void 0,this,Mh,void 0),kh.__privateSet.call(void 0,this,Mh,new Set(e)),Object.freeze(this)}get size(){return kh.__privateGet.call(void 0,this,Mh).size}[Symbol.iterator](){return kh.__privateGet.call(void 0,this,Mh)[Symbol.iterator]()}entries(){return kh.__privateGet.call(void 0,this,Mh).entries()}forEach(e,t){return kh.__privateGet.call(void 0,this,Mh).forEach(((n,r,i)=>e.call(t,n,r,this)))}has(e){return kh.__privateGet.call(void 0,this,Mh).has(e)}keys(){return kh.__privateGet.call(void 0,this,Mh).keys()}values(){return kh.__privateGet.call(void 0,this,Mh).values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}};Mh=new WeakMap,Object.freeze(Ih),Object.freeze(Ih.prototype),Object.freeze(Rh),Object.freeze(Rh.prototype),Eh.FrozenMap=Ih,Eh.FrozenSet=Rh,Object.defineProperty(ba,"__esModule",{value:!0});var Oh=ya,xh=xd,Th=Td,Ph=Ld,Nh=gf,Lh=Bf,Dh=Hf,jh=oh,Bh=sh,Fh=hh,Kh=wa,$h=Ea,Uh=Sa,zh=_a,qh=Eh;ba.AssertionError=$h.AssertionError,ba.CAIP_ACCOUNT_ADDRESS_REGEX=Dh.CAIP_ACCOUNT_ADDRESS_REGEX,ba.CAIP_ACCOUNT_ID_REGEX=Dh.CAIP_ACCOUNT_ID_REGEX,ba.CAIP_CHAIN_ID_REGEX=Dh.CAIP_CHAIN_ID_REGEX,ba.CAIP_NAMESPACE_REGEX=Dh.CAIP_NAMESPACE_REGEX,ba.CAIP_REFERENCE_REGEX=Dh.CAIP_REFERENCE_REGEX,ba.CaipAccountAddressStruct=Dh.CaipAccountAddressStruct,ba.CaipAccountIdStruct=Dh.CaipAccountIdStruct,ba.CaipChainIdStruct=Dh.CaipChainIdStruct,ba.CaipNamespaceStruct=Dh.CaipNamespaceStruct,ba.CaipReferenceStruct=Dh.CaipReferenceStruct,ba.ChecksumStruct=jh.ChecksumStruct,ba.Duration=Th.Duration,ba.ESCAPE_CHARACTERS_REGEXP=zh.ESCAPE_CHARACTERS_REGEXP,ba.FrozenMap=qh.FrozenMap,ba.FrozenSet=qh.FrozenSet,ba.HexAddressStruct=Kh.HexAddressStruct,ba.HexChecksumAddressStruct=Kh.HexChecksumAddressStruct,ba.HexStruct=Kh.HexStruct,ba.JsonRpcErrorStruct=Nh.JsonRpcErrorStruct,ba.JsonRpcFailureStruct=Nh.JsonRpcFailureStruct,ba.JsonRpcIdStruct=Nh.JsonRpcIdStruct,ba.JsonRpcNotificationStruct=Nh.JsonRpcNotificationStruct,ba.JsonRpcParamsStruct=Nh.JsonRpcParamsStruct,ba.JsonRpcRequestStruct=Nh.JsonRpcRequestStruct,ba.JsonRpcResponseStruct=Nh.JsonRpcResponseStruct,ba.JsonRpcSuccessStruct=Nh.JsonRpcSuccessStruct,ba.JsonRpcVersionStruct=Nh.JsonRpcVersionStruct,ba.JsonSize=zh.JsonSize,ba.JsonStruct=Nh.JsonStruct,ba.PendingJsonRpcResponseStruct=Nh.PendingJsonRpcResponseStruct,ba.StrictHexStruct=Kh.StrictHexStruct,ba.UnsafeJsonStruct=Nh.UnsafeJsonStruct,ba.VersionRangeStruct=Ph.VersionRangeStruct,ba.VersionStruct=Ph.VersionStruct,ba.add0x=Kh.add0x,ba.assert=$h.assert,ba.assertExhaustive=$h.assertExhaustive,ba.assertIsBytes=Kh.assertIsBytes,ba.assertIsHexString=Kh.assertIsHexString,ba.assertIsJsonRpcError=Nh.assertIsJsonRpcError,ba.assertIsJsonRpcFailure=Nh.assertIsJsonRpcFailure,ba.assertIsJsonRpcNotification=Nh.assertIsJsonRpcNotification,ba.assertIsJsonRpcRequest=Nh.assertIsJsonRpcRequest,ba.assertIsJsonRpcResponse=Nh.assertIsJsonRpcResponse,ba.assertIsJsonRpcSuccess=Nh.assertIsJsonRpcSuccess,ba.assertIsPendingJsonRpcResponse=Nh.assertIsPendingJsonRpcResponse,ba.assertIsSemVerRange=Ph.assertIsSemVerRange,ba.assertIsSemVerVersion=Ph.assertIsSemVerVersion,ba.assertIsStrictHexString=Kh.assertIsStrictHexString,ba.assertStruct=$h.assertStruct,ba.base64=Bh.base64,ba.base64ToBytes=Kh.base64ToBytes,ba.bigIntToBytes=Kh.bigIntToBytes,ba.bigIntToHex=Oh.bigIntToHex,ba.bytesToBase64=Kh.bytesToBase64,ba.bytesToBigInt=Kh.bytesToBigInt,ba.bytesToHex=Kh.bytesToHex,ba.bytesToNumber=Kh.bytesToNumber,ba.bytesToSignedBigInt=Kh.bytesToSignedBigInt,ba.bytesToString=Kh.bytesToString,ba.calculateNumberSize=zh.calculateNumberSize,ba.calculateStringSize=zh.calculateStringSize,ba.concatBytes=Kh.concatBytes,ba.createBigInt=Fh.createBigInt,ba.createBytes=Fh.createBytes,ba.createDataView=Kh.createDataView,ba.createDeferredPromise=xh.createDeferredPromise,ba.createHex=Fh.createHex,ba.createModuleLogger=Lh.createModuleLogger,ba.createNumber=Fh.createNumber,ba.createProjectLogger=Lh.createProjectLogger,ba.exactOptional=Nh.exactOptional,ba.getChecksumAddress=Kh.getChecksumAddress,ba.getErrorMessage=Uh.getErrorMessage,ba.getJsonRpcIdValidator=Nh.getJsonRpcIdValidator,ba.getJsonSize=Nh.getJsonSize,ba.getKnownPropertyNames=zh.getKnownPropertyNames,ba.getSafeJson=Nh.getSafeJson,ba.gtRange=Ph.gtRange,ba.gtVersion=Ph.gtVersion,ba.hasProperty=zh.hasProperty,ba.hexToBigInt=Oh.hexToBigInt,ba.hexToBytes=Kh.hexToBytes,ba.hexToNumber=Oh.hexToNumber,ba.inMilliseconds=Th.inMilliseconds,ba.isASCII=zh.isASCII,ba.isBytes=Kh.isBytes,ba.isCaipAccountAddress=Dh.isCaipAccountAddress,ba.isCaipAccountId=Dh.isCaipAccountId,ba.isCaipChainId=Dh.isCaipChainId,ba.isCaipNamespace=Dh.isCaipNamespace,ba.isCaipReference=Dh.isCaipReference,ba.isErrorWithCode=Uh.isErrorWithCode,ba.isErrorWithMessage=Uh.isErrorWithMessage,ba.isErrorWithStack=Uh.isErrorWithStack,ba.isHexString=Kh.isHexString,ba.isJsonRpcError=Nh.isJsonRpcError,ba.isJsonRpcFailure=Nh.isJsonRpcFailure,ba.isJsonRpcNotification=Nh.isJsonRpcNotification,ba.isJsonRpcRequest=Nh.isJsonRpcRequest,ba.isJsonRpcResponse=Nh.isJsonRpcResponse,ba.isJsonRpcSuccess=Nh.isJsonRpcSuccess,ba.isNonEmptyArray=zh.isNonEmptyArray,ba.isNullOrUndefined=zh.isNullOrUndefined,ba.isObject=zh.isObject,ba.isPendingJsonRpcResponse=Nh.isPendingJsonRpcResponse,ba.isPlainObject=zh.isPlainObject,ba.isStrictHexString=Kh.isStrictHexString,ba.isValidChecksumAddress=Kh.isValidChecksumAddress,ba.isValidHexAddress=Kh.isValidHexAddress,ba.isValidJson=Nh.isValidJson,ba.isValidSemVerRange=Ph.isValidSemVerRange,ba.isValidSemVerVersion=Ph.isValidSemVerVersion,ba.jsonrpc2=Nh.jsonrpc2,ba.numberToBytes=Kh.numberToBytes,ba.numberToHex=Oh.numberToHex,ba.object=Nh.object,ba.parseCaipAccountId=Dh.parseCaipAccountId,ba.parseCaipChainId=Dh.parseCaipChainId,ba.remove0x=Kh.remove0x,ba.satisfiesVersionRange=Ph.satisfiesVersionRange,ba.signedBigIntToBytes=Kh.signedBigIntToBytes,ba.stringToBytes=Kh.stringToBytes,ba.timeSince=Th.timeSince,ba.valueToBytes=Kh.valueToBytes,ba.wrapError=Uh.wrapError,Object.defineProperty(ma,"__esModule",{value:!0});var Vh=va,Hh=ba,Wh=Vh.errorCodes.rpc.internal,Jh={code:Wh,message:Yh(Wh)},Gh="Unspecified server error.";function Yh(e,t="Unspecified error message. This is a bug, please report it."){if(Qh(e)){const t=e.toString();if(Hh.hasProperty.call(void 0,Vh.errorValues,t))return Vh.errorValues[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return Gh}return t}function Qh(e){return Number.isInteger(e)}function Xh(e){return Array.isArray(e)?e.map((e=>Hh.isValidJson.call(void 0,e)?e:Hh.isObject.call(void 0,e)?Zh(e):null)):Hh.isObject.call(void 0,e)?Zh(e):Hh.isValidJson.call(void 0,e)?e:null}function Zh(e){return Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return Hh.isValidJson.call(void 0,r)&&(t[n]=r),t}),{})}ma.JSON_RPC_SERVER_ERROR_MESSAGE=Gh,ma.getMessageFromCode=Yh,ma.isValidCode=Qh,ma.serializeError=function(e,{fallbackError:t=Jh,shouldIncludeStack:n=!0}={}){if(!Hh.isJsonRpcError.call(void 0,t))throw new Error("Must provide fallback error with integer number code and string message.");const r=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(Hh.isJsonRpcError.call(void 0,e))return e;const n=Xh(e),r={...t,data:{cause:n}};return r}(e,t);return n||delete r.stack,r},ma.serializeCause=Xh;var ep=sp;sp.default=sp,sp.stable=up,sp.stableStringify=up;var tp="[...]",np="[Circular]",rp=[],ip=[];function op(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function sp(e,t,n,r){var i;void 0===r&&(r=op()),cp(e,"",0,[],void 0,0,r);try{i=0===ip.length?JSON.stringify(e,t,n):JSON.stringify(e,fp(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==rp.length;){var o=rp.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function ap(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);void 0!==i.get?i.configurable?(Object.defineProperty(r,n,{value:e}),rp.push([r,n,t,i])):ip.push([t,n,e]):(r[n]=e,rp.push([r,n,t]))}function cp(e,t,n,r,i,o,s){var a;if(o+=1,"object"==typeof e&&null!==e){for(a=0;a<r.length;a++)if(r[a]===e)return void ap(np,e,t,i);if(void 0!==s.depthLimit&&o>s.depthLimit)return void ap(tp,e,t,i);if(void 0!==s.edgesLimit&&n+1>s.edgesLimit)return void ap(tp,e,t,i);if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)cp(e[a],a,a,r,e,o,s);else{var c=Object.keys(e);for(a=0;a<c.length;a++){var d=c[a];cp(e[d],d,a,r,e,o,s)}}r.pop()}}function dp(e,t){return e<t?-1:e>t?1:0}function up(e,t,n,r){void 0===r&&(r=op());var i,o=lp(e,"",0,[],void 0,0,r)||e;try{i=0===ip.length?JSON.stringify(o,t,n):JSON.stringify(o,fp(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==rp.length;){var s=rp.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function lp(e,t,n,r,i,o,s){var a;if(o+=1,"object"==typeof e&&null!==e){for(a=0;a<r.length;a++)if(r[a]===e)return void ap(np,e,t,i);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==s.depthLimit&&o>s.depthLimit)return void ap(tp,e,t,i);if(void 0!==s.edgesLimit&&n+1>s.edgesLimit)return void ap(tp,e,t,i);if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)lp(e[a],a,a,r,e,o,s);else{var c={},d=Object.keys(e).sort(dp);for(a=0;a<d.length;a++){var u=d[a];lp(e[u],u,a,r,e,o,s),c[u]=e[u]}if(void 0===i)return c;rp.push([i,t,e]),i[t]=c}r.pop()}}function fp(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(ip.length>0)for(var r=0;r<ip.length;r++){var i=ip[r];if(i[1]===t&&i[0]===n){n=i[2],ip.splice(r,1);break}}return e.call(this,t,n)}}var hp=a(ep);Object.defineProperty(ga,"__esModule",{value:!0});var pp=ma,Ap=ba,gp=function(e){return e&&e.__esModule?e:{default:e}}(ep),mp=class extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,Ap.isPlainObject.call(void 0,this.data)&&(e.data.cause=pp.serializeCause.call(void 0,this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return gp.default.call(void 0,this.serialize(),vp,2)}};function vp(e,t){if("[Circular]"!==t)return t}function bp(e,t){return null!=e?e:t()}ga.JsonRpcError=mp,ga.EthereumProviderError=class extends mp{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}},Object.defineProperty(Aa,"__esModule",{value:!0});var yp=ga,wp=ma,Ep=va,Sp={parse:e=>Cp(Ep.errorCodes.rpc.parse,e),invalidRequest:e=>Cp(Ep.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Cp(Ep.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Cp(Ep.errorCodes.rpc.methodNotFound,e),internal:e=>Cp(Ep.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Cp(t,e)},invalidInput:e=>Cp(Ep.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Cp(Ep.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Cp(Ep.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Cp(Ep.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Cp(Ep.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Cp(Ep.errorCodes.rpc.limitExceeded,e)},_p={userRejectedRequest:e=>Mp(Ep.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Mp(Ep.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Mp(Ep.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Mp(Ep.errorCodes.provider.disconnected,e),chainDisconnected:e=>Mp(Ep.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new yp.EthereumProviderError(t,n,r)}};function Cp(e,t){const[n,r]=kp(t);return new yp.JsonRpcError(e,bp(n,(()=>wp.getMessageFromCode.call(void 0,e))),r)}function Mp(e,t){const[n,r]=kp(t);return new yp.EthereumProviderError(e,bp(n,(()=>wp.getMessageFromCode.call(void 0,e))),r)}function kp(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[bp(t,(()=>{})),n]}}return[]}Aa.rpcErrors=Sp,Aa.providerErrors=_p,Object.defineProperty(pa,"__esModule",{value:!0});var Ip=Aa,Rp=ga,Op=ma,xp=va;pa.EthereumProviderError=Rp.EthereumProviderError,pa.JsonRpcError=Rp.JsonRpcError,pa.errorCodes=xp.errorCodes,pa.getMessageFromCode=Op.getMessageFromCode,pa.providerErrors=Ip.providerErrors,pa.rpcErrors=Ip.rpcErrors,pa.serializeCause=Op.serializeCause,pa.serializeError=Op.serializeError;var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});const Pp=i;function Np(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout((()=>{throw e}))}}class Lp extends Pp.EventEmitter{emit(e,...t){let n="error"===e;const r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}const i=r[e];if(void 0===i)return!1;if("function"==typeof i)Np(i,this,t);else{const e=i.length,n=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(i);for(let r=0;r<e;r+=1)Np(n[r],this,t)}return!0}}var Dp,jp,Bp,Fp,Kp,$p,Up,zp,qp,Vp,Hp,Wp,Jp,Gp=Tp.default=Lp,Yp=s&&s.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Qp=s&&s.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Xp=s&&s.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Zp=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ha,"__esModule",{value:!0}),ha.JsonRpcEngine=void 0;const eA=pa,tA=Zp(Tp),nA=ba;class rA extends tA.default{constructor({notificationHandler:e}={}){super(),Dp.add(this),Bp.set(this,!1),Fp.set(this,void 0),Kp.set(this,void 0),Qp(this,Fp,[],"f"),Qp(this,Kp,e,"f")}destroy(){Xp(this,Fp,"f").forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),Qp(this,Fp,[],"f"),Qp(this,Bp,!0,"f")}push(e){Xp(this,Dp,"m",$p).call(this),Xp(this,Fp,"f").push(e)}handle(e,t){if(Xp(this,Dp,"m",$p).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?Xp(this,Dp,"m",Up).call(this,e,t):Xp(this,Dp,"m",Up).call(this,e):t?Xp(this,Dp,"m",zp).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return Xp(this,Dp,"m",$p).call(this),(e,t,n,r)=>Yp(this,void 0,void 0,(function*(){try{const[i,o,s]=yield Xp(rA,jp,"m",Vp).call(rA,e,t,Xp(this,Fp,"f"));return o?(yield Xp(rA,jp,"m",Wp).call(rA,s),r(i)):n((e=>Yp(this,void 0,void 0,(function*(){try{yield Xp(rA,jp,"m",Wp).call(rA,s)}catch(t){return e(t)}return e()}))))}catch(e){return r(e)}}))}_promiseHandle(e){return Yp(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{Xp(this,Dp,"m",zp).call(this,e,((e,r)=>{e&&void 0===r?n(e):t(r)})).catch(n)}))}))}}function iA(e){return JSON.stringify(e,null,2)}ha.JsonRpcEngine=rA,jp=rA,Bp=new WeakMap,Fp=new WeakMap,Kp=new WeakMap,Dp=new WeakSet,$p=function(){if(Xp(this,Bp,"f"))throw new Error("This engine is destroyed and can no longer be used.")},Up=function(e,t){return Yp(this,void 0,void 0,(function*(){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new eA.JsonRpcError(eA.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const n=(yield Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>void 0!==e));return t?t(null,n):n}catch(e){if(t)return t(e);throw e}}))},zp=function(e,t){var n;return Yp(this,void 0,void 0,(function*(){if(!e||Array.isArray(e)||"object"!=typeof e){const n=new eA.JsonRpcError(eA.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(n,{id:null,jsonrpc:"2.0",error:n})}if("string"!=typeof e.method){const r=new eA.JsonRpcError(eA.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return Xp(this,Kp,"f")&&!(0,nA.isJsonRpcRequest)(e)?t(null):t(r,{id:null!==(n=e.id)&&void 0!==n?n:null,jsonrpc:"2.0",error:r})}if(Xp(this,Kp,"f")&&!(0,nA.isJsonRpcRequest)(e)){try{yield Xp(this,Kp,"f").call(this,e)}catch(r){return t(r)}return t(null)}let r=null;const i=Object.assign({},e),o={id:i.id,jsonrpc:i.jsonrpc};try{yield Xp(rA,jp,"m",qp).call(rA,i,o,Xp(this,Fp,"f"))}catch(e){r=e}return r&&(delete o.result,o.error||(o.error=(0,eA.serializeError)(r))),t(r,o)}))},qp=function(e,t,n){return Yp(this,void 0,void 0,(function*(){const[r,i,o]=yield Xp(rA,jp,"m",Vp).call(rA,e,t,n);if(Xp(rA,jp,"m",Jp).call(rA,e,t,i),yield Xp(rA,jp,"m",Wp).call(rA,o),r)throw r}))},Vp=function(e,t,n){return Yp(this,void 0,void 0,(function*(){const r=[];let i=null,o=!1;for(const s of n)if([i,o]=yield Xp(rA,jp,"m",Hp).call(rA,e,t,s,r),o)break;return[i,o,r.reverse()]}))},Hp=function(e,t,n,r){return Yp(this,void 0,void 0,(function*(){return new Promise((i=>{const o=e=>{const n=e||t.error;n&&(t.error=(0,eA.serializeError)(n)),i([n,!0])},s=n=>{t.error?o(t.error):(n&&("function"!=typeof n&&o(new eA.JsonRpcError(eA.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof n}" for request:\n${iA(e)}`,{request:e})),r.push(n)),i([null,!1]))};try{n(e,t,s,o)}catch(e){o(e)}}))}))},Wp=function(e){return Yp(this,void 0,void 0,(function*(){for(const t of e)yield new Promise(((e,n)=>{t((t=>t?n(t):e()))}))}))},Jp=function(e,t,n){if(!(0,nA.hasProperty)(t,"result")&&!(0,nA.hasProperty)(t,"error"))throw new eA.JsonRpcError(eA.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${iA(e)}`,{request:e});if(!n)throw new eA.JsonRpcError(eA.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${iA(e)}`,{request:e})};var oA={};Object.defineProperty(oA,"__esModule",{value:!0}),oA.mergeMiddleware=void 0;const sA=ha;oA.mergeMiddleware=function(e){const t=new sA.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()},function(e){var t=s&&s.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=s&&s.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(oa,e),n(aa,e),n(ca,e),n(la,e),n(ha,e),n(oA,e)}(ia);var aA={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},cA={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function dA(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}var uA=(e,t)=>Object.hasOwnProperty.call(e,t);function lA(e){return function(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)&&"string"==typeof e.message?e.message:function(e){return null==e}(e)?"":String(e)}(e).replace(/\.$/u,"")}function fA(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}var hA=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};var pA=e=>Va.object(e);function AA({path:e,branch:t}){const n=e[e.length-1];return uA(t[t.length-2],n)}function gA(e){return new Va.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!AA(n)||e.validator(t,n),refiner:(t,n)=>!AA(n)||e.refiner(t,n)})}var mA=Va.union([Va.literal(null),Va.boolean(),Va.define("finite number",(e=>Va.is(e,Va.number())&&Number.isFinite(e))),Va.string(),Va.array(Va.lazy((()=>mA))),Va.record(Va.string(),Va.lazy((()=>mA)))]),vA=Va.coerce(mA,Va.any(),(e=>(function(e,t,n="Assertion failed",r=hA){try{Va.assert(e,t)}catch(e){throw fA(r,`${n}: ${lA(e)}.`)}}(e,mA),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function bA(e){try{return function(e){Va.create(e,vA)}(e),!0}catch{return!1}}var yA=Va.literal("2.0"),wA=Va.nullable(Va.union([Va.number(),Va.string()])),EA=pA({code:Va.integer(),message:Va.string(),data:gA(vA),stack:gA(Va.string())}),SA=Va.union([Va.record(Va.string(),vA),Va.array(vA)]);pA({id:wA,jsonrpc:yA,method:Va.string(),params:gA(SA)}),pA({jsonrpc:yA,method:Va.string(),params:gA(SA)}),Va.object({id:wA,jsonrpc:yA,result:Va.optional(Va.unknown()),error:Va.optional(EA)});var _A=pA({id:wA,jsonrpc:yA,result:vA}),CA=pA({id:wA,jsonrpc:yA,error:EA});Va.union([_A,CA]);var MA=aA.internal,kA="Unspecified error message. This is a bug, please report it.";RA(MA);var IA="Unspecified server error.";function RA(e,t=kA){if(function(e){return Number.isInteger(e)}(e)){const t=e.toString();if(uA(cA,t))return cA[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return IA}return t}function OA(e){return Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return bA(r)&&(t[n]=r),t}),{})}var xA=class extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};var t;return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=(t=this.data.cause,Array.isArray(t)?t.map((e=>bA(e)?e:dA(e)?OA(e):null)):dA(t)?OA(t):bA(t)?t:null))),this.stack&&(e.stack=this.stack),e}toString(){return hp(this.serialize(),TA,2)}};function TA(e,t){if("[Circular]"!==t)return t}var PA=e=>NA(aA.invalidRequest,e);function NA(e,t){const[n,r]=function(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,n]}}return[]}(t);return new xA(e,n??RA(e),r)}var LA=Object.freeze(["eth_subscription"]),DA=(e=console)=>{return[ia.createIdRemapMiddleware(),(t=e,(e,n,r)=>{"string"==typeof e.method&&e.method||(n.error=PA({message:"The request 'method' must be a non-empty string.",data:e})),r((e=>{const{error:r}=n;return r?(t.error(`MetaMask - RPC Error: ${r.message}`,r),e()):e()}))}),ra(e)];var t};var jA=(e,t,n=!0)=>(r,i)=>{r||i.error?t(r||i.error):!n||Array.isArray(i)?e(i):e(i.result)},BA=e=>Boolean(e)&&"string"==typeof e&&e.startsWith("0x"),FA=()=>{};async function KA(e,t){try{const t=await async function(){return{name:$A(window),icon:await UA(window)}}();e.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:t},FA)}catch(e){t.error({message:na.errors.sendSiteMetadata(),originalError:e})}}function $A(e){const{document:t}=e,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:window.location.hostname}async function UA(e){const{document:t}=e,n=t.querySelectorAll('head > link[rel~="icon"]');for(const e of Array.from(n))if(e&&await zA(e.href))return e.href;return null}async function zA(e){return new Promise(((t,n)=>{try{const n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(e){n(e)}}))}var qA,VA,HA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},WA=(e,t,n)=>(HA(e,t,"read from private field"),n?n.call(e):t.get(e)),JA=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},GA=(e,t,n,r)=>(HA(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),YA=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n},QA=a(YA),XA=class e extends Gp{constructor({logger:t=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),JA(this,qA,void 0),JA(this,VA,void 0),this._log=t,this.setMaxListeners(n),this._state={...e._defaultState},GA(this,VA,null),GA(this,qA,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new ia.JsonRpcEngine;r.forEach((e=>i.push(e))),this._rpcEngine=i}get chainId(){return WA(this,qA)}get selectedAddress(){return WA(this,VA)}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw PA({message:na.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if("string"!=typeof t||0===t.length)throw PA({message:na.errors.invalidRequestMethod(),data:e});if(void 0!==n&&!Array.isArray(n)&&("object"!=typeof n||null===n))throw PA({message:na.errors.invalidRequestParams(),data:e});const r=null==n?{method:t}:{method:t,params:n};return new Promise(((e,t)=>{this._rpcRequest(r,jA(e,t))}))}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:t,chainId:n,isUnlocked:r,networkVersion:i}=e;this._handleConnect(n),this._handleChainChanged({chainId:n,networkVersion:i}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,t){let n=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(n=(n,r)=>{this._handleAccountsChanged(r.result??[],"eth_accounts"===e.method),t(n,r)})),this._rpcEngine.handle(e,n)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(na.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let n;this._state.isConnected=!1,e?(n=new xA(1013,t??na.errors.disconnected()),this._log.debug(n)):(n=new xA(1011,t??na.errors.permanentlyDisconnected()),this._log.error(n),GA(this,qA,null),this._state.accounts=null,GA(this,VA,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleChainChanged({chainId:e}={}){BA(e)?(this._handleConnect(e),e!==WA(this,qA)&&(GA(this,qA,e),this._state.initialized&&this.emit("chainChanged",WA(this,qA)))):this._log.error(na.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,t=!1){let n=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),n=[]);for(const t of e)if("string"!=typeof t){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),n=[];break}if(!QA(this._state.accounts,n)&&(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",n),this._state.accounts=n,WA(this,VA)!==n[0]&&GA(this,VA,n[0]||null),this._state.initialized)){const e=[...n];this.emit("accountsChanged",e)}}_handleUnlockStateChanged({accounts:e,isUnlocked:t}={}){"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};qA=new WeakMap,VA=new WeakMap,XA._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var ZA,eg,tg=XA,ng={},rg={},ig={exports:{}},og=i.EventEmitter;function sg(){if(eg)return ZA;function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}eg=1;var s=e.Buffer,a=q.inspect,c=a&&a.custom||"inspect";return ZA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,o;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return a(this,n(n({},t),{},{depth:0,customInspect:!1}))}}],r&&i(t.prototype,r),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ZA}function ag(e,t){dg(e,t),cg(e)}function cg(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function dg(e,t){e.emit("error",t)}var ug={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(dg,this,e)):process.nextTick(dg,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?process.nextTick(cg,n):(n._writableState.errorEmitted=!0,process.nextTick(ag,n,e)):process.nextTick(ag,n,e):t?(process.nextTick(cg,n),t(e)):process.nextTick(cg,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}},lg={};var fg={};function hg(e,t,n){n||(n=Error);var r=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);r.prototype.name=n.name,r.prototype.code=e,fg[e]=r}function pg(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}hg("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),hg("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,o,s;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(r," ").concat(pg(t,"type"));else{var a=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(a," ").concat(r," ").concat(pg(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),hg("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),hg("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),hg("ERR_STREAM_PREMATURE_CLOSE","Premature close"),hg("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),hg("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),hg("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),hg("ERR_STREAM_WRITE_AFTER_END","write after end"),hg("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),hg("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),hg("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),lg.codes=fg;var Ag=lg.codes.ERR_INVALID_OPT_VALUE;var gg={getHighWaterMark:function(e,t,n,r){var i=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new Ag(r?n:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}},mg={exports:{}};"function"==typeof Object.create?mg.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:mg.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var vg,bg,yg,wg,Eg=mg.exports,Sg=function(e,t){if(_g("noDeprecation"))return e;var n=!1;return function(){if(!n){if(_g("throwDeprecation"))throw new Error(t);_g("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}};function _g(e){try{if(!s.localStorage)return!1}catch(e){return!1}var t=s.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}function Cg(){if(bg)return vg;function t(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var n;bg=1,vg=S,S.WritableState=E;var r={deprecate:Sg},i=og,o=e.Buffer,a=(void 0!==s?s:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,d=ug,u=gg.getHighWaterMark,l=lg.codes,f=l.ERR_INVALID_ARG_TYPE,h=l.ERR_METHOD_NOT_IMPLEMENTED,p=l.ERR_MULTIPLE_CALLBACK,A=l.ERR_STREAM_CANNOT_PIPE,g=l.ERR_STREAM_DESTROYED,m=l.ERR_STREAM_NULL_VALUES,v=l.ERR_STREAM_WRITE_AFTER_END,b=l.ERR_UNKNOWN_ENCODING,y=d.errorOrDestroy;function w(){}function E(e,r,i){n=n||Mg(),e=e||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new p;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(process.nextTick(i,r),process.nextTick(R,e,t),e._writableState.errorEmitted=!0,y(e,r)):(i(r),e._writableState.errorEmitted=!0,y(e,r),R(e,t))}(e,n,r,t,i);else{var o=k(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||M(e,n),r?process.nextTick(C,e,n,o,i):C(e,n,o,i)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function S(e){var t=this instanceof(n=n||Mg());if(!t&&!c.call(S,this))return new S(e);this._writableState=new E(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function _(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),R(e,t)}function M(e,n){n.bufferProcessing=!0;var r=n.bufferedRequest;if(e._writev&&r&&r.next){var i=n.bufferedRequestCount,o=new Array(i),s=n.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)o[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;o.allBuffers=c,_(e,n,!0,n.length,o,"",s.finish),n.pendingcb++,n.lastBufferedRequest=null,s.next?(n.corkedRequestsFree=s.next,s.next=null):n.corkedRequestsFree=new t(n),n.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,u=r.encoding,l=r.callback;if(_(e,n,!1,n.objectMode?1:d.length,d,u,l),r=r.next,n.bufferedRequestCount--,n.writing)break}null===r&&(n.lastBufferedRequest=null)}n.bufferedRequest=r,n.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final((function(n){t.pendingcb--,n&&y(e,n),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var n=k(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(I,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}return Eg(S,i),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){y(this,new A)},S.prototype.write=function(e,t,n){var r=this._writableState,i=!1,s=!r.objectMode&&function(e){return o.isBuffer(e)||e instanceof a}(e);return s&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ending?function(e,t){var n=new v;y(e,n),process.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i;return null===n?i=new m:"string"==typeof n||t.objectMode||(i=new f("chunk",["string","Buffer"],n)),!i||(y(e,i),process.nextTick(r,i),!1)}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,i,s){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var c=t.objectMode?1:r.length;t.length+=c;var d=t.length<t.highWaterMark;d||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,c,r,i,s);return d}(this,r,s,e,t,n)),i},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new h("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,R(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=d.destroy,S.prototype._undestroy=d.undestroy,S.prototype._destroy=function(e,t){t(e)},vg}function Mg(){if(wg)return yg;wg=1;var e=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};yg=s;var t=Ug(),n=Cg();Eg(s,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var o=r[i];s.prototype[o]||(s.prototype[o]=n.prototype[o])}function s(e){if(!(this instanceof s))return new s(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||process.nextTick(c,this)}function c(e){e.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),yg}var kg,Ig,Rg={},Og={exports:{}};function xg(){if(Ig)return Rg;Ig=1;var t=(kg||(kg=1,function(t,n){var r=e,i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(Og,Og.exports)),Og.exports).Buffer,n=t.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(e){var r;switch(this.encoding=function(e){var r=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof r&&(t.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return r||e}(e),this.encoding){case"utf16le":this.text=s,this.end=a,r=4;break;case"utf8":this.fillLast=o,r=4;break;case"base64":this.text=c,this.end=d,r=3;break;default:return this.write=u,void(this.end=l)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(r)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function l(e){return e&&e.length?this.write(e):""}return Rg.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=i(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(o=i(t[r]),o>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(o=i(t[r]),o>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},Rg}var Tg=lg.codes.ERR_STREAM_PREMATURE_CLOSE;function Pg(){}var Ng,Lg,Dg,jg,Bg,Fg,Kg=function e(t,n,r){if("function"==typeof n)return e(t,null,n);n||(n={}),r=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(r||Pg);var i=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,s=function(){t.writable||c()},a=t._writableState&&t._writableState.finished,c=function(){o=!1,a=!0,i||r.call(t)},d=t._readableState&&t._readableState.endEmitted,u=function(){i=!1,d=!0,o||r.call(t)},l=function(e){r.call(t,e)},f=function(){var e;return i&&!d?(t._readableState&&t._readableState.ended||(e=new Tg),r.call(t,e)):o&&!a?(t._writableState&&t._writableState.ended||(e=new Tg),r.call(t,e)):void 0},h=function(){t.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",s),t.on("close",s)):(t.on("complete",c),t.on("abort",f),t.req?h():t.on("request",h)),t.on("end",u),t.on("finish",c),!1!==n.error&&t.on("error",l),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",h),t.req&&t.req.removeListener("finish",c),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",c),t.removeListener("end",u),t.removeListener("error",l),t.removeListener("close",f)}};function $g(){if(Lg)return Ng;var e;function t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Lg=1;var n=Kg,r=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),d=Symbol("stream");function u(e,t){return{value:e,done:t}}function l(e){var t=e[r];if(null!==t){var n=e[d].read();null!==n&&(e[a]=null,e[r]=null,e[i]=null,t(u(n,!1)))}}function f(e){process.nextTick(l,e)}var h=Object.getPrototypeOf((function(){})),p=Object.setPrototypeOf((t(e={get stream(){return this[d]},next:function(){var e=this,t=this[o];if(null!==t)return Promise.reject(t);if(this[s])return Promise.resolve(u(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[o]?n(e[o]):t(u(void 0,!0))}))}));var n,r=this[a];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[s]?n(u(void 0,!0)):t[c](n,r)}),r)}}(r,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(u(i,!1));n=new Promise(this[c])}return this[a]=n,n}},Symbol.asyncIterator,(function(){return this})),t(e,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(u(void 0,!0))}))}))})),e),h);return Ng=function(e){var l,h=Object.create(p,(t(l={},d,{value:e,writable:!0}),t(l,r,{value:null,writable:!0}),t(l,i,{value:null,writable:!0}),t(l,o,{value:null,writable:!0}),t(l,s,{value:e._readableState.endEmitted,writable:!0}),t(l,c,{value:function(e,t){var n=h[d].read();n?(h[a]=null,h[r]=null,h[i]=null,e(u(n,!1))):(h[r]=e,h[i]=t)},writable:!0}),l));return h[a]=null,n(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=h[i];return null!==t&&(h[a]=null,h[r]=null,h[i]=null,t(e)),void(h[o]=e)}var n=h[r];null!==n&&(h[a]=null,h[r]=null,h[i]=null,n(u(void 0,!0))),h[s]=!0})),e.on("readable",f.bind(null,h)),h},Ng}function Ug(){if(Fg)return Bg;var t;Fg=1,Bg=_,_.ReadableState=S,i.EventEmitter;var n=function(e,t){return e.listeners(t).length},r=og,o=e.Buffer,a=(void 0!==s?s:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,d=q;c=d&&d.debuglog?d.debuglog("stream"):function(){};var u,l,f,h=sg(),p=ug,A=gg.getHighWaterMark,g=lg.codes,m=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Eg(_,r);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(e,n,r){t=t||Mg(),e=e||{},"boolean"!=typeof r&&(r=n instanceof t),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=A(this,e,"readableHighWaterMark",r),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=xg().StringDecoder),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function _(e){if(t=t||Mg(),!(this instanceof _))return new _(e);var n=this instanceof t;this._readableState=new S(e,this,n),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),r.call(this)}function C(e,t,n,r,i){c("readableAddChunk",t);var s,d=e._readableState;if(null===t)d.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}(e,d);else if(i||(s=function(e,t){var n;(function(e){return o.isBuffer(e)||e instanceof a})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new m("chunk",["string","Buffer","Uint8Array"],t));return n}(d,t)),s)w(e,s);else if(d.objectMode||t&&t.length>0)if("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)d.endEmitted?w(e,new y):M(e,d,t,!0);else if(d.ended)w(e,new v);else{if(d.destroyed)return!1;d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?M(e,d,t,!1):x(e,d)):M(e,d,t,!1)}else r||(d.reading=!1,x(e,d));return!d.ended&&(d.length<d.highWaterMark||0===d.length)}function M(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&R(e)),x(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=p.destroy,_.prototype._undestroy=p.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},_.prototype.unshift=function(e){return C(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){u||(u=xg().StringDecoder);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var k=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(O,e))}function O(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function x(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(T,e,t))}function T(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){c("readable nexttick read 0"),e.read(0)}function L(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(F,t,e))}function F(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function K(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}return _.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):R(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){w(this,new b("_read()"))},_.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:A;function s(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",d),e.removeListener("error",f),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",A),r.removeListener("data",l),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function a(){c("onend"),e.end()}i.endEmitted?process.nextTick(o):r.once("end",o),e.on("unpipe",s);var d=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&n(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",d);var u=!1;function l(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==K(i.pipes,e))&&!u&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function f(t){c("onerror",t),A(),e.removeListener("error",f),0===n(e,"error")&&w(e,t)}function h(){e.removeListener("finish",p),A()}function p(){c("onfinish"),e.removeListener("close",h),A()}function A(){c("unpipe"),r.unpipe(e)}return r.on("data",l),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",h),e.once("finish",p),e.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=K(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},_.prototype.on=function(e,t){var n=r.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?R(this):i.reading||process.nextTick(N,this))),n},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(P,this),n},_.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(P,this),t},_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(L,e,t))}(this,e)),e.paused=!1,this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=$g()),l(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=j,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(e,t){return void 0===f&&(f=jg?Dg:(jg=1,Dg=function(){throw new Error("Readable.from is not available in the browser")})),f(_,e,t)}),Bg}var zg=Qg,qg=lg.codes,Vg=qg.ERR_METHOD_NOT_IMPLEMENTED,Hg=qg.ERR_MULTIPLE_CALLBACK,Wg=qg.ERR_TRANSFORM_ALREADY_TRANSFORMING,Jg=qg.ERR_TRANSFORM_WITH_LENGTH_0,Gg=Mg();function Yg(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new Hg);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Qg(e){if(!(this instanceof Qg))return new Qg(e);Gg.call(this,e),this._transformState={afterTransform:Yg.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",Xg)}function Xg(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?Zg(this,null,null):this._flush((function(t,n){Zg(e,t,n)}))}function Zg(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Jg;if(e._transformState.transforming)throw new Wg;return e.push(null)}Eg(Qg,Gg),Qg.prototype.push=function(e,t){return this._transformState.needTransform=!1,Gg.prototype.push.call(this,e,t)},Qg.prototype._transform=function(e,t,n){n(new Vg("_transform()"))},Qg.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Qg.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Qg.prototype._destroy=function(e,t){Gg.prototype._destroy.call(this,e,(function(e){t(e)}))};var em,tm=rm,nm=zg;function rm(e){if(!(this instanceof rm))return new rm(e);nm.call(this,e)}Eg(rm,nm),rm.prototype._transform=function(e,t,n){n(null,e)};var im=lg.codes,om=im.ERR_MISSING_ARGS,sm=im.ERR_STREAM_DESTROYED;function am(e){if(e)throw e}function cm(e){e()}function dm(e,t){return e.pipe(t)}var um=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=function(e){return e.length?"function"!=typeof e[e.length-1]?am:e.pop():am}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new om("streams");var o=t.map((function(e,n){var s=n<t.length-1;return function(e,t,n,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var i=!1;e.on("close",(function(){i=!0})),void 0===em&&(em=Kg),em(e,{readable:t,writable:n},(function(e){if(e)return r(e);i=!0,r()}));var o=!1;return function(t){if(!i&&!o)return o=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new sm("pipe"))}}(e,s,n>0,(function(e){r||(r=e),e&&o.forEach(cm),s||(o.forEach(cm),i(r))}))}));return t.reduce(dm)};!function(e,t){(t=ig.exports=Ug()).Stream=t,t.Readable=t,t.Writable=Cg(),t.Duplex=Mg(),t.Transform=zg,t.PassThrough=tm,t.finished=Kg,t.pipeline=um}(0,ig.exports);var lm=ig.exports;Object.defineProperty(rg,"__esModule",{value:!0});const fm=lm;rg.default=function(e){if(!(null==e?void 0:e.engine))throw new Error("Missing engine parameter!");const{engine:t}=e,n=new fm.Duplex({objectMode:!0,read:()=>{},write:function(e,r,i){t.handle(e,((e,t)=>{n.push(t)})),i()}});return t.on&&t.on("notification",(e=>{n.push(e)})),n};var hm={},pm=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hm,"__esModule",{value:!0});const Am=pm(Tp),gm=lm;hm.default=function(e={}){const t={},n=new gm.Duplex({objectMode:!0,read:()=>{},write:function(n,o,s){let a=null;try{!n.id?function(n){(null==e?void 0:e.retryOnMessage)&&n.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:n=0})=>{if(!e.id)return;if(n>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const r=t[e.id];r&&(r.retryCount=n+1),i(e)}));r.emit("notification",n)}(n):function(e){const{id:n}=e;if(null===n)return;const r=t[n];if(!r)return void console.warn(`StreamMiddleware - Unknown response id "${n}"`);delete t[n],Object.assign(r.res,e),setTimeout(r.end)}(n)}catch(e){a=e}s(a)}}),r=new Am.default;return{events:r,middleware:(e,n,r,o)=>{t[e.id]={req:e,res:n,next:r,end:o},i(e)},stream:n};function i(e){n.push(e)}};var mm=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ng,"__esModule",{value:!0});var vm=ng.createStreamMiddleware=ng.createEngineStream=void 0;const bm=mm(rg);ng.createEngineStream=bm.default;const ym=mm(hm);vm=ng.createStreamMiddleware=ym.default;var wm={},Em={exports:{}},Sm=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),r}};var _m=Sm;function Cm(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Mm(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}Em.exports=_m(Cm),Em.exports.strict=_m(Mm),Cm.proto=Cm((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Cm(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Mm(this)},configurable:!0})}));var km=Em.exports,Im={};Object.defineProperty(Im,"__esModule",{value:!0}),Im.Substream=void 0;const Rm=lm;class Om extends Rm.Duplex{constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}Im.Substream=Om;var xm=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wm,"__esModule",{value:!0}),wm.ObjectMultiplex=void 0;const Tm=lm,Pm=xm(km),Nm=Im,Lm=Symbol("IGNORE_SUBSTREAM");let Dm=class extends Tm.Duplex{constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already ended`);if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Nm.Substream({parent:this,name:e});return this._substreams[e]=t,function(e,t){const n=(0,Pm.default)(t);(0,Tm.finished)(e,{readable:!1},n),(0,Tm.finished)(e,{writable:!1},n)}(this,(e=>t.destroy(e||void 0))),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=Lm}_read(){}_write(e,t,n){const{name:r,data:i}=e;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const o=this._substreams[r];return o?(o!==Lm&&o.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};wm.ObjectMultiplex=Dm;var jm=a(wm.ObjectMultiplex);const Bm=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;Bm.writable=e=>Bm(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,Bm.readable=e=>Bm(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,Bm.duplex=e=>Bm.writable(e)&&Bm.readable(e),Bm.transform=e=>Bm.duplex(e)&&"function"==typeof e._transform;var Fm,Km=Bm,$m=class extends tg{constructor(e,{jsonRpcStreamName:t,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!Km.duplex(e))throw new Error(na.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const o=new jm;lm.pipeline(e,o,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=vm({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),lm.pipeline(this._jsonRpcConnection.stream,o.createStream(t),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",(t=>{const{method:n,params:r}=t;"metamask_accountsChanged"===n?this._handleAccountsChanged(r):"metamask_unlockStateChanged"===n?this._handleUnlockStateChanged(r):"metamask_chainChanged"===n?this._handleChainChanged(r):LA.includes(n)?this.emit("message",{type:n,data:r}):"METAMASK_STREAM_FAILURE"===n&&e.destroy(new Error(na.errors.permanentlyDisconnected()))}))}async _initializeStateAsync(){let e;try{e=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(e)}_handleStreamDisconnect(e,t){let n=`MetaMask: Lost connection to "${e}".`;t?.stack&&(n+=`\n${t.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged({chainId:e,networkVersion:t}={}){BA(e)&&(e=>Boolean(e)&&"string"==typeof e)(t)?"loading"===t?this._handleDisconnect(!0):super._handleChainChanged({chainId:e}):this._log.error(na.errors.invalidNetworkParams(),{chainId:e,networkVersion:t})}},Um=class extends $m{constructor(e,{jsonRpcStreamName:t="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(e,{jsonRpcStreamName:t,logger:n,maxEventListeners:r,rpcMiddleware:DA(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},JA(this,Fm,void 0),this._initializeStateAsync(),GA(this,Fm,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",(e=>{const{method:t}=e;LA.includes(t)&&(this.emit("data",e),this.emit("notification",e.params.result))})),i)if("complete"===document.readyState)KA(this._rpcEngine,this._log);else{const e=()=>{KA(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",e)};window.addEventListener("DOMContentLoaded",e)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(na.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(na.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),WA(this,Fm)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(na.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}_handleDisconnect(e,t){super._handleDisconnect(e,t),WA(this,Fm)&&!e&&GA(this,Fm,null)}_warnOfDeprecation(e){!1===this._sentWarnings?.events[e]&&(this._log.warn(na.warnings.events[e]),this._sentWarnings.events[e]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(na.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(((e,t)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},jA(e,t))}catch(e){t(e)}}))}send(e,t){return this._sentWarnings.send||(this._log.warn(na.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise(((n,r)=>{try{this._rpcRequest({method:e,params:t},jA(n,r,!1))}catch(e){r(e)}}))}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(e,FA),t=!0;break;case"net_version":t=WA(this,Fm)??null;break;default:throw new Error(na.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise((e=>{this.on("_initialized",(()=>e()))})),this._state.isUnlocked),requestBatch:async e=>{if(!Array.isArray(e))throw PA({message:"Batch requests must be made with an array of request objects.",data:e});return new Promise(((t,n)=>{this._rpcRequest(e,jA(t,n))}))}},{get:(e,t,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(na.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...n))})}_handleChainChanged({chainId:e,networkVersion:t}={}){super._handleChainChanged({chainId:e,networkVersion:t}),this._state.isConnected&&t!==WA(this,Fm)&&(GA(this,Fm,t),this._state.initialized&&this.emit("networkChanged",WA(this,Fm)))}};Fm=new WeakMap;const zm=zf("MM_SDK");zm.color="#FFAC1C";var qm={},Vm={};Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.EthereumProviderError=Vm.EthereumRpcError=void 0;const Hm=ep;class Wm extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return Hm.default(this.serialize(),Jm,2)}}Vm.EthereumRpcError=Wm;function Jm(e,t){if("[Circular]"!==t)return t}Vm.EthereumProviderError=class extends Wm{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}};var Gm={},Ym={};Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.errorValues=Ym.errorCodes=void 0,Ym.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Ym.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Ym,n=Vm,r=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:r,message:s(r)};function s(n,r=i){if(Number.isInteger(n)){const r=n.toString();if(u(t.errorValues,r))return t.errorValues[r].message;if(c(n))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function a(e){if(!Number.isInteger(e))return!1;const n=e.toString();return!!t.errorValues[n]||!!c(e)}function c(e){return e>=-32099&&e<=-32e3}function d(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=s,e.isValidCode=a,e.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!1}={}){var i,c;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof n.EthereumRpcError)return e.serialize();const l={};if(e&&"object"==typeof e&&!Array.isArray(e)&&u(e,"code")&&a(e.code)){const t=e;l.code=t.code,t.message&&"string"==typeof t.message?(l.message=t.message,u(t,"data")&&(l.data=t.data)):(l.message=s(l.code),l.data={originalError:d(e)})}else{l.code=t.code;const n=null===(i=e)||void 0===i?void 0:i.message;l.message=n&&"string"==typeof n?n:t.message,l.data={originalError:d(e)}}const f=null===(c=e)||void 0===c?void 0:c.stack;return r&&e&&f&&"string"==typeof f&&(l.stack=f),l}}(Gm);var Qm={};Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.ethErrors=void 0;const Xm=Vm,Zm=Gm,ev=Ym;function tv(e,t){const[n,r]=rv(t);return new Xm.EthereumRpcError(e,n||Zm.getMessageFromCode(e),r)}function nv(e,t){const[n,r]=rv(t);return new Xm.EthereumProviderError(e,n||Zm.getMessageFromCode(e),r)}function rv(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}Qm.ethErrors={rpc:{parse:e=>tv(ev.errorCodes.rpc.parse,e),invalidRequest:e=>tv(ev.errorCodes.rpc.invalidRequest,e),invalidParams:e=>tv(ev.errorCodes.rpc.invalidParams,e),methodNotFound:e=>tv(ev.errorCodes.rpc.methodNotFound,e),internal:e=>tv(ev.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return tv(t,e)},invalidInput:e=>tv(ev.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>tv(ev.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>tv(ev.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>tv(ev.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>tv(ev.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>tv(ev.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>nv(ev.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>nv(ev.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>nv(ev.errorCodes.provider.unsupportedMethod,e),disconnected:e=>nv(ev.errorCodes.provider.disconnected,e),chainDisconnected:e=>nv(ev.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new Xm.EthereumProviderError(t,n,r)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Vm;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const n=Gm;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=Qm;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Ym;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(qm);class iv extends Um{constructor({connectionStream:e,shouldSendMetadata:t,autoRequestAccounts:n=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:t}),this.state={autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},zm(`[SDKProvider: constructor()] autoRequestAccounts=${n}`),this.state.autoRequestAccounts=n}forceInitializeState(){return Qs(this,void 0,void 0,(function*(){return zm(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()}))}_setConnected(){zm("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:t}=this._state;return t&&0!==t.length?(null===(e=t[0])||void 0===e?void 0:e.toLowerCase())||"":(zm("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleDisconnect({terminate:e=!1}){!function({terminate:e=!1,instance:t}){const{state:n}=t;t.isConnected()?(zm(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${e}`,t),e&&(t._state.accounts=null,t._state.isUnlocked=!1,t._state.isPermanentlyDisconnected=!0,t._state.initialized=!1),t._handleAccountsChanged([]),t._state.isConnected=!1,t.emit("disconnect",qm.ethErrors.provider.disconnected()),n.providerStateRequested=!1):zm("[SDKProvider: handleDisconnect()] not connected --- interrupt disconnection")}({terminate:e,instance:this})}_initializeStateAsync(){return Qs(this,void 0,void 0,(function*(){return function(e){var t;return Qs(this,void 0,void 0,(function*(){void 0===e.state&&(e.state={autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:n}=e;if(zm("[SDKProvider: initializeStateAsync()] initialize state async started"),n.providerStateRequested)zm("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let r;n.providerStateRequested=!0;try{r=yield e.request({method:"metamask_getProviderState"})}catch(t){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",t),void(n.providerStateRequested=!1)}if(zm(`[SDKProvider: initializeStateAsync()] state selectedAddress=${e.getSelectedAddress()} `,r),0===(null===(t=null==r?void 0:r.accounts)||void 0===t?void 0:t.length))if(zm("[SDKProvider: initializeStateAsync()] initial state doesn't contain accounts"),e.getSelectedAddress())zm("[SDKProvider: initializeStateAsync()] using instance.selectedAddress instead"),r.accounts=[e.getSelectedAddress()];else{zm("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const t=yield e.request({method:"eth_requestAccounts",params:[]});r.accounts=t}e._initializeState(r),n.providerStateRequested=!1}}))}(this)}))}_initializeState(e){return function(e,t,n){return zm("[SDKProvider: initializeState()] set state._initialized to false"),e._state.initialized=!1,t(n)}(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:t}={}){this.state.chainId=e,this.state.networkVersion=t,function({instance:e,chainId:t,networkVersion:n,superHandleChainChanged:r}){zm(`[SDKProvider: handleChainChanged()] chainId=${t} networkVersion=${n}`);let i=n;n||(zm("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),i="1"),e._state.isConnected=!0,e.emit("connect",{chainId:t}),r({chainId:t,networkVersion:i})}({instance:this,chainId:e,networkVersion:t,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var ov={exports:{}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(e,t){!function(t){var n=Object.hasOwnProperty,r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i="object"==typeof process&&"function"==typeof process.nextTick,o="function"==typeof Symbol,s="object"==typeof Reflect,a="function"==typeof setImmediate?setImmediate:setTimeout,c=o?s&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function d(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==t&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function l(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var f=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function h(e,n){for(var r={},i=e.length,o=n?n.length:0,s=0;s<i;s++)r[e[s]]=s<o?n[s]:t;return r}function p(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function A(e,r,i,o){var s=Object.assign({},r);if(!e)return s;if("object"!=typeof e)throw TypeError("options must be an object");var a,c,d,u=Object.keys(e),l=u.length;function f(e){throw Error('Invalid "'+a+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<l;h++){if(a=u[h],!o&&!n.call(r,a))throw Error('Unknown "'+a+'" option');(c=e[a])!==t&&(d=i[a],s[a]=d?d(c,f):c)}return s}function g(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function m(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var o=typeof e;if(o===r||o===i)return e;n(t)}:function(r,i){for(var o=typeof r,s=n;s-- >0;)if(o===e[s])return r;i(t)}}Object.assign(p.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,o=this._emitter,s=this._listeners,a=function(){var r=f.apply(null,arguments),s={data:r,name:t,original:e};n?!1!==n.call(i,s)&&o.emit.apply(o,[s.name].concat(r)):o.emit.apply(o,[t].concat(r))};if(s[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===s[e]&&(s[e]=a,r._on.call(i,e,a))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&s[e]&&(s[e]=null,r._off.call(i,e,a))},s[e]=null,o.on("removeListener",this._onRemoveListener)):(s[e]=a,r._on.call(i,e,a))},unsubscribe:function(e){var t,n,r,i=this,o=this._listeners,s=this._emitter,a=this._off,d=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function u(){i._onNewListener&&(s.off("newListener",i._onNewListener),s.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=w.call(s,i);s._observers.splice(e,1)}if(e){if(!(t=o[e]))return;a.call(d,e,t),delete o[e],--this._listenersCount||u()}else{for(r=(n=c(o)).length;r-- >0;)e=n[r],a.call(d,e,o[e]);this._listeners={},this._listenersCount=0,u()}}});var v=m(["function"]),b=m(["object","function"]);function y(e,t,n){var r,i,o,s=0,a=new e((function(c,d,u){function l(){i&&(i=null),s&&(clearTimeout(s),s=0)}n=A(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var f=function(e){l(),c(e)},h=function(e){l(),d(e)};r?t(f,h,u):(i=[function(e){h(e||Error("canceled"))}],t(f,h,(function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),o=!0),n.timeout>0&&(s=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",s=0,a.cancel(e),d(e)}),n.timeout))}));return r||(a.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),a}function w(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function E(e,t,n,r,i){if(!n)return null;if(0===r){var o=typeof t;if("string"===o){var s,a,d=0,u=0,l=this.delimiter,f=l.length;if(-1!==(a=t.indexOf(l))){s=new Array(5);do{s[d++]=t.slice(u,a),u=a+f}while(-1!==(a=t.indexOf(l,u)));s[d++]=t.slice(u),t=s,i=d}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var h,p,A,g,m,v,b,y=null,w=t[r],S=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),y=[n]):(e&&e.push.apply(e,n._listeners),y=[n]));else{if("*"===w){for(a=(v=c(n)).length;a-- >0;)"_listeners"!==(h=v[a])&&(b=E(e,t,n[h],r+1,i))&&(y?y.push.apply(y,b):y=b);return y}if("**"===w){for((m=r+1===i||r+2===i&&"*"===S)&&n._listeners&&(y=E(e,t,n,i,i)),a=(v=c(n)).length;a-- >0;)"_listeners"!==(h=v[a])&&("*"===h||"**"===h?(n[h]._listeners&&!m&&(b=E(e,t,n[h],i,i))&&(y?y.push.apply(y,b):y=b),b=E(e,t,n[h],r,i)):b=E(e,t,n[h],h===S?r+2:r,i),b&&(y?y.push.apply(y,b):y=b));return y}n[w]&&(y=E(e,t,n[w],r+1,i))}if((p=n["*"])&&E(e,t,p,r+1,i),A=n["**"])if(r<i)for(A._listeners&&E(e,t,A,i,i),a=(v=c(A)).length;a-- >0;)"_listeners"!==(h=v[a])&&(h===S?E(e,t,A[h],r+2,i):h===w?E(e,t,A[h],r+1,i):((g={})[h]=A[h],E(e,t,{"**":g},r+1,i)));else A._listeners?E(e,t,A,i,i):A["*"]&&A["*"]._listeners&&E(e,t,A["*"],i,i);return y}function S(e,t,n){var r,i,o=0,s=0,a=this.delimiter,c=a.length;if("string"==typeof e)if(-1!==(r=e.indexOf(a))){i=new Array(5);do{i[o++]=e.slice(s,r),s=r+c}while(-1!==(r=e.indexOf(a,s)));i[o++]=e.slice(s)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var d,u=this.listenerTree;for(r=0;r<o;r++)if(u=u[d=i[r]]||(u[d]={}),r===o-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,l.call(this,u._listeners.length,d))):u._listeners=t,!0;return!0}function _(e,t,n,r){for(var i,o,s,a,d=c(e),u=d.length,l=e._listeners;u-- >0;)i=e[o=d[u]],s="_listeners"===o?n:n?n.concat(o):[o],a=r||"symbol"==typeof o,l&&t.push(a?s:s.join(this.delimiter)),"object"==typeof i&&_.call(this,i,t,s,a);return t}function C(e){for(var t,n,r,i=c(e),o=i.length;o-- >0;)(t=e[n=i[o]])&&(r=!0,"_listeners"===n||C(t)||delete e[n]);return r}function M(e,t,n){this.emitter=e,this.event=t,this.listener=n}function k(e,n,r){if(!0===r)s=!0;else if(!1===r)o=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var o=r.async,s=r.promisify,c=r.nextTick,d=r.objectify}if(o||c||s){var u=n,l=n._origin||n;if(c&&!i)throw Error("process.nextTick is not supported");s===t&&(s="AsyncFunction"===n.constructor.name),n=function(){var e=arguments,t=this,n=this.event;return s?c?Promise.resolve():new Promise((function(e){a(e)})).then((function(){return t.event=n,u.apply(t,e)})):(c?process.nextTick:a)((function(){t.event=n,u.apply(t,e)}))},n._async=!0,n._origin=l}return[n,d?new M(this,e,n):this]}function I(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}M.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},I.EventEmitter2=I,I.prototype.listenTo=function(e,n,i){if("object"!=typeof e)throw TypeError("target musts be an object");var o=this;function s(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,r=i.reducers,s=w.call(o,e);n=-1===s?new p(o,e,i):o._observers[s];for(var a,d=c(t),u=d.length,l="function"==typeof r,f=0;f<u;f++)a=d[f],n.subscribe(a,t[a]||a,l?r:r&&r[a])}return i=A(i,{on:t,off:t,reducers:t},{on:v,off:v,reducers:b}),r(n)?s(h(n)):s("string"==typeof n?h(n.split(/\s+/)):n),this},I.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),o=!0);return o},I.prototype.delimiter=".",I.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},I.prototype.getMaxListeners=function(){return this._maxListeners},I.prototype.event="",I.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},I.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},I.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},I.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},I.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},I.prototype._many=function(e,t,n,r,i){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function s(){return 0==--t&&o.off(e,s),n.apply(this,arguments)}return s._origin=n,this._on(e,s,r,i)},I.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var e,t,n,r,i,s,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,o)for(r=0;r<n;r++)if("symbol"==typeof a[r]){s=!0;break}s||(a=a.join(this.delimiter))}var u,l=arguments.length;if(this._all&&this._all.length)for(r=0,n=(u=this._all.slice()).length;r<n;r++)switch(this.event=a,l){case 1:u[r].call(this,a);break;case 2:u[r].call(this,a,arguments[1]);break;case 3:u[r].call(this,a,arguments[1],arguments[2]);break;default:u[r].apply(this,arguments)}if(c)u=[],E.call(this,u,e,this.listenerTree,0,n);else{if("function"==typeof(u=this._events[a])){switch(this.event=a,l){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];u.apply(this,t)}return!0}u&&(u=u.slice())}if(u&&u.length){if(l>3)for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];for(r=0,n=u.length;r<n;r++)switch(this.event=a,l){case 1:u[r].call(this);break;case 2:u[r].call(this,arguments[1]);break;case 3:u[r].call(this,arguments[1],arguments[2]);break;default:u[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},I.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var e,t,n,r,i,s,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(r=a.length,o)for(i=0;i<r;i++)if("symbol"==typeof a[i]){t=!0;break}t||(a=a.join(this.delimiter))}var u,l=[],f=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=a,f){case 1:l.push(this._all[i].call(this,a));break;case 2:l.push(this._all[i].call(this,a,arguments[1]));break;case 3:l.push(this._all[i].call(this,a,arguments[1],arguments[2]));break;default:l.push(this._all[i].apply(this,arguments))}if(c?(u=[],E.call(this,u,e,this.listenerTree,0)):u=this._events[a],"function"==typeof u)switch(this.event=a,f){case 1:l.push(u.call(this));break;case 2:l.push(u.call(this,arguments[1]));break;case 3:l.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(f-1),s=1;s<f;s++)n[s-1]=arguments[s];l.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),f>3)for(n=new Array(f-1),s=1;s<f;s++)n[s-1]=arguments[s];for(i=0,r=u.length;i<r;i++)switch(this.event=a,f){case 1:l.push(u[i].call(this));break;case 2:l.push(u[i].call(this,arguments[1]));break;case 3:l.push(u[i].call(this,arguments[1],arguments[2]));break;default:l.push(u[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},I.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},I.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},I.prototype.onAny=function(e){return this._onAny(e,!1)},I.prototype.prependAny=function(e){return this._onAny(e,!0)},I.prototype.addListener=I.prototype.on,I.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},I.prototype._on=function(e,n,r,i){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");this._events||d.call(this);var o,s=this;return i!==t&&(n=(o=k.call(this,e,n,i))[0],s=o[1]),this._newListener&&this.emit("newListener",e,n),this.wildcard?(S.call(this,e,n,r),s):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,l.call(this,this._events[e].length,e))):this._events[e]=n,s)},I.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(i=E.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var s=0;s<i.length;s++){var a=i[s];if(n=a._listeners,r(n)){for(var c=-1,d=0,u=n.length;d<u;d++)if(n[d]===t||n[d].listener&&n[d].listener===t||n[d]._origin&&n[d]._origin===t){c=d;break}if(c<0)continue;return this.wildcard?a._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete a._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&C(this.listenerTree),this},I.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},I.prototype.removeListener=I.prototype.off,I.prototype.removeAllListeners=function(e){if(e===t)return!this._events||d.call(this),this;if(this.wildcard){var n,r=E.call(this,null,e,this.listenerTree,0);if(!r)return this;for(n=0;n<r.length;n++)r[n]._listeners=null;this.listenerTree&&C(this.listenerTree)}else this._events&&(this._events[e]=null);return this},I.prototype.listeners=function(e){var n,r,i,o,s,a=this._events;if(e===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!a)return[];for(o=(n=c(a)).length,i=[];o-- >0;)"function"==typeof(r=a[n[o]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(s=this.listenerTree))return[];var d=[],u="string"==typeof e?e.split(this.delimiter):e.slice();return E.call(this,d,u,s,0),d}return a&&(r=a[e])?"function"==typeof r?[r]:r:[]},I.prototype.eventNames=function(e){var t=this._events;return this.wildcard?_.call(this,this.listenerTree,[],null,e):t?c(t):[]},I.prototype.listenerCount=function(e){return this.listeners(e).length},I.prototype.hasListeners=function(e){if(this.wildcard){var n=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return E.call(this,n,r,this.listenerTree,0),n.length>0}var i=this._events,o=this._all;return!!(o&&o.length||i&&(e===t?c(i).length:i[e]))},I.prototype.listenersAny=function(){return this._all?this._all:[]},I.prototype.waitFor=function(e,n){var r=this,i=typeof n;return"number"===i?n={timeout:n}:"function"===i&&(n={filter:n}),y((n=A(n,{timeout:0,filter:t,handleError:!1,Promise:Promise,overload:!1},{filter:v,Promise:g})).Promise,(function(t,i,o){function s(){var o=n.filter;if(!o||o.apply(r,arguments))if(r.off(e,s),n.handleError){var a=arguments[0];a?i(a):t(f.apply(null,arguments).slice(1))}else t(f.apply(null,arguments))}o((function(){r.off(e,s)})),r._on(e,s,!1)}),{timeout:n.timeout,overload:n.overload})};var R=I.prototype;Object.defineProperties(I,{defaultMaxListeners:{get:function(){return R._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");R._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return y((n=A(n,{Promise:Promise,timeout:0,overload:!1},{Promise:g})).Promise,(function(n,r,i){var o;if("function"==typeof e.addEventListener)return o=function(){n(f.apply(null,arguments))},i((function(){e.removeEventListener(t,o)})),void e.addEventListener(t,o,{once:!0});var s,a=function(){s&&e.removeListener("error",s),n(f.apply(null,arguments))};"error"!==t&&(s=function(n){e.removeListener(t,a),r(n)},e.once("error",s)),i((function(){s&&e.removeListener("error",s),e.removeListener(t,a)})),e.once(t,a)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(R,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),"function"==typeof t&&t.amd?t((function(){return I})):e.exports=I}()}(ov);var sv=a(ov.exports);function av(e){return av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(e)}function cv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dv(e){var t=function(e,t){if("object"!==av(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==av(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===av(t)?t:String(t)}function uv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dv(r.key),r)}}function lv(e,t,n){return t&&uv(e.prototype,t),n&&uv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hv(e,t){return hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hv(e,t)}function pv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hv(e,t)}function Av(e,t){if(t&&("object"===av(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fv(e)}function gv(e){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gv(e)}function mv(e,t,n){return(t=dv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bv(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yv(Object(n),!0).forEach((function(t){mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ev={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Sv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cv(this,e),this.init(t,n)}return lv(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Ev,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,wv(wv({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}(),_v=new Sv,Cv=function(){function e(){cv(this,e),this.observers={}}return lv(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)}));this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function Mv(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function kv(e){return null==e?"":""+e}function Iv(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var s=r(o.shift());!e[s]&&n&&(e[s]=new n),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function Rv(e,t,n){var r=Iv(e,t,Object);r.obj[r.k]=n}function Ov(e,t){var n=Iv(e,t),r=n.obj,i=n.k;if(r)return r[i]}function xv(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):xv(e[r],t[r],n):e[r]=t[r]);return e}function Tv(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Pv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Nv(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Pv[e]})):e}var Lv="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Dv=[" ",",","?","!",";"];function jv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,o=0;o<r.length;++o){if(!i)return;if("string"==typeof i[r[o]]&&o+1<r.length)return;if(void 0===i[r[o]]){for(var s=2,a=r.slice(o,o+s).join(n),c=i[a];void 0===c&&r.length>o+s;)s++,c=i[a=r.slice(o,o+s).join(n)];if(void 0===c)return;if(null===c)return null;if(t.endsWith(a)){if("string"==typeof c)return c;if(a&&"string"==typeof c[a])return c[a]}var d=r.slice(o+s).join(n);return d?jv(c,d,n):void 0}i=i[r[o]]}return i}}function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach((function(t){mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gv(e);if(t){var i=gv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Av(this,n)}}var $v=function(e){pv(n,Cv);var t=Kv(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return cv(this,n),r=t.call(this),Lv&&Cv.call(fv(r)),r.data=e||{},r.options=i,void 0===r.options.keySeparator&&(r.options.keySeparator="."),void 0===r.options.ignoreJSONStructure&&(r.options.ignoreJSONStructure=!0),r}return lv(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(s=e.split("."));var a=Ov(this.data,s);return a||!o||"string"!=typeof n?a:jv(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(s=e.split("."))[1]),this.addNamespaces(t),Rv(this.data,s,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var a=Ov(this.data,s)||{};r?xv(a,n,i):a=Fv(Fv({},a),n),Rv(this.data,s,a),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Fv(Fv({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(),Uv={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))})),t}};function zv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zv(Object(n),!0).forEach((function(t){mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gv(e);if(t){var i=gv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Av(this,n)}}var Hv={},Wv=function(e){pv(n,Cv);var t=Vv(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cv(this,n),r=t.call(this),Lv&&Cv.call(fv(r)),function(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,fv(r)),r.options=i,void 0===r.options.keySeparator&&(r.options.keySeparator="."),r.logger=_v.create("translator"),r}return lv(n,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=Dv.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===r.length)return!0;var i=new RegExp("(".concat(r.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!i.test(e);if(!o){var s=e.indexOf(n);s>0&&!i.test(e.substring(0,s))&&(o=!0)}return o}(e,n,r));if(o&&!s){var a=e.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:e,namespaces:i};var c=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,t,r){var i=this;if("object"!==av(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===av(t)&&(t=qv({},t)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],t),c=a.key,d=a.namespaces,u=d[d.length-1],l=t.lng||this.language,f=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(f){var h=t.nsSeparator||this.options.nsSeparator;return o?{res:"".concat(u).concat(h).concat(c),usedKey:c,exactUsedKey:c,usedLng:l,usedNS:u}:"".concat(u).concat(h).concat(c)}return o?{res:c,usedKey:c,exactUsedKey:c,usedLng:l,usedNS:u}:c}var p=this.resolve(e,t),A=p&&p.res,g=p&&p.usedKey||c,m=p&&p.exactUsedKey||c,v=Object.prototype.toString.apply(A),b=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&A&&("string"!=typeof A&&"boolean"!=typeof A&&"number"!=typeof A)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(v)<0&&("string"!=typeof b||"[object Array]"!==v)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,A,qv(qv({},t),{},{ns:d})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return o?(p.res=w,p):w}if(s){var E="[object Array]"===v,S=E?[]:{},_=E?m:g;for(var C in A)if(Object.prototype.hasOwnProperty.call(A,C)){var M="".concat(_).concat(s).concat(C);S[C]=this.translate(M,qv(qv({},t),{joinArrays:!1,ns:d})),S[C]===M&&(S[C]=A[C])}A=S}}else if(y&&"string"==typeof b&&"[object Array]"===v)(A=A.join(b))&&(A=this.extendTranslation(A,e,t,r));else{var k=!1,I=!1,R=void 0!==t.count&&"string"!=typeof t.count,O=n.hasDefaultValue(t),x=R?this.pluralResolver.getSuffix(l,t.count,t):"",T=t["defaultValue".concat(x)]||t.defaultValue;!this.isValidLookup(A)&&O&&(k=!0,A=T),this.isValidLookup(A)||(I=!0,A=c);var P=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&I?void 0:A,N=O&&T!==A&&this.options.updateMissing;if(I||k||N){if(this.logger.log(N?"updateKey":"missingKey",l,u,c,N?T:A),s){var L=this.resolve(c,qv(qv({},t),{},{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var D=[],j=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&j&&j[0])for(var B=0;B<j.length;B++)D.push(j[B]);else"all"===this.options.saveMissingTo?D=this.languageUtils.toResolveHierarchy(t.lng||this.language):D.push(t.lng||this.language);var F=function(e,n,r){var o=O&&r!==A?r:P;i.options.missingKeyHandler?i.options.missingKeyHandler(e,u,n,o,N,t):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,u,n,o,N,t),i.emit("missingKey",e,u,n,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?D.forEach((function(e){i.pluralResolver.getSuffixes(e,t).forEach((function(n){F([e],c+n,t["defaultValue".concat(n)]||T)}))})):F(D,c,T))}A=this.extendTranslation(A,e,t,p,r),I&&A===c&&this.options.appendNamespaceToMissingKey&&(A="".concat(u,":").concat(c)),(I||k)&&this.options.parseMissingKeyHandler&&(A="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(u,":").concat(c):c,k?A:void 0):this.options.parseMissingKeyHandler(A))}return o?(p.res=A,p):A}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,qv(qv({},this.options.interpolation.defaultVariables),n),r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(qv(qv({},n),{interpolation:qv(qv({},this.options.interpolation),n.interpolation)}));var s,a="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var c=e.match(this.interpolator.nestingRegexp);s=c&&c.length}var d=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(d=qv(qv({},this.options.interpolation.defaultVariables),d)),e=this.interpolator.interpolate(e,d,n.lng||this.language,n),a){var u=e.match(this.interpolator.nestingRegexp);s<(u&&u.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var l=n.postProcess||this.options.postProcess,f="string"==typeof l?[l]:l;return null!=e&&f&&f.length&&!1!==n.applyPostProcessor&&(e=Uv.handle(f,e,t,this.options&&this.options.postProcessPassResolved?qv({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var c=s.extractFromKey(e,a),d=c.key;n=d;var u=c.namespaces;s.options.fallbackNS&&(u=u.concat(s.options.fallbackNS));var l=void 0!==a.count&&"string"!=typeof a.count,f=l&&!a.ordinal&&0===a.count&&s.pluralResolver.shouldUseIntlApi(),h=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,p=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);u.forEach((function(e){s.isValidLookup(t)||(o=e,!Hv["".concat(p[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(Hv["".concat(p[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(n){if(!s.isValidLookup(t)){i=n;var o,c=[d];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(c,d,n,e,a);else{var u;l&&(u=s.pluralResolver.getSuffix(n,a.count,a));var p="".concat(s.options.pluralSeparator,"zero");if(l&&(c.push(d+u),f&&c.push(d+p)),h){var A="".concat(d).concat(s.options.contextSeparator).concat(a.context);c.push(A),l&&(c.push(A+u),f&&c.push(A+p))}}for(;o=c.pop();)s.isValidLookup(t)||(r=o,t=s.getResource(n,e,o,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}]),n}();function Jv(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Gv=function(){function e(t){cv(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=_v.create("languageUtils")}return lv(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Jv(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Jv(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=Jv(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){return e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:0===e.indexOf(r)?e:void 0}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))})),i}}]),e}(),Yv=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Qv={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},Xv=["v1","v2","v3"],Zv={zero:0,one:1,two:2,few:3,many:4,other:5};var eb=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cv(this,e),this.languageUtils=t,this.options=r,this.logger=_v.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(n={},Yv.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:Qv[e.fc]}}))})),n)}return lv(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return Zv[e]-Zv[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var o=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!Xv.includes(this.options.compatibilityJSON)}}]),e}();function tb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tb(Object(n),!0).forEach((function(t){mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(e,t,n){var r=Ov(e,n);return void 0!==r?r:Ov(t,n)}(e,t,n);return!o&&i&&"string"==typeof n&&void 0===(o=jv(e,n,r))&&(o=jv(t,n,r)),o}var ib=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cv(this,e),this.logger=_v.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return lv(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Nv,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Tv(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Tv(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Tv(t.nestingPrefix):t.nestingPrefixEscaped||Tv("$t("),this.nestingSuffix=t.nestingSuffix?Tv(t.nestingSuffix):t.nestingSuffixEscaped||Tv(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,s,a=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function d(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(a.formatSeparator)<0){var i=rb(t,c,e,a.options.keySeparator,a.options.ignoreJSONStructure);return a.alwaysFormat?a.format(i,void 0,n,nb(nb(nb({},r),t),{},{interpolationkey:e})):i}var o=e.split(a.formatSeparator),s=o.shift().trim(),d=o.join(a.formatSeparator).trim();return a.format(rb(t,c,s,a.options.keySeparator,a.options.ignoreJSONStructure),d,n,nb(nb(nb({},r),t),{},{interpolationkey:s}))};this.resetRegExp();var l=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return d(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?d(a.escape(e)):d(e)}}].forEach((function(t){for(s=0;i=t.regex.exec(e);){var n=i[1].trim();if(void 0===(o=u(n)))if("function"==typeof l){var c=l(e,i,r);o="string"==typeof c?c:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(f){o=i[0];continue}a.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=kv(o));var d=t.safeValue(o);if(e=e.replace(i[0],d),f?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i,o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function a(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0];var s=(o=this.interpolate(o,i)).match(/'/g),a=o.match(/"/g);(s&&s.length%2==0&&!a||a.length%2!=0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i=nb(nb({},t),i))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete i.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){var c=[];(i=(i=nb({},s)).replace&&"string"!=typeof i.replace?i.replace:i).applyPostProcessor=!1,delete i.defaultValue;var d=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=u.shift(),c=u,d=!0}if((r=t(a.call(this,n[1].trim(),i),i))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=kv(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),d&&(r=c.reduce((function(e,t){return o.format(e,t,s.lng,nb(nb({},s),{},{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function ob(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ob(Object(n),!0).forEach((function(t){mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ob(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ab(e){var t={};return function(n,r,i){var o=r+JSON.stringify(i),s=t[o];return s||(s=e(r,i),t[o]=s),s(n)}}var cb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cv(this,e),this.logger=_v.create("formatter"),this.options=t,this.formats={number:ab((function(e,t){var n=new Intl.NumberFormat(e,sb({},t));return function(e){return n.format(e)}})),currency:ab((function(e,t){var n=new Intl.NumberFormat(e,sb(sb({},t),{},{style:"currency"}));return function(e){return n.format(e)}})),datetime:ab((function(e,t){var n=new Intl.DateTimeFormat(e,sb({},t));return function(e){return n.format(e)}})),relativetime:ab((function(e,t){var n=new Intl.RelativeTimeFormat(e,sb({},t));return function(e){return n.format(e,t.range||"day")}})),list:ab((function(e,t){var n=new Intl.ListFormat(e,sb({},t));return function(e){return n.format(e)}}))},this.init(t)}return lv(e,[{key:"init",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=ab(t)}},{key:"format",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((function(e){if(e){var t=bv(e.split(":")),r=t[0],i=t.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[r.trim()]||(n[r.trim()]=i),"false"===i&&(n[r.trim()]=!1),"true"===i&&(n[r.trim()]=!0),isNaN(i)||(n[r.trim()]=parseInt(i,10))}}))}return{formatName:t,formatOptions:n}}(t),s=o.formatName,a=o.formatOptions;if(r.formats[s]){var c=e;try{var d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},u=d.locale||d.lng||i.locale||i.lng||n;c=r.formats[s](e,u,sb(sb(sb({},a),i),d))}catch(e){r.logger.warn(e)}return c}return r.logger.warn("there was no format function for ".concat(s)),e}),e);return o}}]),e}();function db(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ub(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?db(Object(n),!0).forEach((function(t){mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):db(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gv(e);if(t){var i=gv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Av(this,n)}}var fb=function(e){pv(n,Cv);var t=lb(n);function n(e,r,i){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return cv(this,n),o=t.call(this),Lv&&Cv.call(fv(o)),o.backend=e,o.store=r,o.services=i,o.languageUtils=i.languageUtils,o.options=s,o.logger=_v.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=s.maxParallelReads||10,o.readingCalls=0,o.maxRetries=s.maxRetries>=0?s.maxRetries:5,o.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(i,s.backend,s),o}return lv(n,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o={},s={},a={},c={};return e.forEach((function(e){var r=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[a]=2:i.state[a]<0||(1===i.state[a]?void 0===s[a]&&(s[a]=!0):(i.state[a]=1,r=!1,void 0===s[a]&&(s[a]=!0),void 0===o[a]&&(o[a]=!0),void 0===c[t]&&(c[t]=!0)))})),r||(a[e]=!0)})),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(n){!function(e,t,n,r){var i=Iv(e,t,Object),o=i.obj,s=i.k;o[s]=o[s]||[],r&&(o[s]=o[s].concat(n)),r||o[s].push(n)}(n.loaded,[i],o),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(e){s[e]||(s[e]={});var t=n.loaded[e];t.length&&t.forEach((function(t){void 0===s[e][t]&&(s[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:o,callback:s});else{this.readingCalls++;var a=function(a,c){if(r.readingCalls--,r.waitingReads.length>0){var d=r.waitingReads.shift();r.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}a&&c&&i<r.maxRetries?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*o,s)}),o):s(a,c)},c=this.backend[n].bind(this.backend);if(2!==c.length)return c(e,t,a);try{var d=c(e,t);d&&"function"==typeof d.then?d.then((function(e){return a(null,e)})).catch(a):a(null,d)}catch(e){a(e)}}}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,s){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),s),t.loaded(e,r,s)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){var a=ub(ub({},o),{},{isUpdate:i}),c=this.backend.create.bind(this.backend);if(c.length<6)try{var d;(d=5===c.length?c(e,t,n,r,a):c(e,t,n,r))&&"function"==typeof d.then?d.then((function(e){return s(null,e)})).catch(s):s(null,d)}catch(e){s(e)}else c(e,t,n,r,s,a)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}]),n}();function hb(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===av(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===av(e[2])||"object"===av(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function pb(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Ab(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ab(Object(n),!0).forEach((function(t){mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gv(e);if(t){var i=gv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Av(this,n)}}function vb(){}var bb=function(e){pv(n,Cv);var t=mb(n);function n(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(cv(this,n),e=t.call(this),Lv&&Cv.call(fv(e)),e.options=pb(i),e.services={},e.logger=_v,e.modules={external:[]},r=fv(e),Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach((function(e){"function"==typeof r[e]&&(r[e]=r[e].bind(r))})),o&&!e.isInitialized&&!i.isClone){if(!e.options.initImmediate)return e.init(i,o),Av(e,fv(e));setTimeout((function(){e.init(i,o)}),0)}return e}return lv(n,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var r=hb();function i(e){return e?"function"==typeof e?new e:e:null}if(this.options=gb(gb(gb({},r),this.options),pb(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=gb(gb({},r.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?_v.init(i(this.modules.logger),this.options):_v.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=cb);var s=new Gv(this.options);this.store=new $v(this.options.resources,this.options);var a=this.services;a.logger=_v,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new eb(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(a.formatter=i(o),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new ib(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new fb(i(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=i(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=i(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new Wv(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=vb),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&"dev"!==c[0]&&(this.options.lng=c[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var d=Mv(),u=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),d.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),d}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vb,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var i=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};if(r)o(r);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return o(e)}));this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(i,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),n(e)}))}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=Mv();return e||(e=this.languages),t||(t=this.options.ns),n||(n=vb),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Uv.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Mv();this.emit("languageChanging",e);var i=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var s="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);s&&(n.language||i(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(e){!function(e,o){o?(i(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,s)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,i=function e(t,i){var o;if("object"!==av(i)){for(var s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];o=r.options.overloadTranslationOptionHandler([t,i].concat(a))}else o=gb({},i);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,o.keyPrefix=o.keyPrefix||n||e.keyPrefix;var d,u=r.options.keySeparator||".";return d=o.keyPrefix&&Array.isArray(t)?t.map((function(e){return"".concat(o.keyPrefix).concat(u).concat(e)})):o.keyPrefix?"".concat(o.keyPrefix).concat(u).concat(t):t,r.t(d,o)};return"string"==typeof e?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=n.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var s=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(r,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(r,e)||i&&!s(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Mv();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Mv();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";var t=this.services&&this.services.languageUtils||new Gv(hb());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vb,i=gb(gb(gb({},this.options),t),{isClone:!0}),o=new n(i);void 0===t.debug&&void 0===t.prefix||(o.logger=o.logger.clone(t));return["store","services","language"].forEach((function(t){o[t]=e[t]})),o.services=gb({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new Wv(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))})),o.init(i,r),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}();mv(bb,"createInstance",(function(){return new bb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}));var yb=bb.createInstance();yb.createInstance=bb.createInstance;var wb=yb.createInstance;yb.dir,yb.init,yb.loadResources,yb.reloadResources,yb.use,yb.changeLanguage,yb.getFixedT,yb.t,yb.exists,yb.setDefaultNamespace,yb.hasLoadedNamespace,yb.loadNamespaces,yb.loadLanguages;var Eb="0.18.6";const Sb={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},_b={[Sb.ETH_REQUESTACCOUNTS]:!0,[Sb.ETH_SENDTRANSACTION]:!0,[Sb.ETH_SIGNTRANSACTION]:!0,[Sb.ETH_SIGN]:!0,[Sb.ETH_ACCOUNTS]:!0,[Sb.PERSONAL_SIGN]:!0,[Sb.ETH_SIGNTYPEDDATA]:!0,[Sb.ETH_SIGNTYPEDDATA_V3]:!0,[Sb.ETH_SIGNTYPEDDATA_V4]:!0,[Sb.WALLET_REQUESTPERMISSIONS]:!0,[Sb.WALLET_GETPERMISSIONS]:!0,[Sb.WALLET_WATCHASSET]:!0,[Sb.WALLET_ADDETHEREUMCHAIN]:!0,[Sb.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[Sb.METAMASK_CONNECTSIGN]:!0,[Sb.METAMASK_CONNECTWITH]:!0,[Sb.PERSONAL_EC_RECOVER]:!0,[Sb.METAMASK_BATCH]:!0,[Sb.METAMASK_OPEN]:!0},Cb=Object.keys(_b).map((e=>e.toLowerCase())),Mb=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map((e=>e.toLowerCase())),kb=".sdk-comm",Ib="providerType",Rb="MMSDK_cached_address",Ob="MMSDK_cached_chainId",xb={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"};var Tb;!function(e){e.TERMINATE="terminate",e.EXTENSION="extension",e.INITIALIZED="initialized"}(Tb||(Tb={}));const Pb="undefined"!=typeof window&&window.localStorage;function Nb(e){var t,n;return Qs(this,void 0,void 0,(function*(){zm("[MetaMaskSDK: connectWithExtensionProvider()] ",e),e.sdkProvider=e.activeProvider,e.activeProvider=window.extension,window.ethereum=window.extension;try{const e=yield null===(t=window.extension)||void 0===t?void 0:t.request({method:"eth_requestAccounts"});zm(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${e}`)}catch(e){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",e)}localStorage.setItem(Ib,"extension"),e.extensionActive=!0,e.emit(ws.PROVIDER_UPDATE,Tb.EXTENSION),e.options.enableAnalytics&&(null===(n=e.analytics)||void 0===n||n.send({event:Rs.SDK_USE_EXTENSION}))}))}var Lb;!function(e){e.INPAGE="metamask-inpage",e.CONTENT_SCRIPT="metamask-contentscript",e.PROVIDER="metamask-provider"}(Lb||(Lb={}));const Db="https://metamask.app.link/connect",jb="metamask://connect",Bb={NAME:"MetaMask",RDNS:"io.metamask"},Fb=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,Kb=36e5;class $b{constructor({shouldSetOnWindow:e,connectionStream:t,shouldSendMetadata:n=!1,shouldShimWeb3:r}){const i=new iv({connectionStream:t,shouldSendMetadata:n,shouldSetOnWindow:e,shouldShimWeb3:r,autoRequestAccounts:!1}),o=new Proxy(i,{deleteProperty:()=>!0});var s;this.provider=o,e&&"undefined"!=typeof window&&(s=this.provider,window.ethereum=s,window.dispatchEvent(new Event("ethereum#initialized"))),r&&"undefined"!=typeof window&&function(e,t=console){let n=!1,r=!1;if(!window.web3){const i="__isMetaMaskShim__";let o={currentProvider:e};Object.defineProperty(o,i,{value:!0,enumerable:!0,configurable:!1,writable:!1}),o=new Proxy(o,{get:(o,s,...a)=>("currentProvider"!==s||n?"currentProvider"===s||s===i||r||(r=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch((e=>{t.debug("MetaMask: Failed to log web3 shim usage.",e)}))):(n=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(o,s,...a)),set:(...e)=>(t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...e))}),Object.defineProperty(window,"web3",{value:o,enumerable:!1,configurable:!0,writable:!0})}}(this.provider),this.provider.on("_initialized",(()=>{const e={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaNask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};zm("[Ethereum: constructor()] provider initialized",e)}))}static init(e){var t;return zm("[Ethereum: init()] Initializing Ethereum service"),this.instance=new $b(e),null===(t=this.instance)||void 0===t?void 0:t.provider}static destroy(){$b.instance=void 0}static getInstance(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}function Ub(e,n,r,i){var o,s,a,c,d,u,l,f,h,p,A,g,m,v;return Qs(this,void 0,void 0,(function*(){const r=null===(o=e.state.remote)||void 0===o?void 0:o.isReady(),b=null===(s=e.state.remote)||void 0===s?void 0:s.isConnected(),y=null===(a=e.state.remote)||void 0===a?void 0:a.isPaused(),w=$b.getProvider(),E=null===(c=e.state.remote)||void 0===c?void 0:c.getChannelId(),S=null===(d=e.state.remote)||void 0===d?void 0:d.isAuthorized(),{method:_,data:C}=(e=>{var n;let r;return t.isBuffer(e)?(r=e.toJSON(),r._isBuffer=!0):r=e,{method:null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.method,data:r}})(n);if(zm(`[RCPMS: write()] method='${_}' isRemoteReady=${r} channelId=${E} isSocketConnected=${b} isRemotePaused=${y} providerConnected=${w.isConnected()}`,n),!E)return _!==Sb.METAMASK_GETPROVIDERSTATE&&zm("[RCPMS: write()] Invalid channel id -- undefined"),i();zm(`[RCPMS: write()] remote.isPaused()=${null===(u=e.state.remote)||void 0===u?void 0:u.isPaused()} authorized=${S} ready=${r} socketConnected=${b}`,n);try{if(null===(l=e.state.remote)||void 0===l||l.sendMessage(null==C?void 0:C.data).then((()=>{zm(`[RCPMS: _write()] ${_} sent successfully`)})).catch((e=>{zm("[RCPMS: _write()] error sending message",e)})),!(null===(f=e.state.platformManager)||void 0===f?void 0:f.isSecure()))return zm(`[RCPMS: _write()] unsecure platform for method ${_} -- return callback`),i();if(!b&&!r)return zm(`[RCPMS: _write()] invalid connection status targetMethod=${_} socketConnected=${b} ready=${r} providerConnected=${w.isConnected()}`),i();if(!b&&r)return console.warn("[RCPMS: _write()] invalid socket status -- shouldn't happen"),i();const t=null!==(A=null===(p=null===(h=e.state.remote)||void 0===h?void 0:h.getKeyInfo())||void 0===p?void 0:p.ecies.public)&&void 0!==A?A:"",n=encodeURI(`channelId=${E}&pubkey=${t}&comm=socket&t=d`);_b[_]?(zm(`[RCPMS: _write()] redirect link for '${_}' socketConnected=${b} connect?${n}`),null===(g=e.state.platformManager)||void 0===g||g.openDeeplink(`${Db}?${n}`,`${jb}?${n}`,"_self")):(null===(m=e.state.remote)||void 0===m?void 0:m.isPaused())?(zm(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${_}`),null===(v=e.state.platformManager)||void 0===v||v.openDeeplink(`${Db}?redirect=true&${n}`,`${jb}?redirect=true&${n}`,"_self")):zm(`[RCPMS: _write()] method ${_} doesn't need redirect.`)}catch(e){return zm("[RCPMS: _write()] error sending message",e),i(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return i()}))}class zb extends lm.Duplex{constructor({name:e,remote:t,platformManager:n}){super({objectMode:!0}),this.state={_name:null,remote:null,platformManager:null},this.state._name=e,this.state.remote=t,this.state.platformManager=n,this._onMessage=this._onMessage.bind(this),this.state.remote.on(ws.MESSAGE,this._onMessage)}_write(e,t,n){return Qs(this,void 0,void 0,(function*(){return Ub(this,e,0,n)}))}_read(){}_onMessage(e){return function(e,n){try{if(zm(`[RCPMS: onMessage()] message=${n}`),!n||"object"!=typeof n)return;if("object"!=typeof(null==n?void 0:n.data))return;if(!(null==n?void 0:n.name))return void zm(`[RCPMS: onMessage()] ignore message without name message=${n}`);if((null==n?void 0:n.name)!==Lb.PROVIDER)return void zm(`[RCPMS: onMessage()] ignore message with wrong name message=${n}`);if(t.isBuffer(n)){const r=t.from(n);e.push(r)}else e.push(n)}catch(e){zm(`[RCPMS: onMessage()] ignore message error err=${e}`)}}(this,e)}start(){}}var qb={exports:{}};qb.exports=s.fetch,qb.exports.default=s.fetch,qb.exports.fetch=s.fetch,qb.exports.Headers=s.Headers,qb.exports.Request=s.Request,qb.exports.Response=s.Response;var Vb=a(qb.exports);let Hb=1;const Wb=e=>new Promise((t=>{setTimeout((()=>{t(!0)}),e)})),Jb=({checkInstallationOnAllCalls:e=!1,communicationLayerPreference:t,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:o,sdk:s,remoteConnection:a,debug:c})=>{var d;const u=(({name:e,remoteConnection:t})=>{if(!t||!(null==t?void 0:t.getConnector()))throw new Error("Missing remote connection parameter");return new zb({name:e,remote:null==t?void 0:t.getConnector(),platformManager:null==t?void 0:t.getPlatformManager()})})({name:Lb.INPAGE,target:Lb.CONTENT_SCRIPT,platformManager:i,communicationLayerPreference:t,remoteConnection:a}),l=i.getPlatformType(),f=s.options.dappMetadata,h=`Sdk/Javascript SdkVersion/${Eb} Platform/${l} dApp/${null!==(d=f.url)&&void 0!==d?d:f.name} dAppTitle/${f.name}`;let p=null,A=null;const g="undefined"!=typeof window&&window.localStorage;if(g){const e=localStorage.getItem(Rb);if(e)try{const t=JSON.parse(e);t&&(p=t)}catch(e){console.error(`[initializeMobileProvider] failed to parse cached accounts: ${e}`)}const t=localStorage.getItem(Ob);if(t)try{const e=JSON.parse(t);e&&(A=e)}catch(e){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${e}`)}}zm(`[initializeMobileProvider] cachedAccountAddress: ${p}, cachedChainId: ${A}`);const m=!(!n||l===Bs.NonBrowser||l===Bs.ReactNative),v=$b.init({shouldSetOnWindow:m,connectionStream:u,shouldShimWeb3:r});let b=!1;const y=e=>{b=e},w=()=>b,E=(t,n,r,c)=>Qs(void 0,void 0,void 0,(function*(){var d,u,l,f,m,v,E,S,_;if(b){null==a||a.showActiveModal();let e=w();for(;e;)yield Wb(1e3),e=w();return zm("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),r(...n)}const C=i.isMetaMaskInstalled(),M=null==a?void 0:a.isConnected(),k=$b.getProvider();let I=null,R=null;if(I=null!==(d=k.getSelectedAddress())&&void 0!==d?d:p,R=k.getChainId()||A,I&&g&&I!==p&&(p=I,localStorage.setItem(Rb,JSON.stringify(I))),R&&(A=R,g&&localStorage.setItem(Ob,JSON.stringify(R))),zm("[initializeMobileProvider: sendRequest()]",{selectedAddress:I,chainId:R}),c&&zm(`[initializeMobileProvider: sendRequest()] method=${t} ongoing=${b} selectedAddress=${I} isInstalled=${C} checkInstallationOnAllCalls=${e} socketConnected=${M}`),I&&t.toLowerCase()===Sb.ETH_ACCOUNTS.toLowerCase())return[I];if(R&&t.toLowerCase()===Sb.ETH_CHAINID.toLowerCase())return R;const O=[Sb.ETH_REQUESTACCOUNTS,Sb.WALLET_REQUESTPERMISSIONS,Sb.METAMASK_CONNECTSIGN,Sb.METAMASK_CONNECTWITH],x=!_b[t],T=null===(u=s.options.readonlyRPCMap)||void 0===u?void 0:u[R];if(T&&x)try{const e=null===(l=null==n?void 0:n[0])||void 0===l?void 0:l.params,r=yield(({rpcEndpoint:e,method:t,sdkInfo:n,params:r})=>Qs(void 0,void 0,void 0,(function*(){const i=JSON.stringify({jsonrpc:"2.0",method:t,params:r,id:(Hb+=1,Hb)}),o={Accept:"application/json","Content-Type":"application/json"};let s;e.includes("infura")&&(o["Metamask-Sdk-Info"]=n);try{s=yield Vb(e,{method:"POST",headers:o,body:i})}catch(e){throw e instanceof Error?new Error(`Failed to fetch from RPC: ${e.message}`):new Error(`Failed to fetch from RPC: ${e}`)}if(!s.ok)throw new Error(`Server responded with a status of ${s.status}`);return(yield s.json()).result})))({rpcEndpoint:T,sdkInfo:h,method:t,params:e||[]});return c&&zm(`initializeProvider::ReadOnlyRPCResponse ${r}`),r}catch(e){console.warn(`[initializeMobileProvider: sendRequest()] method=${t} readOnlyRPCRequest failed:`,e)}if((!C||C&&!M)&&t!==Sb.METAMASK_GETPROVIDERSTATE){const c=(null===(f=null==n?void 0:n[0])||void 0===f?void 0:f.params)||[];if(-1!==O.indexOf(t)||e){y(!0);try{yield o.start({wait:!1})}catch(e){if(y(!1),Tb.EXTENSION===e){if(zm(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${t} on the active provider`),t.toLowerCase()===Sb.METAMASK_CONNECTSIGN.toLowerCase()){const e=yield null===(m=s.getProvider())||void 0===m?void 0:m.request({method:Sb.ETH_REQUESTACCOUNTS,params:[]});if(!e.length)throw new Error("SDK state invalid -- undefined accounts");return yield null===(v=s.getProvider())||void 0===v?void 0:v.request({method:Sb.PERSONAL_SIGN,params:[c[0],e[0]]})}if(t.toLowerCase()===Sb.METAMASK_CONNECTWITH.toLowerCase()){const[e]=c;return yield(({method:e,sdk:t,params:n})=>Qs(void 0,void 0,void 0,(function*(){var r,i,o,s;if(!t.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");zm("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",e,n);const a=yield null===(r=t.getProvider())||void 0===r?void 0:r.request({method:Sb.ETH_REQUESTACCOUNTS,params:[]});if(!a.length)throw new Error("SDK state invalid -- undefined accounts");if((null==e?void 0:e.toLowerCase())===Sb.PERSONAL_SIGN.toLowerCase()){const r={method:e,params:[n[0],a[0]]};return yield null===(i=t.getProvider())||void 0===i?void 0:i.request(r)}if((null==e?void 0:e.toLowerCase())===Sb.ETH_SENDTRANSACTION.toLowerCase()){const r={method:e,params:[Object.assign(Object.assign({},n[0]),{from:a[0]})]};return yield null===(o=t.getProvider())||void 0===o?void 0:o.request(r)}return Mb.includes(e.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${e} -- not handled by the extension -- call separately`),a):yield null===(s=t.getProvider())||void 0===s?void 0:s.request({method:e,params:n})})))({method:e.method,sdk:s,params:e.params})}return zm(`[initializeMobileProvider: sendRequest()] sending '${t}' on active provider`,c),yield null===(E=s.getProvider())||void 0===E?void 0:E.request({method:t,params:c})}throw zm(`[initializeMobileProvider: sendRequest()] failed to start installer: ${e}`),e}const e=r(...n);try{yield new Promise(((e,t)=>{null==a||a.getConnector().once(ws.AUTHORIZED,(()=>{e(!0)})),s.once(ws.PROVIDER_UPDATE,(e=>{zm(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${e}`),e===Tb.EXTENSION?t(ws.PROVIDER_UPDATE):t(new Error("Connection Terminated"))}))}))}catch(e){if(y(!1),e===ws.PROVIDER_UPDATE)return yield null===(S=s.getProvider())||void 0===S?void 0:S.request({method:t,params:c});throw e}return y(!1),e}if(i.isSecure()&&_b[t])return r(...n);if(s.isExtensionActive())return zm(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${t}' to it`,n,c),yield null===(_=s.getProvider())||void 0===_?void 0:_.request({method:t,params:c});throw zm(`[initializeMobileProvider: sendRequest()] method=${t} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}const P=yield r(...n);return zm(`[initializeMobileProvider: sendRequest()] method=${t} rpcResponse: ${P}`),P})),{request:S}=v;v.request=(...e)=>Qs(void 0,void 0,void 0,(function*(){return E(null==e?void 0:e[0].method,e,S,c)}));const{send:_}=v;return v.send=(...e)=>Qs(void 0,void 0,void 0,(function*(){return E(null==e?void 0:e[0],e,_,c)})),zm("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),u.start(),v};function Gb(e){var t,n,r;return Qs(this,void 0,void 0,(function*(){const{options:i}=e;e.activeProvider=Jb({communicationLayerPreference:null!==(t=i.communicationLayerPreference)&&void 0!==t?t:js.SOCKET,platformManager:e.platformManager,sdk:e,checkInstallationOnAllCalls:i.checkInstallationOnAllCalls,injectProvider:null===(n=i.injectProvider)||void 0===n||n,shouldShimWeb3:null===(r=i.shouldShimWeb3)||void 0===r||r,installer:e.installer,remoteConnection:e.remoteConnection,debug:e.debug}),function(e){var t,n,r,i;null===(n=null===(t=e.remoteConnection)||void 0===t?void 0:t.getConnector())||void 0===n||n.on(ws.CONNECTION_STATUS,(t=>{e.emit(ws.CONNECTION_STATUS,t)})),null===(i=null===(r=e.remoteConnection)||void 0===r?void 0:r.getConnector())||void 0===i||i.on(ws.SERVICE_STATUS,(t=>{e.emit(ws.SERVICE_STATUS,t)}))}(e)}))}var Yb,Qb,Xb;const Zb="sdk";class ey{constructor({serverUrl:e,enabled:t,originatorInfo:n}){Yb.set(this,As),Qb.set(this,void 0),Xb.set(this,void 0),Zs(this,Yb,e,"f"),Zs(this,Xb,n,"f"),Zs(this,Qb,null==t||t,"f")}send({event:e,params:t}){if(!Xs(this,Qb,"f"))return;const n={id:Zb,event:e,sdkVersion:Eb,originationInfo:Xs(this,Xb,"f"),params:t};zm(`[Analytics: send()] event: ${e}`,n),fs(n,Xs(this,Yb,"f")).catch((e=>{zm(`[Analytics: send()] error: ${e}`)}))}}Yb=new WeakMap,Qb=new WeakMap,Xb=new WeakMap;const ty=()=>{if("undefined"==typeof document)return;let e;const t=document.getElementsByTagName("link");for(let n=0;n<t.length;n++)"icon"!==t[n].getAttribute("rel")&&"shortcut icon"!==t[n].getAttribute("rel")||(e=t[n].getAttribute("href"));return e},ny=163400;const ry=({provider:e,sdkInstance:t})=>{if("state"in e)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(e,{get:(n,r)=>"request"===r?function(r){var i;return Qs(this,void 0,void 0,(function*(){zm("[wrapExtensionProvider()] Overwriting request method",r);const{method:o,params:s}=r;if(Cb.includes(o.toLowerCase())&&(null===(i=t.analytics)||void 0===i||i.send({event:Rs.SDK_RPC_REQUEST,params:{method:o,from:"extension"}})),o===Sb.METAMASK_BATCH&&Array.isArray(s)){for(const t of s)yield null==e?void 0:e.request({method:t.method,params:t.params});return n.request(r)}return n.request(r)}))}:"getChainId"===r?function(){return e.chainId}:"getNetworkVersion"===r?function(){return e.networkVersion}:"getSelectedAddress"===r?function(){return e.selectedAddress}:"isConnected"===r?function(){return e._state.isConnected}:n[r]})};var iy;function oy({mustBeMetaMask:e,sdkInstance:t}){return Qs(this,void 0,void 0,(function*(){if("undefined"==typeof window)throw new Error("window not available");let n;try{return n=yield new Promise(((e,t)=>{const n=setTimeout((()=>{t(new Error("eip6963RequestProvider timed out"))}),500);window.addEventListener(iy.Announce,(t=>{const r=t,{detail:{info:i,provider:o}={}}=r,{name:s,rdns:a,uuid:c}=null!=i?i:{};Fb.test(c)&&s.startsWith(Bb.NAME)&&a===Bb.RDNS&&(clearTimeout(n),e(o))})),window.dispatchEvent(new Event(iy.Request))})),ry({provider:n,sdkInstance:t})}catch(n){const{ethereum:r}=window;if(!r)throw new Error("Ethereum not found in window object");if("providers"in r){if(Array.isArray(r.providers)){const n=e?r.providers.find((e=>e.isMetaMask)):r.providers[0];if(!n)throw new Error("No suitable provider found");return ry({provider:n,sdkInstance:t})}}else if(e&&!r.isMetaMask)throw new Error("MetaMask provider not found in Ethereum");return ry({provider:r,sdkInstance:t})}}))}!function(e){e.Announce="eip6963:announceProvider",e.Request="eip6963:requestProvider"}(iy||(iy={}));var sy={exports:{}};sy.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),s=Math.max(i,o),a=0,c=e.map([t,n],(function(t){var n=s-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(a=s-Math.min(i,o)),s-=1;s>=a;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===a)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var a=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)a();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&s(t.prototype,n),r&&s(t,r),e}();t.default=a,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),s=c(n(95)),a=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"==typeof s&&(n[t]=s,r+=1)})),r>0){var s=Object.keys(n),c=a.default.find(s,(function(e){return t.isOS(e)}));if(c){var d=this.satisfies(n[c]);if(void 0!==d)return d}var u=a.default.find(s,(function(e){return t.isPlatform(e)}));if(u){var l=this.satisfies(n[u]);if(void 0!==l)return l}}if(o>0){var f=Object.keys(i),h=a.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=a.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(a.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}});var ay,cy=sy.exports,dy=a(cy);!function(e){e.Disabled="Disabled",e.Temporary="Temporary",e.UntilResponse="UntilResponse"}(ay||(ay={}));const uy=()=>"wakeLock"in navigator,ly=()=>{if("undefined"==typeof navigator)return!1;const{userAgent:e}=navigator,t=/CPU (?:iPhone )?OS (\d+)(?:_\d+)?_?\d+ like Mac OS X/iu.exec(e);if(!t)return!1;return parseInt(t[1],10)<10&&!window.MSStream};class fy{constructor(e){this.enabled=!1,this._eventsAdded=!1,this.debug=null!=e&&e}start(){if(this.enabled=!1,uy()&&!this._eventsAdded){this._eventsAdded=!0,this._wakeLock=void 0;const e=()=>Qs(this,void 0,void 0,(function*(){null!==this._wakeLock&&"visible"===document.visibilityState&&(yield this.enable())}));document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else ly()?this.noSleepTimer=void 0:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","MetaMask SDK - Listening for responses"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm","data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK"),this._addSourceToVideo(this.noSleepVideo,"mp4","data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),this.noSleepVideo.addEventListener("loadedmetadata",(()=>{zm("[WakeLockManager: start()] video loadedmetadata",this.noSleepVideo),this.noSleepVideo&&(this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",(()=>{this.noSleepVideo&&this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})))})))}_addSourceToVideo(e,t,n){const r=document.createElement("source");r.src=n,r.type=`video/${t}`,e.appendChild(r)}isEnabled(){return this.enabled}setDebug(e){zm("[WakeLockManager: setDebug()] activate debug mode"),this.debug=e}enable(){return Qs(this,void 0,void 0,(function*(){this.enabled&&this.disable("from_enable");const e=uy(),t=ly();if(zm(`[WakeLockManager: enable()] hasWakelock=${e} isOldIos=${t}`,this.noSleepVideo),this.start(),uy())try{const e=yield navigator.wakeLock.request("screen");this._wakeLock=e,this.enabled=!0}catch(e){return zm("[WakeLockManager: enable()] failed to enable wake lock",e),this.enabled=!1,!1}else if(ly())return this.disable("from_enable_old_ios"),this.noSleepTimer=window.setInterval((()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))}),15e3),this.enabled=!0,!0;return!!this.noSleepVideo&&(this.noSleepVideo.play().then((()=>{zm("[WakeLockManager: enable()] video started playing successfully")})).catch((e=>{console.warn("[WakeLockManager: enable()] video failed to play",e)})),this.enabled=!0,!0)}))}disable(e){if(this.enabled){if(zm(`[WakeLockManager: disable()] context=${e}`),uy())this._wakeLock&&(zm("[WakeLockManager: disable()] release wake lock"),this._wakeLock.release()),this._wakeLock=void 0;else if(ly())this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=void 0);else try{if(!this.noSleepVideo)return void zm("[WakeLockManager: disable()] noSleepVideo is undefined");zm("[WakeLockManager: disable()] pause noSleepVideo"),this.noSleepVideo.firstChild&&(this.noSleepVideo.removeChild(this.noSleepVideo.firstChild),this.noSleepVideo.load()),this.noSleepVideo.pause(),this.noSleepVideo.src="",this.noSleepVideo.remove()}catch(e){console.log(e)}this.enabled=!1}}}const hy=2e3,py=4e4,Ay=500;class gy{constructor({useDeepLink:e,preferredOpenLink:t,wakeLockStatus:n=ay.UntilResponse,debug:r=!1}){this.state={wakeLock:new fy,wakeLockStatus:ay.UntilResponse,wakeLockTimer:void 0,wakeLockFeatureActive:!1,platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=t,this.state.wakeLockStatus=n,this.state.debug=r,this.state.wakeLock.setDebug(r)}enableWakeLock(){return function(e){const{state:t}=e;if(t.wakeLockStatus===ay.Disabled)return void zm("[PlatfformManager: enableWakeLock()] WakeLock is disabled");t.wakeLock.enable().catch((e=>{console.error("[PlatfformManager: enableWakeLock()] WakeLock is not supported",e)}));const n=t.wakeLockStatus===ay.Temporary?hy:py;t.wakeLockTimer=setTimeout((()=>{e.disableWakeLock()}),n),t.wakeLockFeatureActive||t.wakeLockStatus!==ay.UntilResponse||(t.wakeLockFeatureActive=!0,window.addEventListener("focus",(()=>{e.disableWakeLock()})))}(this)}disableWakeLock(){return function(e){const{state:t}=e;t.wakeLockStatus!==ay.Disabled&&(t.wakeLockTimer&&clearTimeout(t.wakeLockTimer),t.wakeLock.disable("disableWakeLock"))}(this)}openDeeplink(e,t,n){return function(e,t,n,r){const{state:i}=e;zm(`[PlatfformManager: openDeeplink()] universalLink --\x3e ${t}`),zm(`[PlatfformManager: openDeeplink()] deepLink --\x3e ${n}`),e.isBrowser()&&e.enableWakeLock();try{if(i.preferredOpenLink)return void i.preferredOpenLink(i.useDeeplink?n:t,r);if(zm(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${i.useDeeplink} link=${i.useDeeplink?n:t}`),"undefined"!=typeof window){let e;e=i.useDeeplink?window.open(n,"_blank"):window.open(t,"_blank"),setTimeout((()=>{var t;return null===(t=null==e?void 0:e.close)||void 0===t?void 0:t.call(e)}),Ay)}}catch(e){console.log("[PlatfformManager: openDeeplink()] can't open link",e)}}(this,e,t,n)}isReactNative(){var e;return this.isNotBrowser()&&"undefined"!=typeof window&&(null===window||void 0===window?void 0:window.navigator)&&"ReactNative"===(null===(e=window.navigator)||void 0===e?void 0:e.product)}isMetaMaskInstalled(){return function(){const e=$b.getProvider()||(null===window||void 0===window?void 0:window.ethereum);return zm(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${null==e?void 0:e.isMetaMask} isConnected=${null==e?void 0:e.isConnected()}`),(null==e?void 0:e.isMetaMask)&&(null==e?void 0:e.isConnected())}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,t;const n=dy.parse(window.navigator.userAgent);return"mobile"===(null===(e=null==n?void 0:n.platform)||void 0===e?void 0:e.type)||"tablet"===(null===(t=null==n?void 0:n.platform)||void 0===t?void 0:t.type)}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return"undefined"!=typeof window&&(Boolean(window.ReactNativeWebView)&&Boolean(navigator.userAgent.endsWith("MetaMaskMobile")))}isMobileWeb(){return this.state.platformType===Bs.MobileWeb}isNotBrowser(){var e;return"undefined"==typeof window||!(null===window||void 0===window?void 0:window.navigator)||"undefined"!=typeof global&&"ReactNative"===(null===(e=null===global||void 0===global?void 0:global.navigator)||void 0===e?void 0:e.product)||"ReactNative"===(null===navigator||void 0===navigator?void 0:navigator.product)}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isBrowser(){return!this.isNotBrowser()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){const{state:t}=e;return t.platformType?t.platformType:e.isReactNative()?Bs.ReactNative:e.isNotBrowser()?Bs.NonBrowser:e.isMetaMaskMobileWebView()?Bs.MetaMaskMobileWebview:e.isMobile()?Bs.MobileWeb:Bs.DesktopWeb}(this)}}var my,vy=(my=cy)&&"object"==typeof my&&"default"in my?my.default:my;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function by(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function yy(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var wy="INSTALLED",Ey="NOT_INSTALLED",Sy="REGISTERED",_y="REGISTERING",Cy="RELOADING",My={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},ky="REGISTRATION_IN_PROGRESS",Iy="FORWARDER_ID",Ry=function(){function e(t){var n=void 0===t?{}:t,r=n.forwarderOrigin,i=void 0===r?"https://fwd.metamask.io":r,o=n.forwarderMode,s=void 0===o?e.FORWARDER_MODE.INJECT:o;this.forwarderOrigin=i,this.forwarderMode=s,this.state=e.isMetaMaskInstalled()?wy:Ey;var a=e._detectBrowser();this.downloadUrl=a?My[a]:My.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),s===e.FORWARDER_MODE.INJECT&&"true"===sessionStorage.getItem(ky)&&e._injectForwarder(this.forwarderOrigin)}return e.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return"metamask:reload"===e.data.type?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},e.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},e.prototype._onMessageFromForwarder=function(t){return by(this,void 0,void 0,(function(){return yy(this,(function(n){switch(n.label){case 0:switch(this.state){case Cy:return[3,1];case Ey:return[3,2];case wy:return[3,3];case _y:return[3,5];case Sy:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=Cy,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=_y,[4,e._register()];case 4:return n.sent(),this.state=Sy,t.source.postMessage({type:"metamask:registrationCompleted"},t.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}}))}))},e.prototype.startOnboarding=function(){sessionStorage.setItem(ky,"true"),this._openDownloadPage(),this._openForwarder()},e.prototype.stopOnboarding=function(){"true"===sessionStorage.getItem(ky)&&(this.forwarderMode===e.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),e._removeForwarder()),sessionStorage.setItem(ky,"false"))},e.prototype._openForwarder=function(){this.forwarderMode===e.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):e._injectForwarder(this.forwarderOrigin)},e.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},e.isMetaMaskInstalled=function(){return Boolean(window.ethereum&&window.ethereum.isMetaMask)},e._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},e._injectForwarder=function(e){var t=document.body,n=document.createElement("iframe");n.setAttribute("height","0"),n.setAttribute("width","0"),n.setAttribute("style","display: none;"),n.setAttribute("src",e),n.setAttribute("id",Iy),t.insertBefore(n,t.children[0])},e._removeForwarder=function(){var e;null===(e=document.getElementById(Iy))||void 0===e||e.remove()},e._detectBrowser=function(){var e=vy.parse(window.navigator.userAgent);return"Firefox"===e.browser.name?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},e.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},e}(),Oy=a(Ry);function xy(e,{wait:t=!1}){return Qs(this,void 0,void 0,(function*(){return zm(`[MetamaskInstaller: startInstaller()] wait=${t}`),t&&(yield Wb(1e3)),yield e.checkInstallation()}))}class Ty{constructor({remote:e,preferDesktop:t,platformManager:n,debug:r=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1},this.state.remote=e,this.state.preferDesktop=t,this.state.platformManager=n,this.state.debug=r}startDesktopOnboarding(){return function(){return Qs(this,void 0,void 0,(function*(){zm("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),$b.destroy(),delete window.ethereum,(new Oy).startOnboarding()}))}()}redirectToProperInstall(){return Qs(this,void 0,void 0,(function*(){return function(e){var t,n;return Qs(this,void 0,void 0,(function*(){const{state:r}=e,i=null===(t=r.platformManager)||void 0===t?void 0:t.getPlatformType();if(zm(`[MetamaskInstaller: redirectToProperInstall()] platform=${i}`),i===Bs.MetaMaskMobileWebview)return!1;r.isInstalling=!0;try{yield null===(n=r.remote)||void 0===n?void 0:n.startConnection(),r.isInstalling=!1,r.hasInstalled=!0}catch(e){throw r.isInstalling=!1,e}return!0}))}(this)}))}checkInstallation(){return Qs(this,void 0,void 0,(function*(){return function(e){var t;return Qs(this,void 0,void 0,(function*(){const{state:n}=e,r=null===(t=n.platformManager)||void 0===t?void 0:t.isMetaMaskInstalled();return zm(`[MetamaskInstaller: checkInstallation()] isInstalled=${r}`),!!r||(yield e.redirectToProperInstall())}))}(this)}))}start({wait:e=!1}){return Qs(this,void 0,void 0,(function*(){return yield xy(this,{wait:e})}))}}const Py=({link:e})=>(zm(`[UI: InstallModal-nonweb()] INSTALL MODAL link=${e}`),{unmount:()=>{}}),Ny=()=>(zm("[UI: pendingModal-nodejs: PendingModal()] Please open the MetaMask wallet app and confirm the connection. Thank you!"),{unmount:()=>!1,updateOTPValue:e=>{""!==e&&zm(`[UI: pendingModal-nodejs: PendingModal()] Choose the following value on your metamask mobile wallet: ${e}`)},mount:()=>!1});function Ly(e,t,n){return Qs(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{if(!e.connector)return void i(new Error("No connector available"));zm("[RemoteConnection: connectWithModalInstaller()]",{state:e,options:t,linkParams:n});const o=`${e.useDeeplink?jb:Db}?${n}`;!function(e,t,n){var r,i,o,s;e.installModal=null===(i=(r=t.modals).install)||void 0===i?void 0:i.call(r,{i18nInstance:t.sdk.i18nInstance,link:n,preferDesktop:e.preferDesktop,installer:t.getMetaMaskInstaller(),terminate:()=>{zm("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),t.sdk.terminate()},debug:e.developerMode,connectWithExtension:()=>{var e;return null===(e=t.connectWithExtensionProvider)||void 0===e||e.call(t),!1}}),null===(s=null===(o=e.installModal)||void 0===o?void 0:o.mount)||void 0===s||s.call(o,n)}(e,t,o),t.sdk.once(ws.PROVIDER_UPDATE,(e=>Qs(this,void 0,void 0,(function*(){zm("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),i(e)})))),e.connector.once(ws.CLIENTS_READY,(()=>Qs(this,void 0,void 0,(function*(){zm("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),r()}))))}))}))}function Dy(e,t){var n,r,i,o;null===(r=(n=e.modals).onPendingModalDisconnect)||void 0===r||r.call(n),null===(o=null===(i=t.pendingModal)||void 0===i?void 0:i.unmount)||void 0===o||o.call(i)}function jy(e,t,n){var r,i,o,s,a,c,d,u,l,f,h,p,A,g;return Qs(this,void 0,void 0,(function*(){const m=$b.getProvider(),v=Date.now();if(void 0!==n.lastActive&&v-n.lastActive<Kb)return m._setConnected(),e.pendingModal=null===(i=(r=t.modals).otp)||void 0===i?void 0:i.call(r,{i18nInstance:t.i18nInstance,debug:e.developerMode,onDisconnect:()=>Dy(t,e)}),null===(s=null===(o=e.installModal)||void 0===o?void 0:o.unmount)||void 0===s||s.call(o,!1),null===(c=null===(a=e.pendingModal)||void 0===a?void 0:a.unmount)||void 0===c||c.call(a),null===(u=null===(d=e.pendingModal)||void 0===d?void 0:d.mount)||void 0===u||u.call(d,{displayOTP:!1}),e.authorized=!0,void(e.developerMode&&console.debug("RCPMS::on 'authorized' provider.state",m.getState()));e.pendingModal?null===(f=null===(l=e.pendingModal)||void 0===l?void 0:l.mount)||void 0===f||f.call(l):e.pendingModal=null===(p=(h=t.modals).otp)||void 0===p?void 0:p.call(h,{i18nInstance:t.i18nInstance,debug:e.developerMode,onDisconnect:()=>Dy(t,e)});const b=yield function(e){return Qs(this,void 0,void 0,(function*(){for(;void 0===e.otpAnswer;)yield new Promise((e=>setTimeout((()=>e()),1e3)));return e.otpAnswer}))}(e);e.otpAnswer!==b&&(e.otpAnswer=b,null===(g=null===(A=e.pendingModal)||void 0===A?void 0:A.updateOTPValue)||void 0===g||g.call(A,b))}))}function By(e,t){var n,r,i,o,s,a,c,d,u,l;return Qs(this,void 0,void 0,(function*(){if(!e.connector)throw new Error("no connector defined");const f=$b.getProvider();e.authorized=!1,f.emit("connecting");const h=yield null===(n=e.connector)||void 0===n?void 0:n.originatorSessionConnect();zm("[RemoteConnection: startConnection()] after originatorSessionConnect",h);let p=null!==(r=null==h?void 0:h.channelId)&&void 0!==r?r:"",A=null!==(o=null===(i=e.connector.getKeyInfo())||void 0===i?void 0:i.ecies.public)&&void 0!==o?o:"";if(!h){const t=yield e.connector.generateChannelIdConnect();p=null!==(s=t.channelId)&&void 0!==s?s:"",A=null!==(c=null===(a=e.connector.getKeyInfo())||void 0===a?void 0:a.ecies.public)&&void 0!==c?c:""}const g=(null===(d=e.platformManager)||void 0===d?void 0:d.isSecure())?"":"&t=q",m=encodeURI(`channelId=${p}&comm=${null!==(u=e.communicationLayerPreference)&&void 0!==u?u:""}&pubkey=${A}${g}`),v=`${e.useDeeplink?jb:Db}?${m}`;return e.qrcodeLink=v,e.developerMode&&zm(`[RemoteConnection: startConnection()] qrcodeLink=${v}`),(null===(l=e.platformManager)||void 0===l?void 0:l.isSecure())?function(e,t){var n,r;return Qs(this,void 0,void 0,(function*(){const i=`${Db}?${t}`,o=`${jb}?${t}`;null===(r=null===(n=e.platformManager)||void 0===n?void 0:n.openDeeplink)||void 0===r||r.call(n,i,o,"_self")}))}(e,m):(null==h?void 0:h.lastActive)?jy(e,t,h):Ly(e,t,m)}))}class Fy{constructor(e){var t,n,r;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const i=!0===(null===(t=e.logging)||void 0===t?void 0:t.developerMode)||!0===(null===(n=e.logging)||void 0===n?void 0:n.sdk);this.state.developerMode=i,this.state.analytics=e.analytics,this.state.preferDesktop=null!==(r=e.preferDesktop)&&void 0!==r&&r,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=Py),e.modals.otp||(e.modals.otp=Ny),function(e,t){var n,r,i,o;zm("[RemoteConnection: initializeConnector()] initialize connector"),e.connector=new Ys({platformType:t.platformManager.getPlatformType(),communicationLayerPreference:t.communicationLayerPreference,transports:t.transports,dappMetadata:Object.assign(Object.assign({},t.dappMetadata),{source:t._source}),analytics:t.enableAnalytics,communicationServerUrl:t.communicationServerUrl,sdkVersion:Eb,context:"dapp",ecies:t.ecies,storage:t.storage,logging:t.logging}),t.timer&&(zm("[RemoteConnection: initializeConnector()] reset background timer",t.timer),null===(r=null===(n=t.timer)||void 0===n?void 0:n.stopBackgroundTimer)||void 0===r||r.call(n),null===(o=null===(i=t.timer)||void 0===i?void 0:i.runBackgroundTimer)||void 0===o||o.call(i,(()=>!1),1e4))}(this.state,this.options),function(e,t){var n;e.connector&&((null===(n=e.platformManager)||void 0===n?void 0:n.isSecure())||e.connector.on(ws.OTP,(n=>{var r,i,o,s,a,c;if(e.otpAnswer!==n){if(zm("[RemoteConnection: setupListeners() => EventType.OTP] 'OTP' ",n),e.otpAnswer=n,!e.pendingModal){zm("[RemoteConnection: setupListeners() => EventType.OTP] 'OTP' init pending modal");const n=()=>{var n,r,i,o,s,a;null===(r=(n=t.modals).onPendingModalDisconnect)||void 0===r||r.call(n),null===(o=null===(i=e.pendingModal)||void 0===i?void 0:i.unmount)||void 0===o||o.call(i),null===(a=null===(s=e.pendingModal)||void 0===s?void 0:s.updateOTPValue)||void 0===a||a.call(s,"")};e.pendingModal=null===(i=(r=t.modals).otp)||void 0===i?void 0:i.call(r,{i18nInstance:t.i18nInstance,onDisconnect:n})}null===(s=null===(o=e.pendingModal)||void 0===o?void 0:o.mount)||void 0===s||s.call(o),null===(c=null===(a=e.pendingModal)||void 0===a?void 0:a.updateOTPValue)||void 0===c||c.call(a,n)}})),e.connector.on(ws.SDK_RPC_CALL,(t=>Qs(this,void 0,void 0,(function*(){var n,r;zm("[RemoteConnection: setupListeners() => EventType.SDK_RPC_CALL] 'sdk_rpc_call' requestParam",t);const i=$b.getProvider(),o=yield i.request(t);zm("[RemoteConnection: setupListeners() => EventType.SDK_RPC_CALL] 'sdk_rpc_call' result",o),null===(r=null===(n=e.pendingModal)||void 0===n?void 0:n.unmount)||void 0===r||r.call(n)})))),e.connector.on(ws.AUTHORIZED,(()=>Qs(this,void 0,void 0,(function*(){var n,r,i,o,s;try{zm("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",e.pendingModal,e.installModal),t.enableAnalytics&&(null===(n=e.analytics)||void 0===n||n.send({event:Rs.AUTHORIZED}));const a=$b.getProvider();a._setConnected(),null===(i=null===(r=e.pendingModal)||void 0===r?void 0:r.unmount)||void 0===i||i.call(r),null===(s=null===(o=e.installModal)||void 0===o?void 0:o.unmount)||void 0===s||s.call(o,!1),e.otpAnswer=void 0,e.authorized=!0,zm("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch(e){console.log(" ~ file: setupListeners.ts:107 ~ state.connector.on ~ err:",e)}})))),e.connector.on(ws.CLIENTS_DISCONNECTED,(()=>{var t,n,r;zm(`[RemoteConnection: setupListeners() => EventType.CLIENTS_DISCONNECTED] received '${ws.CLIENTS_DISCONNECTED}'`),(null===(t=e.platformManager)||void 0===t?void 0:t.isSecure())||($b.getProvider().handleDisconnect({terminate:!1}),null===(r=null===(n=e.pendingModal)||void 0===n?void 0:n.updateOTPValue)||void 0===r||r.call(n,""))})),e.connector.on(ws.TERMINATE,(()=>{var n,r,i,o,s,a,c,d;(null===(n=e.connector)||void 0===n?void 0:n.isAuthorized())||t.enableAnalytics&&(null===(r=e.analytics)||void 0===r||r.send({event:Rs.REJECTED})),(null===(i=e.platformManager)||void 0===i?void 0:i.isBrowser())?alert("SDK Connection has been terminated from MetaMask."):console.info("SDK Connection has been terminated"),null===(s=null===(o=e.pendingModal)||void 0===o?void 0:o.unmount)||void 0===s||s.call(o),null===(c=null===(a=e.installModal)||void 0===a?void 0:a.unmount)||void 0===c||c.call(a,!0),e.pendingModal=void 0,e.installModal=void 0,e.otpAnswer=void 0,null===(d=e.connector)||void 0===d||d.disconnect({terminate:!0}),e.authorized=!1,$b.getProvider().handleDisconnect({terminate:!0})})))}(this.state,this.options)}startConnection(){return Qs(this,void 0,void 0,(function*(){return By(this.state,this.options)}))}showActiveModal(){return function(e){var t,n,r,i;e.authorized?zm("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?null===(n=(t=e.pendingModal).mount)||void 0===n||n.call(t):e.installModal&&(null===(i=(r=e.installModal).mount)||void 0===i||i.call(r,e.qrcodeLink||""))}(this.state)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getChannelConfig()}getKeyInfo(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("platformManager is not initialized");return this.state.platformManager}isConnected(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isReady())||!1}isAuthorized(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isAuthorized())||!1}isPaused(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.isPaused()}disconnect(e){var t,n,r;zm("[RemoteConnection: disconnect()]",e),(null==e?void 0:e.terminate)&&($b.getProvider().handleDisconnect({terminate:!0}),null===(n=null===(t=this.state.pendingModal)||void 0===t?void 0:t.unmount)||void 0===n||n.call(t),this.state.otpAnswer=void 0),null===(r=this.state.connector)||void 0===r||r.disconnect(e)}}class Ky{constructor({enabled:e}={enabled:!1}){this.enabled=!1,this.enabled=e}persistChannelConfig(e){return Qs(this,void 0,void 0,(function*(){const t=JSON.stringify(e);zm(`[StorageManagerAS: persistChannelConfig()] enabled=${this.enabled}`,e),yield o.setItem(kb,t)}))}getPersistedChannelConfig(){return Qs(this,void 0,void 0,(function*(){let e;try{if(zm(`[StorageManagerAS: getPersistedChannelConfig()] enabled=${this.enabled}`),e=yield o.getItem(kb),zm("[StorageManagerAS: getPersistedChannelConfig()]",e),!e)return;const t=JSON.parse(e);return zm("[StorageManagerAS: getPersistedChannelConfig()] channelConfig",t),t}catch(e){return void console.error("[StorageManagerAS: getPersistedChannelConfig()] Can't find existing channel config",e)}}))}terminate(){return Qs(this,void 0,void 0,(function*(){zm(`[StorageManagerAS: terminate()] enabled=${this.enabled}`),yield o.removeItem(kb)}))}}const $y=e=>new Ky(e);const Uy=e=>Qs(void 0,void 0,void 0,(function*(){const{options:t}=e,{infuraAPIKey:n}=t;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0x2a":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};e.options.readonlyRPCMap?e.options.readonlyRPCMap=Object.assign(Object.assign({},e.options.readonlyRPCMap),r):e.options.readonlyRPCMap=r})),zy=e=>Qs(void 0,void 0,void 0,(function*(){const{options:t}=e,{readonlyRPCMap:n}=t;if(n)try{zm("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),e.setReadOnlyRPCCalls(!0)}catch(e){throw new Error("Invalid Infura Settings")}}));function qy(e){return qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(e)}function Vy(e){var t=function(e,t){if("object"!==qy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qy(t)?t:String(t)}function Hy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vy(r.key),r)}}var Wy=[],Jy=Wy.forEach,Gy=Wy.slice;var Yy=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Qy=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=function(e,t,n){var r=n||{};r.path=r.path||"/";var i=encodeURIComponent(t),o="".concat(e,"=").concat(i);if(r.maxAge>0){var s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(s))}if(r.domain){if(!Yy.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(r.domain)}if(r.path){if(!Yy.test(r.path))throw new TypeError("option path is invalid");o+="; Path=".concat(r.path)}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}(e,encodeURIComponent(t),i)},Xy=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},Zy={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=Xy(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&Qy(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},ew={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].indexOf("=");if(o>0)r[i].substring(0,o)===e.lookupQuerystring&&(t=r[i].substring(o+1))}}return t}},tw=null,nw=function(){if(null!==tw)return tw;try{tw="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){tw=!1}return tw},rw={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&nw()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&nw()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},iw=null,ow=function(){if(null!==iw)return iw;try{iw="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){iw=!1}return iw},sw={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&ow()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&ow()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},aw={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},cw={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},dw={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},uw={name:"subdomain",lookup:function(e){var t="number"==typeof e.lookupFromSubdomainIndex?e.lookupFromSubdomainIndex+1:1,n="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}};var lw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}var t,n,r;return t=e,n=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=function(e){return Jy.call(Gy.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(e){return e.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Zy),this.addDetector(ew),this.addDetector(rw),this.addDetector(sw),this.addDetector(aw),this.addDetector(cw),this.addDetector(dw),this.addDetector(uw)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),n=n.map((function(e){return t.options.convertDetectedLanguage(e)})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}],n&&Hy(t.prototype,n),r&&Hy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();lw.type="languageDetector";var fw={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}},hw={DESKTOP:"Escritorio",MOBILE:"Mvil",META_MASK_MOBILE_APP:"Aplicacin mvil de MetaMask",SCAN_TO_CONNECT:"Escanear para conectar y firmar con",CONNECT_WITH_EXTENSION:"Conectar con la Extensin de MetaMask",INSTALL_MODAL:{TRUSTED_BY_USERS:"Confiado por ms de 30 millones de usuarios para comprar, almacenar, enviar e intercambiar cripto de manera segura",LEADING_CRYPTO_WALLET:"La principal billetera de criptomonedas y pasarela hacia aplicaciones blockchain construidas en Ethereum Mainnet, Polygon, Optimism y muchas otras redes",CONTROL_DIGITAL_INTERACTIONS:"Te da el control de tus interacciones digitales al hacer que el poder de la criptografa sea ms accesible",INSTALL_META_MASK_EXTENSION:"Instalar la Extensin de MetaMask"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Por favor, abre la aplicacin de billetera MetaMask y selecciona el cdigo en la pantalla O desconecta",OPEN_META_MASK_CONTINUE:"Abre la aplicacin de MetaMask para continuar con tu sesin.",NUMBER_AFTER_OPEN_NOTICE:"Si no aparece un nmero despus de abrir MetaMask, por favor haz clic en desconectar y vuelve a escanear el cdigo QR.",DISCONNECT:"Desconectar"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Toma el control de tu cripto y explora la blockchain con la billetera en la que confan ms de 30 millones de personas en todo el mundo"},META_MASK_MODAL:{ADDRESS_COPIED:"Direccin copiada al portapapeles!",DISCONNECT:"Desconectar",ACTIVE_NETWORK:"Red activa"}},pw={DESKTOP:"Bureau",MOBILE:"Mobile",META_MASK_MOBILE_APP:"Application mobile MetaMask",SCAN_TO_CONNECT:"Scannez pour vous connecter et signer avec",CONNECT_WITH_EXTENSION:"Connectez-vous avec l'extension MetaMask",INSTALL_MODAL:{TRUSTED_BY_USERS:"Fait confiance  plus de 30 millions d'utilisateurs pour acheter, stocker, envoyer et changer des crypto en toute scurit",LEADING_CRYPTO_WALLET:"Le portefeuille crypto leader et la passerelle vers des applications blockchain bases sur Ethereum Mainnet, Polygon, Optimism, et de nombreux autres rseaux",CONTROL_DIGITAL_INTERACTIONS:"Vous donne le contrle de vos interactions numriques en rendant la puissance de la cryptographie plus accessible",INSTALL_META_MASK_EXTENSION:"Installez l'extension MetaMask"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Veuillez ouvrir l'application MetaMask et slectionnez le code  l'cran OU dconnectez-vous",OPEN_META_MASK_CONTINUE:"Ouvrez l'application MetaMask pour continuer votre session.",NUMBER_AFTER_OPEN_NOTICE:"Si un numro n'apparat pas aprs avoir ouvert MetaMask, veuillez cliquer sur dconnecter et rescanner le QRCode.",DISCONNECT:"Dconnecter"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Prenez le contrle de votre crypto et explorez la blockchain avec le portefeuille fait confiance par plus de 30 millions de personnes  travers le monde"},META_MASK_MODAL:{ADDRESS_COPIED:"Adresse copie dans le presse-papiers!",DISCONNECT:"Dconnecter",ACTIVE_NETWORK:"Rseau actif"}},Aw={DESKTOP:" ",MOBILE:"",META_MASK_MOBILE_APP:"   ",SCAN_TO_CONNECT:"    ",CONNECT_WITH_EXTENSION:"     ",INSTALL_MODAL:{TRUSTED_BY_USERS:"    -30   , ,     ",LEADING_CRYPTO_WALLET:"     '   , ,   ",CONTROL_DIGITAL_INTERACTIONS:"             ",INSTALL_META_MASK_EXTENSION:"     "},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"              ",OPEN_META_MASK_CONTINUE:"         .",NUMBER_AFTER_OPEN_NOTICE:"       ,        -QRCode.",DISCONNECT:""},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"       '        -30    "},META_MASK_MODAL:{ADDRESS_COPIED:"  !",DISCONNECT:"",ACTIVE_NETWORK:" "}},gw={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"App mobile MetaMask",SCAN_TO_CONNECT:"Scansiona per connetterti e firmare con",CONNECT_WITH_EXTENSION:"Connettiti con l'estensione MetaMask",INSTALL_MODAL:{TRUSTED_BY_USERS:"Ritenuto affidabile da oltre 30 milioni di utenti per acquistare, conservare, inviare e scambiare cripto in modo sicuro",LEADING_CRYPTO_WALLET:"Il principale portafoglio cripto e gateway per applicazioni blockchain funzionanti su Ethereum Mainnet, Polygon, Optimism e molte altre reti",CONTROL_DIGITAL_INTERACTIONS:"Ti da il controllo delle tue interazioni digitali rendendo piu' accessibile il potere della crittografia",INSTALL_META_MASK_EXTENSION:"Installa l'estensione MetaMask"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Si prega di aprire l'app mobile MetaMask Wallet e selezionare il codice sullo schermo OPPURE scollegarsi",OPEN_META_MASK_CONTINUE:"Apri l'app mobile MetaMask per continuare con la tua sessione.",NUMBER_AFTER_OPEN_NOTICE:"Se, dopo aver aperto MetaMask, non appare alcun numero, si prega di fare clic su disconnetti e ris canzionare il QRCode.",DISCONNECT:"Disconnetti"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Prendi il controllo delle tue cripto e esplora la blockchain con il portafoglio ritenuto affidabile da oltre 30 milioni di persone in tutto il mondo"},META_MASK_MODAL:{ADDRESS_COPIED:"Indirizzo copiato negli appunti!",DISCONNECT:"Disconnetti",ACTIVE_NETWORK:"Rete attiva"}},mw={DESKTOP:"Desktop",MOBILE:"Mvel",META_MASK_MOBILE_APP:"Aplicativo mvel MetaMask",SCAN_TO_CONNECT:"Escanear para conectar e assinar com",CONNECT_WITH_EXTENSION:"Conectar com a extenso MetaMask",INSTALL_MODAL:{TRUSTED_BY_USERS:"Confiado por mais de 30 milhes de usurios para comprar, armazenar, enviar e trocar cripto com segurana",LEADING_CRYPTO_WALLET:"A principal carteira de cripto & portal para aplicativos blockchain construdos em Ethereum Mainnet, Polygon, Optimism, e muitas outras redes",CONTROL_DIGITAL_INTERACTIONS:"Coloca voc no controle de suas interaes digitais, tornando o poder da criptografia mais acessvel",INSTALL_META_MASK_EXTENSION:"Instalar a extenso MetaMask"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Por favor, abra o aplicativo MetaMask e selecione o cdigo na tela OU desconecte",OPEN_META_MASK_CONTINUE:"Abra o aplicativo MetaMask para continuar sua sesso.",NUMBER_AFTER_OPEN_NOTICE:"Se um nmero no aparecer aps abrir o MetaMask, por favor clique em desconectar e re-escaneie o QRCode.",DISCONNECT:"Desconectar"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Assuma o controle de sua cripto e explore a blockchain com a carteira confiada por mais de 30 milhes de pessoas em todo o mundo"},META_MASK_MODAL:{ADDRESS_COPIED:"Endereo copiado para a rea de transferncia!",DISCONNECT:"Desconectar",ACTIVE_NETWORK:"Rede ativa"}},vw={DESKTOP:"Masast",MOBILE:"Mobil",META_MASK_MOBILE_APP:"MetaMask mobil uygulama",SCAN_TO_CONNECT:"Balanmak ve imzalamak iin tarayn",CONNECT_WITH_EXTENSION:"MetaMask Eklentisi ile Balan",INSTALL_MODAL:{TRUSTED_BY_USERS:"Kriptoyu gvenle satn almak, saklamak, gndermek ve deitirmek iin 30 milyondan fazla kullanc tarafndan gvenilir",LEADING_CRYPTO_WALLET:"Ethereum Ana A, Polygon, Optimism ve birok dier ada kurulu blockchain uygulamalarna eriim salayan nc kripto czdan",CONTROL_DIGITAL_INTERACTIONS:"Kriptografinin gcn daha eriilebilir klarak dijital etkileimlerinizin kontroln size verir",INSTALL_META_MASK_EXTENSION:"MetaMask Eklentisini Ykleyin"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Ltfen MetaMask czdan uygulamasn an ve ekrandaki kodu sein YA DA balanty kesin",OPEN_META_MASK_CONTINUE:"Oturumunuzla devam etmek iin MetaMask uygulamasn an.",NUMBER_AFTER_OPEN_NOTICE:"MetaMask' atktan sonra bir numara grnmezse, ltfen balanty kesin ve QR Kodunu tekrar tarayn.",DISCONNECT:"Balanty Kes"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Kriptonuzu kontrol edin ve dnya genelinde 30 milyondan fazla kii tarafndan gvenilen czdanla blockchain'i kefedin"},META_MASK_MODAL:{ADDRESS_COPIED:"Adres panoya kopyaland!",DISCONNECT:"Balanty Kes",ACTIVE_NETWORK:"Aktif A"}};function bw(e){var t,n,r,i,o,s,a,c,d;return Qs(this,void 0,void 0,(function*(){const{options:u}=e;u.logging=null!==(t=u.logging)&&void 0!==t?t:{},u.communicationLayerPreference=null!==(n=u.communicationLayerPreference)&&void 0!==n?n:js.SOCKET,void 0!==u.enableDebug&&(zf.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),u.enableAnalytics=null===(r=u.enableAnalytics)||void 0===r||r,u.injectProvider=null===(i=u.injectProvider)||void 0===i||i,u.shouldShimWeb3=null===(o=u.shouldShimWeb3)||void 0===o||o,u.useDeeplink=null!==(s=u.useDeeplink)&&void 0!==s&&s,u.storage=null!==(a=u.storage)&&void 0!==a?a:{enabled:!0};const l=!0===(null===(c=u.logging)||void 0===c?void 0:c.developerMode);e.debug=(null===(d=u.logging)||void 0===d?void 0:d.sdk)||l,zm("[MetaMaskSDK: performSDKInitialization()] options",e.options);const f=Object.assign({},u.logging);l&&(f.sdk=!0,f.eciesLayer=!0,f.keyExchangeLayer=!0,f.remoteLayer=!0,f.serviceLayer=!0,f.plaintext=!0),yield function(e){var t,n,r;return Qs(this,void 0,void 0,(function*(){const i=null!==(t=e.options.i18nOptions)&&void 0!==t?t:{},o=i.enabled;yield e.i18nInstance.use(lw).init({debug:null!==(n=i.debug)&&void 0!==n&&n,compatibilityJSON:"v3",fallbackLng:"en",interpolation:{escapeValue:!1},resources:o?{en:{translation:fw},es:{translation:hw},it:{translation:gw},fr:{translation:pw},pt:{translation:mw},tr:{translation:vw},he:{translation:Aw}}:{en:{translation:fw}},detection:{order:["localStorage","navigator"],lookupLocalStorage:"MetaMaskSDKLng",caches:["localStorage"]}}),e.availableLanguages=Object.keys(null!==(r=e.i18nInstance.services.resourceStore.data)&&void 0!==r?r:{})}))}(e),yield function(e){var t;return Qs(this,void 0,void 0,(function*(){const{options:n}=e;e.platformManager=new gy({useDeepLink:null!==(t=n.useDeeplink)&&void 0!==t&&t,preferredOpenLink:n.openDeeplink,wakeLockStatus:n.wakeLockType,debug:e.debug})}))}(e),yield function(e){var t,n,r,i,o,s,a,c,d;return Qs(this,void 0,void 0,(function*(){const{options:u}=e,l=null===(t=e.platformManager)||void 0===t?void 0:t.getPlatformType();e.analytics=new ey({serverUrl:null!==(n=u.communicationServerUrl)&&void 0!==n?n:As,enabled:u.enableAnalytics,originatorInfo:{url:null!==(r=u.dappMetadata.url)&&void 0!==r?r:"",title:null!==(i=u.dappMetadata.name)&&void 0!==i?i:"",dappId:"undefined"==typeof window||void 0===window.location?null!==(c=null!==(s=null===(o=u.dappMetadata)||void 0===o?void 0:o.name)&&void 0!==s?s:null===(a=u.dappMetadata)||void 0===a?void 0:a.url)&&void 0!==c?c:"unkown":window.location.hostname,platform:null!=l?l:"",source:null!==(d=u._source)&&void 0!==d?d:""}})}))}(e),yield function(e){var t;return Qs(this,void 0,void 0,(function*(){const{options:n}=e;!0!==(null===(t=n.storage)||void 0===t?void 0:t.enabled)||n.storage.storageManager||(n.storage.storageManager=$y(n.storage))}))}(e),yield function(e){return Qs(this,void 0,void 0,(function*(){const{options:t}=e,n=/^(http|https):\/\/[^\s]*$/;if(t.dappMetadata){t.dappMetadata.iconUrl&&!n.test(t.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),t.dappMetadata.iconUrl=void 0),t.dappMetadata.base64Icon&&t.dappMetadata.base64Icon.length>ny&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),t.dappMetadata.base64Icon=void 0),t.dappMetadata.url&&!n.test(t.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const e=ty();if(e&&!t.dappMetadata.iconUrl&&!t.dappMetadata.base64Icon){const n=`${window.location.protocol}//${window.location.host}${e}`;t.dappMetadata.iconUrl=n}}e.dappMetadata=t.dappMetadata}))}(e),yield Uy(e),yield zy(e);const{metamaskBrowserExtension:h,preferExtension:p,shouldReturn:A}=yield function(e){var t,n,r,i;return Qs(this,void 0,void 0,(function*(){const{options:o}=e;let s,a=!1,c=!1;if("undefined"!=typeof window&&window.ethereum&&!(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView())){a="extension"===localStorage.getItem(Ib);try{s=yield oy({mustBeMetaMask:!0,sdkInstance:e}),window.extension=s,s.on(xb.CHAIN_CHANGED,(t=>{zm(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${t}`),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(xb.CHAIN_CHANGED,t)})),s.on(xb.ACCOUNTS_CHANGED,(t=>{zm(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${t}`),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(xb.ACCOUNTS_CHANGED,t)})),s.on(xb.DISCONNECT,(t=>{zm(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${t}`),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(xb.DISCONNECT,t)})),s.on(xb.CONNECT,(t=>{zm(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${t}`),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(xb.CONNECT,t)})),s.on(xb.CONNECTED,(t=>{zm("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",t),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(xb.CONNECTED,t)}))}catch(e){window.extension=void 0}$b.destroy()}else(null===(n=e.platformManager)||void 0===n?void 0:n.isMetaMaskMobileWebView())&&(null===(r=e.analytics)||void 0===r||r.send({event:Rs.SDK_USE_INAPP_BROWSER}),e.activeProvider=ry({provider:window.ethereum,sdkInstance:e}),e._initialized=!0,c=!0);return s&&o.extensionOnly&&(zm("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),null===(i=e.analytics)||void 0===i||i.send({event:Rs.SDK_USE_EXTENSION}),e.activeProvider=s,e.extensionActive=!0,e.extension=s,e._initialized=!0,c=!0),{preferExtension:a,shouldReturn:c,metamaskBrowserExtension:s}}))}(e);A?zm("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization"):(yield function(e,t){var n,r,i,o,s;return Qs(this,void 0,void 0,(function*(){const{options:a}=e,c=Object.assign({},a.logging);e.remoteConnection=new Fy({i18nInstance:e.i18nInstance,preferDesktop:null!==(n=a.preferDesktop)&&void 0!==n&&n,communicationLayerPreference:null!==(r=a.communicationLayerPreference)&&void 0!==r?r:js.SOCKET,analytics:e.analytics,dappMetadata:a.dappMetadata,_source:a._source,enableAnalytics:null===(i=a.enableAnalytics)||void 0===i||i,timer:a.timer,sdk:e,platformManager:e.platformManager,transports:a.transports,communicationServerUrl:a.communicationServerUrl,storage:null!==(o=a.storage)&&void 0!==o?o:{enabled:!0},getMetaMaskInstaller:()=>{if(!e.installer)throw new Error("Invalid SDK status -- installer not initialized");return e.installer},logging:c,connectWithExtensionProvider:void 0===t?void 0:()=>Nb(e),modals:Object.assign(Object.assign({},a.modals),{onPendingModalDisconnect:e.terminate.bind(e)})}),e.installer=new Ty({remote:e.remoteConnection,preferDesktop:null!==(s=a.preferDesktop)&&void 0!==s&&s,platformManager:e.platformManager,debug:e.debug})}))}(e,h),yield Gb(e),yield function(e,t){var n,r;return Qs(this,void 0,void 0,(function*(){const{options:i}=e;t?(zm("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),null===(n=e.analytics)||void 0===n||n.send({event:Rs.SDK_EXTENSION_UTILIZED}),Nb(e).catch((e=>{console.warn("Can't connect with MetaMask extension...",e),localStorage.removeItem(Ib)}))):i.checkInstallationImmediately&&((null===(r=e.platformManager)||void 0===r?void 0:r.isDesktopWeb())?(zm("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),e.connect().catch((e=>{zm(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${e}`)}))):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),e._initialized=!0}))}(e,p),e.emit(ws.PROVIDER_UPDATE,Tb.INITIALIZED))}))}class yw extends sv{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!1,dappMetadata:{name:"",url:""},i18nOptions:{enabled:!1}}){var t,n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.defaultReadOnlyChainId="0x1",this.i18nInstance=wb(),this.availableLanguages=["en"],zf.disable();const o=!0===(null===(t=e.logging)||void 0===t?void 0:t.developerMode);if(((null===(n=e.logging)||void 0===n?void 0:n.sdk)||o)&&zf.enable("MM_SDK"),zm("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(null===(r=e.dappMetadata)||void 0===r?void 0:r.name)&&!(null===(i=e.dappMetadata)||void 0===i?void 0:i.url)){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("You must provide dAppMetadata option (name and/or url)");e.dappMetadata={url:window.location.href,name:document.title}}if(e.defaultReadOnlyChainId){if("number"==typeof e.defaultReadOnlyChainId)this.defaultReadOnlyChainId=`0x${e.defaultReadOnlyChainId.toString(16)}`;else if("string"==typeof e.defaultReadOnlyChainId&&!e.defaultReadOnlyChainId.startsWith("0x"))throw new Error("Invalid defaultReadOnlyChainId, must start with '0x'");this.defaultReadOnlyChainId=e.defaultReadOnlyChainId.toString()}this.options=e,this.init().then((()=>{zm("[MetaMaskSDK: constructor()]: initialized successfully."),"undefined"!=typeof window&&(window.mmsdk=this)})).catch((e=>{console.error("[MetaMaskSDK: constructor()] error during initialization",e)}))}init(){return Qs(this,void 0,void 0,(function*(){return function(e){var t;return Qs(this,void 0,void 0,(function*(){if("undefined"!=typeof window&&(null===(t=window.mmsdk)||void 0===t?void 0:t.isInitialized()))return zm("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return zm("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return zm("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=bw(e),yield e.sdkInitPromise}catch(e){throw console.error(e),e}return e.sdkInitPromise}))}(this)}))}isExtensionActive(){return this.extensionActive}connect(){return Qs(this,void 0,void 0,(function*(){return function(e){return Qs(this,void 0,void 0,(function*(){if(e._initialized||(zm("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),zm(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");return e.activeProvider.request({method:Sb.ETH_REQUESTACCOUNTS,params:[]})}))}(this)}))}connectAndSign({msg:e}){return Qs(this,void 0,void 0,(function*(){return function({instance:e,msg:t}){return Qs(this,void 0,void 0,(function*(){if(e._initialized||(zm("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield e.init()),zm(`[MetaMaskSDK: connectAndSign()] activeProvider=${e.activeProvider}`),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");return e.activeProvider.request({method:Sb.METAMASK_CONNECTSIGN,params:[t]})}))}({instance:this,msg:e})}))}connectWith(e){return Qs(this,void 0,void 0,(function*(){return function({instance:e,rpc:t}){return Qs(this,void 0,void 0,(function*(){if(e._initialized||(zm("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield e.init()),zm(`[MetaMaskSDK: connectWith()] method: ${t.method} rpc=${t}`),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");return e.activeProvider.request({method:Sb.METAMASK_CONNECTWITH,params:[t]})}))}({instance:this,rpc:e})}))}resume(){return function(e){var t,n,r;return Qs(this,void 0,void 0,(function*(){if(!(null===(n=null===(t=e.remoteConnection)||void 0===t?void 0:t.getConnector())||void 0===n?void 0:n.isReady()))return zm("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void(null===(r=e.remoteConnection)||void 0===r||r.startConnection());zm("[MetaMaskSDK: resume()] channel is ready")}))}(this)}disconnect(){console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;null===(e=this.remoteConnection)||void 0===e||e.isAuthorized()}terminate(){return function(e){var t,n;if(!(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView())){if(Pb&&(window.localStorage.removeItem(Ib),window.localStorage.removeItem(Ob),window.localStorage.removeItem(Rb)),e.extensionActive)return e.options.extensionOnly?void zm("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers"):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(ws.PROVIDER_UPDATE,Tb.TERMINATE));e.emit(ws.PROVIDER_UPDATE,Tb.TERMINATE),zm(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),null===(n=e.remoteConnection)||void 0===n||n.disconnect({terminate:!0,sendMessage:!0})}}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getUniversalLink();if(!t)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return t}getChannelId(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig())||void 0===t?void 0:t.channelId}getRPCHistory(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getRPCMethodTracker()}getVersion(){return Eb}getWalletStatus(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getConnectionStatus()}_getChannelConfig(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig()}_ping(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.ping()}_keyCheck(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.keyCheck()}_getServiceStatus(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getKeyInfo()}_resetKeys(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.resetKeys()}_getConnection(){return this.remoteConnection}}export{js as CommunicationLayerPreference,ys as ConnectionStatus,As as DEFAULT_SERVER_URL,ws as EventType,_s as MessageType,yw as MetaMaskSDK,Tb as PROVIDER_UPDATE_TYPE,Bs as PlatformType,iv as SDKProvider,yw as default};
//# sourceMappingURL=metamask-sdk.js.map
