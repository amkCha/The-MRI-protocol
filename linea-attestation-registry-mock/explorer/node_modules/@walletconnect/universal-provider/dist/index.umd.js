(function(jn,Ft){typeof exports=="object"&&typeof module<"u"?Ft(exports):typeof define=="function"&&define.amd?define(["exports"],Ft):(jn=typeof globalThis<"u"?globalThis:jn||self,Ft(jn["@walletconnect/universal-provider"]={}))})(this,function(jn){"use strict";var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function zn(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var o=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return r[s]}})}),t}var Zt={exports:{}},yi=typeof Reflect=="object"?Reflect:null,uh=yi&&typeof yi.apply=="function"?yi.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},Ms;yi&&typeof yi.ownKeys=="function"?Ms=yi.ownKeys:Object.getOwnPropertySymbols?Ms=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ms=function(e){return Object.getOwnPropertyNames(e)};function Ag(r){console&&console.warn&&console.warn(r)}var hh=Number.isNaN||function(e){return e!==e};function st(){st.init.call(this)}Zt.exports=st,Zt.exports.once=Ng,st.EventEmitter=st,st.prototype._events=void 0,st.prototype._eventsCount=0,st.prototype._maxListeners=void 0;var fh=10;function Bs(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return fh},set:function(r){if(typeof r!="number"||r<0||hh(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");fh=r}}),st.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},st.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||hh(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function lh(r){return r._maxListeners===void 0?st.defaultMaxListeners:r._maxListeners}st.prototype.getMaxListeners=function(){return lh(this)},st.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var h;if(t.length>0&&(h=t[0]),h instanceof Error)throw h;var l=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw l.context=h,l}var y=c[e];if(y===void 0)return!1;if(typeof y=="function")uh(y,this,t);else for(var p=y.length,_=_h(y,p),s=0;s<p;++s)uh(_[s],this,t);return!0};function dh(r,e,t,s){var o,c,h;if(Bs(t),c=r._events,c===void 0?(c=r._events=Object.create(null),r._eventsCount=0):(c.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),c=r._events),h=c[e]),h===void 0)h=c[e]=t,++r._eventsCount;else if(typeof h=="function"?h=c[e]=s?[t,h]:[h,t]:s?h.unshift(t):h.push(t),o=lh(r),o>0&&h.length>o&&!h.warned){h.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=e,l.count=h.length,Ag(l)}return r}st.prototype.addListener=function(e,t){return dh(this,e,t,!1)},st.prototype.on=st.prototype.addListener,st.prototype.prependListener=function(e,t){return dh(this,e,t,!0)};function Cg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ph(r,e,t){var s={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},o=Cg.bind(s);return o.listener=t,s.wrapFn=o,o}st.prototype.once=function(e,t){return Bs(t),this.on(e,ph(this,e,t)),this},st.prototype.prependOnceListener=function(e,t){return Bs(t),this.prependListener(e,ph(this,e,t)),this},st.prototype.removeListener=function(e,t){var s,o,c,h,l;if(Bs(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(c=-1,h=s.length-1;h>=0;h--)if(s[h]===t||s[h].listener===t){l=s[h].listener,c=h;break}if(c<0)return this;c===0?s.shift():Tg(s,c),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this},st.prototype.off=st.prototype.removeListener,st.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var c=Object.keys(s),h;for(o=0;o<c.length;++o)h=c[o],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function gh(r,e,t){var s=r._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?Rg(o):_h(o,o.length)}st.prototype.listeners=function(e){return gh(this,e,!0)},st.prototype.rawListeners=function(e){return gh(this,e,!1)},st.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):yh.call(r,e)},st.prototype.listenerCount=yh;function yh(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}st.prototype.eventNames=function(){return this._eventsCount>0?Ms(this._events):[]};function _h(r,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=r[s];return t}function Tg(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function Rg(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function Ng(r,e){return new Promise(function(t,s){function o(h){r.removeListener(e,c),s(h)}function c(){typeof r.removeListener=="function"&&r.removeListener("error",o),t([].slice.call(arguments))}vh(r,e,c,{once:!0}),e!=="error"&&Lg(r,o,{once:!0})})}function Lg(r,e,t){typeof r.on=="function"&&vh(r,"error",e,t)}function vh(r,e,t,s){if(typeof r.on=="function")s.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function o(c){s.once&&r.removeEventListener(e,o),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}const Fg=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,$g=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ug=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Mg(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Bg(r);return}return e}function Bg(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function qs(r,e={}){if(typeof r!="string")return r;const t=r.trim();if(r[0]==='"'&&r.at(-1)==='"'&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ug.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(Fg.test(r)||$g.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,Mg)}return JSON.parse(r)}catch(s){if(e.strict)throw s;return r}}function qg(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function Gt(r,...e){try{return qg(r(...e))}catch(t){return Promise.reject(t)}}function Hg(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function jg(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function Hs(r){if(Hg(r))return String(r);if(jg(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return Hs(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function wh(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const ma="base64:";function zg(r){if(typeof r=="string")return r;wh();const e=Buffer.from(r).toString("base64");return ma+e}function Kg(r){return typeof r!="string"||!r.startsWith(ma)?r:(wh(),Buffer.from(r.slice(ma.length),"base64"))}function gr(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Wg(...r){return gr(r.join(":"))}function js(r){return r=gr(r),r?r+":":""}function Q5(r){return r}const Gg="memory",Vg=()=>{const r=new Map;return{name:Gg,options:{},hasItem(e){return r.has(e)},getItem(e){return r.get(e)||null},getItemRaw(e){return r.get(e)||null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return Array.from(r.keys())},clear(){r.clear()},dispose(){r.clear()}}};function kg(r={}){const e={mounts:{"":r.driver||Vg()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const _ of e.mountpoints)if(p.startsWith(_))return{base:_,relativeKey:p.slice(_.length),driver:e.mounts[_]};return{base:"",relativeKey:p,driver:e.mounts[""]}},s=(p,_)=>e.mountpoints.filter(S=>S.startsWith(p)||_&&p.startsWith(S)).map(S=>({relativeBase:p.length>S.length?p.slice(S.length):void 0,mountpoint:S,driver:e.mounts[S]})),o=(p,_)=>{if(e.watching){_=gr(_);for(const S of e.watchListeners)S(p,_)}},c=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await mh(e.mounts[p],o,p)}},h=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},l=(p,_,S)=>{const D=new Map,O=I=>{let H=D.get(I.base);return H||(H={driver:I.driver,base:I.base,items:[]},D.set(I.base,H)),H};for(const I of p){const H=typeof I=="string",z=gr(H?I:I.key),ie=H?void 0:I.value,L=H||!I.options?_:{..._,...I.options},$=t(z);O($).items.push({key:z,value:ie,relativeKey:$.relativeKey,options:L})}return Promise.all([...D.values()].map(I=>S(I))).then(I=>I.flat())},y={hasItem(p,_={}){p=gr(p);const{relativeKey:S,driver:D}=t(p);return Gt(D.hasItem,S,_)},getItem(p,_={}){p=gr(p);const{relativeKey:S,driver:D}=t(p);return Gt(D.getItem,S,_).then(O=>qs(O))},getItems(p,_){return l(p,_,S=>S.driver.getItems?Gt(S.driver.getItems,S.items.map(D=>({key:D.relativeKey,options:D.options})),_).then(D=>D.map(O=>({key:Wg(S.base,O.key),value:qs(O.value)}))):Promise.all(S.items.map(D=>Gt(S.driver.getItem,D.relativeKey,D.options).then(O=>({key:D.key,value:qs(O)})))))},getItemRaw(p,_={}){p=gr(p);const{relativeKey:S,driver:D}=t(p);return D.getItemRaw?Gt(D.getItemRaw,S,_):Gt(D.getItem,S,_).then(O=>Kg(O))},async setItem(p,_,S={}){if(_===void 0)return y.removeItem(p);p=gr(p);const{relativeKey:D,driver:O}=t(p);O.setItem&&(await Gt(O.setItem,D,Hs(_),S),O.watch||o("update",p))},async setItems(p,_){await l(p,_,async S=>{S.driver.setItems&&await Gt(S.driver.setItems,S.items.map(D=>({key:D.relativeKey,value:Hs(D.value),options:D.options})),_),S.driver.setItem&&await Promise.all(S.items.map(D=>Gt(S.driver.setItem,D.relativeKey,Hs(D.value),D.options)))})},async setItemRaw(p,_,S={}){if(_===void 0)return y.removeItem(p,S);p=gr(p);const{relativeKey:D,driver:O}=t(p);if(O.setItemRaw)await Gt(O.setItemRaw,D,_,S);else if(O.setItem)await Gt(O.setItem,D,zg(_),S);else return;O.watch||o("update",p)},async removeItem(p,_={}){typeof _=="boolean"&&(_={removeMeta:_}),p=gr(p);const{relativeKey:S,driver:D}=t(p);D.removeItem&&(await Gt(D.removeItem,S,_),(_.removeMeta||_.removeMata)&&await Gt(D.removeItem,S+"$",_),D.watch||o("remove",p))},async getMeta(p,_={}){typeof _=="boolean"&&(_={nativeOnly:_}),p=gr(p);const{relativeKey:S,driver:D}=t(p),O=Object.create(null);if(D.getMeta&&Object.assign(O,await Gt(D.getMeta,S,_)),!_.nativeOnly){const I=await Gt(D.getItem,S+"$",_).then(H=>qs(H));I&&typeof I=="object"&&(typeof I.atime=="string"&&(I.atime=new Date(I.atime)),typeof I.mtime=="string"&&(I.mtime=new Date(I.mtime)),Object.assign(O,I))}return O},setMeta(p,_,S={}){return this.setItem(p+"$",_,S)},removeMeta(p,_={}){return this.removeItem(p+"$",_)},async getKeys(p,_={}){p=js(p);const S=s(p,!0);let D=[];const O=[];for(const I of S){const z=(await Gt(I.driver.getKeys,I.relativeBase,_)).map(ie=>I.mountpoint+gr(ie)).filter(ie=>!D.some(L=>ie.startsWith(L)));O.push(...z),D=[I.mountpoint,...D.filter(ie=>!ie.startsWith(I.mountpoint))]}return p?O.filter(I=>I.startsWith(p)&&!I.endsWith("$")):O.filter(I=>!I.endsWith("$"))},async clear(p,_={}){p=js(p),await Promise.all(s(p,!1).map(async S=>{if(S.driver.clear)return Gt(S.driver.clear,S.relativeBase,_);if(S.driver.removeItem){const D=await S.driver.getKeys(S.relativeBase||"",_);return Promise.all(D.map(O=>S.driver.removeItem(O,_)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>bh(p)))},async watch(p){return await c(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(_=>_!==p),e.watchListeners.length===0&&await h()}},async unwatch(){e.watchListeners=[],await h()},mount(p,_){if(p=js(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((S,D)=>D.length-S.length)),e.mounts[p]=_,e.watching&&Promise.resolve(mh(_,o,p)).then(S=>{e.unwatch[p]=S}).catch(console.error),y},async unmount(p,_=!0){p=js(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),_&&await bh(e.mounts[p]),e.mountpoints=e.mountpoints.filter(S=>S!==p),delete e.mounts[p])},getMount(p=""){p=gr(p)+":";const _=t(p);return{driver:_.driver,base:_.base}},getMounts(p="",_={}){return p=gr(p),s(p,_.parents).map(D=>({driver:D.driver,base:D.mountpoint}))}};return y}function mh(r,e,t){return r.watch?r.watch((s,o)=>e(s,t+o)):()=>{}}async function bh(r){typeof r.dispose=="function"&&await Gt(r.dispose)}function Kn(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function Eh(r,e){const t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=Kn(t);return(o,c)=>s.then(h=>c(h.transaction(e,o).objectStore(e)))}let ba;function Yi(){return ba||(ba=Eh("keyval-store","keyval")),ba}function Dh(r,e=Yi()){return e("readonly",t=>Kn(t.get(r)))}function Yg(r,e,t=Yi()){return t("readwrite",s=>(s.put(e,r),Kn(s.transaction)))}function Jg(r,e=Yi()){return e("readwrite",t=>(t.delete(r),Kn(t.transaction)))}function Xg(r=Yi()){return r("readwrite",e=>(e.clear(),Kn(e.transaction)))}function Qg(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Kn(r.transaction)}function Zg(r=Yi()){return r("readonly",e=>{if(e.getAllKeys)return Kn(e.getAllKeys());const t=[];return Qg(e,s=>t.push(s.key)).then(()=>t)})}const e0=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),t0=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Ji(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return t0(r)}catch{return r}}function Wn(r){return typeof r=="string"?r:e0(r)||""}const r0="idb-keyval";var n0=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=o=>e+o;let s;return r.dbName&&r.storeName&&(s=Eh(r.dbName,r.storeName)),{name:r0,options:r,async hasItem(o){return!(typeof await Dh(t(o),s)>"u")},async getItem(o){return await Dh(t(o),s)??null},setItem(o,c){return Yg(t(o),c,s)},removeItem(o){return Jg(t(o),s)},getKeys(){return Zg(s)},clear(){return Xg(s)}}};const i0="WALLET_CONNECT_V2_INDEXED_DB",s0="keyvaluestorage";class o0{constructor(){this.indexedDb=kg({driver:n0({dbName:i0,storeName:s0})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Wn(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zs={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,s){this[t]=String(s)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ea<"u"&&Ea.localStorage?zs.exports=Ea.localStorage:typeof window<"u"&&window.localStorage?zs.exports=window.localStorage:zs.exports=new e})();function a0(r){var e;return[r[0],Ji((e=r[1])!=null?e:"")]}class c0{constructor(){this.localStorage=zs.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(a0)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Ji(t)}async setItem(e,t){this.localStorage.setItem(e,Wn(t))}async removeItem(e){this.localStorage.removeItem(e)}}const u0="wc_storage_version",Sh=1,h0=async(r,e,t)=>{const s=u0,o=await e.getItem(s);if(o&&o>=Sh){t(e);return}const c=await r.getKeys();if(!c.length){t(e);return}const h=[];for(;c.length;){const l=c.shift();if(!l)continue;const y=l.toLowerCase();if(y.includes("wc@")||y.includes("walletconnect")||y.includes("wc_")||y.includes("wallet_connect")){const p=await r.getItem(l);await e.setItem(l,p),h.push(l)}}await e.setItem(s,Sh),t(e),f0(r,h)},f0=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};class l0{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new c0;this.storage=e;try{const t=new o0;h0(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var _i={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Da=function(r,e){return Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Da(r,e)};function d0(r,e){Da(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Sa=function(){return Sa=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Sa.apply(this,arguments)};function p0(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function g0(r,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,t,s);else for(var l=r.length-1;l>=0;l--)(h=r[l])&&(c=(o<3?h(c):o>3?h(e,t,c):h(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function y0(r,e){return function(t,s){e(t,s,r)}}function _0(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function v0(r,e,t,s){function o(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function l(_){try{p(s.next(_))}catch(S){h(S)}}function y(_){try{p(s.throw(_))}catch(S){h(S)}}function p(_){_.done?c(_.value):o(_.value).then(l,y)}p((s=s.apply(r,e||[])).next())})}function w0(r,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,h;return h={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function l(p){return function(_){return y([p,_])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(_){p=[6,_],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function m0(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}function b0(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function xa(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],s=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xh(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),o,c=[],h;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){h={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(h)throw h.error}}return c}function E0(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(xh(arguments[e]));return r}function D0(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var s=Array(r),o=0,e=0;e<t;e++)for(var c=arguments[e],h=0,l=c.length;h<l;h++,o++)s[o]=c[h];return s}function Xi(r){return this instanceof Xi?(this.v=r,this):new Xi(r)}function S0(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(r,e||[]),o,c=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(D){s[D]&&(o[D]=function(O){return new Promise(function(I,H){c.push([D,O,I,H])>1||l(D,O)})})}function l(D,O){try{y(s[D](O))}catch(I){S(c[0][3],I)}}function y(D){D.value instanceof Xi?Promise.resolve(D.value.v).then(p,_):S(c[0][2],D)}function p(D){l("next",D)}function _(D){l("throw",D)}function S(D,O){D(O),c.shift(),c.length&&l(c[0][0],c[0][1])}}function x0(r){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=r[o]?function(h){return(t=!t)?{value:Xi(r[o](h)),done:o==="return"}:c?c(h):h}:c}}function I0(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof xa=="function"?xa(r):r[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=r[c]&&function(h){return new Promise(function(l,y){h=r[c](h),o(l,y,h.done,h.value)})}}function o(c,h,l,y){Promise.resolve(y).then(function(p){c({value:p,done:l})},h)}}function O0(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function P0(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function A0(r){return r&&r.__esModule?r:{default:r}}function C0(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function T0(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var R0=Object.freeze({__proto__:null,__extends:d0,get __assign(){return Sa},__rest:p0,__decorate:g0,__param:y0,__metadata:_0,__awaiter:v0,__generator:w0,__createBinding:m0,__exportStar:b0,__values:xa,__read:xh,__spread:E0,__spreadArrays:D0,__await:Xi,__asyncGenerator:S0,__asyncDelegator:x0,__asyncValues:I0,__makeTemplateObject:O0,__importStar:P0,__importDefault:A0,__classPrivateFieldGet:C0,__classPrivateFieldSet:T0}),Ks=zn(R0),Qi={},_e={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Ia=function(r,e){return Ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Ia(r,e)};function N0(r,e){Ia(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Oa=function(){return Oa=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Oa.apply(this,arguments)};function L0(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function F0(r,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,t,s);else for(var l=r.length-1;l>=0;l--)(h=r[l])&&(c=(o<3?h(c):o>3?h(e,t,c):h(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function $0(r,e){return function(t,s){e(t,s,r)}}function U0(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function M0(r,e,t,s){function o(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function l(_){try{p(s.next(_))}catch(S){h(S)}}function y(_){try{p(s.throw(_))}catch(S){h(S)}}function p(_){_.done?c(_.value):o(_.value).then(l,y)}p((s=s.apply(r,e||[])).next())})}function B0(r,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,h;return h={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function l(p){return function(_){return y([p,_])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(_){p=[6,_],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function q0(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}function H0(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Pa(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],s=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ih(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),o,c=[],h;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){h={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(h)throw h.error}}return c}function j0(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Ih(arguments[e]));return r}function z0(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var s=Array(r),o=0,e=0;e<t;e++)for(var c=arguments[e],h=0,l=c.length;h<l;h++,o++)s[o]=c[h];return s}function Zi(r){return this instanceof Zi?(this.v=r,this):new Zi(r)}function K0(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(r,e||[]),o,c=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(D){s[D]&&(o[D]=function(O){return new Promise(function(I,H){c.push([D,O,I,H])>1||l(D,O)})})}function l(D,O){try{y(s[D](O))}catch(I){S(c[0][3],I)}}function y(D){D.value instanceof Zi?Promise.resolve(D.value.v).then(p,_):S(c[0][2],D)}function p(D){l("next",D)}function _(D){l("throw",D)}function S(D,O){D(O),c.shift(),c.length&&l(c[0][0],c[0][1])}}function W0(r){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=r[o]?function(h){return(t=!t)?{value:Zi(r[o](h)),done:o==="return"}:c?c(h):h}:c}}function G0(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Pa=="function"?Pa(r):r[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=r[c]&&function(h){return new Promise(function(l,y){h=r[c](h),o(l,y,h.done,h.value)})}}function o(c,h,l,y){Promise.resolve(y).then(function(p){c({value:p,done:l})},h)}}function V0(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function k0(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function Y0(r){return r&&r.__esModule?r:{default:r}}function J0(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function X0(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var Q0=Object.freeze({__proto__:null,__extends:N0,get __assign(){return Oa},__rest:L0,__decorate:F0,__param:$0,__metadata:U0,__awaiter:M0,__generator:B0,__createBinding:q0,__exportStar:H0,__values:Pa,__read:Ih,__spread:j0,__spreadArrays:z0,__await:Zi,__asyncGenerator:K0,__asyncDelegator:W0,__asyncValues:G0,__makeTemplateObject:V0,__importStar:k0,__importDefault:Y0,__classPrivateFieldGet:J0,__classPrivateFieldSet:X0}),Ws=zn(Q0),Aa={},es={},Oh;function Z0(){if(Oh)return es;Oh=1,Object.defineProperty(es,"__esModule",{value:!0}),es.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return es.delay=r,es}var Gn={},Ca={},Vn={},Ph;function ey(){return Ph||(Ph=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.ONE_THOUSAND=Vn.ONE_HUNDRED=void 0,Vn.ONE_HUNDRED=100,Vn.ONE_THOUSAND=1e3),Vn}var Ta={},Ah;function ty(){return Ah||(Ah=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(Ta)),Ta}var Ch;function Th(){return Ch||(Ch=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ws;e.__exportStar(ey(),r),e.__exportStar(ty(),r)}(Ca)),Ca}var Rh;function ry(){if(Rh)return Gn;Rh=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.fromMiliseconds=Gn.toMiliseconds=void 0;const r=Th();function e(s){return s*r.ONE_THOUSAND}Gn.toMiliseconds=e;function t(s){return Math.floor(s/r.ONE_THOUSAND)}return Gn.fromMiliseconds=t,Gn}var Nh;function ny(){return Nh||(Nh=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ws;e.__exportStar(Z0(),r),e.__exportStar(ry(),r)}(Aa)),Aa}var vi={},Lh;function iy(){if(Lh)return vi;Lh=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return vi.Watch=r,vi.default=r,vi}var Ra={},ts={},Fh;function sy(){if(Fh)return ts;Fh=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.IWatch=void 0;class r{}return ts.IWatch=r,ts}var $h;function oy(){return $h||($h=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Ws.__exportStar(sy(),r)}(Ra)),Ra}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ws;e.__exportStar(ny(),r),e.__exportStar(iy(),r),e.__exportStar(oy(),r),e.__exportStar(Th(),r)})(_e);var Na={},rs={};class kn{}var ay=Object.freeze({__proto__:null,IEvents:kn}),cy=zn(ay),Uh;function uy(){if(Uh)return rs;Uh=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.IHeartBeat=void 0;const r=cy;class e extends r.IEvents{constructor(s){super()}}return rs.IHeartBeat=e,rs}var Mh;function Bh(){return Mh||(Mh=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Ks.__exportStar(uy(),r)}(Na)),Na}var La={},Yn={},qh;function hy(){if(qh)return Yn;qh=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.HEARTBEAT_EVENTS=Yn.HEARTBEAT_INTERVAL=void 0;const r=_e;return Yn.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,Yn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Yn}var Hh;function jh(){return Hh||(Hh=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Ks.__exportStar(hy(),r)}(La)),La}var zh;function fy(){if(zh)return Qi;zh=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.HeartBeat=void 0;const r=Ks,e=Zt.exports,t=_e,s=Bh(),o=jh();class c extends s.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=l?.interval||o.HEARTBEAT_INTERVAL}static init(l){return r.__awaiter(this,void 0,void 0,function*(){const y=new c(l);return yield y.init(),y})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,y){this.events.on(l,y)}once(l,y){this.events.once(l,y)}off(l,y){this.events.off(l,y)}removeListener(l,y){this.events.removeListener(l,y)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return Qi.HeartBeat=c,Qi}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Ks;e.__exportStar(fy(),r),e.__exportStar(Bh(),r),e.__exportStar(jh(),r)})(_i);var ke={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Fa=function(r,e){return Fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Fa(r,e)};function ly(r,e){Fa(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $a=function(){return $a=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},$a.apply(this,arguments)};function dy(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function py(r,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,t,s);else for(var l=r.length-1;l>=0;l--)(h=r[l])&&(c=(o<3?h(c):o>3?h(e,t,c):h(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function gy(r,e){return function(t,s){e(t,s,r)}}function yy(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function _y(r,e,t,s){function o(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function l(_){try{p(s.next(_))}catch(S){h(S)}}function y(_){try{p(s.throw(_))}catch(S){h(S)}}function p(_){_.done?c(_.value):o(_.value).then(l,y)}p((s=s.apply(r,e||[])).next())})}function vy(r,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,h;return h={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function l(p){return function(_){return y([p,_])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(_){p=[6,_],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function wy(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}function my(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Ua(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],s=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kh(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),o,c=[],h;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){h={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(h)throw h.error}}return c}function by(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Kh(arguments[e]));return r}function Ey(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var s=Array(r),o=0,e=0;e<t;e++)for(var c=arguments[e],h=0,l=c.length;h<l;h++,o++)s[o]=c[h];return s}function ns(r){return this instanceof ns?(this.v=r,this):new ns(r)}function Dy(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(r,e||[]),o,c=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(D){s[D]&&(o[D]=function(O){return new Promise(function(I,H){c.push([D,O,I,H])>1||l(D,O)})})}function l(D,O){try{y(s[D](O))}catch(I){S(c[0][3],I)}}function y(D){D.value instanceof ns?Promise.resolve(D.value.v).then(p,_):S(c[0][2],D)}function p(D){l("next",D)}function _(D){l("throw",D)}function S(D,O){D(O),c.shift(),c.length&&l(c[0][0],c[0][1])}}function Sy(r){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=r[o]?function(h){return(t=!t)?{value:ns(r[o](h)),done:o==="return"}:c?c(h):h}:c}}function xy(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Ua=="function"?Ua(r):r[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=r[c]&&function(h){return new Promise(function(l,y){h=r[c](h),o(l,y,h.done,h.value)})}}function o(c,h,l,y){Promise.resolve(y).then(function(p){c({value:p,done:l})},h)}}function Iy(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function Oy(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function Py(r){return r&&r.__esModule?r:{default:r}}function Ay(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function Cy(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var Ty=Object.freeze({__proto__:null,__extends:ly,get __assign(){return $a},__rest:dy,__decorate:py,__param:gy,__metadata:yy,__awaiter:_y,__generator:vy,__createBinding:wy,__exportStar:my,__values:Ua,__read:Kh,__spread:by,__spreadArrays:Ey,__await:ns,__asyncGenerator:Dy,__asyncDelegator:Sy,__asyncValues:xy,__makeTemplateObject:Iy,__importStar:Oy,__importDefault:Py,__classPrivateFieldGet:Ay,__classPrivateFieldSet:Cy}),Ry=zn(Ty),Ma,Wh;function Ny(){if(Wh)return Ma;Wh=1;function r(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Ma=e;function e(t,s,o){var c=o&&o.stringify||r,h=1;if(typeof t=="object"&&t!==null){var l=s.length+h;if(l===1)return t;var y=new Array(l);y[0]=c(t);for(var p=1;p<l;p++)y[p]=c(s[p]);return y.join(" ")}if(typeof t!="string")return t;var _=s.length;if(_===0)return t;for(var S="",D=1-h,O=-1,I=t&&t.length||0,H=0;H<I;){if(t.charCodeAt(H)===37&&H+1<I){switch(O=O>-1?O:0,t.charCodeAt(H+1)){case 100:case 102:if(D>=_||s[D]==null)break;O<H&&(S+=t.slice(O,H)),S+=Number(s[D]),O=H+2,H++;break;case 105:if(D>=_||s[D]==null)break;O<H&&(S+=t.slice(O,H)),S+=Math.floor(Number(s[D])),O=H+2,H++;break;case 79:case 111:case 106:if(D>=_||s[D]===void 0)break;O<H&&(S+=t.slice(O,H));var z=typeof s[D];if(z==="string"){S+="'"+s[D]+"'",O=H+2,H++;break}if(z==="function"){S+=s[D].name||"<anonymous>",O=H+2,H++;break}S+=c(s[D]),O=H+2,H++;break;case 115:if(D>=_)break;O<H&&(S+=t.slice(O,H)),S+=String(s[D]),O=H+2,H++;break;case 37:O<H&&(S+=t.slice(O,H)),S+="%",O=H+2,H++,D--;break}++D}++H}return O===-1?t:(O<I&&(S+=t.slice(O)),S)}return Ma}var Ba,Gh;function Ly(){if(Gh)return Ba;Gh=1;const r=Ny();Ba=o;const e=R().console||{},t={mapHttpRequest:I,mapHttpResponse:I,wrapRequestSerializer:H,wrapResponseSerializer:H,wrapErrorSerializer:H,req:I,res:I,err:D};function s(E,u){return Array.isArray(E)?E.filter(function(V){return V!=="!stdSerializers.err"}):E===!0?Object.keys(u):!1}function o(E){E=E||{},E.browser=E.browser||{};const u=E.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const m=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const V=E.serializers||{},Y=s(E.browser.serialize,V);let se=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ue=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),E.enabled===!1&&(E.level="silent");const de=E.level||"info",b=Object.create(m);b.log||(b.log=z),Object.defineProperty(b,"levelVal",{get:ee}),Object.defineProperty(b,"level",{get:X,set:W});const C={transmit:u,serialize:Y,asObject:E.browser.asObject,levels:ue,timestamp:O(E)};b.levels=o.levels,b.level=de,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=z,b.serializers=V,b._serialize=Y,b._stdErrSerialize=se,b.child=G,u&&(b._logEvent=S());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function W(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(C,b,"error","log"),c(C,b,"fatal","error"),c(C,b,"warn","error"),c(C,b,"info","log"),c(C,b,"debug","log"),c(C,b,"trace","log")}function G(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},Y&&J.serializers&&(re.serializers=J.serializers);const me=re.serializers;if(Y&&me){var oe=Object.assign({},V,me),be=E.browser.serialize===!0?Object.keys(oe):Y;delete J.serializers,y([J],be,oe,this._stdErrSerialize)}function fe(ve){this._childLevel=(ve._childLevel|0)+1,this.error=p(ve,J,"error"),this.fatal=p(ve,J,"fatal"),this.warn=p(ve,J,"warn"),this.info=p(ve,J,"info"),this.debug=p(ve,J,"debug"),this.trace=p(ve,J,"trace"),oe&&(this.serializers=oe,this._serialize=be),u&&(this._logEvent=S([].concat(ve._logEvent.bindings,J)))}return fe.prototype=this,new fe(this)}return b}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ie,epochTime:L,unixTime:$,isoTime:P});function c(E,u,m,V){const Y=Object.getPrototypeOf(u);u[m]=u.levelVal>u.levels.values[m]?z:Y[m]?Y[m]:e[m]||e[V]||z,h(E,u,m)}function h(E,u,m){!E.transmit&&u[m]===z||(u[m]=function(V){return function(){const se=E.timestamp(),ue=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var b=0;b<ue.length;b++)ue[b]=arguments[b];if(E.serialize&&!E.asObject&&y(ue,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?V.call(de,l(this,m,ue,se)):V.apply(de,ue),E.transmit){const C=E.transmit.level||u.level,ee=o.levels.values[C],X=o.levels.values[m];if(X<ee)return;_(this,{ts:se,methodLevel:m,methodValue:X,transmitLevel:C,transmitValue:o.levels.values[E.transmit.level||u.level],send:E.transmit.send,val:u.levelVal},ue)}}}(u[m]))}function l(E,u,m,V){E._serialize&&y(m,E._serialize,E.serializers,E._stdErrSerialize);const Y=m.slice();let se=Y[0];const ue={};V&&(ue.time=V),ue.level=o.levels.values[u];let de=(E._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof Y[0]=="object";)Object.assign(ue,Y.shift());se=Y.length?r(Y.shift(),Y):void 0}else typeof se=="string"&&(se=r(Y.shift(),Y));return se!==void 0&&(ue.msg=se),ue}function y(E,u,m,V){for(const Y in E)if(V&&E[Y]instanceof Error)E[Y]=o.stdSerializers.err(E[Y]);else if(typeof E[Y]=="object"&&!Array.isArray(E[Y]))for(const se in E[Y])u&&u.indexOf(se)>-1&&se in m&&(E[Y][se]=m[se](E[Y][se]))}function p(E,u,m){return function(){const V=new Array(1+arguments.length);V[0]=u;for(var Y=1;Y<V.length;Y++)V[Y]=arguments[Y-1];return E[m].apply(this,V)}}function _(E,u,m){const V=u.send,Y=u.ts,se=u.methodLevel,ue=u.methodValue,de=u.val,b=E._logEvent.bindings;y(m,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=Y,E._logEvent.messages=m.filter(function(C){return b.indexOf(C)===-1}),E._logEvent.level.label=se,E._logEvent.level.value=ue,V(se,E._logEvent,de),E._logEvent=S(b)}function S(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function D(E){const u={type:E.constructor.name,msg:E.message,stack:E.stack};for(const m in E)u[m]===void 0&&(u[m]=E[m]);return u}function O(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?ie:L}function I(){return{}}function H(E){return E}function z(){}function ie(){return!1}function L(){return Date.now()}function $(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function R(){function E(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return Ba}var Jn={},Vh;function kh(){return Vh||(Vh=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.PINO_CUSTOM_CONTEXT_KEY=Jn.PINO_LOGGER_DEFAULTS=void 0,Jn.PINO_LOGGER_DEFAULTS={level:"info"},Jn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Jn}var ir={},Yh;function Fy(){if(Yh)return ir;Yh=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.generateChildLogger=ir.formatChildLoggerContext=ir.getLoggerContext=ir.setBrowserLoggerContext=ir.getBrowserLoggerContext=ir.getDefaultLoggerOptions=void 0;const r=kh();function e(l){return Object.assign(Object.assign({},l),{level:l?.level||r.PINO_LOGGER_DEFAULTS.level})}ir.getDefaultLoggerOptions=e;function t(l,y=r.PINO_CUSTOM_CONTEXT_KEY){return l[y]||""}ir.getBrowserLoggerContext=t;function s(l,y,p=r.PINO_CUSTOM_CONTEXT_KEY){return l[p]=y,l}ir.setBrowserLoggerContext=s;function o(l,y=r.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof l.bindings>"u"?p=t(l,y):p=l.bindings().context||"",p}ir.getLoggerContext=o;function c(l,y,p=r.PINO_CUSTOM_CONTEXT_KEY){const _=o(l,p);return _.trim()?`${_}/${y}`:y}ir.formatChildLoggerContext=c;function h(l,y,p=r.PINO_CUSTOM_CONTEXT_KEY){const _=c(l,y,p),S=l.child({context:_});return s(S,_,p)}return ir.generateChildLogger=h,ir}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=Ry,t=e.__importDefault(Ly());Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(kh(),r),e.__exportStar(Fy(),r)})(ke);class $y extends kn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Uy extends kn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class My{constructor(e,t){this.logger=e,this.core=t}}class By extends kn{constructor(e,t){super(),this.relayer=e,this.logger=t}}class qy extends kn{constructor(e){super()}}class Hy{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}}class jy extends kn{constructor(e,t){super(),this.relayer=e,this.logger=t}}class zy extends kn{constructor(e,t){super(),this.core=e,this.logger=t}}class Ky{constructor(e,t){this.projectId=e,this.logger=t}}class Wy{constructor(e,t){this.projectId=e,this.logger=t}}class Gy{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class Vy{constructor(e){this.client=e}}var qa={},wi={},Gs={},Vs={};Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.BrowserRandomSource=void 0;const Jh=65536;class ky{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=Jh)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,Jh)));return t}}Vs.BrowserRandomSource=ky;function Yy(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ks={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Jy(r){for(var e=0;e<r.length;e++)r[e]=0;return r}xr.wipe=Jy;var Xy={},Qy=Object.freeze({__proto__:null,default:Xy}),Zy=zn(Qy);Object.defineProperty(ks,"__esModule",{value:!0}),ks.NodeRandomSource=void 0;const e_=xr;class t_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Yy<"u"){const e=Zy;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,e_.wipe)(t),s}}ks.NodeRandomSource=t_,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.SystemRandomSource=void 0;const r_=Vs,n_=ks;class i_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new r_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new n_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Gs.SystemRandomSource=i_;var Ne={},Xh={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(l,y){var p=l>>>16&65535,_=l&65535,S=y>>>16&65535,D=y&65535;return _*D+(p*D+_*S<<16>>>0)|0}r.mul=Math.imul||e;function t(l,y){return l+y|0}r.add=t;function s(l,y){return l-y|0}r.sub=s;function o(l,y){return l<<y|l>>>32-y}r.rotl=o;function c(l,y){return l<<32-y|l>>>y}r.rotr=c;function h(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}r.isInteger=Number.isInteger||h,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(l){return r.isInteger(l)&&l>=-r.MAX_SAFE_INTEGER&&l<=r.MAX_SAFE_INTEGER}})(Xh),Object.defineProperty(Ne,"__esModule",{value:!0});var Qh=Xh;function s_(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}Ne.readInt16BE=s_;function o_(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}Ne.readUint16BE=o_;function a_(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}Ne.readInt16LE=a_;function c_(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}Ne.readUint16LE=c_;function Zh(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}Ne.writeUint16BE=Zh,Ne.writeInt16BE=Zh;function ef(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}Ne.writeUint16LE=ef,Ne.writeInt16LE=ef;function Ha(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}Ne.readInt32BE=Ha;function ja(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}Ne.readUint32BE=ja;function za(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}Ne.readInt32LE=za;function Ka(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}Ne.readUint32LE=Ka;function Ys(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}Ne.writeUint32BE=Ys,Ne.writeInt32BE=Ys;function Js(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}Ne.writeUint32LE=Js,Ne.writeInt32LE=Js;function u_(r,e){e===void 0&&(e=0);var t=Ha(r,e),s=Ha(r,e+4);return t*4294967296+s-(s>>31)*4294967296}Ne.readInt64BE=u_;function h_(r,e){e===void 0&&(e=0);var t=ja(r,e),s=ja(r,e+4);return t*4294967296+s}Ne.readUint64BE=h_;function f_(r,e){e===void 0&&(e=0);var t=za(r,e),s=za(r,e+4);return s*4294967296+t-(t>>31)*4294967296}Ne.readInt64LE=f_;function l_(r,e){e===void 0&&(e=0);var t=Ka(r,e),s=Ka(r,e+4);return s*4294967296+t}Ne.readUint64LE=l_;function tf(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Ys(r/4294967296>>>0,e,t),Ys(r>>>0,e,t+4),e}Ne.writeUint64BE=tf,Ne.writeInt64BE=tf;function rf(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Js(r>>>0,e,t),Js(r/4294967296>>>0,e,t+4),e}Ne.writeUint64LE=rf,Ne.writeInt64LE=rf;function d_(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=r/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Ne.readUintBE=d_;function p_(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+r/8;c++)s+=e[c]*o,o*=256;return s}Ne.readUintLE=p_;function g_(r,e,t,s){if(t===void 0&&(t=new Uint8Array(r/8)),s===void 0&&(s=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Qh.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=r/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Ne.writeUintBE=g_;function y_(r,e,t,s){if(t===void 0&&(t=new Uint8Array(r/8)),s===void 0&&(s=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Qh.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+r/8;c++)t[c]=e/o&255,o*=256;return t}Ne.writeUintLE=y_;function __(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}Ne.readFloat32BE=__;function v_(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}Ne.readFloat32LE=v_;function w_(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}Ne.readFloat64BE=w_;function m_(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}Ne.readFloat64LE=m_;function b_(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,r),e}Ne.writeFloat32BE=b_;function E_(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,r,!0),e}Ne.writeFloat32LE=E_;function D_(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,r),e}Ne.writeFloat64BE=D_;function S_(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,r,!0),e}Ne.writeFloat64LE=S_,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=Gs,t=Ne,s=xr;r.defaultRandomSource=new e.SystemRandomSource;function o(p,_=r.defaultRandomSource){return _.randomBytes(p)}r.randomBytes=o;function c(p=r.defaultRandomSource){const _=o(4,p),S=(0,t.readUint32LE)(_);return(0,s.wipe)(_),S}r.randomUint32=c;const h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(p,_=h,S=r.defaultRandomSource){if(_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");let D="";const O=_.length,I=256-256%O;for(;p>0;){const H=o(Math.ceil(p*256/I),S);for(let z=0;z<H.length&&p>0;z++){const ie=H[z];ie<I&&(D+=_.charAt(ie%O),p--)}(0,s.wipe)(H)}return D}r.randomString=l;function y(p,_=h,S=r.defaultRandomSource){const D=Math.ceil(p/(Math.log(_.length)/Math.LN2));return l(D,_,S)}r.randomStringForEntropy=y}(wi);var nf={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Ne,t=xr;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var s=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},l.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var _=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=y[_++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(_=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,_,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[_++],p--;return this},l.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,_=this._bufferLength,S=p/536870912|0,D=p<<3,O=p%128<112?128:256;this._buffer[_]=128;for(var I=_+1;I<O-8;I++)this._buffer[I]=0;e.writeUint32BE(S,this._buffer,O-8),e.writeUint32BE(D,this._buffer,O-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,O),this._finished=!0}for(var I=0;I<this.digestLength/8;I++)e.writeUint32BE(this._stateHi[I],y,I*8),e.writeUint32BE(this._stateLo[I],y,I*8+4);return this},l.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},l}();r.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(l,y,p,_,S,D,O){for(var I=p[0],H=p[1],z=p[2],ie=p[3],L=p[4],$=p[5],P=p[6],R=p[7],E=_[0],u=_[1],m=_[2],V=_[3],Y=_[4],se=_[5],ue=_[6],de=_[7],b,C,ee,X,W,G,J,re;O>=128;){for(var me=0;me<16;me++){var oe=8*me+D;l[me]=e.readUint32BE(S,oe),y[me]=e.readUint32BE(S,oe+4)}for(var me=0;me<80;me++){var be=I,fe=H,ve=z,j=ie,q=L,F=$,d=P,T=R,ae=E,le=u,xe=m,je=V,We=Y,Ue=se,yt=ue,_t=de;if(b=R,C=de,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=(L>>>14|Y<<32-14)^(L>>>18|Y<<32-18)^(Y>>>41-32|L<<32-(41-32)),C=(Y>>>14|L<<32-14)^(Y>>>18|L<<32-18)^(L>>>41-32|Y<<32-(41-32)),W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,b=L&$^~L&P,C=Y&se^~Y&ue,W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,b=o[me*2],C=o[me*2+1],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,b=l[me%16],C=y[me%16],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,ee=J&65535|re<<16,X=W&65535|G<<16,b=ee,C=X,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=(I>>>28|E<<32-28)^(E>>>34-32|I<<32-(34-32))^(E>>>39-32|I<<32-(39-32)),C=(E>>>28|I<<32-28)^(I>>>34-32|E<<32-(34-32))^(I>>>39-32|E<<32-(39-32)),W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,b=I&H^I&z^H&z,C=E&u^E&m^u&m,W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,T=J&65535|re<<16,_t=W&65535|G<<16,b=j,C=je,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=ee,C=X,W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,j=J&65535|re<<16,je=W&65535|G<<16,H=be,z=fe,ie=ve,L=j,$=q,P=F,R=d,I=T,u=ae,m=le,V=xe,Y=je,se=We,ue=Ue,de=yt,E=_t,me%16===15)for(var oe=0;oe<16;oe++)b=l[oe],C=y[oe],W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=l[(oe+9)%16],C=y[(oe+9)%16],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,ee=l[(oe+1)%16],X=y[(oe+1)%16],b=(ee>>>1|X<<32-1)^(ee>>>8|X<<32-8)^ee>>>7,C=(X>>>1|ee<<32-1)^(X>>>8|ee<<32-8)^(X>>>7|ee<<32-7),W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,ee=l[(oe+14)%16],X=y[(oe+14)%16],b=(ee>>>19|X<<32-19)^(X>>>61-32|ee<<32-(61-32))^ee>>>6,C=(X>>>19|ee<<32-19)^(ee>>>61-32|X<<32-(61-32))^(X>>>6|ee<<32-6),W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,l[oe]=J&65535|re<<16,y[oe]=W&65535|G<<16}b=I,C=E,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[0],C=_[0],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[0]=I=J&65535|re<<16,_[0]=E=W&65535|G<<16,b=H,C=u,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[1],C=_[1],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[1]=H=J&65535|re<<16,_[1]=u=W&65535|G<<16,b=z,C=m,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[2],C=_[2],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[2]=z=J&65535|re<<16,_[2]=m=W&65535|G<<16,b=ie,C=V,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[3],C=_[3],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[3]=ie=J&65535|re<<16,_[3]=V=W&65535|G<<16,b=L,C=Y,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[4],C=_[4],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[4]=L=J&65535|re<<16,_[4]=Y=W&65535|G<<16,b=$,C=se,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[5],C=_[5],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[5]=$=J&65535|re<<16,_[5]=se=W&65535|G<<16,b=P,C=ue,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[6],C=_[6],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[6]=P=J&65535|re<<16,_[6]=ue=W&65535|G<<16,b=R,C=de,W=C&65535,G=C>>>16,J=b&65535,re=b>>>16,b=p[7],C=_[7],W+=C&65535,G+=C>>>16,J+=b&65535,re+=b>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[7]=R=J&65535|re<<16,_[7]=de=W&65535|G<<16,D+=128,O-=128}return D}function h(l){var y=new s;y.update(l);var p=y.digest();return y.clean(),p}r.hash=h})(nf),function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=wi,t=nf,s=xr;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function o(j){const q=new Float64Array(16);if(j)for(let F=0;F<j.length;F++)q[F]=j[F];return q}const c=new Uint8Array(32);c[0]=9;const h=o(),l=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(j,q){for(let F=0;F<16;F++)j[F]=q[F]|0}function I(j){let q=1;for(let F=0;F<16;F++){let d=j[F]+q+65535;q=Math.floor(d/65536),j[F]=d-q*65536}j[0]+=q-1+37*(q-1)}function H(j,q,F){const d=~(F-1);for(let T=0;T<16;T++){const ae=d&(j[T]^q[T]);j[T]^=ae,q[T]^=ae}}function z(j,q){const F=o(),d=o();for(let T=0;T<16;T++)d[T]=q[T];I(d),I(d),I(d);for(let T=0;T<2;T++){F[0]=d[0]-65517;for(let le=1;le<15;le++)F[le]=d[le]-65535-(F[le-1]>>16&1),F[le-1]&=65535;F[15]=d[15]-32767-(F[14]>>16&1);const ae=F[15]>>16&1;F[14]&=65535,H(d,F,1-ae)}for(let T=0;T<16;T++)j[2*T]=d[T]&255,j[2*T+1]=d[T]>>8}function ie(j,q){let F=0;for(let d=0;d<32;d++)F|=j[d]^q[d];return(1&F-1>>>8)-1}function L(j,q){const F=new Uint8Array(32),d=new Uint8Array(32);return z(F,j),z(d,q),ie(F,d)}function $(j){const q=new Uint8Array(32);return z(q,j),q[0]&1}function P(j,q){for(let F=0;F<16;F++)j[F]=q[2*F]+(q[2*F+1]<<8);j[15]&=32767}function R(j,q,F){for(let d=0;d<16;d++)j[d]=q[d]+F[d]}function E(j,q,F){for(let d=0;d<16;d++)j[d]=q[d]-F[d]}function u(j,q,F){let d,T,ae=0,le=0,xe=0,je=0,We=0,Ue=0,yt=0,_t=0,Be=0,Ie=0,Le=0,Fe=0,qe=0,Pe=0,$e=0,Se=0,Ae=0,ze=0,Oe=0,Ge=0,Ye=0,et=0,tt=0,Xe=0,ur=0,wr=0,en=0,hr=0,pn=0,Tn=0,ri=0,Dt=F[0],vt=F[1],St=F[2],xt=F[3],bt=F[4],wt=F[5],Ut=F[6],Mt=F[7],It=F[8],Bt=F[9],Ot=F[10],Tt=F[11],Pt=F[12],lt=F[13],qt=F[14],Ht=F[15];d=q[0],ae+=d*Dt,le+=d*vt,xe+=d*St,je+=d*xt,We+=d*bt,Ue+=d*wt,yt+=d*Ut,_t+=d*Mt,Be+=d*It,Ie+=d*Bt,Le+=d*Ot,Fe+=d*Tt,qe+=d*Pt,Pe+=d*lt,$e+=d*qt,Se+=d*Ht,d=q[1],le+=d*Dt,xe+=d*vt,je+=d*St,We+=d*xt,Ue+=d*bt,yt+=d*wt,_t+=d*Ut,Be+=d*Mt,Ie+=d*It,Le+=d*Bt,Fe+=d*Ot,qe+=d*Tt,Pe+=d*Pt,$e+=d*lt,Se+=d*qt,Ae+=d*Ht,d=q[2],xe+=d*Dt,je+=d*vt,We+=d*St,Ue+=d*xt,yt+=d*bt,_t+=d*wt,Be+=d*Ut,Ie+=d*Mt,Le+=d*It,Fe+=d*Bt,qe+=d*Ot,Pe+=d*Tt,$e+=d*Pt,Se+=d*lt,Ae+=d*qt,ze+=d*Ht,d=q[3],je+=d*Dt,We+=d*vt,Ue+=d*St,yt+=d*xt,_t+=d*bt,Be+=d*wt,Ie+=d*Ut,Le+=d*Mt,Fe+=d*It,qe+=d*Bt,Pe+=d*Ot,$e+=d*Tt,Se+=d*Pt,Ae+=d*lt,ze+=d*qt,Oe+=d*Ht,d=q[4],We+=d*Dt,Ue+=d*vt,yt+=d*St,_t+=d*xt,Be+=d*bt,Ie+=d*wt,Le+=d*Ut,Fe+=d*Mt,qe+=d*It,Pe+=d*Bt,$e+=d*Ot,Se+=d*Tt,Ae+=d*Pt,ze+=d*lt,Oe+=d*qt,Ge+=d*Ht,d=q[5],Ue+=d*Dt,yt+=d*vt,_t+=d*St,Be+=d*xt,Ie+=d*bt,Le+=d*wt,Fe+=d*Ut,qe+=d*Mt,Pe+=d*It,$e+=d*Bt,Se+=d*Ot,Ae+=d*Tt,ze+=d*Pt,Oe+=d*lt,Ge+=d*qt,Ye+=d*Ht,d=q[6],yt+=d*Dt,_t+=d*vt,Be+=d*St,Ie+=d*xt,Le+=d*bt,Fe+=d*wt,qe+=d*Ut,Pe+=d*Mt,$e+=d*It,Se+=d*Bt,Ae+=d*Ot,ze+=d*Tt,Oe+=d*Pt,Ge+=d*lt,Ye+=d*qt,et+=d*Ht,d=q[7],_t+=d*Dt,Be+=d*vt,Ie+=d*St,Le+=d*xt,Fe+=d*bt,qe+=d*wt,Pe+=d*Ut,$e+=d*Mt,Se+=d*It,Ae+=d*Bt,ze+=d*Ot,Oe+=d*Tt,Ge+=d*Pt,Ye+=d*lt,et+=d*qt,tt+=d*Ht,d=q[8],Be+=d*Dt,Ie+=d*vt,Le+=d*St,Fe+=d*xt,qe+=d*bt,Pe+=d*wt,$e+=d*Ut,Se+=d*Mt,Ae+=d*It,ze+=d*Bt,Oe+=d*Ot,Ge+=d*Tt,Ye+=d*Pt,et+=d*lt,tt+=d*qt,Xe+=d*Ht,d=q[9],Ie+=d*Dt,Le+=d*vt,Fe+=d*St,qe+=d*xt,Pe+=d*bt,$e+=d*wt,Se+=d*Ut,Ae+=d*Mt,ze+=d*It,Oe+=d*Bt,Ge+=d*Ot,Ye+=d*Tt,et+=d*Pt,tt+=d*lt,Xe+=d*qt,ur+=d*Ht,d=q[10],Le+=d*Dt,Fe+=d*vt,qe+=d*St,Pe+=d*xt,$e+=d*bt,Se+=d*wt,Ae+=d*Ut,ze+=d*Mt,Oe+=d*It,Ge+=d*Bt,Ye+=d*Ot,et+=d*Tt,tt+=d*Pt,Xe+=d*lt,ur+=d*qt,wr+=d*Ht,d=q[11],Fe+=d*Dt,qe+=d*vt,Pe+=d*St,$e+=d*xt,Se+=d*bt,Ae+=d*wt,ze+=d*Ut,Oe+=d*Mt,Ge+=d*It,Ye+=d*Bt,et+=d*Ot,tt+=d*Tt,Xe+=d*Pt,ur+=d*lt,wr+=d*qt,en+=d*Ht,d=q[12],qe+=d*Dt,Pe+=d*vt,$e+=d*St,Se+=d*xt,Ae+=d*bt,ze+=d*wt,Oe+=d*Ut,Ge+=d*Mt,Ye+=d*It,et+=d*Bt,tt+=d*Ot,Xe+=d*Tt,ur+=d*Pt,wr+=d*lt,en+=d*qt,hr+=d*Ht,d=q[13],Pe+=d*Dt,$e+=d*vt,Se+=d*St,Ae+=d*xt,ze+=d*bt,Oe+=d*wt,Ge+=d*Ut,Ye+=d*Mt,et+=d*It,tt+=d*Bt,Xe+=d*Ot,ur+=d*Tt,wr+=d*Pt,en+=d*lt,hr+=d*qt,pn+=d*Ht,d=q[14],$e+=d*Dt,Se+=d*vt,Ae+=d*St,ze+=d*xt,Oe+=d*bt,Ge+=d*wt,Ye+=d*Ut,et+=d*Mt,tt+=d*It,Xe+=d*Bt,ur+=d*Ot,wr+=d*Tt,en+=d*Pt,hr+=d*lt,pn+=d*qt,Tn+=d*Ht,d=q[15],Se+=d*Dt,Ae+=d*vt,ze+=d*St,Oe+=d*xt,Ge+=d*bt,Ye+=d*wt,et+=d*Ut,tt+=d*Mt,Xe+=d*It,ur+=d*Bt,wr+=d*Ot,en+=d*Tt,hr+=d*Pt,pn+=d*lt,Tn+=d*qt,ri+=d*Ht,ae+=38*Ae,le+=38*ze,xe+=38*Oe,je+=38*Ge,We+=38*Ye,Ue+=38*et,yt+=38*tt,_t+=38*Xe,Be+=38*ur,Ie+=38*wr,Le+=38*en,Fe+=38*hr,qe+=38*pn,Pe+=38*Tn,$e+=38*ri,T=1,d=ae+T+65535,T=Math.floor(d/65536),ae=d-T*65536,d=le+T+65535,T=Math.floor(d/65536),le=d-T*65536,d=xe+T+65535,T=Math.floor(d/65536),xe=d-T*65536,d=je+T+65535,T=Math.floor(d/65536),je=d-T*65536,d=We+T+65535,T=Math.floor(d/65536),We=d-T*65536,d=Ue+T+65535,T=Math.floor(d/65536),Ue=d-T*65536,d=yt+T+65535,T=Math.floor(d/65536),yt=d-T*65536,d=_t+T+65535,T=Math.floor(d/65536),_t=d-T*65536,d=Be+T+65535,T=Math.floor(d/65536),Be=d-T*65536,d=Ie+T+65535,T=Math.floor(d/65536),Ie=d-T*65536,d=Le+T+65535,T=Math.floor(d/65536),Le=d-T*65536,d=Fe+T+65535,T=Math.floor(d/65536),Fe=d-T*65536,d=qe+T+65535,T=Math.floor(d/65536),qe=d-T*65536,d=Pe+T+65535,T=Math.floor(d/65536),Pe=d-T*65536,d=$e+T+65535,T=Math.floor(d/65536),$e=d-T*65536,d=Se+T+65535,T=Math.floor(d/65536),Se=d-T*65536,ae+=T-1+37*(T-1),T=1,d=ae+T+65535,T=Math.floor(d/65536),ae=d-T*65536,d=le+T+65535,T=Math.floor(d/65536),le=d-T*65536,d=xe+T+65535,T=Math.floor(d/65536),xe=d-T*65536,d=je+T+65535,T=Math.floor(d/65536),je=d-T*65536,d=We+T+65535,T=Math.floor(d/65536),We=d-T*65536,d=Ue+T+65535,T=Math.floor(d/65536),Ue=d-T*65536,d=yt+T+65535,T=Math.floor(d/65536),yt=d-T*65536,d=_t+T+65535,T=Math.floor(d/65536),_t=d-T*65536,d=Be+T+65535,T=Math.floor(d/65536),Be=d-T*65536,d=Ie+T+65535,T=Math.floor(d/65536),Ie=d-T*65536,d=Le+T+65535,T=Math.floor(d/65536),Le=d-T*65536,d=Fe+T+65535,T=Math.floor(d/65536),Fe=d-T*65536,d=qe+T+65535,T=Math.floor(d/65536),qe=d-T*65536,d=Pe+T+65535,T=Math.floor(d/65536),Pe=d-T*65536,d=$e+T+65535,T=Math.floor(d/65536),$e=d-T*65536,d=Se+T+65535,T=Math.floor(d/65536),Se=d-T*65536,ae+=T-1+37*(T-1),j[0]=ae,j[1]=le,j[2]=xe,j[3]=je,j[4]=We,j[5]=Ue,j[6]=yt,j[7]=_t,j[8]=Be,j[9]=Ie,j[10]=Le,j[11]=Fe,j[12]=qe,j[13]=Pe,j[14]=$e,j[15]=Se}function m(j,q){u(j,q,q)}function V(j,q){const F=o();let d;for(d=0;d<16;d++)F[d]=q[d];for(d=253;d>=0;d--)m(F,F),d!==2&&d!==4&&u(F,F,q);for(d=0;d<16;d++)j[d]=F[d]}function Y(j,q){const F=o();let d;for(d=0;d<16;d++)F[d]=q[d];for(d=250;d>=0;d--)m(F,F),d!==1&&u(F,F,q);for(d=0;d<16;d++)j[d]=F[d]}function se(j,q){const F=o(),d=o(),T=o(),ae=o(),le=o(),xe=o(),je=o(),We=o(),Ue=o();E(F,j[1],j[0]),E(Ue,q[1],q[0]),u(F,F,Ue),R(d,j[0],j[1]),R(Ue,q[0],q[1]),u(d,d,Ue),u(T,j[3],q[3]),u(T,T,p),u(ae,j[2],q[2]),R(ae,ae,ae),E(le,d,F),E(xe,ae,T),R(je,ae,T),R(We,d,F),u(j[0],le,xe),u(j[1],We,je),u(j[2],je,xe),u(j[3],le,We)}function ue(j,q,F){for(let d=0;d<4;d++)H(j[d],q[d],F)}function de(j,q){const F=o(),d=o(),T=o();V(T,q[2]),u(F,q[0],T),u(d,q[1],T),z(j,d),j[31]^=$(F)<<7}function b(j,q,F){O(j[0],h),O(j[1],l),O(j[2],l),O(j[3],h);for(let d=255;d>=0;--d){const T=F[d/8|0]>>(d&7)&1;ue(j,q,T),se(q,j),se(j,j),ue(j,q,T)}}function C(j,q){const F=[o(),o(),o(),o()];O(F[0],_),O(F[1],S),O(F[2],l),u(F[3],_,S),b(j,F,q)}function ee(j){if(j.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const q=(0,t.hash)(j);q[0]&=248,q[31]&=127,q[31]|=64;const F=new Uint8Array(32),d=[o(),o(),o(),o()];C(d,q),de(F,d);const T=new Uint8Array(64);return T.set(j),T.set(F,32),{publicKey:F,secretKey:T}}r.generateKeyPairFromSeed=ee;function X(j){const q=(0,e.randomBytes)(32,j),F=ee(q);return(0,s.wipe)(q),F}r.generateKeyPair=X;function W(j){if(j.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(j.subarray(32))}r.extractPublicKeyFromSecretKey=W;const G=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(j,q){let F,d,T,ae;for(d=63;d>=32;--d){for(F=0,T=d-32,ae=d-12;T<ae;++T)q[T]+=F-16*q[d]*G[T-(d-32)],F=Math.floor((q[T]+128)/256),q[T]-=F*256;q[T]+=F,q[d]=0}for(F=0,T=0;T<32;T++)q[T]+=F-(q[31]>>4)*G[T],F=q[T]>>8,q[T]&=255;for(T=0;T<32;T++)q[T]-=F*G[T];for(d=0;d<32;d++)q[d+1]+=q[d]>>8,j[d]=q[d]&255}function re(j){const q=new Float64Array(64);for(let F=0;F<64;F++)q[F]=j[F];for(let F=0;F<64;F++)j[F]=0;J(j,q)}function me(j,q){const F=new Float64Array(64),d=[o(),o(),o(),o()],T=(0,t.hash)(j.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const ae=new Uint8Array(64);ae.set(T.subarray(32),32);const le=new t.SHA512;le.update(ae.subarray(32)),le.update(q);const xe=le.digest();le.clean(),re(xe),C(d,xe),de(ae,d),le.reset(),le.update(ae.subarray(0,32)),le.update(j.subarray(32)),le.update(q);const je=le.digest();re(je);for(let We=0;We<32;We++)F[We]=xe[We];for(let We=0;We<32;We++)for(let Ue=0;Ue<32;Ue++)F[We+Ue]+=je[We]*T[Ue];return J(ae.subarray(32),F),ae}r.sign=me;function oe(j,q){const F=o(),d=o(),T=o(),ae=o(),le=o(),xe=o(),je=o();return O(j[2],l),P(j[1],q),m(T,j[1]),u(ae,T,y),E(T,T,j[2]),R(ae,j[2],ae),m(le,ae),m(xe,le),u(je,xe,le),u(F,je,T),u(F,F,ae),Y(F,F),u(F,F,T),u(F,F,ae),u(F,F,ae),u(j[0],F,ae),m(d,j[0]),u(d,d,ae),L(d,T)&&u(j[0],j[0],D),m(d,j[0]),u(d,d,ae),L(d,T)?-1:($(j[0])===q[31]>>7&&E(j[0],h,j[0]),u(j[3],j[0],j[1]),0)}function be(j,q,F){const d=new Uint8Array(32),T=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(F.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(oe(ae,j))return!1;const le=new t.SHA512;le.update(F.subarray(0,32)),le.update(j),le.update(q);const xe=le.digest();return re(xe),b(T,ae,xe),C(ae,F.subarray(32)),se(T,ae),de(d,T),!ie(F,d)}r.verify=be;function fe(j){let q=[o(),o(),o(),o()];if(oe(q,j))throw new Error("Ed25519: invalid public key");let F=o(),d=o(),T=q[1];R(F,l,T),E(d,l,T),V(d,d),u(F,F,d);let ae=new Uint8Array(32);return z(ae,F),ae}r.convertPublicKeyToX25519=fe;function ve(j){const q=(0,t.hash)(j.subarray(0,32));q[0]&=248,q[31]&=127,q[31]|=64;const F=new Uint8Array(q.subarray(0,32));return(0,s.wipe)(q),F}r.convertSecretKeyToX25519=ve}(qa);const x_="EdDSA",I_="JWT",sf=".",of="base64url",O_="utf8",P_="utf8",A_=":",C_="did",T_="key",af="base58btc",R_="z",N_="K36",L_=32;function Wa(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function cf(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Wa(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Ga(r,e){e||(e=r.reduce((o,c)=>o+c.length,0));const t=cf(e);let s=0;for(const o of r)t.set(o,s),s+=o.length;return Wa(t)}function F_(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<r.length;o++){var c=r.charAt(o),h=c.charCodeAt(0);if(t[h]!==255)throw new TypeError(c+" is ambiguous");t[h]=o}var l=r.length,y=r.charAt(0),p=Math.log(l)/Math.log(256),_=Math.log(256)/Math.log(l);function S(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var H=0,z=0,ie=0,L=I.length;ie!==L&&I[ie]===0;)ie++,H++;for(var $=(L-ie)*_+1>>>0,P=new Uint8Array($);ie!==L;){for(var R=I[ie],E=0,u=$-1;(R!==0||E<z)&&u!==-1;u--,E++)R+=256*P[u]>>>0,P[u]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");z=E,ie++}for(var m=$-z;m!==$&&P[m]===0;)m++;for(var V=y.repeat(H);m<$;++m)V+=r.charAt(P[m]);return V}function D(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var H=0;if(I[H]!==" "){for(var z=0,ie=0;I[H]===y;)z++,H++;for(var L=(I.length-H)*p+1>>>0,$=new Uint8Array(L);I[H];){var P=t[I.charCodeAt(H)];if(P===255)return;for(var R=0,E=L-1;(P!==0||R<ie)&&E!==-1;E--,R++)P+=l*$[E]>>>0,$[E]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ie=R,H++}if(I[H]!==" "){for(var u=L-ie;u!==L&&$[u]===0;)u++;for(var m=new Uint8Array(z+(L-u)),V=z;u!==L;)m[V++]=$[u++];return m}}}function O(I){var H=D(I);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:D,decode:O}}var $_=F_,U_=$_;const uf=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},M_=r=>new TextEncoder().encode(r),B_=r=>new TextDecoder().decode(r);class q_{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class H_{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hf(this,e)}}class j_{constructor(e){this.decoders=e}or(e){return hf(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hf=(r,e)=>new j_({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class z_{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new q_(e,t,s),this.decoder=new H_(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xs=({name:r,prefix:e,encode:t,decode:s})=>new z_(r,e,t,s),is=({prefix:r,name:e,alphabet:t})=>{const{encode:s,decode:o}=U_(t,e);return Xs({prefix:r,name:e,encode:s,decode:c=>uf(o(c))})},K_=(r,e,t,s)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let c=r.length;for(;r[c-1]==="=";)--c;const h=new Uint8Array(c*t/8|0);let l=0,y=0,p=0;for(let _=0;_<c;++_){const S=o[r[_]];if(S===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|S,l+=t,l>=8&&(l-=8,h[p++]=255&y>>l)}if(l>=t||255&y<<8-l)throw new SyntaxError("Unexpected end of data");return h},W_=(r,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",h=0,l=0;for(let y=0;y<r.length;++y)for(l=l<<8|r[y],h+=8;h>t;)h-=t,c+=e[o&l>>h];if(h&&(c+=e[o&l<<t-h]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:r,prefix:e,bitsPerChar:t,alphabet:s})=>Xs({prefix:e,name:r,encode(o){return W_(o,s,t)},decode(o){return K_(o,s,t,r)}}),G_=Xs({prefix:"\0",name:"identity",encode:r=>B_(r),decode:r=>M_(r)});var V_=Object.freeze({__proto__:null,identity:G_});const k_=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Y_=Object.freeze({__proto__:null,base2:k_});const J_=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var X_=Object.freeze({__proto__:null,base8:J_});const Q_=is({prefix:"9",name:"base10",alphabet:"0123456789"});var Z_=Object.freeze({__proto__:null,base10:Q_});const ev=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tv=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var rv=Object.freeze({__proto__:null,base16:ev,base16upper:tv});const nv=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iv=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sv=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ov=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),av=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cv=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),uv=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hv=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fv=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lv=Object.freeze({__proto__:null,base32:nv,base32upper:iv,base32pad:sv,base32padupper:ov,base32hex:av,base32hexupper:cv,base32hexpad:uv,base32hexpadupper:hv,base32z:fv});const dv=is({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pv=is({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var gv=Object.freeze({__proto__:null,base36:dv,base36upper:pv});const yv=is({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_v=is({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vv=Object.freeze({__proto__:null,base58btc:yv,base58flickr:_v});const wv=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mv=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),bv=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ev=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Dv=Object.freeze({__proto__:null,base64:wv,base64pad:mv,base64url:bv,base64urlpad:Ev});const ff=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Sv=ff.reduce((r,e,t)=>(r[t]=e,r),[]),xv=ff.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Iv(r){return r.reduce((e,t)=>(e+=Sv[t],e),"")}function Ov(r){const e=[];for(const t of r){const s=xv[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Pv=Xs({prefix:"\u{1F680}",name:"base256emoji",encode:Iv,decode:Ov});var Av=Object.freeze({__proto__:null,base256emoji:Pv}),Cv=df,lf=128,Tv=127,Rv=~Tv,Nv=Math.pow(2,31);function df(r,e,t){e=e||[],t=t||0;for(var s=t;r>=Nv;)e[t++]=r&255|lf,r/=128;for(;r&Rv;)e[t++]=r&255|lf,r>>>=7;return e[t]=r|0,df.bytes=t-s+1,e}var Lv=Va,Fv=128,pf=127;function Va(r,s){var t=0,s=s||0,o=0,c=s,h,l=r.length;do{if(c>=l)throw Va.bytes=0,new RangeError("Could not decode varint");h=r[c++],t+=o<28?(h&pf)<<o:(h&pf)*Math.pow(2,o),o+=7}while(h>=Fv);return Va.bytes=c-s,t}var $v=Math.pow(2,7),Uv=Math.pow(2,14),Mv=Math.pow(2,21),Bv=Math.pow(2,28),qv=Math.pow(2,35),Hv=Math.pow(2,42),jv=Math.pow(2,49),zv=Math.pow(2,56),Kv=Math.pow(2,63),Wv=function(r){return r<$v?1:r<Uv?2:r<Mv?3:r<Bv?4:r<qv?5:r<Hv?6:r<jv?7:r<zv?8:r<Kv?9:10},Gv={encode:Cv,decode:Lv,encodingLength:Wv},gf=Gv;const yf=(r,e,t=0)=>(gf.encode(r,e,t),e),_f=r=>gf.encodingLength(r),ka=(r,e)=>{const t=e.byteLength,s=_f(r),o=s+_f(t),c=new Uint8Array(o+t);return yf(r,c,0),yf(t,c,s),c.set(e,o),new Vv(r,t,e,c)};class Vv{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const vf=({name:r,code:e,encode:t})=>new kv(r,e,t);class kv{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ka(this.code,t):t.then(s=>ka(this.code,s))}else throw Error("Unknown type, must be binary type")}}const wf=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Yv=vf({name:"sha2-256",code:18,encode:wf("SHA-256")}),Jv=vf({name:"sha2-512",code:19,encode:wf("SHA-512")});var Xv=Object.freeze({__proto__:null,sha256:Yv,sha512:Jv});const mf=0,Qv="identity",bf=uf;var Zv=Object.freeze({__proto__:null,identity:{code:mf,name:Qv,encode:bf,digest:r=>ka(mf,bf(r))}});new TextEncoder,new TextDecoder;const Ef={...V_,...Y_,...X_,...Z_,...rv,...lv,...gv,...vv,...Dv,...Av};({...Xv,...Zv});function Df(r,e,t,s){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:s}}}const Sf=Df("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Ya=Df("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=cf(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),xf={utf8:Sf,"utf-8":Sf,hex:Ef.base16,latin1:Ya,ascii:Ya,binary:Ya,...Ef};function sr(r,e="utf8"){const t=xf[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function yr(r,e="utf8"){const t=xf[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Wa(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function Qs(r){return sr(yr(Wn(r),O_),of)}function If(r){const e=yr(N_,af),t=R_+sr(Ga([e,r]),af);return[C_,T_,t].join(A_)}function e1(r){return sr(r,of)}function t1(r){return yr([Qs(r.header),Qs(r.payload)].join(sf),P_)}function r1(r){return[Qs(r.header),Qs(r.payload),e1(r.signature)].join(sf)}function Of(r=wi.randomBytes(L_)){return qa.generateKeyPairFromSeed(r)}async function n1(r,e,t,s,o=_e.fromMiliseconds(Date.now())){const c={alg:x_,typ:I_},h=If(s.publicKey),l=o+t,y={iss:h,sub:r,aud:e,iat:o,exp:l},p=t1({header:c,payload:y}),_=qa.sign(s.secretKey,p);return r1({header:c,payload:y,signature:_})}var Ja={},Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});var er=Ne,Xa=xr,i1=20;function s1(r,e,t){for(var s=1634760805,o=857760878,c=2036477234,h=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],_=t[15]<<24|t[14]<<16|t[13]<<8|t[12],S=t[19]<<24|t[18]<<16|t[17]<<8|t[16],D=t[23]<<24|t[22]<<16|t[21]<<8|t[20],O=t[27]<<24|t[26]<<16|t[25]<<8|t[24],I=t[31]<<24|t[30]<<16|t[29]<<8|t[28],H=e[3]<<24|e[2]<<16|e[1]<<8|e[0],z=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ie=e[11]<<24|e[10]<<16|e[9]<<8|e[8],L=e[15]<<24|e[14]<<16|e[13]<<8|e[12],$=s,P=o,R=c,E=h,u=l,m=y,V=p,Y=_,se=S,ue=D,de=O,b=I,C=H,ee=z,X=ie,W=L,G=0;G<i1;G+=2)$=$+u|0,C^=$,C=C>>>32-16|C<<16,se=se+C|0,u^=se,u=u>>>32-12|u<<12,P=P+m|0,ee^=P,ee=ee>>>32-16|ee<<16,ue=ue+ee|0,m^=ue,m=m>>>32-12|m<<12,R=R+V|0,X^=R,X=X>>>32-16|X<<16,de=de+X|0,V^=de,V=V>>>32-12|V<<12,E=E+Y|0,W^=E,W=W>>>32-16|W<<16,b=b+W|0,Y^=b,Y=Y>>>32-12|Y<<12,R=R+V|0,X^=R,X=X>>>32-8|X<<8,de=de+X|0,V^=de,V=V>>>32-7|V<<7,E=E+Y|0,W^=E,W=W>>>32-8|W<<8,b=b+W|0,Y^=b,Y=Y>>>32-7|Y<<7,P=P+m|0,ee^=P,ee=ee>>>32-8|ee<<8,ue=ue+ee|0,m^=ue,m=m>>>32-7|m<<7,$=$+u|0,C^=$,C=C>>>32-8|C<<8,se=se+C|0,u^=se,u=u>>>32-7|u<<7,$=$+m|0,W^=$,W=W>>>32-16|W<<16,de=de+W|0,m^=de,m=m>>>32-12|m<<12,P=P+V|0,C^=P,C=C>>>32-16|C<<16,b=b+C|0,V^=b,V=V>>>32-12|V<<12,R=R+Y|0,ee^=R,ee=ee>>>32-16|ee<<16,se=se+ee|0,Y^=se,Y=Y>>>32-12|Y<<12,E=E+u|0,X^=E,X=X>>>32-16|X<<16,ue=ue+X|0,u^=ue,u=u>>>32-12|u<<12,R=R+Y|0,ee^=R,ee=ee>>>32-8|ee<<8,se=se+ee|0,Y^=se,Y=Y>>>32-7|Y<<7,E=E+u|0,X^=E,X=X>>>32-8|X<<8,ue=ue+X|0,u^=ue,u=u>>>32-7|u<<7,P=P+V|0,C^=P,C=C>>>32-8|C<<8,b=b+C|0,V^=b,V=V>>>32-7|V<<7,$=$+m|0,W^=$,W=W>>>32-8|W<<8,de=de+W|0,m^=de,m=m>>>32-7|m<<7;er.writeUint32LE($+s|0,r,0),er.writeUint32LE(P+o|0,r,4),er.writeUint32LE(R+c|0,r,8),er.writeUint32LE(E+h|0,r,12),er.writeUint32LE(u+l|0,r,16),er.writeUint32LE(m+y|0,r,20),er.writeUint32LE(V+p|0,r,24),er.writeUint32LE(Y+_|0,r,28),er.writeUint32LE(se+S|0,r,32),er.writeUint32LE(ue+D|0,r,36),er.writeUint32LE(de+O|0,r,40),er.writeUint32LE(b+I|0,r,44),er.writeUint32LE(C+H|0,r,48),er.writeUint32LE(ee+z|0,r,52),er.writeUint32LE(X+ie|0,r,56),er.writeUint32LE(W+L|0,r,60)}function Pf(r,e,t,s,o){if(o===void 0&&(o=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,h;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),h=c.length-e.length,c.set(e,h)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,h=o}for(var l=new Uint8Array(64),y=0;y<t.length;y+=64){s1(l,c,r);for(var p=y;p<y+64&&p<t.length;p++)s[p]=t[p]^l[p-y];a1(c,0,h)}return Xa.wipe(l),o===0&&Xa.wipe(c),s}Zs.streamXOR=Pf;function o1(r,e,t,s){return s===void 0&&(s=0),Xa.wipe(t),Pf(r,e,t,t,s)}Zs.stream=o1;function a1(r,e,t){for(var s=1;t--;)s=s+(r[e]&255)|0,r[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Af={},In={};Object.defineProperty(In,"__esModule",{value:!0});function c1(r,e,t){return~(r-1)&e|r-1&t}In.select=c1;function u1(r,e){return(r|0)-(e|0)-1>>>31&1}In.lessOrEqual=u1;function Cf(r,e){if(r.length!==e.length)return 0;for(var t=0,s=0;s<r.length;s++)t|=r[s]^e[s];return 1&t-1>>>8}In.compare=Cf;function h1(r,e){return r.length===0||e.length===0?!1:Cf(r,e)!==0}In.equal=h1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=In,t=xr;r.DIGEST_LENGTH=16;var s=function(){function h(l){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=l[0]|l[1]<<8;this._r[0]=y&8191;var p=l[2]|l[3]<<8;this._r[1]=(y>>>13|p<<3)&8191;var _=l[4]|l[5]<<8;this._r[2]=(p>>>10|_<<6)&7939;var S=l[6]|l[7]<<8;this._r[3]=(_>>>7|S<<9)&8191;var D=l[8]|l[9]<<8;this._r[4]=(S>>>4|D<<12)&255,this._r[5]=D>>>1&8190;var O=l[10]|l[11]<<8;this._r[6]=(D>>>14|O<<2)&8191;var I=l[12]|l[13]<<8;this._r[7]=(O>>>11|I<<5)&8065;var H=l[14]|l[15]<<8;this._r[8]=(I>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return h.prototype._blocks=function(l,y,p){for(var _=this._fin?0:2048,S=this._h[0],D=this._h[1],O=this._h[2],I=this._h[3],H=this._h[4],z=this._h[5],ie=this._h[6],L=this._h[7],$=this._h[8],P=this._h[9],R=this._r[0],E=this._r[1],u=this._r[2],m=this._r[3],V=this._r[4],Y=this._r[5],se=this._r[6],ue=this._r[7],de=this._r[8],b=this._r[9];p>=16;){var C=l[y+0]|l[y+1]<<8;S+=C&8191;var ee=l[y+2]|l[y+3]<<8;D+=(C>>>13|ee<<3)&8191;var X=l[y+4]|l[y+5]<<8;O+=(ee>>>10|X<<6)&8191;var W=l[y+6]|l[y+7]<<8;I+=(X>>>7|W<<9)&8191;var G=l[y+8]|l[y+9]<<8;H+=(W>>>4|G<<12)&8191,z+=G>>>1&8191;var J=l[y+10]|l[y+11]<<8;ie+=(G>>>14|J<<2)&8191;var re=l[y+12]|l[y+13]<<8;L+=(J>>>11|re<<5)&8191;var me=l[y+14]|l[y+15]<<8;$+=(re>>>8|me<<8)&8191,P+=me>>>5|_;var oe=0,be=oe;be+=S*R,be+=D*(5*b),be+=O*(5*de),be+=I*(5*ue),be+=H*(5*se),oe=be>>>13,be&=8191,be+=z*(5*Y),be+=ie*(5*V),be+=L*(5*m),be+=$*(5*u),be+=P*(5*E),oe+=be>>>13,be&=8191;var fe=oe;fe+=S*E,fe+=D*R,fe+=O*(5*b),fe+=I*(5*de),fe+=H*(5*ue),oe=fe>>>13,fe&=8191,fe+=z*(5*se),fe+=ie*(5*Y),fe+=L*(5*V),fe+=$*(5*m),fe+=P*(5*u),oe+=fe>>>13,fe&=8191;var ve=oe;ve+=S*u,ve+=D*E,ve+=O*R,ve+=I*(5*b),ve+=H*(5*de),oe=ve>>>13,ve&=8191,ve+=z*(5*ue),ve+=ie*(5*se),ve+=L*(5*Y),ve+=$*(5*V),ve+=P*(5*m),oe+=ve>>>13,ve&=8191;var j=oe;j+=S*m,j+=D*u,j+=O*E,j+=I*R,j+=H*(5*b),oe=j>>>13,j&=8191,j+=z*(5*de),j+=ie*(5*ue),j+=L*(5*se),j+=$*(5*Y),j+=P*(5*V),oe+=j>>>13,j&=8191;var q=oe;q+=S*V,q+=D*m,q+=O*u,q+=I*E,q+=H*R,oe=q>>>13,q&=8191,q+=z*(5*b),q+=ie*(5*de),q+=L*(5*ue),q+=$*(5*se),q+=P*(5*Y),oe+=q>>>13,q&=8191;var F=oe;F+=S*Y,F+=D*V,F+=O*m,F+=I*u,F+=H*E,oe=F>>>13,F&=8191,F+=z*R,F+=ie*(5*b),F+=L*(5*de),F+=$*(5*ue),F+=P*(5*se),oe+=F>>>13,F&=8191;var d=oe;d+=S*se,d+=D*Y,d+=O*V,d+=I*m,d+=H*u,oe=d>>>13,d&=8191,d+=z*E,d+=ie*R,d+=L*(5*b),d+=$*(5*de),d+=P*(5*ue),oe+=d>>>13,d&=8191;var T=oe;T+=S*ue,T+=D*se,T+=O*Y,T+=I*V,T+=H*m,oe=T>>>13,T&=8191,T+=z*u,T+=ie*E,T+=L*R,T+=$*(5*b),T+=P*(5*de),oe+=T>>>13,T&=8191;var ae=oe;ae+=S*de,ae+=D*ue,ae+=O*se,ae+=I*Y,ae+=H*V,oe=ae>>>13,ae&=8191,ae+=z*m,ae+=ie*u,ae+=L*E,ae+=$*R,ae+=P*(5*b),oe+=ae>>>13,ae&=8191;var le=oe;le+=S*b,le+=D*de,le+=O*ue,le+=I*se,le+=H*Y,oe=le>>>13,le&=8191,le+=z*V,le+=ie*m,le+=L*u,le+=$*E,le+=P*R,oe+=le>>>13,le&=8191,oe=(oe<<2)+oe|0,oe=oe+be|0,be=oe&8191,oe=oe>>>13,fe+=oe,S=be,D=fe,O=ve,I=j,H=q,z=F,ie=d,L=T,$=ae,P=le,y+=16,p-=16}this._h[0]=S,this._h[1]=D,this._h[2]=O,this._h[3]=I,this._h[4]=H,this._h[5]=z,this._h[6]=ie,this._h[7]=L,this._h[8]=$,this._h[9]=P},h.prototype.finish=function(l,y){y===void 0&&(y=0);var p=new Uint16Array(10),_,S,D,O;if(this._leftover){for(O=this._leftover,this._buffer[O++]=1;O<16;O++)this._buffer[O]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,O=2;O<10;O++)this._h[O]+=_,_=this._h[O]>>>13,this._h[O]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,p[0]=this._h[0]+5,_=p[0]>>>13,p[0]&=8191,O=1;O<10;O++)p[O]=this._h[O]+_,_=p[O]>>>13,p[O]&=8191;for(p[9]-=8192,S=(_^1)-1,O=0;O<10;O++)p[O]&=S;for(S=~S,O=0;O<10;O++)this._h[O]=this._h[O]&S|p[O];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,D=this._h[0]+this._pad[0],this._h[0]=D&65535,O=1;O<8;O++)D=(this._h[O]+this._pad[O]|0)+(D>>>16)|0,this._h[O]=D&65535;return l[y+0]=this._h[0]>>>0,l[y+1]=this._h[0]>>>8,l[y+2]=this._h[1]>>>0,l[y+3]=this._h[1]>>>8,l[y+4]=this._h[2]>>>0,l[y+5]=this._h[2]>>>8,l[y+6]=this._h[3]>>>0,l[y+7]=this._h[3]>>>8,l[y+8]=this._h[4]>>>0,l[y+9]=this._h[4]>>>8,l[y+10]=this._h[5]>>>0,l[y+11]=this._h[5]>>>8,l[y+12]=this._h[6]>>>0,l[y+13]=this._h[6]>>>8,l[y+14]=this._h[7]>>>0,l[y+15]=this._h[7]>>>8,this._finished=!0,this},h.prototype.update=function(l){var y=0,p=l.length,_;if(this._leftover){_=16-this._leftover,_>p&&(_=p);for(var S=0;S<_;S++)this._buffer[this._leftover+S]=l[y+S];if(p-=_,y+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(_=p-p%16,this._blocks(l,y,_),y+=_,p-=_),p){for(var S=0;S<p;S++)this._buffer[this._leftover+S]=l[y+S];this._leftover+=p}return this},h.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},h.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},h}();r.Poly1305=s;function o(h,l){var y=new s(h);y.update(l);var p=y.digest();return y.clean(),p}r.oneTimeAuth=o;function c(h,l){return h.length!==r.DIGEST_LENGTH||l.length!==r.DIGEST_LENGTH?!1:e.equal(h,l)}r.equal=c}(Af),function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Zs,t=Af,s=xr,o=Ne,c=In;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var h=new Uint8Array(16),l=function(){function y(p){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,p.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return y.prototype.seal=function(p,_,S,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var O=new Uint8Array(16);O.set(p,O.length-p.length);var I=new Uint8Array(32);e.stream(this._key,O,I,4);var H=_.length+this.tagLength,z;if(D){if(D.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");z=D}else z=new Uint8Array(H);return e.streamXOR(this._key,O,_,z,4),this._authenticate(z.subarray(z.length-this.tagLength,z.length),I,z.subarray(0,z.length-this.tagLength),S),s.wipe(O),z},y.prototype.open=function(p,_,S,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var O=new Uint8Array(16);O.set(p,O.length-p.length);var I=new Uint8Array(32);e.stream(this._key,O,I,4);var H=new Uint8Array(this.tagLength);if(this._authenticate(H,I,_.subarray(0,_.length-this.tagLength),S),!c.equal(H,_.subarray(_.length-this.tagLength,_.length)))return null;var z=_.length-this.tagLength,ie;if(D){if(D.length!==z)throw new Error("ChaCha20Poly1305: incorrect destination length");ie=D}else ie=new Uint8Array(z);return e.streamXOR(this._key,O,_.subarray(0,_.length-this.tagLength),ie,4),s.wipe(O),ie},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(p,_,S,D){var O=new t.Poly1305(_);D&&(O.update(D),D.length%16>0&&O.update(h.subarray(D.length%16))),O.update(S),S.length%16>0&&O.update(h.subarray(S.length%16));var I=new Uint8Array(8);D&&o.writeUint64LE(D.length,I),O.update(I),o.writeUint64LE(S.length,I),O.update(I);for(var H=O.digest(),z=0;z<H.length;z++)p[z]=H[z];O.clean(),s.wipe(H),s.wipe(I)},y}();r.ChaCha20Poly1305=l}(Ja);var Tf={},ss={},Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});function f1(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}Qa.isSerializableHash=f1,Object.defineProperty(ss,"__esModule",{value:!0});var Qr=Qa,l1=In,d1=xr,Rf=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Qr.isSerializableHash(this._inner)&&Qr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),d1.wipe(s)}return r.prototype.reset=function(){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){Qr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Qr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();ss.HMAC=Rf;function p1(r,e,t){var s=new Rf(r,e);s.update(t);var o=s.digest();return s.clean(),o}ss.hmac=p1,ss.equal=l1.equal,Object.defineProperty(Tf,"__esModule",{value:!0});var Nf=ss,Lf=xr,g1=function(){function r(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=Nf.hmac(this._hash,s,t);this._hmac=new Nf.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),Lf.wipe(this._buffer),Lf.wipe(this._counter),this._bufpos=0},r}(),y1=Tf.HKDF=g1,eo={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Ne,t=xr;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var s=function(){function l(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},l.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=y[_++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(_=c(this._temp,this._state,y,_,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[_++],p--;return this},l.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,_=this._bufferLength,S=p/536870912|0,D=p<<3,O=p%64<56?64:128;this._buffer[_]=128;for(var I=_+1;I<O-8;I++)this._buffer[I]=0;e.writeUint32BE(S,this._buffer,O-8),e.writeUint32BE(D,this._buffer,O-4),c(this._temp,this._state,this._buffer,0,O),this._finished=!0}for(var I=0;I<this.digestLength/4;I++)e.writeUint32BE(this._state[I],y,I*4);return this},l.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(y){t.wipe(y.state),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},l}();r.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(l,y,p,_,S){for(;S>=64;){for(var D=y[0],O=y[1],I=y[2],H=y[3],z=y[4],ie=y[5],L=y[6],$=y[7],P=0;P<16;P++){var R=_+P*4;l[P]=e.readUint32BE(p,R)}for(var P=16;P<64;P++){var E=l[P-2],u=(E>>>17|E<<32-17)^(E>>>19|E<<32-19)^E>>>10;E=l[P-15];var m=(E>>>7|E<<32-7)^(E>>>18|E<<32-18)^E>>>3;l[P]=(u+l[P-7]|0)+(m+l[P-16]|0)}for(var P=0;P<64;P++){var u=(((z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7))+(z&ie^~z&L)|0)+($+(o[P]+l[P]|0)|0)|0,m=((D>>>2|D<<32-2)^(D>>>13|D<<32-13)^(D>>>22|D<<32-22))+(D&O^D&I^O&I)|0;$=L,L=ie,ie=z,z=H+u|0,H=I,I=O,O=D,D=u+m|0}y[0]+=D,y[1]+=O,y[2]+=I,y[3]+=H,y[4]+=z,y[5]+=ie,y[6]+=L,y[7]+=$,_+=64,S-=64}return _}function h(l){var y=new s;y.update(l);var p=y.digest();return y.clean(),p}r.hash=h})(eo);var Za={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=wi,t=xr;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function s(P){const R=new Float64Array(16);if(P)for(let E=0;E<P.length;E++)R[E]=P[E];return R}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function h(P){let R=1;for(let E=0;E<16;E++){let u=P[E]+R+65535;R=Math.floor(u/65536),P[E]=u-R*65536}P[0]+=R-1+37*(R-1)}function l(P,R,E){const u=~(E-1);for(let m=0;m<16;m++){const V=u&(P[m]^R[m]);P[m]^=V,R[m]^=V}}function y(P,R){const E=s(),u=s();for(let m=0;m<16;m++)u[m]=R[m];h(u),h(u),h(u);for(let m=0;m<2;m++){E[0]=u[0]-65517;for(let Y=1;Y<15;Y++)E[Y]=u[Y]-65535-(E[Y-1]>>16&1),E[Y-1]&=65535;E[15]=u[15]-32767-(E[14]>>16&1);const V=E[15]>>16&1;E[14]&=65535,l(u,E,1-V)}for(let m=0;m<16;m++)P[2*m]=u[m]&255,P[2*m+1]=u[m]>>8}function p(P,R){for(let E=0;E<16;E++)P[E]=R[2*E]+(R[2*E+1]<<8);P[15]&=32767}function _(P,R,E){for(let u=0;u<16;u++)P[u]=R[u]+E[u]}function S(P,R,E){for(let u=0;u<16;u++)P[u]=R[u]-E[u]}function D(P,R,E){let u,m,V=0,Y=0,se=0,ue=0,de=0,b=0,C=0,ee=0,X=0,W=0,G=0,J=0,re=0,me=0,oe=0,be=0,fe=0,ve=0,j=0,q=0,F=0,d=0,T=0,ae=0,le=0,xe=0,je=0,We=0,Ue=0,yt=0,_t=0,Be=E[0],Ie=E[1],Le=E[2],Fe=E[3],qe=E[4],Pe=E[5],$e=E[6],Se=E[7],Ae=E[8],ze=E[9],Oe=E[10],Ge=E[11],Ye=E[12],et=E[13],tt=E[14],Xe=E[15];u=R[0],V+=u*Be,Y+=u*Ie,se+=u*Le,ue+=u*Fe,de+=u*qe,b+=u*Pe,C+=u*$e,ee+=u*Se,X+=u*Ae,W+=u*ze,G+=u*Oe,J+=u*Ge,re+=u*Ye,me+=u*et,oe+=u*tt,be+=u*Xe,u=R[1],Y+=u*Be,se+=u*Ie,ue+=u*Le,de+=u*Fe,b+=u*qe,C+=u*Pe,ee+=u*$e,X+=u*Se,W+=u*Ae,G+=u*ze,J+=u*Oe,re+=u*Ge,me+=u*Ye,oe+=u*et,be+=u*tt,fe+=u*Xe,u=R[2],se+=u*Be,ue+=u*Ie,de+=u*Le,b+=u*Fe,C+=u*qe,ee+=u*Pe,X+=u*$e,W+=u*Se,G+=u*Ae,J+=u*ze,re+=u*Oe,me+=u*Ge,oe+=u*Ye,be+=u*et,fe+=u*tt,ve+=u*Xe,u=R[3],ue+=u*Be,de+=u*Ie,b+=u*Le,C+=u*Fe,ee+=u*qe,X+=u*Pe,W+=u*$e,G+=u*Se,J+=u*Ae,re+=u*ze,me+=u*Oe,oe+=u*Ge,be+=u*Ye,fe+=u*et,ve+=u*tt,j+=u*Xe,u=R[4],de+=u*Be,b+=u*Ie,C+=u*Le,ee+=u*Fe,X+=u*qe,W+=u*Pe,G+=u*$e,J+=u*Se,re+=u*Ae,me+=u*ze,oe+=u*Oe,be+=u*Ge,fe+=u*Ye,ve+=u*et,j+=u*tt,q+=u*Xe,u=R[5],b+=u*Be,C+=u*Ie,ee+=u*Le,X+=u*Fe,W+=u*qe,G+=u*Pe,J+=u*$e,re+=u*Se,me+=u*Ae,oe+=u*ze,be+=u*Oe,fe+=u*Ge,ve+=u*Ye,j+=u*et,q+=u*tt,F+=u*Xe,u=R[6],C+=u*Be,ee+=u*Ie,X+=u*Le,W+=u*Fe,G+=u*qe,J+=u*Pe,re+=u*$e,me+=u*Se,oe+=u*Ae,be+=u*ze,fe+=u*Oe,ve+=u*Ge,j+=u*Ye,q+=u*et,F+=u*tt,d+=u*Xe,u=R[7],ee+=u*Be,X+=u*Ie,W+=u*Le,G+=u*Fe,J+=u*qe,re+=u*Pe,me+=u*$e,oe+=u*Se,be+=u*Ae,fe+=u*ze,ve+=u*Oe,j+=u*Ge,q+=u*Ye,F+=u*et,d+=u*tt,T+=u*Xe,u=R[8],X+=u*Be,W+=u*Ie,G+=u*Le,J+=u*Fe,re+=u*qe,me+=u*Pe,oe+=u*$e,be+=u*Se,fe+=u*Ae,ve+=u*ze,j+=u*Oe,q+=u*Ge,F+=u*Ye,d+=u*et,T+=u*tt,ae+=u*Xe,u=R[9],W+=u*Be,G+=u*Ie,J+=u*Le,re+=u*Fe,me+=u*qe,oe+=u*Pe,be+=u*$e,fe+=u*Se,ve+=u*Ae,j+=u*ze,q+=u*Oe,F+=u*Ge,d+=u*Ye,T+=u*et,ae+=u*tt,le+=u*Xe,u=R[10],G+=u*Be,J+=u*Ie,re+=u*Le,me+=u*Fe,oe+=u*qe,be+=u*Pe,fe+=u*$e,ve+=u*Se,j+=u*Ae,q+=u*ze,F+=u*Oe,d+=u*Ge,T+=u*Ye,ae+=u*et,le+=u*tt,xe+=u*Xe,u=R[11],J+=u*Be,re+=u*Ie,me+=u*Le,oe+=u*Fe,be+=u*qe,fe+=u*Pe,ve+=u*$e,j+=u*Se,q+=u*Ae,F+=u*ze,d+=u*Oe,T+=u*Ge,ae+=u*Ye,le+=u*et,xe+=u*tt,je+=u*Xe,u=R[12],re+=u*Be,me+=u*Ie,oe+=u*Le,be+=u*Fe,fe+=u*qe,ve+=u*Pe,j+=u*$e,q+=u*Se,F+=u*Ae,d+=u*ze,T+=u*Oe,ae+=u*Ge,le+=u*Ye,xe+=u*et,je+=u*tt,We+=u*Xe,u=R[13],me+=u*Be,oe+=u*Ie,be+=u*Le,fe+=u*Fe,ve+=u*qe,j+=u*Pe,q+=u*$e,F+=u*Se,d+=u*Ae,T+=u*ze,ae+=u*Oe,le+=u*Ge,xe+=u*Ye,je+=u*et,We+=u*tt,Ue+=u*Xe,u=R[14],oe+=u*Be,be+=u*Ie,fe+=u*Le,ve+=u*Fe,j+=u*qe,q+=u*Pe,F+=u*$e,d+=u*Se,T+=u*Ae,ae+=u*ze,le+=u*Oe,xe+=u*Ge,je+=u*Ye,We+=u*et,Ue+=u*tt,yt+=u*Xe,u=R[15],be+=u*Be,fe+=u*Ie,ve+=u*Le,j+=u*Fe,q+=u*qe,F+=u*Pe,d+=u*$e,T+=u*Se,ae+=u*Ae,le+=u*ze,xe+=u*Oe,je+=u*Ge,We+=u*Ye,Ue+=u*et,yt+=u*tt,_t+=u*Xe,V+=38*fe,Y+=38*ve,se+=38*j,ue+=38*q,de+=38*F,b+=38*d,C+=38*T,ee+=38*ae,X+=38*le,W+=38*xe,G+=38*je,J+=38*We,re+=38*Ue,me+=38*yt,oe+=38*_t,m=1,u=V+m+65535,m=Math.floor(u/65536),V=u-m*65536,u=Y+m+65535,m=Math.floor(u/65536),Y=u-m*65536,u=se+m+65535,m=Math.floor(u/65536),se=u-m*65536,u=ue+m+65535,m=Math.floor(u/65536),ue=u-m*65536,u=de+m+65535,m=Math.floor(u/65536),de=u-m*65536,u=b+m+65535,m=Math.floor(u/65536),b=u-m*65536,u=C+m+65535,m=Math.floor(u/65536),C=u-m*65536,u=ee+m+65535,m=Math.floor(u/65536),ee=u-m*65536,u=X+m+65535,m=Math.floor(u/65536),X=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=G+m+65535,m=Math.floor(u/65536),G=u-m*65536,u=J+m+65535,m=Math.floor(u/65536),J=u-m*65536,u=re+m+65535,m=Math.floor(u/65536),re=u-m*65536,u=me+m+65535,m=Math.floor(u/65536),me=u-m*65536,u=oe+m+65535,m=Math.floor(u/65536),oe=u-m*65536,u=be+m+65535,m=Math.floor(u/65536),be=u-m*65536,V+=m-1+37*(m-1),m=1,u=V+m+65535,m=Math.floor(u/65536),V=u-m*65536,u=Y+m+65535,m=Math.floor(u/65536),Y=u-m*65536,u=se+m+65535,m=Math.floor(u/65536),se=u-m*65536,u=ue+m+65535,m=Math.floor(u/65536),ue=u-m*65536,u=de+m+65535,m=Math.floor(u/65536),de=u-m*65536,u=b+m+65535,m=Math.floor(u/65536),b=u-m*65536,u=C+m+65535,m=Math.floor(u/65536),C=u-m*65536,u=ee+m+65535,m=Math.floor(u/65536),ee=u-m*65536,u=X+m+65535,m=Math.floor(u/65536),X=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=G+m+65535,m=Math.floor(u/65536),G=u-m*65536,u=J+m+65535,m=Math.floor(u/65536),J=u-m*65536,u=re+m+65535,m=Math.floor(u/65536),re=u-m*65536,u=me+m+65535,m=Math.floor(u/65536),me=u-m*65536,u=oe+m+65535,m=Math.floor(u/65536),oe=u-m*65536,u=be+m+65535,m=Math.floor(u/65536),be=u-m*65536,V+=m-1+37*(m-1),P[0]=V,P[1]=Y,P[2]=se,P[3]=ue,P[4]=de,P[5]=b,P[6]=C,P[7]=ee,P[8]=X,P[9]=W,P[10]=G,P[11]=J,P[12]=re,P[13]=me,P[14]=oe,P[15]=be}function O(P,R){D(P,R,R)}function I(P,R){const E=s();for(let u=0;u<16;u++)E[u]=R[u];for(let u=253;u>=0;u--)O(E,E),u!==2&&u!==4&&D(E,E,R);for(let u=0;u<16;u++)P[u]=E[u]}function H(P,R){const E=new Uint8Array(32),u=new Float64Array(80),m=s(),V=s(),Y=s(),se=s(),ue=s(),de=s();for(let X=0;X<31;X++)E[X]=P[X];E[31]=P[31]&127|64,E[0]&=248,p(u,R);for(let X=0;X<16;X++)V[X]=u[X];m[0]=se[0]=1;for(let X=254;X>=0;--X){const W=E[X>>>3]>>>(X&7)&1;l(m,V,W),l(Y,se,W),_(ue,m,Y),S(m,m,Y),_(Y,V,se),S(V,V,se),O(se,ue),O(de,m),D(m,Y,m),D(Y,V,ue),_(ue,m,Y),S(m,m,Y),O(V,m),S(Y,se,de),D(m,Y,c),_(m,m,se),D(Y,Y,m),D(m,se,de),D(se,V,u),O(V,ue),l(m,V,W),l(Y,se,W)}for(let X=0;X<16;X++)u[X+16]=m[X],u[X+32]=Y[X],u[X+48]=V[X],u[X+64]=se[X];const b=u.subarray(32),C=u.subarray(16);I(b,b),D(C,C,b);const ee=new Uint8Array(32);return y(ee,C),ee}r.scalarMult=H;function z(P){return H(P,o)}r.scalarMultBase=z;function ie(P){if(P.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const R=new Uint8Array(P);return{publicKey:z(R),secretKey:R}}r.generateKeyPairFromSeed=ie;function L(P){const R=(0,e.randomBytes)(32,P),E=ie(R);return(0,t.wipe)(R),E}r.generateKeyPair=L;function $(P,R,E=!1){if(P.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(R.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=H(P,R);if(E){let m=0;for(let V=0;V<u.length;V++)m|=u[V];if(m===0)throw new Error("X25519: invalid shared key")}return u}r.sharedKey=$})(Za);var Ff=function(r,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return r.concat(c||Array.prototype.slice.call(e))},_1=function(){function r(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return r}(),v1=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),w1=function(){function r(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return r}(),m1=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),b1=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),E1=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,D1=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,$f=3,S1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",E1]],Uf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function x1(r){return r?Mf(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new b1:typeof navigator<"u"?Mf(navigator.userAgent):P1()}function I1(r){return r!==""&&S1.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(r);return!!c&&[s,c]},!1)}function Mf(r){var e=I1(r);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new m1;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<$f&&(o=Ff(Ff([],o,!0),A1($f-o.length),!0)):o=[];var c=o.join("."),h=O1(r),l=D1.exec(r);return l&&l[1]?new w1(t,c,h,l[1]):new _1(t,c,h)}function O1(r){for(var e=0,t=Uf.length;e<t;e++){var s=Uf[e],o=s[0],c=s[1],h=c.exec(r);if(h)return o}return null}function P1(){var r=typeof process<"u"&&process.version;return r?new v1(process.version.slice(1)):null}function A1(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=Bf=ft.getLocation=ft.getLocationOrThrow=tc=ft.getNavigator=ft.getNavigatorOrThrow=ec=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function Xn(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}ft.getFromWindow=Xn;function mi(r){const e=Xn(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}ft.getFromWindowOrThrow=mi;function C1(){return mi("document")}ft.getDocumentOrThrow=C1;function T1(){return Xn("document")}var ec=ft.getDocument=T1;function R1(){return mi("navigator")}ft.getNavigatorOrThrow=R1;function N1(){return Xn("navigator")}var tc=ft.getNavigator=N1;function L1(){return mi("location")}ft.getLocationOrThrow=L1;function F1(){return Xn("location")}var Bf=ft.getLocation=F1;function $1(){return mi("crypto")}ft.getCryptoOrThrow=$1;function U1(){return Xn("crypto")}ft.getCrypto=U1;function M1(){return mi("localStorage")}ft.getLocalStorageOrThrow=M1;function B1(){return Xn("localStorage")}ft.getLocalStorage=B1;var rc={};Object.defineProperty(rc,"__esModule",{value:!0});var qf=rc.getWindowMetadata=void 0;const Hf=ft;function q1(){let r,e;try{r=Hf.getDocumentOrThrow(),e=Hf.getLocationOrThrow()}catch{return null}function t(){const S=r.getElementsByTagName("link"),D=[];for(let O=0;O<S.length;O++){const I=S[O],H=I.getAttribute("rel");if(H&&H.toLowerCase().indexOf("icon")>-1){const z=I.getAttribute("href");if(z)if(z.toLowerCase().indexOf("https:")===-1&&z.toLowerCase().indexOf("http:")===-1&&z.indexOf("//")!==0){let ie=e.protocol+"//"+e.host;if(z.indexOf("/")===0)ie+=z;else{const L=e.pathname.split("/");L.pop();const $=L.join("/");ie+=$+"/"+z}D.push(ie)}else if(z.indexOf("//")===0){const ie=e.protocol+z;D.push(ie)}else D.push(z)}}return D}function s(...S){const D=r.getElementsByTagName("meta");for(let O=0;O<D.length;O++){const I=D[O],H=["itemprop","property","name"].map(z=>I.getAttribute(z)).filter(z=>z?S.includes(z):!1);if(H.length&&H){const z=I.getAttribute("content");if(z)return z}}return""}function o(){let S=s("name","og:site_name","og:title","twitter:title");return S||(S=r.title),S}function c(){return s("description","og:description","twitter:description","keywords")}const h=o(),l=c(),y=e.origin,p=t();return{description:l,url:y,icons:p,name:h}}qf=rc.getWindowMetadata=q1;var os={},H1=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),jf="%[a-f0-9]{2}",zf=new RegExp("("+jf+")|([^%]+?)","gi"),Kf=new RegExp("("+jf+")+","gi");function nc(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),s=r.slice(e);return Array.prototype.concat.call([],nc(t),nc(s))}function j1(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(zf)||[],t=1;t<e.length;t++)r=nc(e,t).join(""),e=r.match(zf)||[];return r}}function z1(r){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=Kf.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=j1(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Kf.exec(r)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),c=0;c<o.length;c++){var h=o[c];r=r.replace(new RegExp(h,"g"),e[h])}return r}var K1=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return z1(r)}},W1=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]},G1=function(r,e){for(var t={},s=Object.keys(r),o=Array.isArray(e),c=0;c<s.length;c++){var h=s[c],l=r[h];(o?e.indexOf(h)!==-1:e(h,l,r))&&(t[h]=l)}return t};(function(r){const e=H1,t=K1,s=W1,o=G1,c=L=>L==null,h=Symbol("encodeFragmentIdentifier");function l(L){switch(L.arrayFormat){case"index":return $=>(P,R)=>{const E=P.length;return R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?P:R===null?[...P,[_($,L),"[",E,"]"].join("")]:[...P,[_($,L),"[",_(E,L),"]=",_(R,L)].join("")]};case"bracket":return $=>(P,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?P:R===null?[...P,[_($,L),"[]"].join("")]:[...P,[_($,L),"[]=",_(R,L)].join("")];case"colon-list-separator":return $=>(P,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?P:R===null?[...P,[_($,L),":list="].join("")]:[...P,[_($,L),":list=",_(R,L)].join("")];case"comma":case"separator":case"bracket-separator":{const $=L.arrayFormat==="bracket-separator"?"[]=":"=";return P=>(R,E)=>E===void 0||L.skipNull&&E===null||L.skipEmptyString&&E===""?R:(E=E===null?"":E,R.length===0?[[_(P,L),$,_(E,L)].join("")]:[[R,_(E,L)].join(L.arrayFormatSeparator)])}default:return $=>(P,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?P:R===null?[...P,_($,L)]:[...P,[_($,L),"=",_(R,L)].join("")]}}function y(L){let $;switch(L.arrayFormat){case"index":return(P,R,E)=>{if($=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!$){E[P]=R;return}E[P]===void 0&&(E[P]={}),E[P][$[1]]=R};case"bracket":return(P,R,E)=>{if($=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!$){E[P]=R;return}if(E[P]===void 0){E[P]=[R];return}E[P]=[].concat(E[P],R)};case"colon-list-separator":return(P,R,E)=>{if($=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!$){E[P]=R;return}if(E[P]===void 0){E[P]=[R];return}E[P]=[].concat(E[P],R)};case"comma":case"separator":return(P,R,E)=>{const u=typeof R=="string"&&R.includes(L.arrayFormatSeparator),m=typeof R=="string"&&!u&&S(R,L).includes(L.arrayFormatSeparator);R=m?S(R,L):R;const V=u||m?R.split(L.arrayFormatSeparator).map(Y=>S(Y,L)):R===null?R:S(R,L);E[P]=V};case"bracket-separator":return(P,R,E)=>{const u=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!u){E[P]=R&&S(R,L);return}const m=R===null?[]:R.split(L.arrayFormatSeparator).map(V=>S(V,L));if(E[P]===void 0){E[P]=m;return}E[P]=[].concat(E[P],m)};default:return(P,R,E)=>{if(E[P]===void 0){E[P]=R;return}E[P]=[].concat(E[P],R)}}}function p(L){if(typeof L!="string"||L.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(L,$){return $.encode?$.strict?e(L):encodeURIComponent(L):L}function S(L,$){return $.decode?t(L):L}function D(L){return Array.isArray(L)?L.sort():typeof L=="object"?D(Object.keys(L)).sort(($,P)=>Number($)-Number(P)).map($=>L[$]):L}function O(L){const $=L.indexOf("#");return $!==-1&&(L=L.slice(0,$)),L}function I(L){let $="";const P=L.indexOf("#");return P!==-1&&($=L.slice(P)),$}function H(L){L=O(L);const $=L.indexOf("?");return $===-1?"":L.slice($+1)}function z(L,$){return $.parseNumbers&&!Number.isNaN(Number(L))&&typeof L=="string"&&L.trim()!==""?L=Number(L):$.parseBooleans&&L!==null&&(L.toLowerCase()==="true"||L.toLowerCase()==="false")&&(L=L.toLowerCase()==="true"),L}function ie(L,$){$=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},$),p($.arrayFormatSeparator);const P=y($),R=Object.create(null);if(typeof L!="string"||(L=L.trim().replace(/^[?#&]/,""),!L))return R;for(const E of L.split("&")){if(E==="")continue;let[u,m]=s($.decode?E.replace(/\+/g," "):E,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes($.arrayFormat)?m:S(m,$),P(S(u,$),m,R)}for(const E of Object.keys(R)){const u=R[E];if(typeof u=="object"&&u!==null)for(const m of Object.keys(u))u[m]=z(u[m],$);else R[E]=z(u,$)}return $.sort===!1?R:($.sort===!0?Object.keys(R).sort():Object.keys(R).sort($.sort)).reduce((E,u)=>{const m=R[u];return m&&typeof m=="object"&&!Array.isArray(m)?E[u]=D(m):E[u]=m,E},Object.create(null))}r.extract=H,r.parse=ie,r.stringify=(L,$)=>{if(!L)return"";$=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},$),p($.arrayFormatSeparator);const P=m=>$.skipNull&&c(L[m])||$.skipEmptyString&&L[m]==="",R=l($),E={};for(const m of Object.keys(L))P(m)||(E[m]=L[m]);const u=Object.keys(E);return $.sort!==!1&&u.sort($.sort),u.map(m=>{const V=L[m];return V===void 0?"":V===null?_(m,$):Array.isArray(V)?V.length===0&&$.arrayFormat==="bracket-separator"?_(m,$)+"[]":V.reduce(R(m),[]).join("&"):_(m,$)+"="+_(V,$)}).filter(m=>m.length>0).join("&")},r.parseUrl=(L,$)=>{$=Object.assign({decode:!0},$);const[P,R]=s(L,"#");return Object.assign({url:P.split("?")[0]||"",query:ie(H(L),$)},$&&$.parseFragmentIdentifier&&R?{fragmentIdentifier:S(R,$)}:{})},r.stringifyUrl=(L,$)=>{$=Object.assign({encode:!0,strict:!0,[h]:!0},$);const P=O(L.url).split("?")[0]||"",R=r.extract(L.url),E=r.parse(R,{sort:!1}),u=Object.assign(E,L.query);let m=r.stringify(u,$);m&&(m=`?${m}`);let V=I(L.url);return L.fragmentIdentifier&&(V=`#${$[h]?_(L.fragmentIdentifier,$):L.fragmentIdentifier}`),`${P}${m}${V}`},r.pick=(L,$,P)=>{P=Object.assign({parseFragmentIdentifier:!0,[h]:!1},P);const{url:R,query:E,fragmentIdentifier:u}=r.parseUrl(L,P);return r.stringifyUrl({url:R,query:o(E,$),fragmentIdentifier:u},P)},r.exclude=(L,$,P)=>{const R=Array.isArray($)?E=>!$.includes(E):(E,u)=>!$(E,u);return r.pick(L,R,P)}})(os);const V1={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},k1=":";function Y1(r){const[e,t]=r.split(k1);return{namespace:e,reference:t}}function Wf(r,e){return r.includes(":")?[r]:e.chains||[]}const Gf="base10",or="base16",ic="base64pad",sc="utf8",Vf=0,Qn=1,J1=0,kf=1,oc=12,ac=32;function X1(){const r=Za.generateKeyPair();return{privateKey:sr(r.secretKey,or),publicKey:sr(r.publicKey,or)}}function cc(){const r=wi.randomBytes(ac);return sr(r,or)}function Q1(r,e){const t=Za.sharedKey(yr(r,or),yr(e,or),!0),s=new y1(eo.SHA256,t).expand(ac);return sr(s,or)}function Z1(r){const e=eo.hash(yr(r,or));return sr(e,or)}function bi(r){const e=eo.hash(yr(r,sc));return sr(e,or)}function ew(r){return yr(`${r}`,Gf)}function as(r){return Number(sr(r,Gf))}function tw(r){const e=ew(typeof r.type<"u"?r.type:Vf);if(as(e)===Qn&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?yr(r.senderPublicKey,or):void 0,s=typeof r.iv<"u"?yr(r.iv,or):wi.randomBytes(oc),o=new Ja.ChaCha20Poly1305(yr(r.symKey,or)).seal(s,yr(r.message,sc));return nw({type:e,sealed:o,iv:s,senderPublicKey:t})}function rw(r){const e=new Ja.ChaCha20Poly1305(yr(r.symKey,or)),{sealed:t,iv:s}=to(r.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return sr(o,sc)}function nw(r){if(as(r.type)===Qn){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return sr(Ga([r.type,r.senderPublicKey,r.iv,r.sealed]),ic)}return sr(Ga([r.type,r.iv,r.sealed]),ic)}function to(r){const e=yr(r,ic),t=e.slice(J1,kf),s=kf;if(as(t)===Qn){const l=s+ac,y=l+oc,p=e.slice(s,l),_=e.slice(l,y),S=e.slice(y);return{type:t,sealed:S,iv:_,senderPublicKey:p}}const o=s+oc,c=e.slice(s,o),h=e.slice(o);return{type:t,sealed:h,iv:c}}function iw(r,e){const t=to(r);return Yf({type:as(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?sr(t.senderPublicKey,or):void 0,receiverPublicKey:e?.receiverPublicKey})}function Yf(r){const e=r?.type||Vf;if(e===Qn){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Jf(r){return r.type===Qn&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}var sw=Object.defineProperty,Xf=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,aw=Object.prototype.propertyIsEnumerable,Qf=(r,e,t)=>e in r?sw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zf=(r,e)=>{for(var t in e||(e={}))ow.call(e,t)&&Qf(r,t,e[t]);if(Xf)for(var t of Xf(e))aw.call(e,t)&&Qf(r,t,e[t]);return r};const cw="ReactNative",Ir={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},uw="js";function uc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ei(){return!ec()&&!!tc()&&navigator.product===cw}function Di(){return!uc()&&!!tc()&&!!ec()}function cs(){return Ei()?Ir.reactNative:uc()?Ir.node:Di()?Ir.browser:Ir.unknown}function hw(){var r;try{return Ei()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function fw(r,e){let t=os.parse(r);return t=Zf(Zf({},t),e),r=os.stringify(t),r}function lw(){return qf()||{name:"",description:"",url:"",icons:[""]}}function dw(){if(cs()===Ir.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const r=x1();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function pw(){var r;const e=cs();return e===Ir.browser?[e,((r=Bf())==null?void 0:r.host)||"unknown"].join(":"):e}function gw(r,e,t){const s=dw(),o=pw();return[[r,e].join("-"),[uw,t].join("-"),s,o].join("/")}function yw({protocol:r,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:h,bundleId:l}){const y=t.split("?"),p=gw(r,e,s),_={auth:o,ua:p,projectId:c,useOnCloseEvent:h||void 0,origin:l||void 0},S=fw(y[1]||"",_);return y[0]+"?"+S}function Zn(r,e){return r.filter(t=>e.includes(t)).length===r.length}function el(r){return Object.fromEntries(r.entries())}function tl(r){return new Map(Object.entries(r))}function Si(r=_e.FIVE_MINUTES,e){const t=_e.toMiliseconds(r||_e.FIVE_MINUTES);let s,o,c;return{resolve:h=>{c&&s&&(clearTimeout(c),s(h))},reject:h=>{c&&o&&(clearTimeout(c),o(h))},done:()=>new Promise((h,l)=>{c=setTimeout(()=>{l(new Error(e))},t),s=h,o=l})}}function us(r,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const h=await r;s(h)}catch(h){o(h)}clearTimeout(c)})}function rl(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function _w(r){return rl("topic",r)}function vw(r){return rl("id",r)}function nl(r){const[e,t]=r.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function zr(r,e){return _e.fromMiliseconds((e||Date.now())+_e.toMiliseconds(r))}function On(r){return Date.now()>=_e.toMiliseconds(r)}function $t(r,e){return`${r}${e?`:${e}`:""}`}function hc(r=[],e=[]){return[...new Set([...r,...e])]}async function ww({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${r}&sessionTopic=${e}`,h=cs();h===Ir.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):h===Ir.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}async function mw(r,e){try{return await r.getItem(e)||(Di()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}const bw="irn";function fc(r){return r?.relay||{protocol:bw}}function ro(r){const e=V1[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var Ew=Object.defineProperty,il=Object.getOwnPropertySymbols,Dw=Object.prototype.hasOwnProperty,Sw=Object.prototype.propertyIsEnumerable,sl=(r,e,t)=>e in r?Ew(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xw=(r,e)=>{for(var t in e||(e={}))Dw.call(e,t)&&sl(r,t,e[t]);if(il)for(var t of il(e))Sw.call(e,t)&&sl(r,t,e[t]);return r};function Iw(r,e="-"){const t={},s="relay"+e;return Object.keys(r).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),h=r[o];t[c]=h}}),t}function ol(r){r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,s=r.substring(0,e),o=r.substring(e+1,t).split("@"),c=typeof t<"u"?r.substring(t):"",h=os.parse(c);return{protocol:s,topic:Ow(o[0]),version:parseInt(o[1],10),symKey:h.symKey,relay:Iw(h)}}function Ow(r){return r.startsWith("//")?r.substring(2):r}function Pw(r,e="-"){const t="relay",s={};return Object.keys(r).forEach(o=>{const c=t+e+o;r[o]&&(s[c]=r[o])}),s}function Aw(r){return`${r.protocol}:${r.topic}@${r.version}?`+os.stringify(xw({symKey:r.symKey},Pw(r.relay)))}function xi(r){const e=[];return r.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function Cw(r){const e=[];return Object.values(r).forEach(t=>{e.push(...xi(t.accounts))}),e}function Tw(r,e){const t=[];return Object.values(r).forEach(s=>{xi(s.accounts).includes(e)&&t.push(...s.methods)}),t}function Rw(r,e){const t=[];return Object.values(r).forEach(s=>{xi(s.accounts).includes(e)&&t.push(...s.events)}),t}function Nw(r,e){const t=io(r,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(r))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(h=>`${h.split(":")[0]}:${h.split(":")[1]}`)};return s}function lc(r){return r.includes(":")}function hs(r){return lc(r)?r.split(":")[0]:r}const Lw={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Fw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(r,e){const{message:t,code:s}=Fw[r];return{message:e?`${t} ${e}`:t,code:s}}function Ct(r,e){const{message:t,code:s}=Lw[r];return{message:e?`${t} ${e}`:t,code:s}}function ei(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function Ii(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function ar(r){return typeof r>"u"}function Vt(r,e){return e&&ar(r)?!0:typeof r=="string"&&!!r.trim().length}function dc(r,e){return e&&ar(r)?!0:typeof r=="number"&&!isNaN(r)}function $w(r,e){const{requiredNamespaces:t}=e,s=Object.keys(r.namespaces),o=Object.keys(t);let c=!0;return Zn(o,s)?(s.forEach(h=>{const{accounts:l,methods:y,events:p}=r.namespaces[h],_=xi(l),S=t[h];(!Zn(Wf(h,S),_)||!Zn(S.methods,y)||!Zn(S.events,p))&&(c=!1)}),c):!1}function no(r){return Vt(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function Uw(r){if(Vt(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&no(t)}}return!1}function Mw(r){if(Vt(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function Bw(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function qw(r){return r?.topic}function Hw(r,e){let t=null;return Vt(r?.publicKey,!1)||(t=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function al(r){let e=!0;return ei(r)?r.length&&(e=r.every(t=>Vt(t,!1))):e=!1,e}function jw(r,e,t){let s=null;return ei(e)&&e.length?e.forEach(o=>{s||no(o)||(s=Ct("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):no(r)||(s=Ct("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function zw(r,e,t){let s=null;return Object.entries(r).forEach(([o,c])=>{if(s)return;const h=jw(o,Wf(o,c),`${e} ${t}`);h&&(s=h)}),s}function Kw(r,e){let t=null;return ei(r)?r.forEach(s=>{t||Uw(s)||(t=Ct("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Ct("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Ww(r,e){let t=null;return Object.values(r).forEach(s=>{if(t)return;const o=Kw(s?.accounts,`${e} namespace`);o&&(t=o)}),t}function Gw(r,e){let t=null;return al(r?.methods)?al(r?.events)||(t=Ct("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Ct("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function cl(r,e){let t=null;return Object.values(r).forEach(s=>{if(t)return;const o=Gw(s,`${e}, namespace`);o&&(t=o)}),t}function Vw(r,e,t){let s=null;if(r&&Ii(r)){const o=cl(r,e);o&&(s=o);const c=zw(r,e,t);c&&(s=c)}else s=ce("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function io(r,e){let t=null;if(r&&Ii(r)){const s=cl(r,e);s&&(t=s);const o=Ww(r,e);o&&(t=o)}else t=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function ul(r){return Vt(r.protocol,!0)}function kw(r,e){let t=!1;return e&&!r?t=!0:r&&ei(r)&&r.length&&r.forEach(s=>{t=ul(s)}),t}function Yw(r){return typeof r=="number"}function _r(r){return typeof r<"u"&&typeof r!==null}function Jw(r){return!(!r||typeof r!="object"||!r.code||!dc(r.code,!1)||!r.message||!Vt(r.message,!1))}function Xw(r){return!(ar(r)||!Vt(r.method,!1))}function Qw(r){return!(ar(r)||ar(r.result)&&ar(r.error)||!dc(r.id,!1)||!Vt(r.jsonrpc,!1))}function Zw(r){return!(ar(r)||!Vt(r.name,!1))}function hl(r,e){return!(!no(e)||!Cw(r).includes(e))}function em(r,e,t){return Vt(t,!1)?Tw(r,e).includes(t):!1}function tm(r,e,t){return Vt(t,!1)?Rw(r,e).includes(t):!1}function fl(r,e,t){let s=null;const o=rm(r),c=nm(e),h=Object.keys(o),l=Object.keys(c),y=ll(Object.keys(r)),p=ll(Object.keys(e)),_=y.filter(S=>!p.includes(S));return _.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${_.toString()}
      Received: ${Object.keys(e).toString()}`)),Zn(h,l)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${h.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(S=>{if(!S.includes(":")||s)return;const D=xi(e[S].accounts);D.includes(S)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${S}
        Required: ${S}
        Approved: ${D.toString()}`))}),h.forEach(S=>{s||(Zn(o[S].methods,c[S].methods)?Zn(o[S].events,c[S].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${S}`)):s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${S}`))}),s}function rm(r){const e={};return Object.keys(r).forEach(t=>{var s;t.includes(":")?e[t]=r[t]:(s=r[t].chains)==null||s.forEach(o=>{e[o]={methods:r[t].methods,events:r[t].events}})}),e}function ll(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function nm(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const s=xi(r[t].accounts);s?.forEach(o=>{e[o]={accounts:r[t].accounts.filter(c=>c.includes(`${o}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function im(r,e){return dc(r,!1)&&r<=e.max&&r>=e.min}function dl(){const r=cs();return new Promise(e=>{switch(r){case Ir.browser:e(sm());break;case Ir.reactNative:e(om());break;case Ir.node:e(am());break;default:e(!0)}})}function sm(){return Di()&&navigator?.onLine}async function om(){if(Ei()&&typeof global<"u"&&global!=null&&global.NetInfo){const r=await(global==null?void 0:global.NetInfo.fetch());return r?.isConnected}return!0}function am(){return!0}function cm(r){switch(cs()){case Ir.browser:um(r);break;case Ir.reactNative:hm(r);break}}function um(r){!Ei()&&Di()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function hm(r){Ei()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>r(e?.isConnected))}const pc={};class so{static get(e){return pc[e]}static set(e,t){pc[e]=t}static delete(e){delete pc[e]}}const fm="PARSE_ERROR",lm="INVALID_REQUEST",dm="METHOD_NOT_FOUND",pm="INVALID_PARAMS",pl="INTERNAL_ERROR",gc="SERVER_ERROR",gm=[-32700,-32600,-32601,-32602,-32603],fs={[fm]:{code:-32700,message:"Parse error"},[lm]:{code:-32600,message:"Invalid Request"},[dm]:{code:-32601,message:"Method not found"},[pm]:{code:-32602,message:"Invalid params"},[pl]:{code:-32603,message:"Internal error"},[gc]:{code:-32e3,message:"Server error"}},gl=gc;function ym(r){return gm.includes(r)}function yl(r){return Object.keys(fs).includes(r)?fs[r]:fs[gl]}function _m(r){const e=Object.values(fs).find(t=>t.code===r);return e||fs[gl]}function _l(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var vl={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var yc=function(r,e){return yc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},yc(r,e)};function vm(r,e){yc(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _c=function(){return _c=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},_c.apply(this,arguments)};function wm(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function mm(r,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,t,s);else for(var l=r.length-1;l>=0;l--)(h=r[l])&&(c=(o<3?h(c):o>3?h(e,t,c):h(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function bm(r,e){return function(t,s){e(t,s,r)}}function Em(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Dm(r,e,t,s){function o(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function l(_){try{p(s.next(_))}catch(S){h(S)}}function y(_){try{p(s.throw(_))}catch(S){h(S)}}function p(_){_.done?c(_.value):o(_.value).then(l,y)}p((s=s.apply(r,e||[])).next())})}function Sm(r,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,h;return h={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function l(p){return function(_){return y([p,_])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(_){p=[6,_],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function xm(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}function Im(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function vc(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],s=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wl(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),o,c=[],h;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){h={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(h)throw h.error}}return c}function Om(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(wl(arguments[e]));return r}function Pm(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var s=Array(r),o=0,e=0;e<t;e++)for(var c=arguments[e],h=0,l=c.length;h<l;h++,o++)s[o]=c[h];return s}function ls(r){return this instanceof ls?(this.v=r,this):new ls(r)}function Am(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(r,e||[]),o,c=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(D){s[D]&&(o[D]=function(O){return new Promise(function(I,H){c.push([D,O,I,H])>1||l(D,O)})})}function l(D,O){try{y(s[D](O))}catch(I){S(c[0][3],I)}}function y(D){D.value instanceof ls?Promise.resolve(D.value.v).then(p,_):S(c[0][2],D)}function p(D){l("next",D)}function _(D){l("throw",D)}function S(D,O){D(O),c.shift(),c.length&&l(c[0][0],c[0][1])}}function Cm(r){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=r[o]?function(h){return(t=!t)?{value:ls(r[o](h)),done:o==="return"}:c?c(h):h}:c}}function Tm(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof vc=="function"?vc(r):r[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=r[c]&&function(h){return new Promise(function(l,y){h=r[c](h),o(l,y,h.done,h.value)})}}function o(c,h,l,y){Promise.resolve(y).then(function(p){c({value:p,done:l})},h)}}function Rm(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function Nm(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function Lm(r){return r&&r.__esModule?r:{default:r}}function Fm(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function $m(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var Um=Object.freeze({__proto__:null,__extends:vm,get __assign(){return _c},__rest:wm,__decorate:mm,__param:bm,__metadata:Em,__awaiter:Dm,__generator:Sm,__createBinding:xm,__exportStar:Im,__values:vc,__read:wl,__spread:Om,__spreadArrays:Pm,__await:ls,__asyncGenerator:Am,__asyncDelegator:Cm,__asyncValues:Tm,__makeTemplateObject:Rm,__importStar:Nm,__importDefault:Lm,__classPrivateFieldGet:Fm,__classPrivateFieldSet:$m}),Mm=zn(Um),an={},ml;function Bm(){if(ml)return an;ml=1,Object.defineProperty(an,"__esModule",{value:!0}),an.isBrowserCryptoAvailable=an.getSubtleCrypto=an.getBrowerCrypto=void 0;function r(){return Ft?.crypto||Ft?.msCrypto||{}}an.getBrowerCrypto=r;function e(){const s=r();return s.subtle||s.webkitSubtle}an.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return an.isBrowserCryptoAvailable=t,an}var cn={},bl;function qm(){if(bl)return cn;bl=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.isBrowser=cn.isNode=cn.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}cn.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}cn.isNode=e;function t(){return!r()&&!e()}return cn.isBrowser=t,cn}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Mm;e.__exportStar(Bm(),r),e.__exportStar(qm(),r)})(vl);function wc(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function El(r=6){return BigInt(wc(r))}function Oi(r,e,t){return{id:t||wc(),jsonrpc:"2.0",method:r,params:e}}function oo(r,e){return{id:r,jsonrpc:"2.0",result:e}}function ao(r,e,t){return{id:r,jsonrpc:"2.0",error:Hm(e,t)}}function Hm(r,e){return typeof r>"u"?yl(pl):(typeof r=="string"&&(r=Object.assign(Object.assign({},yl(gc)),{message:r})),typeof e<"u"&&(r.data=e),ym(r.code)&&(r=_m(r.code)),r)}class jm{}class zm extends jm{constructor(){super()}}class Km extends zm{constructor(e){super()}}const Wm="^https?:",Gm="^wss?:";function Vm(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Dl(r,e){const t=Vm(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function Sl(r){return Dl(r,Wm)}function xl(r){return Dl(r,Gm)}function km(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function Il(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function mc(r){return Il(r)&&"method"in r}function co(r){return Il(r)&&(un(r)||Kr(r))}function un(r){return"result"in r}function Kr(r){return"error"in r}class hn extends Km{constructor(e){super(e),this.events=new Zt.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Oi(e.method,e.params||[],e.id||El().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Kr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),co(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Ym=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Jm=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ol=r=>r.split("?")[0],Pl=10,Xm=Ym();class Qm{constructor(e){if(this.url=e,this.events=new Zt.exports.EventEmitter,this.registering=!1,!xl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Wn(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!xl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=new URLSearchParams(e).get("origin"),c=vl.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!km(e)},h=new Xm(e,[],c);Jm()?h.onerror=l=>{const y=l;s(this.emitError(y.error))}:h.on("error",l=>{s(this.emitError(l))}),h.onopen=()=>{this.onOpen(h),t(h)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ji(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ao(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return _l(e,Ol(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Pl&&this.events.setMaxListeners(Pl)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Ol(this.url)}`));return this.events.emit("register_error",t),t}}var bc={exports:{}};(function(r,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,h=9007199254740991,l="[object Arguments]",y="[object Array]",p="[object AsyncFunction]",_="[object Boolean]",S="[object Date]",D="[object Error]",O="[object Function]",I="[object GeneratorFunction]",H="[object Map]",z="[object Number]",ie="[object Null]",L="[object Object]",$="[object Promise]",P="[object Proxy]",R="[object RegExp]",E="[object Set]",u="[object String]",m="[object Symbol]",V="[object Undefined]",Y="[object WeakMap]",se="[object ArrayBuffer]",ue="[object DataView]",de="[object Float32Array]",b="[object Float64Array]",C="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",G="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",me=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,fe={};fe[de]=fe[b]=fe[C]=fe[ee]=fe[X]=fe[W]=fe[G]=fe[J]=fe[re]=!0,fe[l]=fe[y]=fe[se]=fe[_]=fe[ue]=fe[S]=fe[D]=fe[O]=fe[H]=fe[z]=fe[L]=fe[R]=fe[E]=fe[u]=fe[Y]=!1;var ve=typeof Ft=="object"&&Ft&&Ft.Object===Object&&Ft,j=typeof self=="object"&&self&&self.Object===Object&&self,q=ve||j||Function("return this")(),F=e&&!e.nodeType&&e,d=F&&!0&&r&&!r.nodeType&&r,T=d&&d.exports===F,ae=T&&ve.process,le=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),xe=le&&le.isTypedArray;function je(x,M){for(var te=-1,pe=x==null?0:x.length,ct=0,Te=[];++te<pe;){var dt=x[te];M(dt,te,x)&&(Te[ct++]=dt)}return Te}function We(x,M){for(var te=-1,pe=M.length,ct=x.length;++te<pe;)x[ct+te]=M[te];return x}function Ue(x,M){for(var te=-1,pe=x==null?0:x.length;++te<pe;)if(M(x[te],te,x))return!0;return!1}function yt(x,M){for(var te=-1,pe=Array(x);++te<x;)pe[te]=M(te);return pe}function _t(x){return function(M){return x(M)}}function Be(x,M){return x.has(M)}function Ie(x,M){return x?.[M]}function Le(x){var M=-1,te=Array(x.size);return x.forEach(function(pe,ct){te[++M]=[ct,pe]}),te}function Fe(x,M){return function(te){return x(M(te))}}function qe(x){var M=-1,te=Array(x.size);return x.forEach(function(pe){te[++M]=pe}),te}var Pe=Array.prototype,$e=Function.prototype,Se=Object.prototype,Ae=q["__core-js_shared__"],ze=$e.toString,Oe=Se.hasOwnProperty,Ge=function(){var x=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Ye=Se.toString,et=RegExp("^"+ze.call(Oe).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=T?q.Buffer:void 0,Xe=q.Symbol,ur=q.Uint8Array,wr=Se.propertyIsEnumerable,en=Pe.splice,hr=Xe?Xe.toStringTag:void 0,pn=Object.getOwnPropertySymbols,Tn=tt?tt.isBuffer:void 0,ri=Fe(Object.keys,Object),Dt=Or(q,"DataView"),vt=Or(q,"Map"),St=Or(q,"Promise"),xt=Or(q,"Set"),bt=Or(q,"WeakMap"),wt=Or(Object,"create"),Ut=yn(Dt),Mt=yn(vt),It=yn(St),Bt=yn(xt),Ot=yn(bt),Tt=Xe?Xe.prototype:void 0,Pt=Tt?Tt.valueOf:void 0;function lt(x){var M=-1,te=x==null?0:x.length;for(this.clear();++M<te;){var pe=x[M];this.set(pe[0],pe[1])}}function qt(){this.__data__=wt?wt(null):{},this.size=0}function Ht(x){var M=this.has(x)&&delete this.__data__[x];return this.size-=M?1:0,M}function Bc(x){var M=this.__data__;if(wt){var te=M[x];return te===s?void 0:te}return Oe.call(M,x)?M[x]:void 0}function qc(x){var M=this.__data__;return wt?M[x]!==void 0:Oe.call(M,x)}function Hc(x,M){var te=this.__data__;return this.size+=this.has(x)?0:1,te[x]=wt&&M===void 0?s:M,this}lt.prototype.clear=qt,lt.prototype.delete=Ht,lt.prototype.get=Bc,lt.prototype.has=qc,lt.prototype.set=Hc;function Lr(x){var M=-1,te=x==null?0:x.length;for(this.clear();++M<te;){var pe=x[M];this.set(pe[0],pe[1])}}function jc(){this.__data__=[],this.size=0}function zc(x){var M=this.__data__,te=ni(M,x);if(te<0)return!1;var pe=M.length-1;return te==pe?M.pop():en.call(M,te,1),--this.size,!0}function Kc(x){var M=this.__data__,te=ni(M,x);return te<0?void 0:M[te][1]}function Wc(x){return ni(this.__data__,x)>-1}function Gc(x,M){var te=this.__data__,pe=ni(te,x);return pe<0?(++this.size,te.push([x,M])):te[pe][1]=M,this}Lr.prototype.clear=jc,Lr.prototype.delete=zc,Lr.prototype.get=Kc,Lr.prototype.has=Wc,Lr.prototype.set=Gc;function gn(x){var M=-1,te=x==null?0:x.length;for(this.clear();++M<te;){var pe=x[M];this.set(pe[0],pe[1])}}function Ai(){this.size=0,this.__data__={hash:new lt,map:new(vt||Lr),string:new lt}}function Vc(x){var M=Rn(this,x).delete(x);return this.size-=M?1:0,M}function Ci(x){return Rn(this,x).get(x)}function kc(x){return Rn(this,x).has(x)}function Yc(x,M){var te=Rn(this,x),pe=te.size;return te.set(x,M),this.size+=te.size==pe?0:1,this}gn.prototype.clear=Ai,gn.prototype.delete=Vc,gn.prototype.get=Ci,gn.prototype.has=kc,gn.prototype.set=Yc;function Ti(x){var M=-1,te=x==null?0:x.length;for(this.__data__=new gn;++M<te;)this.add(x[M])}function yo(x){return this.__data__.set(x,s),this}function _o(x){return this.__data__.has(x)}Ti.prototype.add=Ti.prototype.push=yo,Ti.prototype.has=_o;function Gr(x){var M=this.__data__=new Lr(x);this.size=M.size}function Jc(){this.__data__=new Lr,this.size=0}function Xc(x){var M=this.__data__,te=M.delete(x);return this.size=M.size,te}function Qc(x){return this.__data__.get(x)}function Zc(x){return this.__data__.has(x)}function vo(x,M){var te=this.__data__;if(te instanceof Lr){var pe=te.__data__;if(!vt||pe.length<t-1)return pe.push([x,M]),this.size=++te.size,this;te=this.__data__=new gn(pe)}return te.set(x,M),this.size=te.size,this}Gr.prototype.clear=Jc,Gr.prototype.delete=Xc,Gr.prototype.get=Qc,Gr.prototype.has=Zc,Gr.prototype.set=vo;function wo(x,M){var te=Li(x),pe=!te&&To(x),ct=!te&&!pe&&bs(x),Te=!te&&!pe&&!ct&&Lo(x),dt=te||pe||ct||Te,jt=dt?yt(x.length,String):[],Qe=jt.length;for(var ut in x)(M||Oe.call(x,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Io(ut,Qe)))&&jt.push(ut);return jt}function ni(x,M){for(var te=x.length;te--;)if(Co(x[te][0],M))return te;return-1}function ws(x,M,te){var pe=M(x);return Li(x)?pe:We(pe,te(x))}function ii(x){return x==null?x===void 0?V:ie:hr&&hr in Object(x)?So(x):ru(x)}function ms(x){return oi(x)&&ii(x)==l}function si(x,M,te,pe,ct){return x===M?!0:x==null||M==null||!oi(x)&&!oi(M)?x!==x&&M!==M:mo(x,M,te,pe,si,ct)}function mo(x,M,te,pe,ct,Te){var dt=Li(x),jt=Li(M),Qe=dt?y:tn(x),ut=jt?y:tn(M);Qe=Qe==l?L:Qe,ut=ut==l?L:ut;var Rt=Qe==L,mr=ut==L,zt=Qe==ut;if(zt&&bs(x)){if(!bs(M))return!1;dt=!0,Rt=!1}if(zt&&!Rt)return Te||(Te=new Gr),dt||Lo(x)?Ri(x,M,te,pe,ct,Te):tu(x,M,Qe,te,pe,ct,Te);if(!(te&o)){var pt=Rt&&Oe.call(x,"__wrapped__"),fr=mr&&Oe.call(M,"__wrapped__");if(pt||fr){var Vr=pt?x.value():x,Fr=fr?M.value():M;return Te||(Te=new Gr),ct(Vr,Fr,te,pe,Te)}}return zt?(Te||(Te=new Gr),Do(x,M,te,pe,ct,Te)):!1}function eu(x){if(!No(x)||Po(x))return!1;var M=Fi(x)?et:oe;return M.test(yn(x))}function bo(x){return oi(x)&&Ro(x.length)&&!!fe[ii(x)]}function Eo(x){if(!Ao(x))return ri(x);var M=[];for(var te in Object(x))Oe.call(x,te)&&te!="constructor"&&M.push(te);return M}function Ri(x,M,te,pe,ct,Te){var dt=te&o,jt=x.length,Qe=M.length;if(jt!=Qe&&!(dt&&Qe>jt))return!1;var ut=Te.get(x);if(ut&&Te.get(M))return ut==M;var Rt=-1,mr=!0,zt=te&c?new Ti:void 0;for(Te.set(x,M),Te.set(M,x);++Rt<jt;){var pt=x[Rt],fr=M[Rt];if(pe)var Vr=dt?pe(fr,pt,Rt,M,x,Te):pe(pt,fr,Rt,x,M,Te);if(Vr!==void 0){if(Vr)continue;mr=!1;break}if(zt){if(!Ue(M,function(Fr,rn){if(!Be(zt,rn)&&(pt===Fr||ct(pt,Fr,te,pe,Te)))return zt.push(rn)})){mr=!1;break}}else if(!(pt===fr||ct(pt,fr,te,pe,Te))){mr=!1;break}}return Te.delete(x),Te.delete(M),mr}function tu(x,M,te,pe,ct,Te,dt){switch(te){case ue:if(x.byteLength!=M.byteLength||x.byteOffset!=M.byteOffset)return!1;x=x.buffer,M=M.buffer;case se:return!(x.byteLength!=M.byteLength||!Te(new ur(x),new ur(M)));case _:case S:case z:return Co(+x,+M);case D:return x.name==M.name&&x.message==M.message;case R:case u:return x==M+"";case H:var jt=Le;case E:var Qe=pe&o;if(jt||(jt=qe),x.size!=M.size&&!Qe)return!1;var ut=dt.get(x);if(ut)return ut==M;pe|=c,dt.set(x,M);var Rt=Ri(jt(x),jt(M),pe,ct,Te,dt);return dt.delete(x),Rt;case m:if(Pt)return Pt.call(x)==Pt.call(M)}return!1}function Do(x,M,te,pe,ct,Te){var dt=te&o,jt=Ni(x),Qe=jt.length,ut=Ni(M),Rt=ut.length;if(Qe!=Rt&&!dt)return!1;for(var mr=Qe;mr--;){var zt=jt[mr];if(!(dt?zt in M:Oe.call(M,zt)))return!1}var pt=Te.get(x);if(pt&&Te.get(M))return pt==M;var fr=!0;Te.set(x,M),Te.set(M,x);for(var Vr=dt;++mr<Qe;){zt=jt[mr];var Fr=x[zt],rn=M[zt];if(pe)var Es=dt?pe(rn,Fr,zt,M,x,Te):pe(Fr,rn,zt,x,M,Te);if(!(Es===void 0?Fr===rn||ct(Fr,rn,te,pe,Te):Es)){fr=!1;break}Vr||(Vr=zt=="constructor")}if(fr&&!Vr){var ai=x.constructor,kt=M.constructor;ai!=kt&&"constructor"in x&&"constructor"in M&&!(typeof ai=="function"&&ai instanceof ai&&typeof kt=="function"&&kt instanceof kt)&&(fr=!1)}return Te.delete(x),Te.delete(M),fr}function Ni(x){return ws(x,su,xo)}function Rn(x,M){var te=x.__data__;return Oo(M)?te[typeof M=="string"?"string":"hash"]:te.map}function Or(x,M){var te=Ie(x,M);return eu(te)?te:void 0}function So(x){var M=Oe.call(x,hr),te=x[hr];try{x[hr]=void 0;var pe=!0}catch{}var ct=Ye.call(x);return pe&&(M?x[hr]=te:delete x[hr]),ct}var xo=pn?function(x){return x==null?[]:(x=Object(x),je(pn(x),function(M){return wr.call(x,M)}))}:at,tn=ii;(Dt&&tn(new Dt(new ArrayBuffer(1)))!=ue||vt&&tn(new vt)!=H||St&&tn(St.resolve())!=$||xt&&tn(new xt)!=E||bt&&tn(new bt)!=Y)&&(tn=function(x){var M=ii(x),te=M==L?x.constructor:void 0,pe=te?yn(te):"";if(pe)switch(pe){case Ut:return ue;case Mt:return H;case It:return $;case Bt:return E;case Ot:return Y}return M});function Io(x,M){return M=M??h,!!M&&(typeof x=="number"||be.test(x))&&x>-1&&x%1==0&&x<M}function Oo(x){var M=typeof x;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?x!=="__proto__":x===null}function Po(x){return!!Ge&&Ge in x}function Ao(x){var M=x&&x.constructor,te=typeof M=="function"&&M.prototype||Se;return x===te}function ru(x){return Ye.call(x)}function yn(x){if(x!=null){try{return ze.call(x)}catch{}try{return x+""}catch{}}return""}function Co(x,M){return x===M||x!==x&&M!==M}var To=ms(function(){return arguments}())?ms:function(x){return oi(x)&&Oe.call(x,"callee")&&!wr.call(x,"callee")},Li=Array.isArray;function nu(x){return x!=null&&Ro(x.length)&&!Fi(x)}var bs=Tn||ot;function iu(x,M){return si(x,M)}function Fi(x){if(!No(x))return!1;var M=ii(x);return M==O||M==I||M==p||M==P}function Ro(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=h}function No(x){var M=typeof x;return x!=null&&(M=="object"||M=="function")}function oi(x){return x!=null&&typeof x=="object"}var Lo=xe?_t(xe):bo;function su(x){return nu(x)?wo(x):Eo(x)}function at(){return[]}function ot(){return!1}r.exports=iu})(bc,bc.exports);var Zm=bc.exports;function eb(r,e){return e=e||{},new Promise(function(t,s){var o=new XMLHttpRequest,c=[],h=[],l={},y=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:y,headers:{keys:function(){return c},entries:function(){return h},get:function(_){return l[_.toLowerCase()]},has:function(_){return _.toLowerCase()in l}}}};for(var p in o.open(e.method||"get",r,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(_,S,D){c.push(S=S.toLowerCase()),h.push([S,D]),l[S]=l[S]?l[S]+","+D:D}),t(y())},o.onerror=s,o.withCredentials=e.credentials=="include",e.headers)o.setRequestHeader(p,e.headers[p]);o.send(e.body||null)})}var tb=Object.freeze({__proto__:null,default:eb}),Al=zn(tb),rb=self.fetch||(self.fetch=Al.default||Al),nb=Object.defineProperty,Cl=Object.getOwnPropertySymbols,ib=Object.prototype.hasOwnProperty,sb=Object.prototype.propertyIsEnumerable,Tl=(r,e,t)=>e in r?nb(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cr=(r,e)=>{for(var t in e||(e={}))ib.call(e,t)&&Tl(r,t,e[t]);if(Cl)for(var t of Cl(e))sb.call(e,t)&&Tl(r,t,e[t]);return r};function ob(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<r.length;o++){var c=r.charAt(o),h=c.charCodeAt(0);if(t[h]!==255)throw new TypeError(c+" is ambiguous");t[h]=o}var l=r.length,y=r.charAt(0),p=Math.log(l)/Math.log(256),_=Math.log(256)/Math.log(l);function S(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var H=0,z=0,ie=0,L=I.length;ie!==L&&I[ie]===0;)ie++,H++;for(var $=(L-ie)*_+1>>>0,P=new Uint8Array($);ie!==L;){for(var R=I[ie],E=0,u=$-1;(R!==0||E<z)&&u!==-1;u--,E++)R+=256*P[u]>>>0,P[u]=R%l>>>0,R=R/l>>>0;if(R!==0)throw new Error("Non-zero carry");z=E,ie++}for(var m=$-z;m!==$&&P[m]===0;)m++;for(var V=y.repeat(H);m<$;++m)V+=r.charAt(P[m]);return V}function D(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var H=0;if(I[H]!==" "){for(var z=0,ie=0;I[H]===y;)z++,H++;for(var L=(I.length-H)*p+1>>>0,$=new Uint8Array(L);I[H];){var P=t[I.charCodeAt(H)];if(P===255)return;for(var R=0,E=L-1;(P!==0||R<ie)&&E!==-1;E--,R++)P+=l*$[E]>>>0,$[E]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ie=R,H++}if(I[H]!==" "){for(var u=L-ie;u!==L&&$[u]===0;)u++;for(var m=new Uint8Array(z+(L-u)),V=z;u!==L;)m[V++]=$[u++];return m}}}function O(I){var H=D(I);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:D,decode:O}}var ab=ob,cb=ab;const Rl=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},ub=r=>new TextEncoder().encode(r),hb=r=>new TextDecoder().decode(r);class fb{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class lb{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Nl(this,e)}}class db{constructor(e){this.decoders=e}or(e){return Nl(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Nl=(r,e)=>new db(cr(cr({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e}));class pb{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new fb(e,t,s),this.decoder=new lb(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const uo=({name:r,prefix:e,encode:t,decode:s})=>new pb(r,e,t,s),ds=({prefix:r,name:e,alphabet:t})=>{const{encode:s,decode:o}=cb(t,e);return uo({prefix:r,name:e,encode:s,decode:c=>Rl(o(c))})},gb=(r,e,t,s)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let c=r.length;for(;r[c-1]==="=";)--c;const h=new Uint8Array(c*t/8|0);let l=0,y=0,p=0;for(let _=0;_<c;++_){const S=o[r[_]];if(S===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|S,l+=t,l>=8&&(l-=8,h[p++]=255&y>>l)}if(l>=t||255&y<<8-l)throw new SyntaxError("Unexpected end of data");return h},yb=(r,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",h=0,l=0;for(let y=0;y<r.length;++y)for(l=l<<8|r[y],h+=8;h>t;)h-=t,c+=e[o&l>>h];if(h&&(c+=e[o&l<<t-h]),s)for(;c.length*t&7;)c+="=";return c},Xt=({name:r,prefix:e,bitsPerChar:t,alphabet:s})=>uo({prefix:e,name:r,encode(o){return yb(o,s,t)},decode(o){return gb(o,s,t,r)}}),_b=uo({prefix:"\0",name:"identity",encode:r=>hb(r),decode:r=>ub(r)});var vb=Object.freeze({__proto__:null,identity:_b});const wb=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mb=Object.freeze({__proto__:null,base2:wb});const bb=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Eb=Object.freeze({__proto__:null,base8:bb});const Db=ds({prefix:"9",name:"base10",alphabet:"0123456789"});var Sb=Object.freeze({__proto__:null,base10:Db});const xb=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ib=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ob=Object.freeze({__proto__:null,base16:xb,base16upper:Ib});const Pb=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ab=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cb=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Tb=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rb=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Nb=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Lb=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fb=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$b=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ub=Object.freeze({__proto__:null,base32:Pb,base32upper:Ab,base32pad:Cb,base32padupper:Tb,base32hex:Rb,base32hexupper:Nb,base32hexpad:Lb,base32hexpadupper:Fb,base32z:$b});const Mb=ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bb=ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qb=Object.freeze({__proto__:null,base36:Mb,base36upper:Bb});const Hb=ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jb=ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var zb=Object.freeze({__proto__:null,base58btc:Hb,base58flickr:jb});const Kb=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Wb=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Gb=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vb=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var kb=Object.freeze({__proto__:null,base64:Kb,base64pad:Wb,base64url:Gb,base64urlpad:Vb});const Ll=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Yb=Ll.reduce((r,e,t)=>(r[t]=e,r),[]),Jb=Ll.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Xb(r){return r.reduce((e,t)=>(e+=Yb[t],e),"")}function Qb(r){const e=[];for(const t of r){const s=Jb[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Zb=uo({prefix:"\u{1F680}",name:"base256emoji",encode:Xb,decode:Qb});var eE=Object.freeze({__proto__:null,base256emoji:Zb}),tE=$l,Fl=128,rE=127,nE=~rE,iE=Math.pow(2,31);function $l(r,e,t){e=e||[],t=t||0;for(var s=t;r>=iE;)e[t++]=r&255|Fl,r/=128;for(;r&nE;)e[t++]=r&255|Fl,r>>>=7;return e[t]=r|0,$l.bytes=t-s+1,e}var sE=Ec,oE=128,Ul=127;function Ec(r,s){var t=0,s=s||0,o=0,c=s,h,l=r.length;do{if(c>=l)throw Ec.bytes=0,new RangeError("Could not decode varint");h=r[c++],t+=o<28?(h&Ul)<<o:(h&Ul)*Math.pow(2,o),o+=7}while(h>=oE);return Ec.bytes=c-s,t}var aE=Math.pow(2,7),cE=Math.pow(2,14),uE=Math.pow(2,21),hE=Math.pow(2,28),fE=Math.pow(2,35),lE=Math.pow(2,42),dE=Math.pow(2,49),pE=Math.pow(2,56),gE=Math.pow(2,63),yE=function(r){return r<aE?1:r<cE?2:r<uE?3:r<hE?4:r<fE?5:r<lE?6:r<dE?7:r<pE?8:r<gE?9:10},_E={encode:tE,decode:sE,encodingLength:yE},Ml=_E;const Bl=(r,e,t=0)=>(Ml.encode(r,e,t),e),ql=r=>Ml.encodingLength(r),Dc=(r,e)=>{const t=e.byteLength,s=ql(r),o=s+ql(t),c=new Uint8Array(o+t);return Bl(r,c,0),Bl(t,c,s),c.set(e,o),new vE(r,t,e,c)};class vE{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const Hl=({name:r,code:e,encode:t})=>new wE(r,e,t);class wE{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Dc(this.code,t):t.then(s=>Dc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const jl=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),mE=Hl({name:"sha2-256",code:18,encode:jl("SHA-256")}),bE=Hl({name:"sha2-512",code:19,encode:jl("SHA-512")});var EE=Object.freeze({__proto__:null,sha256:mE,sha512:bE});const zl=0,DE="identity",Kl=Rl;var SE=Object.freeze({__proto__:null,identity:{code:zl,name:DE,encode:Kl,digest:r=>Dc(zl,Kl(r))}});new TextEncoder,new TextDecoder;const Wl=cr(cr(cr(cr(cr(cr(cr(cr(cr(cr({},vb),mb),Eb),Sb),Ob),Ub),qb),zb),kb),eE);cr(cr({},EE),SE);function Gl(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function xE(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Gl(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Vl(r,e,t,s){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:s}}}const kl=Vl("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Sc=Vl("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=xE(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),IE=cr({utf8:kl,"utf-8":kl,hex:Wl.base16,latin1:Sc,ascii:Sc,binary:Sc},Wl);function OE(r,e="utf8"){const t=IE[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Gl(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const Yl="wc",PE=2,xc="core",Pn=`${Yl}@2:${xc}:`,AE={name:xc,logger:"error"},CE={database:":memory:"},TE="crypto",Jl="client_ed25519_seed",RE=_e.ONE_DAY,NE="keychain",LE="0.3",FE="messages",$E="0.3",UE=_e.SIX_HOURS,ME="publisher",Xl="irn",BE="error",Ql="wss://relay.walletconnect.com",Zl="wss://relay.walletconnect.org",qE="relayer",tr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},HE="_subscription",fn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},jE=_e.ONE_SECOND,zE="2.11.0",KE=1e4,WE="0.3",GE="WALLETCONNECT_CLIENT_ID",Wr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},VE="subscription",kE="0.3",YE=_e.FIVE_SECONDS*1e3,JE="pairing",XE="0.3",ps={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},gs={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Zr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},QE="history",ZE="0.3",e3="expirer",Nr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},t3="0.3",Ic="verify-api",Pi="https://verify.walletconnect.com",Oc="https://verify.walletconnect.org",r3=[Pi,Oc],n3="echo",i3="https://echo.walletconnect.com";class s3{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=NE,this.version=LE,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=ke.generateChildLogger(t,this.name)}get context(){return ke.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,el(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?tl(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class o3{constructor(e,t,s){this.core=e,this.logger=t,this.name=TE,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=Of(o);return If(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=X1();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),h=Of(c),l=cc();return await n1(l,o,RE,h)},this.generateSharedKey=(o,c,h)=>{this.isInitialized();const l=this.getPrivateKey(o),y=Q1(l,c);return this.setSymKey(y,h)},this.setSymKey=async(o,c)=>{this.isInitialized();const h=c||Z1(o);return await this.keychain.set(h,o),h},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,h)=>{this.isInitialized();const l=Yf(h),y=Wn(c);if(Jf(l)){const D=l.senderPublicKey,O=l.receiverPublicKey;o=await this.generateSharedKey(D,O)}const p=this.getSymKey(o),{type:_,senderPublicKey:S}=l;return tw({type:_,symKey:p,message:y,senderPublicKey:S})},this.decode=async(o,c,h)=>{this.isInitialized();const l=iw(c,h);if(Jf(l)){const y=l.receiverPublicKey,p=l.senderPublicKey;o=await this.generateSharedKey(y,p)}try{const y=this.getSymKey(o),p=rw({symKey:y,encoded:c});return Ji(p)}catch(y){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(y)}},this.getPayloadType=o=>{const c=to(o);return as(c.type)},this.getPayloadSenderPublicKey=o=>{const c=to(o);return c.senderPublicKey?sr(c.senderPublicKey,or):void 0},this.core=e,this.logger=ke.generateChildLogger(t,this.name),this.keychain=s||new s3(this.core,this.logger)}get context(){return ke.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Jl)}catch{e=cc(),await this.keychain.set(Jl,e)}return OE(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class a3 extends My{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=FE,this.version=$E,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=bi(o);let h=this.messages.get(s);return typeof h>"u"&&(h={}),typeof h[c]<"u"||(h[c]=o,this.messages.set(s,h),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),h=bi(o);return typeof c[h]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=ke.generateChildLogger(e,this.name),this.core=t}get context(){return ke.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,el(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?tl(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class c3 extends By{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Zt.exports.EventEmitter,this.name=ME,this.queue=new Map,this.publishTimeout=_e.toMiliseconds(_e.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{var h;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const l=c?.ttl||UE,y=fc(c),p=c?.prompt||!1,_=c?.tag||0,S=c?.id||El().toString(),D={topic:s,message:o,opts:{ttl:l,relay:y,prompt:p,tag:_,id:S}},O=setTimeout(()=>this.queue.set(S,D),this.publishTimeout);try{await await us(this.rpcPublish(s,o,l,y,p,_,S),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(S),this.relayer.events.emit(tr.publish,D)}catch(I){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(h=c?.internal)!=null&&h.throwOnFailedPublish)throw this.removeRequestFromQueue(S),I;return}finally{clearTimeout(O)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=ke.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return ke.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,h,l){var y,p,_,S;const D={method:ro(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:h},id:l};return ar((y=D.params)==null?void 0:y.prompt)&&((p=D.params)==null||delete p.prompt),ar((_=D.params)==null?void 0:_.tag)&&((S=D.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(_i.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tr.connection_stalled);return}this.checkQueue()}),this.relayer.on(tr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class u3{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var h3=Object.defineProperty,f3=Object.defineProperties,l3=Object.getOwnPropertyDescriptors,ed=Object.getOwnPropertySymbols,d3=Object.prototype.hasOwnProperty,p3=Object.prototype.propertyIsEnumerable,td=(r,e,t)=>e in r?h3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ys=(r,e)=>{for(var t in e||(e={}))d3.call(e,t)&&td(r,t,e[t]);if(ed)for(var t of ed(e))p3.call(e,t)&&td(r,t,e[t]);return r},Pc=(r,e)=>f3(r,l3(e));class g3 extends jy{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new u3,this.events=new Zt.exports.EventEmitter,this.name=VE,this.version=kE,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Pn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=fc(o),h={topic:s,relay:c};this.pending.set(s,h);const l=await this.rpcSubscribe(s,c);return this.onSubscribe(l,h),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),l}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const h=new _e.Watch;h.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(l),h.stop(this.pendingSubscriptionWatchLabel),o(!0)),h.elapsed(this.pendingSubscriptionWatchLabel)>=YE&&(clearInterval(l),h.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=ke.generateChildLogger(t,this.name),this.clientId=""}get context(){return ke.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=fc(s);await this.rpcUnsubscribe(e,t,o);const c=Ct("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:ro(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await us(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}return bi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:ro(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await us(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:ro(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Pc(ys({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ys({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ys({},t)),this.topicMap.set(t.topic,e),this.events.emit(Wr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Wr.deleted,Pc(ys({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Wr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Wr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);ei(t)&&this.onBatchSubscribe(t.map((s,o)=>Pc(ys({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(_i.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tr.connect,async()=>{await this.onConnect()}),this.relayer.on(tr.disconnect,()=>{this.onDisconnect()}),this.events.on(Wr.created,async e=>{const t=Wr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Wr.deleted,async e=>{const t=Wr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var y3=Object.defineProperty,rd=Object.getOwnPropertySymbols,_3=Object.prototype.hasOwnProperty,v3=Object.prototype.propertyIsEnumerable,nd=(r,e,t)=>e in r?y3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w3=(r,e)=>{for(var t in e||(e={}))_3.call(e,t)&&nd(r,t,e[t]);if(rd)for(var t of rd(e))v3.call(e,t)&&nd(r,t,e[t]);return r};class m3 extends qy{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Zt.exports.EventEmitter,this.name=qE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(tr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(tr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(fn.payload,this.onPayloadHandler),this.provider.on(fn.connect,this.onConnectHandler),this.provider.on(fn.disconnect,this.onDisconnectHandler),this.provider.on(fn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ke.generateChildLogger(e.logger,this.name):ke.pino(ke.getDefaultLoggerOptions({level:e.logger||BE})),this.messages=new a3(this.logger,e.core),this.subscriber=new g3(this,this.logger),this.publisher=new c3(this,this.logger),this.relayUrl=e?.relayUrl||Ql,this.projectId=e.projectId,this.bundleId=hw(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Zl}...`),await this.restartTransport(Zl)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},KE)}get context(){return ke.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";if(o)return o;let c;const h=l=>{l.topic===e&&(this.subscriber.off(Wr.created,h),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Wr.created,h)}),new Promise(async l=>{o=await this.subscriber.subscribe(e,t),l()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await us(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Wr.resubscribed,()=>{t()})}),new Promise(async(t,s)=>{try{await us(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){s(o);return}t()})])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.provider.events.emit(fn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await dl())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new hn(new Qm(yw({sdkVersion:zE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),mc(e)){if(!e.method.endsWith(HE))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,h={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(w3({type:"event",event:t.id},h)),this.events.emit(t.id,h),await this.acknowledgePayload(e),await this.onMessageEvent(h)}else co(e)&&this.events.emit(tr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(tr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=oo(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(fn.payload,this.onPayloadHandler),this.provider.off(fn.connect,this.onConnectHandler),this.provider.off(fn.disconnect,this.onDisconnectHandler),this.provider.off(fn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tr.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await dl();cm(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(tr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},_e.toMiliseconds(jE)))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var b3=Object.defineProperty,id=Object.getOwnPropertySymbols,E3=Object.prototype.hasOwnProperty,D3=Object.prototype.propertyIsEnumerable,sd=(r,e,t)=>e in r?b3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,od=(r,e)=>{for(var t in e||(e={}))E3.call(e,t)&&sd(r,t,e[t]);if(id)for(var t of id(e))D3.call(e,t)&&sd(r,t,e[t]);return r};class ho extends Hy{constructor(e,t,s,o=Pn,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=WE,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(h=>{this.getKey&&h!==null&&!ar(h)?this.map.set(this.getKey(h),h):Bw(h)?this.map.set(h.id,h):qw(h)&&this.map.set(h.topic,h)}),this.cached=[],this.initialized=!0)},this.set=async(h,l)=>{this.isInitialized(),this.map.has(h)?await this.update(h,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:h,value:l}),this.map.set(h,l),await this.persist())},this.get=h=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:h}),this.getData(h)),this.getAll=h=>(this.isInitialized(),h?this.values.filter(l=>Object.keys(h).every(y=>Zm(l[y],h[y]))):this.values),this.update=async(h,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:h,update:l});const y=od(od({},this.getData(h)),l);this.map.set(h,y),await this.persist()},this.delete=async(h,l)=>{this.isInitialized(),this.map.has(h)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:h,reason:l}),this.map.delete(h),await this.persist())},this.logger=ke.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return ke.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class S3{constructor(e,t){this.core=e,this.logger=t,this.name=JE,this.version=XE,this.events=new Zt.exports,this.initialized=!1,this.storagePrefix=Pn,this.ignoredPayloadTypes=[Qn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=cc(),o=await this.core.crypto.setSymKey(s),c=zr(_e.FIVE_MINUTES),h={protocol:Xl},l={topic:o,expiry:c,relay:h,active:!1},y=Aw({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:h});return await this.pairings.set(o,l),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:h}=ol(s.uri);let l;if(this.pairings.keys.includes(o)&&(l=this.pairings.get(o),l.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const y=zr(_e.FIVE_MINUTES),p={topic:o,relay:h,expiry:y,active:!1};return await this.pairings.set(o,p),this.core.expirer.set(o,y),s.activatePairing&&await this.activate({topic:o}),this.events.emit(gs.create,p),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:h})),p},this.activate=async({topic:s})=>{this.isInitialized();const o=zr(_e.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:h,resolve:l,reject:y}=Si();this.events.once($t("pairing_ping",c),({error:p})=>{p?y(p):l()}),await h()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Ct("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const h=Oi(o,c),l=await this.core.crypto.encode(s,h),y=ps[o].req;return this.core.history.set(s,h),this.core.relayer.publish(s,l,y),h.id},this.sendResult=async(s,o,c)=>{const h=oo(s,c),l=await this.core.crypto.encode(o,h),y=await this.core.history.get(o,s),p=ps[y.request.method].res;await this.core.relayer.publish(o,l,p),await this.core.history.resolve(h)},this.sendError=async(s,o,c)=>{const h=ao(s,c),l=await this.core.crypto.encode(o,h),y=await this.core.history.get(o,s),p=ps[y.request.method]?ps[y.request.method].res:ps.unregistered_method.res;await this.core.relayer.publish(o,l,p),await this.core.history.resolve(h)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Ct("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>On(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,h=(await this.core.history.get(o,c.id)).request.method;switch(h){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(h)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit(gs.ping,{id:c,topic:s})}catch(h){await this.sendError(c,s,h),this.logger.error(h)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{un(o)?this.events.emit($t("pairing_ping",c),{}):Kr(o)&&this.events.emit($t("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(gs.delete,{id:c,topic:s})}catch(h){await this.sendError(c,s,h),this.logger.error(h)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:h}=o;try{if(this.registeredMethods.includes(h))return;const l=Ct("WC_METHOD_UNSUPPORTED",h);await this.sendError(c,s,l),this.logger.error(l)}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Ct("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var o;if(!_r(s)){const{message:h}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(h)}if(!Mw(s.uri)){const{message:h}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(h)}const c=ol(s.uri);if(!((o=c?.relay)!=null&&o.protocol)){const{message:h}=ce("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(h)}if(!(c!=null&&c.symKey)){const{message:h}=ce("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(h)}},this.isValidPing=async s=>{if(!_r(s)){const{message:c}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:c}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Vt(s,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(On(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=ke.generateChildLogger(t,this.name),this.pairings=new ho(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ke.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);try{mc(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):co(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(Nr.expired,async e=>{const{topic:t}=nl(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(gs.expire,{topic:t}))})}}class x3 extends Uy{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Zt.exports.EventEmitter,this.name=QE,this.version=ZE,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const h={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:zr(_e.THIRTY_DAYS)};this.records.set(h.id,h),this.events.emit(Zr.created,h)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Kr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(Zr.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(Zr.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=ke.generateChildLogger(t,this.name)}get context(){return ke.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:Oi(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Zr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Zr.created,e=>{const t=Zr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Zr.updated,e=>{const t=Zr.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Zr.deleted,e=>{const t=Zr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(_i.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{_e.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class I3 extends zy{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Zt.exports.EventEmitter,this.name=e3,this.version=t3,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),h={target:c,expiry:o};this.expirations.set(c,h),this.checkExpiry(c,h),this.events.emit(Nr.created,{target:c,expiration:h})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Nr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=ke.generateChildLogger(t,this.name)}get context(){return ke.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return _w(e);if(typeof e=="number")return vw(e);const{message:t}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Nr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;_e.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Nr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(_i.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Nr.created,e=>{const t=Nr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Nr.expired,e=>{const t=Nr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Nr.deleted,e=>{const t=Nr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class O3 extends Ky{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Ic,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||Ei()||!Di())return;const o=this.getVerifyUrl(s?.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Oc;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(s?.verifyUrl);let c;try{c=await this.fetchAttestation(s.attestationId,o)}catch(h){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${o}`),this.logger.info(h),c=await this.fetchAttestation(s.attestationId,Oc)}return c},this.fetchAttestation=async(s,o)=>{this.logger.info(`resolving attestation: ${s} from url: ${o}`);const c=this.startAbortTimer(_e.ONE_SECOND*2),h=await fetch(`${o}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(c),h.status===200?await h.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const o=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),s())};await Promise.race([new Promise(c=>{if(document.getElementById(Ic))return c();window.addEventListener("message",o);const h=document.createElement("iframe");h.id=Ic,h.src=`${this.verifyUrl}/${this.projectId}`,h.style.display="none",document.body.append(h),this.iframe=h,s=c}),new Promise((c,h)=>setTimeout(()=>{window.removeEventListener("message",o),h("verify iframe load timeout")},_e.toMiliseconds(_e.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let o=s||Pi;return r3.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${Pi}`),o=Pi),o},this.logger=ke.generateChildLogger(t,this.name),this.verifyUrl=Pi,this.abortController=new AbortController,this.isDevEnv=uc()&&process.env.IS_VITEST}get context(){return ke.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}class P3 extends Wy{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=n3,this.registerDeviceToken=async s=>{const{clientId:o,token:c,notificationType:h,enableEncrypted:l=!1}=s,y=`${i3}/${this.projectId}/clients`;await rb(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,type:h,token:c,always_raw:l})})},this.logger=ke.generateChildLogger(t,this.context)}}var A3=Object.defineProperty,ad=Object.getOwnPropertySymbols,C3=Object.prototype.hasOwnProperty,T3=Object.prototype.propertyIsEnumerable,cd=(r,e,t)=>e in r?A3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ud=(r,e)=>{for(var t in e||(e={}))C3.call(e,t)&&cd(r,t,e[t]);if(ad)for(var t of ad(e))T3.call(e,t)&&cd(r,t,e[t]);return r};class Ac extends $y{constructor(e){super(e),this.protocol=Yl,this.version=PE,this.name=xc,this.events=new Zt.exports.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Ql,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ke.pino(ke.getDefaultLoggerOptions({level:e?.logger||AE.logger}));this.logger=ke.generateChildLogger(t,this.name),this.heartbeat=new _i.HeartBeat,this.crypto=new o3(this,this.logger,e?.keychain),this.history=new x3(this,this.logger),this.expirer=new I3(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new l0(ud(ud({},CE),e?.storageOptions)),this.relayer=new m3({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new S3(this,this.logger),this.verify=new O3(this.projectId||"",this.logger),this.echoClient=new P3(this.projectId||"",this.logger)}static async init(e){const t=new Ac(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(GE,s),t}get context(){return ke.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const R3=Ac,hd="wc",fd=2,ld="client",Cc=`${hd}@${fd}:${ld}:`,Tc={name:ld,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},dd="WALLETCONNECT_DEEPLINK_CHOICE",N3="proposal",pd="Proposal expired",L3="session",fo=_e.SEVEN_DAYS,F3="engine",_s={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1115}}},Rc={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},ln={idle:"IDLE",active:"ACTIVE"},$3="request",U3=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var M3=Object.defineProperty,B3=Object.defineProperties,q3=Object.getOwnPropertyDescriptors,gd=Object.getOwnPropertySymbols,H3=Object.prototype.hasOwnProperty,j3=Object.prototype.propertyIsEnumerable,yd=(r,e,t)=>e in r?M3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vr=(r,e)=>{for(var t in e||(e={}))H3.call(e,t)&&yd(r,t,e[t]);if(gd)for(var t of gd(e))j3.call(e,t)&&yd(r,t,e[t]);return r},vs=(r,e)=>B3(r,q3(e));class z3 extends Vy{constructor(e){super(e),this.name=F3,this.events=new Zt.exports,this.initialized=!1,this.ignoredPayloadTypes=[Qn],this.requestQueue={state:ln.idle,queue:[]},this.sessionRequestQueue={state:ln.idle,queue:[]},this.requestQueueDelay=_e.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(_s)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const s=vs(vr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:h,sessionProperties:l,relays:y}=s;let p=o,_,S=!1;if(p&&(S=this.client.core.pairing.pairings.get(p).active),!p||!S){const{topic:$,uri:P}=await this.client.core.pairing.create();p=$,_=P}const D=await this.client.core.crypto.generateKeyPair(),O=vr({requiredNamespaces:c,optionalNamespaces:h,relays:y??[{protocol:Xl}],proposer:{publicKey:D,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:I,resolve:H,done:z}=Si(_e.FIVE_MINUTES,pd);if(this.events.once($t("session_connect"),async({error:$,session:P})=>{if($)I($);else if(P){P.self.publicKey=D;const R=vs(vr({},P),{requiredNamespaces:P.requiredNamespaces,optionalNamespaces:P.optionalNamespaces});await this.client.session.set(P.topic,R),await this.setExpiry(P.topic,P.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:P.peer.metadata}),H(R)}}),!p){const{message:$}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error($)}const ie=await this.sendRequest({topic:p,method:"wc_sessionPropose",params:O}),L=zr(_e.FIVE_MINUTES);return await this.setProposal(ie,vr({id:ie,expiry:L},O)),{uri:_,approval:z}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:h}=t,l=this.client.proposal.get(s);let{pairingTopic:y,proposer:p,requiredNamespaces:_,optionalNamespaces:S}=l;y=y||"",Ii(_)||(_=Nw(c,"approve()"));const D=await this.client.core.crypto.generateKeyPair(),O=p.publicKey,I=await this.client.core.crypto.generateSharedKey(D,O);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:p.metadata}),await this.sendResult({id:s,topic:y,result:{relay:{protocol:o??"irn"},responderPublicKey:D}}),await this.client.proposal.delete(s,Ct("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const H=vr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:_,optionalNamespaces:S,pairingTopic:y,controller:{publicKey:D,metadata:this.client.metadata},expiry:zr(fo)},h&&{sessionProperties:h});await this.client.core.relayer.subscribe(I),await this.sendRequest({topic:I,method:"wc_sessionSettle",params:H,throwOnFailedPublish:!0});const z=vs(vr({},H),{topic:I,pairingTopic:y,acknowledged:!1,self:H.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:D});return await this.client.session.set(I,z),await this.setExpiry(I,zr(fo)),{topic:I,acknowledged:()=>new Promise(ie=>setTimeout(()=>ie(this.client.session.get(I)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Ct("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:h,resolve:l,reject:y}=Si();return this.events.once($t("session_update",c),({error:p})=>{p?y(p):l()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:h}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:c,resolve:h,reject:l}=Si();return this.events.once($t("session_extend",o),({error:y})=>{y?l(y):h()}),await this.setExpiry(s,zr(fo)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:h}=t,l=wc(),{done:y,resolve:p,reject:_}=Si(h,"Request expired. Please try again.");return this.events.once($t("session_request",l),({error:S,result:D})=>{S?_(S):p(D)}),await Promise.all([new Promise(async S=>{await this.sendRequest({clientRpcId:l,topic:c,method:"wc_sessionRequest",params:{request:o,chainId:s},expiry:h,throwOnFailedPublish:!0}).catch(D=>_(D)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:l}),S()}),new Promise(async S=>{const D=await mw(this.client.core.storage,dd);ww({id:l,topic:c,wcDeepLink:D}),S()}),y()]).then(S=>S[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;un(o)?await this.sendResult({id:c,topic:s,result:o.result,throwOnFailedPublish:!0}):Kr(o)&&await this.sendError(c,s,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:c,resolve:h,reject:l}=Si();this.events.once($t("session_ping",o),({error:y})=>{y?l(y):h()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:o,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Ct("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>$w(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var h,l;return((h=c.peerMetadata)==null?void 0:h.url)&&((l=c.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Ct("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t),this.client.core.storage.removeItem(dd).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===t&&this.deletePendingSessionRequest(c.id,Ct("USER_DISCONNECTED"))})},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Ct("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),o&&(this.sessionRequestQueue.state=ln.idle)},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=_s.wc_sessionRequest.req.ttl,{id:o,topic:c,params:h,verifyContext:l}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:h,verifyContext:l}),s&&this.client.core.expirer.set(o,zr(s))},this.sendRequest=async t=>{const{topic:s,method:o,params:c,expiry:h,relayRpcId:l,clientRpcId:y,throwOnFailedPublish:p}=t,_=Oi(o,c,y);if(Di()&&U3.includes(o)){const O=bi(JSON.stringify(_));this.client.core.verify.register({attestationId:O})}const S=await this.client.core.crypto.encode(s,_),D=_s[o].req;return h&&(D.ttl=h),l&&(D.id=l),this.client.core.history.set(s,_),p?(D.internal=vs(vr({},D.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,S,D)):this.client.core.relayer.publish(s,S,D).catch(O=>this.client.logger.error(O)),_.id},this.sendResult=async t=>{const{id:s,topic:o,result:c,throwOnFailedPublish:h}=t,l=oo(s,c),y=await this.client.core.crypto.encode(o,l),p=await this.client.core.history.get(o,s),_=_s[p.request.method].res;h?(_.internal=vs(vr({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,y,_)):this.client.core.relayer.publish(o,y,_).catch(S=>this.client.logger.error(S)),await this.client.core.history.resolve(l)},this.sendError=async(t,s,o)=>{const c=ao(t,o),h=await this.client.core.crypto.encode(s,c),l=await this.client.core.history.get(s,t),y=_s[l.request.method].res;this.client.core.relayer.publish(s,h,y),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{On(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{On(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===ln.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ln.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=ln.idle},this.processRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(vr({},s.params));const h=zr(_e.FIVE_MINUTES),l=vr({id:c,pairingTopic:t,expiry:h},o);await this.setProposal(c,l);const y=bi(JSON.stringify(s)),p=await this.getVerifyContext(y,l.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:l,verifyContext:p})}catch(h){await this.sendError(c,t,h),this.client.logger.error(h)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(un(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const h=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:h});const l=h.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const y=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const p=await this.client.core.crypto.generateSharedKey(l,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const _=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:_}),await this.client.core.pairing.activate({topic:t})}else Kr(s)&&(await this.client.proposal.delete(o,Ct("USER_DISCONNECTED")),this.events.emit($t("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:h,controller:l,expiry:y,namespaces:p,requiredNamespaces:_,optionalNamespaces:S,sessionProperties:D,pairingTopic:O}=s.params,I=vr({topic:t,relay:h,expiry:y,namespaces:p,acknowledged:!0,pairingTopic:O,requiredNamespaces:_,optionalNamespaces:S,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},D&&{sessionProperties:D});await this.sendResult({id:s.id,topic:t,result:!0}),this.events.emit($t("session_connect"),{session:I}),this.cleanupDuplicatePairings(I)}catch(h){await this.sendError(o,t,h),this.client.logger.error(h)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;un(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit($t("session_approve",o),{})):Kr(s)&&(await this.client.session.delete(t,Ct("USER_DISCONNECTED")),this.events.emit($t("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{const h=`${t}_session_update`,l=so.get(h);if(l&&this.isRequestOutOfSync(l,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(vr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:o}),so.set(h,c)}catch(h){await this.sendError(c,t,h),this.client.logger.error(h)}},this.isRequestOutOfSync=(t,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;un(s)?this.events.emit($t("session_update",o),{}):Kr(s)&&this.events.emit($t("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,zr(fo)),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;un(s)?this.events.emit($t("session_extend",o),{}):Kr(s)&&this.events.emit($t("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{un(s)?this.events.emit($t("session_ping",o),{}):Kr(s)&&this.events.emit($t("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(tr.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult({id:o,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(vr({topic:t},c));const h=bi(JSON.stringify(Oi("wc_sessionRequest",c,o))),l=this.client.session.get(t),y=await this.getVerifyContext(h,l.peer.metadata),p={id:o,topic:t,params:c,verifyContext:y};await this.setPendingSessionRequest(p),this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue()}catch(h){await this.sendError(o,t,h),this.client.logger.error(h)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;un(s)?this.events.emit($t("session_request",o),{result:s.result}):Kr(s)&&this.events.emit($t("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{const h=`${t}_session_event_${c.event.name}`,l=so.get(h);if(l&&this.isRequestOutOfSync(l,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(vr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c}),so.set(h,o)}catch(h){await this.sendError(o,t,h),this.client.logger.error(h)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ln.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ln.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ln.active,this.client.events.emit("session_request",t)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=t=>{if(t.active)return;const s=this.client.proposal.getAll().find(o=>o.pairingTopic===t.topic);s&&this.onSessionProposeRequest(t.topic,Oi("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async t=>{if(!_r(t)){const{message:y}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:h,relays:l}=t;if(ar(s)||await this.isValidPairingTopic(s),!kw(l,!0)){const{message:y}=ce("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(y)}!ar(o)&&Ii(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(c)&&Ii(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ar(h)||this.validateSessionProps(h,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=Vw(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!_r(t))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:h}=t;await this.isValidProposalId(s);const l=this.client.proposal.get(s),y=io(o,"approve()");if(y)throw new Error(y.message);const p=fl(l.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Vt(c,!0)){const{message:_}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(_)}ar(h)||this.validateSessionProps(h,"sessionProperties")},this.isValidReject=async t=>{if(!_r(t)){const{message:c}=ce("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!Jw(o)){const{message:c}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!_r(t)){const{message:p}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:h}=t;if(!ul(s)){const{message:p}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const l=Hw(o,"onSessionSettleRequest()");if(l)throw new Error(l.message);const y=io(c,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(On(h)){const{message:p}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!_r(t)){const{message:y}=ce("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),h=io(o,"update()");if(h)throw new Error(h.message);const l=fl(c.requiredNamespaces,o,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async t=>{if(!_r(t)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!_r(t)){const{message:y}=ce("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:s,request:o,chainId:c,expiry:h}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!hl(l,c)){const{message:y}=ce("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(y)}if(!Xw(o)){const{message:y}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(y)}if(!em(l,c,o.method)){const{message:y}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(y)}if(h&&!im(h,Rc)){const{message:y}=ce("MISSING_OR_INVALID",`request() expiry: ${h}. Expiry must be a number (in seconds) between ${Rc.min} and ${Rc.max}`);throw new Error(y)}},this.isValidRespond=async t=>{var s;if(!_r(t)){const{message:h}=ce("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(h)}const{topic:o,response:c}=t;try{await this.isValidSessionTopic(o)}catch(h){throw(s=t?.response)!=null&&s.id&&this.cleanupAfterResponse(t),h}if(!Qw(c)){const{message:h}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(h)}},this.isValidPing=async t=>{if(!_r(t)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!_r(t)){const{message:l}=ce("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:h}=this.client.session.get(s);if(!hl(h,c)){const{message:l}=ce("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(l)}if(!Zw(o)){const{message:l}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}if(!tm(h,c,o.name)){const{message:l}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidDisconnect=async t=>{if(!_r(t)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||Pi,validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c.origin,o.verified.isScam=c.isScam,o.verified.validation=c.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Vt(o,!1)){const{message:c}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);try{mc(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):co(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(Nr.expired,async e=>{const{topic:t,id:s}=nl(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(gs.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Vt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(On(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Vt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(On(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ce("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Vt(e,!1)){const{message:t}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Yw(e)){const{message:t}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(On(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class K3 extends ho{constructor(e,t){super(e,t,N3,Cc),this.core=e,this.logger=t}}class W3 extends ho{constructor(e,t){super(e,t,L3,Cc),this.core=e,this.logger=t}}class G3 extends ho{constructor(e,t){super(e,t,$3,Cc,s=>s.id),this.core=e,this.logger=t}}class Nc extends Gy{constructor(e){super(e),this.protocol=hd,this.version=fd,this.name=Tc.name,this.events=new Zt.exports.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||Tc.name,this.metadata=e?.metadata||lw();const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ke.pino(ke.getDefaultLoggerOptions({level:e?.logger||Tc.logger}));this.core=e?.core||new R3(e),this.logger=ke.generateChildLogger(t,this.name),this.session=new W3(this.core,this.logger),this.proposal=new K3(this.core,this.logger),this.pendingRequest=new G3(this.core,this.logger),this.engine=new z3(this)}static async init(e){const t=new Nc(e);return await t.initialize(),t}get context(){return ke.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const _d="error",V3="wss://relay.walletconnect.com",k3="wc",Y3="universal_provider",vd=`${k3}@2:${Y3}:`,J3="https://rpc.walletconnect.com/v1/",dn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Lc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",l="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",p=500,_="__lodash_placeholder__",S=1,D=2,O=4,I=1,H=2,z=1,ie=2,L=4,$=8,P=16,R=32,E=64,u=128,m=256,V=512,Y=30,se="...",ue=800,de=16,b=1,C=2,ee=3,X=1/0,W=9007199254740991,G=17976931348623157e292,J=0/0,re=4294967295,me=re-1,oe=re>>>1,be=[["ary",u],["bind",z],["bindKey",ie],["curry",$],["curryRight",P],["flip",V],["partial",R],["partialRight",E],["rearg",m]],fe="[object Arguments]",ve="[object Array]",j="[object AsyncFunction]",q="[object Boolean]",F="[object Date]",d="[object DOMException]",T="[object Error]",ae="[object Function]",le="[object GeneratorFunction]",xe="[object Map]",je="[object Number]",We="[object Null]",Ue="[object Object]",yt="[object Promise]",_t="[object Proxy]",Be="[object RegExp]",Ie="[object Set]",Le="[object String]",Fe="[object Symbol]",qe="[object Undefined]",Pe="[object WeakMap]",$e="[object WeakSet]",Se="[object ArrayBuffer]",Ae="[object DataView]",ze="[object Float32Array]",Oe="[object Float64Array]",Ge="[object Int8Array]",Ye="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Xe="[object Uint8ClampedArray]",ur="[object Uint16Array]",wr="[object Uint32Array]",en=/\b__p \+= '';/g,hr=/\b(__p \+=) '' \+/g,pn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tn=/&(?:amp|lt|gt|quot|#39);/g,ri=/[&<>"']/g,Dt=RegExp(Tn.source),vt=RegExp(ri.source),St=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Bt=RegExp(It.source),Ot=/^\s+/,Tt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,qt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bc=/[()=,{}\[\]\/\s]/,qc=/\\(\\)?/g,Hc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lr=/\w*$/,jc=/^[-+]0x[0-9a-f]+$/i,zc=/^0b[01]+$/i,Kc=/^\[object .+?Constructor\]$/,Wc=/^0o[0-7]+$/i,Gc=/^(?:0|[1-9]\d*)$/,gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ai=/($^)/,Vc=/['\n\r\u2028\u2029\\]/g,Ci="\\ud800-\\udfff",kc="\\u0300-\\u036f",Yc="\\ufe20-\\ufe2f",Ti="\\u20d0-\\u20ff",yo=kc+Yc+Ti,_o="\\u2700-\\u27bf",Gr="a-z\\xdf-\\xf6\\xf8-\\xff",Jc="\\xac\\xb1\\xd7\\xf7",Xc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qc="\\u2000-\\u206f",Zc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vo="A-Z\\xc0-\\xd6\\xd8-\\xde",wo="\\ufe0e\\ufe0f",ni=Jc+Xc+Qc+Zc,ws="['\u2019]",ii="["+Ci+"]",ms="["+ni+"]",si="["+yo+"]",mo="\\d+",eu="["+_o+"]",bo="["+Gr+"]",Eo="[^"+Ci+ni+mo+_o+Gr+vo+"]",Ri="\\ud83c[\\udffb-\\udfff]",tu="(?:"+si+"|"+Ri+")",Do="[^"+Ci+"]",Ni="(?:\\ud83c[\\udde6-\\uddff]){2}",Rn="[\\ud800-\\udbff][\\udc00-\\udfff]",Or="["+vo+"]",So="\\u200d",xo="(?:"+bo+"|"+Eo+")",tn="(?:"+Or+"|"+Eo+")",Io="(?:"+ws+"(?:d|ll|m|re|s|t|ve))?",Oo="(?:"+ws+"(?:D|LL|M|RE|S|T|VE))?",Po=tu+"?",Ao="["+wo+"]?",ru="(?:"+So+"(?:"+[Do,Ni,Rn].join("|")+")"+Ao+Po+")*",yn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Co="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",To=Ao+Po+ru,Li="(?:"+[eu,Ni,Rn].join("|")+")"+To,nu="(?:"+[Do+si+"?",si,Ni,Rn,ii].join("|")+")",bs=RegExp(ws,"g"),iu=RegExp(si,"g"),Fi=RegExp(Ri+"(?="+Ri+")|"+nu+To,"g"),Ro=RegExp([Or+"?"+bo+"+"+Io+"(?="+[ms,Or,"$"].join("|")+")",tn+"+"+Oo+"(?="+[ms,Or+xo,"$"].join("|")+")",Or+"?"+xo+"+"+Io,Or+"+"+Oo,Co,yn,mo,Li].join("|"),"g"),No=RegExp("["+So+Ci+yo+wo+"]"),oi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],su=-1,at={};at[ze]=at[Oe]=at[Ge]=at[Ye]=at[et]=at[tt]=at[Xe]=at[ur]=at[wr]=!0,at[fe]=at[ve]=at[Se]=at[q]=at[Ae]=at[F]=at[T]=at[ae]=at[xe]=at[je]=at[Ue]=at[Be]=at[Ie]=at[Le]=at[Pe]=!1;var ot={};ot[fe]=ot[ve]=ot[Se]=ot[Ae]=ot[q]=ot[F]=ot[ze]=ot[Oe]=ot[Ge]=ot[Ye]=ot[et]=ot[xe]=ot[je]=ot[Ue]=ot[Be]=ot[Ie]=ot[Le]=ot[Fe]=ot[tt]=ot[Xe]=ot[ur]=ot[wr]=!0,ot[T]=ot[ae]=ot[Pe]=!1;var x={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof Ft=="object"&&Ft&&Ft.Object===Object&&Ft,jt=typeof self=="object"&&self&&self.Object===Object&&self,Qe=dt||jt||Function("return this")(),ut=e&&!e.nodeType&&e,Rt=ut&&!0&&r&&!r.nodeType&&r,mr=Rt&&Rt.exports===ut,zt=mr&&dt.process,pt=function(){try{var U=Rt&&Rt.require&&Rt.require("util").types;return U||zt&&zt.binding&&zt.binding("util")}catch{}}(),fr=pt&&pt.isArrayBuffer,Vr=pt&&pt.isDate,Fr=pt&&pt.isMap,rn=pt&&pt.isRegExp,Es=pt&&pt.isSet,ai=pt&&pt.isTypedArray;function kt(U,k,K){switch(K.length){case 0:return U.call(k);case 1:return U.call(k,K[0]);case 2:return U.call(k,K[0],K[1]);case 3:return U.call(k,K[0],K[1],K[2])}return U.apply(k,K)}function b2(U,k,K,ge){for(var Ce=-1,rt=U==null?0:U.length;++Ce<rt;){var Kt=U[Ce];k(ge,Kt,K(Kt),U)}return ge}function $r(U,k){for(var K=-1,ge=U==null?0:U.length;++K<ge&&k(U[K],K,U)!==!1;);return U}function E2(U,k){for(var K=U==null?0:U.length;K--&&k(U[K],K,U)!==!1;);return U}function Ad(U,k){for(var K=-1,ge=U==null?0:U.length;++K<ge;)if(!k(U[K],K,U))return!1;return!0}function Nn(U,k){for(var K=-1,ge=U==null?0:U.length,Ce=0,rt=[];++K<ge;){var Kt=U[K];k(Kt,K,U)&&(rt[Ce++]=Kt)}return rt}function Fo(U,k){var K=U==null?0:U.length;return!!K&&$i(U,k,0)>-1}function ou(U,k,K){for(var ge=-1,Ce=U==null?0:U.length;++ge<Ce;)if(K(k,U[ge]))return!0;return!1}function mt(U,k){for(var K=-1,ge=U==null?0:U.length,Ce=Array(ge);++K<ge;)Ce[K]=k(U[K],K,U);return Ce}function Ln(U,k){for(var K=-1,ge=k.length,Ce=U.length;++K<ge;)U[Ce+K]=k[K];return U}function au(U,k,K,ge){var Ce=-1,rt=U==null?0:U.length;for(ge&&rt&&(K=U[++Ce]);++Ce<rt;)K=k(K,U[Ce],Ce,U);return K}function D2(U,k,K,ge){var Ce=U==null?0:U.length;for(ge&&Ce&&(K=U[--Ce]);Ce--;)K=k(K,U[Ce],Ce,U);return K}function cu(U,k){for(var K=-1,ge=U==null?0:U.length;++K<ge;)if(k(U[K],K,U))return!0;return!1}var S2=uu("length");function x2(U){return U.split("")}function I2(U){return U.match(Ht)||[]}function Cd(U,k,K){var ge;return K(U,function(Ce,rt,Kt){if(k(Ce,rt,Kt))return ge=rt,!1}),ge}function $o(U,k,K,ge){for(var Ce=U.length,rt=K+(ge?1:-1);ge?rt--:++rt<Ce;)if(k(U[rt],rt,U))return rt;return-1}function $i(U,k,K){return k===k?M2(U,k,K):$o(U,Td,K)}function O2(U,k,K,ge){for(var Ce=K-1,rt=U.length;++Ce<rt;)if(ge(U[Ce],k))return Ce;return-1}function Td(U){return U!==U}function Rd(U,k){var K=U==null?0:U.length;return K?fu(U,k)/K:J}function uu(U){return function(k){return k==null?t:k[U]}}function hu(U){return function(k){return U==null?t:U[k]}}function Nd(U,k,K,ge,Ce){return Ce(U,function(rt,Kt,ht){K=ge?(ge=!1,rt):k(K,rt,Kt,ht)}),K}function P2(U,k){var K=U.length;for(U.sort(k);K--;)U[K]=U[K].value;return U}function fu(U,k){for(var K,ge=-1,Ce=U.length;++ge<Ce;){var rt=k(U[ge]);rt!==t&&(K=K===t?rt:K+rt)}return K}function lu(U,k){for(var K=-1,ge=Array(U);++K<U;)ge[K]=k(K);return ge}function A2(U,k){return mt(k,function(K){return[K,U[K]]})}function Ld(U){return U&&U.slice(0,Md(U)+1).replace(Ot,"")}function Pr(U){return function(k){return U(k)}}function du(U,k){return mt(k,function(K){return U[K]})}function Ds(U,k){return U.has(k)}function Fd(U,k){for(var K=-1,ge=U.length;++K<ge&&$i(k,U[K],0)>-1;);return K}function $d(U,k){for(var K=U.length;K--&&$i(k,U[K],0)>-1;);return K}function C2(U,k){for(var K=U.length,ge=0;K--;)U[K]===k&&++ge;return ge}var T2=hu(x),R2=hu(M);function N2(U){return"\\"+pe[U]}function L2(U,k){return U==null?t:U[k]}function Ui(U){return No.test(U)}function F2(U){return oi.test(U)}function $2(U){for(var k,K=[];!(k=U.next()).done;)K.push(k.value);return K}function pu(U){var k=-1,K=Array(U.size);return U.forEach(function(ge,Ce){K[++k]=[Ce,ge]}),K}function Ud(U,k){return function(K){return U(k(K))}}function Fn(U,k){for(var K=-1,ge=U.length,Ce=0,rt=[];++K<ge;){var Kt=U[K];(Kt===k||Kt===_)&&(U[K]=_,rt[Ce++]=K)}return rt}function Uo(U){var k=-1,K=Array(U.size);return U.forEach(function(ge){K[++k]=ge}),K}function U2(U){var k=-1,K=Array(U.size);return U.forEach(function(ge){K[++k]=[ge,ge]}),K}function M2(U,k,K){for(var ge=K-1,Ce=U.length;++ge<Ce;)if(U[ge]===k)return ge;return-1}function B2(U,k,K){for(var ge=K+1;ge--;)if(U[ge]===k)return ge;return ge}function Mi(U){return Ui(U)?H2(U):S2(U)}function kr(U){return Ui(U)?j2(U):x2(U)}function Md(U){for(var k=U.length;k--&&Tt.test(U.charAt(k)););return k}var q2=hu(te);function H2(U){for(var k=Fi.lastIndex=0;Fi.test(U);)++k;return k}function j2(U){return U.match(Fi)||[]}function z2(U){return U.match(Ro)||[]}var K2=function U(k){k=k==null?Qe:Bi.defaults(Qe.Object(),k,Bi.pick(Qe,Lo));var K=k.Array,ge=k.Date,Ce=k.Error,rt=k.Function,Kt=k.Math,ht=k.Object,gu=k.RegExp,W2=k.String,Ur=k.TypeError,Mo=K.prototype,G2=rt.prototype,qi=ht.prototype,Bo=k["__core-js_shared__"],qo=G2.toString,it=qi.hasOwnProperty,V2=0,Bd=function(){var n=/[^.]+$/.exec(Bo&&Bo.keys&&Bo.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Ho=qi.toString,k2=qo.call(ht),Y2=Qe._,J2=gu("^"+qo.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jo=mr?k.Buffer:t,$n=k.Symbol,zo=k.Uint8Array,qd=jo?jo.allocUnsafe:t,Ko=Ud(ht.getPrototypeOf,ht),Hd=ht.create,jd=qi.propertyIsEnumerable,Wo=Mo.splice,zd=$n?$n.isConcatSpreadable:t,Ss=$n?$n.iterator:t,ci=$n?$n.toStringTag:t,Go=function(){try{var n=di(ht,"defineProperty");return n({},"",{}),n}catch{}}(),X2=k.clearTimeout!==Qe.clearTimeout&&k.clearTimeout,Q2=ge&&ge.now!==Qe.Date.now&&ge.now,Z2=k.setTimeout!==Qe.setTimeout&&k.setTimeout,Vo=Kt.ceil,ko=Kt.floor,yu=ht.getOwnPropertySymbols,e6=jo?jo.isBuffer:t,Kd=k.isFinite,t6=Mo.join,r6=Ud(ht.keys,ht),Wt=Kt.max,rr=Kt.min,n6=ge.now,i6=k.parseInt,Wd=Kt.random,s6=Mo.reverse,_u=di(k,"DataView"),xs=di(k,"Map"),vu=di(k,"Promise"),Hi=di(k,"Set"),Is=di(k,"WeakMap"),Os=di(ht,"create"),Yo=Is&&new Is,ji={},o6=pi(_u),a6=pi(xs),c6=pi(vu),u6=pi(Hi),h6=pi(Is),Jo=$n?$n.prototype:t,Ps=Jo?Jo.valueOf:t,Gd=Jo?Jo.toString:t;function v(n){if(At(n)&&!Re(n)&&!(n instanceof Je)){if(n instanceof Mr)return n;if(it.call(n,"__wrapped__"))return Vp(n)}return new Mr(n)}var zi=function(){function n(){}return function(i){if(!Et(i))return{};if(Hd)return Hd(i);n.prototype=i;var a=new n;return n.prototype=t,a}}();function Xo(){}function Mr(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}v.templateSettings={escape:St,evaluate:xt,interpolate:bt,variable:"",imports:{_:v}},v.prototype=Xo.prototype,v.prototype.constructor=v,Mr.prototype=zi(Xo.prototype),Mr.prototype.constructor=Mr;function Je(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function f6(){var n=new Je(this.__wrapped__);return n.__actions__=br(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=br(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=br(this.__views__),n}function l6(){if(this.__filtered__){var n=new Je(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function d6(){var n=this.__wrapped__.value(),i=this.__dir__,a=Re(n),f=i<0,g=a?n.length:0,w=xD(0,g,this.__views__),A=w.start,N=w.end,B=N-A,Q=f?N:A-1,Z=this.__iteratees__,ne=Z.length,he=0,ye=rr(B,this.__takeCount__);if(!a||!f&&g==B&&ye==B)return yp(n,this.__actions__);var Ee=[];e:for(;B--&&he<ye;){Q+=i;for(var He=-1,De=n[Q];++He<ne;){var Ve=Z[He],Ze=Ve.iteratee,Tr=Ve.type,pr=Ze(De);if(Tr==C)De=pr;else if(!pr){if(Tr==b)continue e;break e}}Ee[he++]=De}return Ee}Je.prototype=zi(Xo.prototype),Je.prototype.constructor=Je;function ui(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var f=n[i];this.set(f[0],f[1])}}function p6(){this.__data__=Os?Os(null):{},this.size=0}function g6(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}function y6(n){var i=this.__data__;if(Os){var a=i[n];return a===y?t:a}return it.call(i,n)?i[n]:t}function _6(n){var i=this.__data__;return Os?i[n]!==t:it.call(i,n)}function v6(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=Os&&i===t?y:i,this}ui.prototype.clear=p6,ui.prototype.delete=g6,ui.prototype.get=y6,ui.prototype.has=_6,ui.prototype.set=v6;function _n(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var f=n[i];this.set(f[0],f[1])}}function w6(){this.__data__=[],this.size=0}function m6(n){var i=this.__data__,a=Qo(i,n);if(a<0)return!1;var f=i.length-1;return a==f?i.pop():Wo.call(i,a,1),--this.size,!0}function b6(n){var i=this.__data__,a=Qo(i,n);return a<0?t:i[a][1]}function E6(n){return Qo(this.__data__,n)>-1}function D6(n,i){var a=this.__data__,f=Qo(a,n);return f<0?(++this.size,a.push([n,i])):a[f][1]=i,this}_n.prototype.clear=w6,_n.prototype.delete=m6,_n.prototype.get=b6,_n.prototype.has=E6,_n.prototype.set=D6;function vn(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var f=n[i];this.set(f[0],f[1])}}function S6(){this.size=0,this.__data__={hash:new ui,map:new(xs||_n),string:new ui}}function x6(n){var i=ha(this,n).delete(n);return this.size-=i?1:0,i}function I6(n){return ha(this,n).get(n)}function O6(n){return ha(this,n).has(n)}function P6(n,i){var a=ha(this,n),f=a.size;return a.set(n,i),this.size+=a.size==f?0:1,this}vn.prototype.clear=S6,vn.prototype.delete=x6,vn.prototype.get=I6,vn.prototype.has=O6,vn.prototype.set=P6;function hi(n){var i=-1,a=n==null?0:n.length;for(this.__data__=new vn;++i<a;)this.add(n[i])}function A6(n){return this.__data__.set(n,y),this}function C6(n){return this.__data__.has(n)}hi.prototype.add=hi.prototype.push=A6,hi.prototype.has=C6;function Yr(n){var i=this.__data__=new _n(n);this.size=i.size}function T6(){this.__data__=new _n,this.size=0}function R6(n){var i=this.__data__,a=i.delete(n);return this.size=i.size,a}function N6(n){return this.__data__.get(n)}function L6(n){return this.__data__.has(n)}function F6(n,i){var a=this.__data__;if(a instanceof _n){var f=a.__data__;if(!xs||f.length<o-1)return f.push([n,i]),this.size=++a.size,this;a=this.__data__=new vn(f)}return a.set(n,i),this.size=a.size,this}Yr.prototype.clear=T6,Yr.prototype.delete=R6,Yr.prototype.get=N6,Yr.prototype.has=L6,Yr.prototype.set=F6;function Vd(n,i){var a=Re(n),f=!a&&gi(n),g=!a&&!f&&Hn(n),w=!a&&!f&&!g&&Vi(n),A=a||f||g||w,N=A?lu(n.length,W2):[],B=N.length;for(var Q in n)(i||it.call(n,Q))&&!(A&&(Q=="length"||g&&(Q=="offset"||Q=="parent")||w&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||En(Q,B)))&&N.push(Q);return N}function kd(n){var i=n.length;return i?n[Au(0,i-1)]:t}function $6(n,i){return fa(br(n),fi(i,0,n.length))}function U6(n){return fa(br(n))}function wu(n,i,a){(a!==t&&!Jr(n[i],a)||a===t&&!(i in n))&&wn(n,i,a)}function As(n,i,a){var f=n[i];(!(it.call(n,i)&&Jr(f,a))||a===t&&!(i in n))&&wn(n,i,a)}function Qo(n,i){for(var a=n.length;a--;)if(Jr(n[a][0],i))return a;return-1}function M6(n,i,a,f){return Un(n,function(g,w,A){i(f,g,a(g),A)}),f}function Yd(n,i){return n&&sn(i,Yt(i),n)}function B6(n,i){return n&&sn(i,Dr(i),n)}function wn(n,i,a){i=="__proto__"&&Go?Go(n,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[i]=a}function mu(n,i){for(var a=-1,f=i.length,g=K(f),w=n==null;++a<f;)g[a]=w?t:eh(n,i[a]);return g}function fi(n,i,a){return n===n&&(a!==t&&(n=n<=a?n:a),i!==t&&(n=n>=i?n:i)),n}function Br(n,i,a,f,g,w){var A,N=i&S,B=i&D,Q=i&O;if(a&&(A=g?a(n,f,g,w):a(n)),A!==t)return A;if(!Et(n))return n;var Z=Re(n);if(Z){if(A=OD(n),!N)return br(n,A)}else{var ne=nr(n),he=ne==ae||ne==le;if(Hn(n))return wp(n,N);if(ne==Ue||ne==fe||he&&!g){if(A=B||he?{}:Mp(n),!N)return B?yD(n,B6(A,n)):gD(n,Yd(A,n))}else{if(!ot[ne])return g?n:{};A=PD(n,ne,N)}}w||(w=new Yr);var ye=w.get(n);if(ye)return ye;w.set(n,A),dg(n)?n.forEach(function(De){A.add(Br(De,i,a,De,n,w))}):fg(n)&&n.forEach(function(De,Ve){A.set(Ve,Br(De,i,a,Ve,n,w))});var Ee=Q?B?qu:Bu:B?Dr:Yt,He=Z?t:Ee(n);return $r(He||n,function(De,Ve){He&&(Ve=De,De=n[Ve]),As(A,Ve,Br(De,i,a,Ve,n,w))}),A}function q6(n){var i=Yt(n);return function(a){return Jd(a,n,i)}}function Jd(n,i,a){var f=a.length;if(n==null)return!f;for(n=ht(n);f--;){var g=a[f],w=i[g],A=n[g];if(A===t&&!(g in n)||!w(A))return!1}return!0}function Xd(n,i,a){if(typeof n!="function")throw new Ur(h);return $s(function(){n.apply(t,a)},i)}function Cs(n,i,a,f){var g=-1,w=Fo,A=!0,N=n.length,B=[],Q=i.length;if(!N)return B;a&&(i=mt(i,Pr(a))),f?(w=ou,A=!1):i.length>=o&&(w=Ds,A=!1,i=new hi(i));e:for(;++g<N;){var Z=n[g],ne=a==null?Z:a(Z);if(Z=f||Z!==0?Z:0,A&&ne===ne){for(var he=Q;he--;)if(i[he]===ne)continue e;B.push(Z)}else w(i,ne,f)||B.push(Z)}return B}var Un=Sp(nn),Qd=Sp(Eu,!0);function H6(n,i){var a=!0;return Un(n,function(f,g,w){return a=!!i(f,g,w),a}),a}function Zo(n,i,a){for(var f=-1,g=n.length;++f<g;){var w=n[f],A=i(w);if(A!=null&&(N===t?A===A&&!Cr(A):a(A,N)))var N=A,B=w}return B}function j6(n,i,a,f){var g=n.length;for(a=Me(a),a<0&&(a=-a>g?0:g+a),f=f===t||f>g?g:Me(f),f<0&&(f+=g),f=a>f?0:gg(f);a<f;)n[a++]=i;return n}function Zd(n,i){var a=[];return Un(n,function(f,g,w){i(f,g,w)&&a.push(f)}),a}function Qt(n,i,a,f,g){var w=-1,A=n.length;for(a||(a=CD),g||(g=[]);++w<A;){var N=n[w];i>0&&a(N)?i>1?Qt(N,i-1,a,f,g):Ln(g,N):f||(g[g.length]=N)}return g}var bu=xp(),ep=xp(!0);function nn(n,i){return n&&bu(n,i,Yt)}function Eu(n,i){return n&&ep(n,i,Yt)}function ea(n,i){return Nn(i,function(a){return Dn(n[a])})}function li(n,i){i=Bn(i,n);for(var a=0,f=i.length;n!=null&&a<f;)n=n[on(i[a++])];return a&&a==f?n:t}function tp(n,i,a){var f=i(n);return Re(n)?f:Ln(f,a(n))}function lr(n){return n==null?n===t?qe:We:ci&&ci in ht(n)?SD(n):UD(n)}function Du(n,i){return n>i}function z6(n,i){return n!=null&&it.call(n,i)}function K6(n,i){return n!=null&&i in ht(n)}function W6(n,i,a){return n>=rr(i,a)&&n<Wt(i,a)}function Su(n,i,a){for(var f=a?ou:Fo,g=n[0].length,w=n.length,A=w,N=K(w),B=1/0,Q=[];A--;){var Z=n[A];A&&i&&(Z=mt(Z,Pr(i))),B=rr(Z.length,B),N[A]=!a&&(i||g>=120&&Z.length>=120)?new hi(A&&Z):t}Z=n[0];var ne=-1,he=N[0];e:for(;++ne<g&&Q.length<B;){var ye=Z[ne],Ee=i?i(ye):ye;if(ye=a||ye!==0?ye:0,!(he?Ds(he,Ee):f(Q,Ee,a))){for(A=w;--A;){var He=N[A];if(!(He?Ds(He,Ee):f(n[A],Ee,a)))continue e}he&&he.push(Ee),Q.push(ye)}}return Q}function G6(n,i,a,f){return nn(n,function(g,w,A){i(f,a(g),w,A)}),f}function Ts(n,i,a){i=Bn(i,n),n=jp(n,i);var f=n==null?n:n[on(Hr(i))];return f==null?t:kt(f,n,a)}function rp(n){return At(n)&&lr(n)==fe}function V6(n){return At(n)&&lr(n)==Se}function k6(n){return At(n)&&lr(n)==F}function Rs(n,i,a,f,g){return n===i?!0:n==null||i==null||!At(n)&&!At(i)?n!==n&&i!==i:Y6(n,i,a,f,Rs,g)}function Y6(n,i,a,f,g,w){var A=Re(n),N=Re(i),B=A?ve:nr(n),Q=N?ve:nr(i);B=B==fe?Ue:B,Q=Q==fe?Ue:Q;var Z=B==Ue,ne=Q==Ue,he=B==Q;if(he&&Hn(n)){if(!Hn(i))return!1;A=!0,Z=!1}if(he&&!Z)return w||(w=new Yr),A||Vi(n)?Fp(n,i,a,f,g,w):ED(n,i,B,a,f,g,w);if(!(a&I)){var ye=Z&&it.call(n,"__wrapped__"),Ee=ne&&it.call(i,"__wrapped__");if(ye||Ee){var He=ye?n.value():n,De=Ee?i.value():i;return w||(w=new Yr),g(He,De,a,f,w)}}return he?(w||(w=new Yr),DD(n,i,a,f,g,w)):!1}function J6(n){return At(n)&&nr(n)==xe}function xu(n,i,a,f){var g=a.length,w=g,A=!f;if(n==null)return!w;for(n=ht(n);g--;){var N=a[g];if(A&&N[2]?N[1]!==n[N[0]]:!(N[0]in n))return!1}for(;++g<w;){N=a[g];var B=N[0],Q=n[B],Z=N[1];if(A&&N[2]){if(Q===t&&!(B in n))return!1}else{var ne=new Yr;if(f)var he=f(Q,Z,B,n,i,ne);if(!(he===t?Rs(Z,Q,I|H,f,ne):he))return!1}}return!0}function np(n){if(!Et(n)||RD(n))return!1;var i=Dn(n)?J2:Kc;return i.test(pi(n))}function X6(n){return At(n)&&lr(n)==Be}function Q6(n){return At(n)&&nr(n)==Ie}function Z6(n){return At(n)&&_a(n.length)&&!!at[lr(n)]}function ip(n){return typeof n=="function"?n:n==null?Sr:typeof n=="object"?Re(n)?ap(n[0],n[1]):op(n):Ig(n)}function Iu(n){if(!Fs(n))return r6(n);var i=[];for(var a in ht(n))it.call(n,a)&&a!="constructor"&&i.push(a);return i}function eD(n){if(!Et(n))return $D(n);var i=Fs(n),a=[];for(var f in n)f=="constructor"&&(i||!it.call(n,f))||a.push(f);return a}function Ou(n,i){return n<i}function sp(n,i){var a=-1,f=Er(n)?K(n.length):[];return Un(n,function(g,w,A){f[++a]=i(g,w,A)}),f}function op(n){var i=ju(n);return i.length==1&&i[0][2]?qp(i[0][0],i[0][1]):function(a){return a===n||xu(a,n,i)}}function ap(n,i){return Ku(n)&&Bp(i)?qp(on(n),i):function(a){var f=eh(a,n);return f===t&&f===i?th(a,n):Rs(i,f,I|H)}}function ta(n,i,a,f,g){n!==i&&bu(i,function(w,A){if(g||(g=new Yr),Et(w))tD(n,i,A,a,ta,f,g);else{var N=f?f(Gu(n,A),w,A+"",n,i,g):t;N===t&&(N=w),wu(n,A,N)}},Dr)}function tD(n,i,a,f,g,w,A){var N=Gu(n,a),B=Gu(i,a),Q=A.get(B);if(Q){wu(n,a,Q);return}var Z=w?w(N,B,a+"",n,i,A):t,ne=Z===t;if(ne){var he=Re(B),ye=!he&&Hn(B),Ee=!he&&!ye&&Vi(B);Z=B,he||ye||Ee?Re(N)?Z=N:Nt(N)?Z=br(N):ye?(ne=!1,Z=wp(B,!0)):Ee?(ne=!1,Z=mp(B,!0)):Z=[]:Us(B)||gi(B)?(Z=N,gi(N)?Z=yg(N):(!Et(N)||Dn(N))&&(Z=Mp(B))):ne=!1}ne&&(A.set(B,Z),g(Z,B,f,w,A),A.delete(B)),wu(n,a,Z)}function cp(n,i){var a=n.length;if(a)return i+=i<0?a:0,En(i,a)?n[i]:t}function up(n,i,a){i.length?i=mt(i,function(w){return Re(w)?function(A){return li(A,w.length===1?w[0]:w)}:w}):i=[Sr];var f=-1;i=mt(i,Pr(we()));var g=sp(n,function(w,A,N){var B=mt(i,function(Q){return Q(w)});return{criteria:B,index:++f,value:w}});return P2(g,function(w,A){return pD(w,A,a)})}function rD(n,i){return hp(n,i,function(a,f){return th(n,f)})}function hp(n,i,a){for(var f=-1,g=i.length,w={};++f<g;){var A=i[f],N=li(n,A);a(N,A)&&Ns(w,Bn(A,n),N)}return w}function nD(n){return function(i){return li(i,n)}}function Pu(n,i,a,f){var g=f?O2:$i,w=-1,A=i.length,N=n;for(n===i&&(i=br(i)),a&&(N=mt(n,Pr(a)));++w<A;)for(var B=0,Q=i[w],Z=a?a(Q):Q;(B=g(N,Z,B,f))>-1;)N!==n&&Wo.call(N,B,1),Wo.call(n,B,1);return n}function fp(n,i){for(var a=n?i.length:0,f=a-1;a--;){var g=i[a];if(a==f||g!==w){var w=g;En(g)?Wo.call(n,g,1):Ru(n,g)}}return n}function Au(n,i){return n+ko(Wd()*(i-n+1))}function iD(n,i,a,f){for(var g=-1,w=Wt(Vo((i-n)/(a||1)),0),A=K(w);w--;)A[f?w:++g]=n,n+=a;return A}function Cu(n,i){var a="";if(!n||i<1||i>W)return a;do i%2&&(a+=n),i=ko(i/2),i&&(n+=n);while(i);return a}function Ke(n,i){return Vu(Hp(n,i,Sr),n+"")}function sD(n){return kd(ki(n))}function oD(n,i){var a=ki(n);return fa(a,fi(i,0,a.length))}function Ns(n,i,a,f){if(!Et(n))return n;i=Bn(i,n);for(var g=-1,w=i.length,A=w-1,N=n;N!=null&&++g<w;){var B=on(i[g]),Q=a;if(B==="__proto__"||B==="constructor"||B==="prototype")return n;if(g!=A){var Z=N[B];Q=f?f(Z,B,N):t,Q===t&&(Q=Et(Z)?Z:En(i[g+1])?[]:{})}As(N,B,Q),N=N[B]}return n}var lp=Yo?function(n,i){return Yo.set(n,i),n}:Sr,aD=Go?function(n,i){return Go(n,"toString",{configurable:!0,enumerable:!1,value:nh(i),writable:!0})}:Sr;function cD(n){return fa(ki(n))}function qr(n,i,a){var f=-1,g=n.length;i<0&&(i=-i>g?0:g+i),a=a>g?g:a,a<0&&(a+=g),g=i>a?0:a-i>>>0,i>>>=0;for(var w=K(g);++f<g;)w[f]=n[f+i];return w}function uD(n,i){var a;return Un(n,function(f,g,w){return a=i(f,g,w),!a}),!!a}function ra(n,i,a){var f=0,g=n==null?f:n.length;if(typeof i=="number"&&i===i&&g<=oe){for(;f<g;){var w=f+g>>>1,A=n[w];A!==null&&!Cr(A)&&(a?A<=i:A<i)?f=w+1:g=w}return g}return Tu(n,i,Sr,a)}function Tu(n,i,a,f){var g=0,w=n==null?0:n.length;if(w===0)return 0;i=a(i);for(var A=i!==i,N=i===null,B=Cr(i),Q=i===t;g<w;){var Z=ko((g+w)/2),ne=a(n[Z]),he=ne!==t,ye=ne===null,Ee=ne===ne,He=Cr(ne);if(A)var De=f||Ee;else Q?De=Ee&&(f||he):N?De=Ee&&he&&(f||!ye):B?De=Ee&&he&&!ye&&(f||!He):ye||He?De=!1:De=f?ne<=i:ne<i;De?g=Z+1:w=Z}return rr(w,me)}function dp(n,i){for(var a=-1,f=n.length,g=0,w=[];++a<f;){var A=n[a],N=i?i(A):A;if(!a||!Jr(N,B)){var B=N;w[g++]=A===0?0:A}}return w}function pp(n){return typeof n=="number"?n:Cr(n)?J:+n}function Ar(n){if(typeof n=="string")return n;if(Re(n))return mt(n,Ar)+"";if(Cr(n))return Gd?Gd.call(n):"";var i=n+"";return i=="0"&&1/n==-X?"-0":i}function Mn(n,i,a){var f=-1,g=Fo,w=n.length,A=!0,N=[],B=N;if(a)A=!1,g=ou;else if(w>=o){var Q=i?null:mD(n);if(Q)return Uo(Q);A=!1,g=Ds,B=new hi}else B=i?[]:N;e:for(;++f<w;){var Z=n[f],ne=i?i(Z):Z;if(Z=a||Z!==0?Z:0,A&&ne===ne){for(var he=B.length;he--;)if(B[he]===ne)continue e;i&&B.push(ne),N.push(Z)}else g(B,ne,a)||(B!==N&&B.push(ne),N.push(Z))}return N}function Ru(n,i){return i=Bn(i,n),n=jp(n,i),n==null||delete n[on(Hr(i))]}function gp(n,i,a,f){return Ns(n,i,a(li(n,i)),f)}function na(n,i,a,f){for(var g=n.length,w=f?g:-1;(f?w--:++w<g)&&i(n[w],w,n););return a?qr(n,f?0:w,f?w+1:g):qr(n,f?w+1:0,f?g:w)}function yp(n,i){var a=n;return a instanceof Je&&(a=a.value()),au(i,function(f,g){return g.func.apply(g.thisArg,Ln([f],g.args))},a)}function Nu(n,i,a){var f=n.length;if(f<2)return f?Mn(n[0]):[];for(var g=-1,w=K(f);++g<f;)for(var A=n[g],N=-1;++N<f;)N!=g&&(w[g]=Cs(w[g]||A,n[N],i,a));return Mn(Qt(w,1),i,a)}function _p(n,i,a){for(var f=-1,g=n.length,w=i.length,A={};++f<g;){var N=f<w?i[f]:t;a(A,n[f],N)}return A}function Lu(n){return Nt(n)?n:[]}function Fu(n){return typeof n=="function"?n:Sr}function Bn(n,i){return Re(n)?n:Ku(n,i)?[n]:Gp(nt(n))}var hD=Ke;function qn(n,i,a){var f=n.length;return a=a===t?f:a,!i&&a>=f?n:qr(n,i,a)}var vp=X2||function(n){return Qe.clearTimeout(n)};function wp(n,i){if(i)return n.slice();var a=n.length,f=qd?qd(a):new n.constructor(a);return n.copy(f),f}function $u(n){var i=new n.constructor(n.byteLength);return new zo(i).set(new zo(n)),i}function fD(n,i){var a=i?$u(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}function lD(n){var i=new n.constructor(n.source,Lr.exec(n));return i.lastIndex=n.lastIndex,i}function dD(n){return Ps?ht(Ps.call(n)):{}}function mp(n,i){var a=i?$u(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function bp(n,i){if(n!==i){var a=n!==t,f=n===null,g=n===n,w=Cr(n),A=i!==t,N=i===null,B=i===i,Q=Cr(i);if(!N&&!Q&&!w&&n>i||w&&A&&B&&!N&&!Q||f&&A&&B||!a&&B||!g)return 1;if(!f&&!w&&!Q&&n<i||Q&&a&&g&&!f&&!w||N&&a&&g||!A&&g||!B)return-1}return 0}function pD(n,i,a){for(var f=-1,g=n.criteria,w=i.criteria,A=g.length,N=a.length;++f<A;){var B=bp(g[f],w[f]);if(B){if(f>=N)return B;var Q=a[f];return B*(Q=="desc"?-1:1)}}return n.index-i.index}function Ep(n,i,a,f){for(var g=-1,w=n.length,A=a.length,N=-1,B=i.length,Q=Wt(w-A,0),Z=K(B+Q),ne=!f;++N<B;)Z[N]=i[N];for(;++g<A;)(ne||g<w)&&(Z[a[g]]=n[g]);for(;Q--;)Z[N++]=n[g++];return Z}function Dp(n,i,a,f){for(var g=-1,w=n.length,A=-1,N=a.length,B=-1,Q=i.length,Z=Wt(w-N,0),ne=K(Z+Q),he=!f;++g<Z;)ne[g]=n[g];for(var ye=g;++B<Q;)ne[ye+B]=i[B];for(;++A<N;)(he||g<w)&&(ne[ye+a[A]]=n[g++]);return ne}function br(n,i){var a=-1,f=n.length;for(i||(i=K(f));++a<f;)i[a]=n[a];return i}function sn(n,i,a,f){var g=!a;a||(a={});for(var w=-1,A=i.length;++w<A;){var N=i[w],B=f?f(a[N],n[N],N,a,n):t;B===t&&(B=n[N]),g?wn(a,N,B):As(a,N,B)}return a}function gD(n,i){return sn(n,zu(n),i)}function yD(n,i){return sn(n,$p(n),i)}function ia(n,i){return function(a,f){var g=Re(a)?b2:M6,w=i?i():{};return g(a,n,we(f,2),w)}}function Ki(n){return Ke(function(i,a){var f=-1,g=a.length,w=g>1?a[g-1]:t,A=g>2?a[2]:t;for(w=n.length>3&&typeof w=="function"?(g--,w):t,A&&dr(a[0],a[1],A)&&(w=g<3?t:w,g=1),i=ht(i);++f<g;){var N=a[f];N&&n(i,N,f,w)}return i})}function Sp(n,i){return function(a,f){if(a==null)return a;if(!Er(a))return n(a,f);for(var g=a.length,w=i?g:-1,A=ht(a);(i?w--:++w<g)&&f(A[w],w,A)!==!1;);return a}}function xp(n){return function(i,a,f){for(var g=-1,w=ht(i),A=f(i),N=A.length;N--;){var B=A[n?N:++g];if(a(w[B],B,w)===!1)break}return i}}function _D(n,i,a){var f=i&z,g=Ls(n);function w(){var A=this&&this!==Qe&&this instanceof w?g:n;return A.apply(f?a:this,arguments)}return w}function Ip(n){return function(i){i=nt(i);var a=Ui(i)?kr(i):t,f=a?a[0]:i.charAt(0),g=a?qn(a,1).join(""):i.slice(1);return f[n]()+g}}function Wi(n){return function(i){return au(Sg(Dg(i).replace(bs,"")),n,"")}}function Ls(n){return function(){var i=arguments;switch(i.length){case 0:return new n;case 1:return new n(i[0]);case 2:return new n(i[0],i[1]);case 3:return new n(i[0],i[1],i[2]);case 4:return new n(i[0],i[1],i[2],i[3]);case 5:return new n(i[0],i[1],i[2],i[3],i[4]);case 6:return new n(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new n(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=zi(n.prototype),f=n.apply(a,i);return Et(f)?f:a}}function vD(n,i,a){var f=Ls(n);function g(){for(var w=arguments.length,A=K(w),N=w,B=Gi(g);N--;)A[N]=arguments[N];var Q=w<3&&A[0]!==B&&A[w-1]!==B?[]:Fn(A,B);if(w-=Q.length,w<a)return Tp(n,i,sa,g.placeholder,t,A,Q,t,t,a-w);var Z=this&&this!==Qe&&this instanceof g?f:n;return kt(Z,this,A)}return g}function Op(n){return function(i,a,f){var g=ht(i);if(!Er(i)){var w=we(a,3);i=Yt(i),a=function(N){return w(g[N],N,g)}}var A=n(i,a,f);return A>-1?g[w?i[A]:A]:t}}function Pp(n){return bn(function(i){var a=i.length,f=a,g=Mr.prototype.thru;for(n&&i.reverse();f--;){var w=i[f];if(typeof w!="function")throw new Ur(h);if(g&&!A&&ua(w)=="wrapper")var A=new Mr([],!0)}for(f=A?f:a;++f<a;){w=i[f];var N=ua(w),B=N=="wrapper"?Hu(w):t;B&&Wu(B[0])&&B[1]==(u|$|R|m)&&!B[4].length&&B[9]==1?A=A[ua(B[0])].apply(A,B[3]):A=w.length==1&&Wu(w)?A[N]():A.thru(w)}return function(){var Q=arguments,Z=Q[0];if(A&&Q.length==1&&Re(Z))return A.plant(Z).value();for(var ne=0,he=a?i[ne].apply(this,Q):Z;++ne<a;)he=i[ne].call(this,he);return he}})}function sa(n,i,a,f,g,w,A,N,B,Q){var Z=i&u,ne=i&z,he=i&ie,ye=i&($|P),Ee=i&V,He=he?t:Ls(n);function De(){for(var Ve=arguments.length,Ze=K(Ve),Tr=Ve;Tr--;)Ze[Tr]=arguments[Tr];if(ye)var pr=Gi(De),Rr=C2(Ze,pr);if(f&&(Ze=Ep(Ze,f,g,ye)),w&&(Ze=Dp(Ze,w,A,ye)),Ve-=Rr,ye&&Ve<Q){var Lt=Fn(Ze,pr);return Tp(n,i,sa,De.placeholder,a,Ze,Lt,N,B,Q-Ve)}var Xr=ne?a:this,xn=he?Xr[n]:n;return Ve=Ze.length,N?Ze=MD(Ze,N):Ee&&Ve>1&&Ze.reverse(),Z&&B<Ve&&(Ze.length=B),this&&this!==Qe&&this instanceof De&&(xn=He||Ls(xn)),xn.apply(Xr,Ze)}return De}function Ap(n,i){return function(a,f){return G6(a,n,i(f),{})}}function oa(n,i){return function(a,f){var g;if(a===t&&f===t)return i;if(a!==t&&(g=a),f!==t){if(g===t)return f;typeof a=="string"||typeof f=="string"?(a=Ar(a),f=Ar(f)):(a=pp(a),f=pp(f)),g=n(a,f)}return g}}function Uu(n){return bn(function(i){return i=mt(i,Pr(we())),Ke(function(a){var f=this;return n(i,function(g){return kt(g,f,a)})})})}function aa(n,i){i=i===t?" ":Ar(i);var a=i.length;if(a<2)return a?Cu(i,n):i;var f=Cu(i,Vo(n/Mi(i)));return Ui(i)?qn(kr(f),0,n).join(""):f.slice(0,n)}function wD(n,i,a,f){var g=i&z,w=Ls(n);function A(){for(var N=-1,B=arguments.length,Q=-1,Z=f.length,ne=K(Z+B),he=this&&this!==Qe&&this instanceof A?w:n;++Q<Z;)ne[Q]=f[Q];for(;B--;)ne[Q++]=arguments[++N];return kt(he,g?a:this,ne)}return A}function Cp(n){return function(i,a,f){return f&&typeof f!="number"&&dr(i,a,f)&&(a=f=t),i=Sn(i),a===t?(a=i,i=0):a=Sn(a),f=f===t?i<a?1:-1:Sn(f),iD(i,a,f,n)}}function ca(n){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=jr(i),a=jr(a)),n(i,a)}}function Tp(n,i,a,f,g,w,A,N,B,Q){var Z=i&$,ne=Z?A:t,he=Z?t:A,ye=Z?w:t,Ee=Z?t:w;i|=Z?R:E,i&=~(Z?E:R),i&L||(i&=~(z|ie));var He=[n,i,g,ye,ne,Ee,he,N,B,Q],De=a.apply(t,He);return Wu(n)&&zp(De,He),De.placeholder=f,Kp(De,n,i)}function Mu(n){var i=Kt[n];return function(a,f){if(a=jr(a),f=f==null?0:rr(Me(f),292),f&&Kd(a)){var g=(nt(a)+"e").split("e"),w=i(g[0]+"e"+(+g[1]+f));return g=(nt(w)+"e").split("e"),+(g[0]+"e"+(+g[1]-f))}return i(a)}}var mD=Hi&&1/Uo(new Hi([,-0]))[1]==X?function(n){return new Hi(n)}:oh;function Rp(n){return function(i){var a=nr(i);return a==xe?pu(i):a==Ie?U2(i):A2(i,n(i))}}function mn(n,i,a,f,g,w,A,N){var B=i&ie;if(!B&&typeof n!="function")throw new Ur(h);var Q=f?f.length:0;if(Q||(i&=~(R|E),f=g=t),A=A===t?A:Wt(Me(A),0),N=N===t?N:Me(N),Q-=g?g.length:0,i&E){var Z=f,ne=g;f=g=t}var he=B?t:Hu(n),ye=[n,i,a,f,g,Z,ne,w,A,N];if(he&&FD(ye,he),n=ye[0],i=ye[1],a=ye[2],f=ye[3],g=ye[4],N=ye[9]=ye[9]===t?B?0:n.length:Wt(ye[9]-Q,0),!N&&i&($|P)&&(i&=~($|P)),!i||i==z)var Ee=_D(n,i,a);else i==$||i==P?Ee=vD(n,i,N):(i==R||i==(z|R))&&!g.length?Ee=wD(n,i,a,f):Ee=sa.apply(t,ye);var He=he?lp:zp;return Kp(He(Ee,ye),n,i)}function Np(n,i,a,f){return n===t||Jr(n,qi[a])&&!it.call(f,a)?i:n}function Lp(n,i,a,f,g,w){return Et(n)&&Et(i)&&(w.set(i,n),ta(n,i,t,Lp,w),w.delete(i)),n}function bD(n){return Us(n)?t:n}function Fp(n,i,a,f,g,w){var A=a&I,N=n.length,B=i.length;if(N!=B&&!(A&&B>N))return!1;var Q=w.get(n),Z=w.get(i);if(Q&&Z)return Q==i&&Z==n;var ne=-1,he=!0,ye=a&H?new hi:t;for(w.set(n,i),w.set(i,n);++ne<N;){var Ee=n[ne],He=i[ne];if(f)var De=A?f(He,Ee,ne,i,n,w):f(Ee,He,ne,n,i,w);if(De!==t){if(De)continue;he=!1;break}if(ye){if(!cu(i,function(Ve,Ze){if(!Ds(ye,Ze)&&(Ee===Ve||g(Ee,Ve,a,f,w)))return ye.push(Ze)})){he=!1;break}}else if(!(Ee===He||g(Ee,He,a,f,w))){he=!1;break}}return w.delete(n),w.delete(i),he}function ED(n,i,a,f,g,w,A){switch(a){case Ae:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Se:return!(n.byteLength!=i.byteLength||!w(new zo(n),new zo(i)));case q:case F:case je:return Jr(+n,+i);case T:return n.name==i.name&&n.message==i.message;case Be:case Le:return n==i+"";case xe:var N=pu;case Ie:var B=f&I;if(N||(N=Uo),n.size!=i.size&&!B)return!1;var Q=A.get(n);if(Q)return Q==i;f|=H,A.set(n,i);var Z=Fp(N(n),N(i),f,g,w,A);return A.delete(n),Z;case Fe:if(Ps)return Ps.call(n)==Ps.call(i)}return!1}function DD(n,i,a,f,g,w){var A=a&I,N=Bu(n),B=N.length,Q=Bu(i),Z=Q.length;if(B!=Z&&!A)return!1;for(var ne=B;ne--;){var he=N[ne];if(!(A?he in i:it.call(i,he)))return!1}var ye=w.get(n),Ee=w.get(i);if(ye&&Ee)return ye==i&&Ee==n;var He=!0;w.set(n,i),w.set(i,n);for(var De=A;++ne<B;){he=N[ne];var Ve=n[he],Ze=i[he];if(f)var Tr=A?f(Ze,Ve,he,i,n,w):f(Ve,Ze,he,n,i,w);if(!(Tr===t?Ve===Ze||g(Ve,Ze,a,f,w):Tr)){He=!1;break}De||(De=he=="constructor")}if(He&&!De){var pr=n.constructor,Rr=i.constructor;pr!=Rr&&"constructor"in n&&"constructor"in i&&!(typeof pr=="function"&&pr instanceof pr&&typeof Rr=="function"&&Rr instanceof Rr)&&(He=!1)}return w.delete(n),w.delete(i),He}function bn(n){return Vu(Hp(n,t,Jp),n+"")}function Bu(n){return tp(n,Yt,zu)}function qu(n){return tp(n,Dr,$p)}var Hu=Yo?function(n){return Yo.get(n)}:oh;function ua(n){for(var i=n.name+"",a=ji[i],f=it.call(ji,i)?a.length:0;f--;){var g=a[f],w=g.func;if(w==null||w==n)return g.name}return i}function Gi(n){var i=it.call(v,"placeholder")?v:n;return i.placeholder}function we(){var n=v.iteratee||ih;return n=n===ih?ip:n,arguments.length?n(arguments[0],arguments[1]):n}function ha(n,i){var a=n.__data__;return TD(i)?a[typeof i=="string"?"string":"hash"]:a.map}function ju(n){for(var i=Yt(n),a=i.length;a--;){var f=i[a],g=n[f];i[a]=[f,g,Bp(g)]}return i}function di(n,i){var a=L2(n,i);return np(a)?a:t}function SD(n){var i=it.call(n,ci),a=n[ci];try{n[ci]=t;var f=!0}catch{}var g=Ho.call(n);return f&&(i?n[ci]=a:delete n[ci]),g}var zu=yu?function(n){return n==null?[]:(n=ht(n),Nn(yu(n),function(i){return jd.call(n,i)}))}:ah,$p=yu?function(n){for(var i=[];n;)Ln(i,zu(n)),n=Ko(n);return i}:ah,nr=lr;(_u&&nr(new _u(new ArrayBuffer(1)))!=Ae||xs&&nr(new xs)!=xe||vu&&nr(vu.resolve())!=yt||Hi&&nr(new Hi)!=Ie||Is&&nr(new Is)!=Pe)&&(nr=function(n){var i=lr(n),a=i==Ue?n.constructor:t,f=a?pi(a):"";if(f)switch(f){case o6:return Ae;case a6:return xe;case c6:return yt;case u6:return Ie;case h6:return Pe}return i});function xD(n,i,a){for(var f=-1,g=a.length;++f<g;){var w=a[f],A=w.size;switch(w.type){case"drop":n+=A;break;case"dropRight":i-=A;break;case"take":i=rr(i,n+A);break;case"takeRight":n=Wt(n,i-A);break}}return{start:n,end:i}}function ID(n){var i=n.match(lt);return i?i[1].split(qt):[]}function Up(n,i,a){i=Bn(i,n);for(var f=-1,g=i.length,w=!1;++f<g;){var A=on(i[f]);if(!(w=n!=null&&a(n,A)))break;n=n[A]}return w||++f!=g?w:(g=n==null?0:n.length,!!g&&_a(g)&&En(A,g)&&(Re(n)||gi(n)))}function OD(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&it.call(n,"index")&&(a.index=n.index,a.input=n.input),a}function Mp(n){return typeof n.constructor=="function"&&!Fs(n)?zi(Ko(n)):{}}function PD(n,i,a){var f=n.constructor;switch(i){case Se:return $u(n);case q:case F:return new f(+n);case Ae:return fD(n,a);case ze:case Oe:case Ge:case Ye:case et:case tt:case Xe:case ur:case wr:return mp(n,a);case xe:return new f;case je:case Le:return new f(n);case Be:return lD(n);case Ie:return new f;case Fe:return dD(n)}}function AD(n,i){var a=i.length;if(!a)return n;var f=a-1;return i[f]=(a>1?"& ":"")+i[f],i=i.join(a>2?", ":" "),n.replace(Pt,`{
/* [wrapped with `+i+`] */
`)}function CD(n){return Re(n)||gi(n)||!!(zd&&n&&n[zd])}function En(n,i){var a=typeof n;return i=i??W,!!i&&(a=="number"||a!="symbol"&&Gc.test(n))&&n>-1&&n%1==0&&n<i}function dr(n,i,a){if(!Et(a))return!1;var f=typeof i;return(f=="number"?Er(a)&&En(i,a.length):f=="string"&&i in a)?Jr(a[i],n):!1}function Ku(n,i){if(Re(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||Cr(n)?!0:Ut.test(n)||!wt.test(n)||i!=null&&n in ht(i)}function TD(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function Wu(n){var i=ua(n),a=v[i];if(typeof a!="function"||!(i in Je.prototype))return!1;if(n===a)return!0;var f=Hu(a);return!!f&&n===f[0]}function RD(n){return!!Bd&&Bd in n}var ND=Bo?Dn:ch;function Fs(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||qi;return n===a}function Bp(n){return n===n&&!Et(n)}function qp(n,i){return function(a){return a==null?!1:a[n]===i&&(i!==t||n in ht(a))}}function LD(n){var i=ga(n,function(f){return a.size===p&&a.clear(),f}),a=i.cache;return i}function FD(n,i){var a=n[1],f=i[1],g=a|f,w=g<(z|ie|u),A=f==u&&a==$||f==u&&a==m&&n[7].length<=i[8]||f==(u|m)&&i[7].length<=i[8]&&a==$;if(!(w||A))return n;f&z&&(n[2]=i[2],g|=a&z?0:L);var N=i[3];if(N){var B=n[3];n[3]=B?Ep(B,N,i[4]):N,n[4]=B?Fn(n[3],_):i[4]}return N=i[5],N&&(B=n[5],n[5]=B?Dp(B,N,i[6]):N,n[6]=B?Fn(n[5],_):i[6]),N=i[7],N&&(n[7]=N),f&u&&(n[8]=n[8]==null?i[8]:rr(n[8],i[8])),n[9]==null&&(n[9]=i[9]),n[0]=i[0],n[1]=g,n}function $D(n){var i=[];if(n!=null)for(var a in ht(n))i.push(a);return i}function UD(n){return Ho.call(n)}function Hp(n,i,a){return i=Wt(i===t?n.length-1:i,0),function(){for(var f=arguments,g=-1,w=Wt(f.length-i,0),A=K(w);++g<w;)A[g]=f[i+g];g=-1;for(var N=K(i+1);++g<i;)N[g]=f[g];return N[i]=a(A),kt(n,this,N)}}function jp(n,i){return i.length<2?n:li(n,qr(i,0,-1))}function MD(n,i){for(var a=n.length,f=rr(i.length,a),g=br(n);f--;){var w=i[f];n[f]=En(w,a)?g[w]:t}return n}function Gu(n,i){if(!(i==="constructor"&&typeof n[i]=="function")&&i!="__proto__")return n[i]}var zp=Wp(lp),$s=Z2||function(n,i){return Qe.setTimeout(n,i)},Vu=Wp(aD);function Kp(n,i,a){var f=i+"";return Vu(n,AD(f,BD(ID(f),a)))}function Wp(n){var i=0,a=0;return function(){var f=n6(),g=de-(f-a);if(a=f,g>0){if(++i>=ue)return arguments[0]}else i=0;return n.apply(t,arguments)}}function fa(n,i){var a=-1,f=n.length,g=f-1;for(i=i===t?f:i;++a<i;){var w=Au(a,g),A=n[w];n[w]=n[a],n[a]=A}return n.length=i,n}var Gp=LD(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(Mt,function(a,f,g,w){i.push(g?w.replace(qc,"$1"):f||a)}),i});function on(n){if(typeof n=="string"||Cr(n))return n;var i=n+"";return i=="0"&&1/n==-X?"-0":i}function pi(n){if(n!=null){try{return qo.call(n)}catch{}try{return n+""}catch{}}return""}function BD(n,i){return $r(be,function(a){var f="_."+a[0];i&a[1]&&!Fo(n,f)&&n.push(f)}),n.sort()}function Vp(n){if(n instanceof Je)return n.clone();var i=new Mr(n.__wrapped__,n.__chain__);return i.__actions__=br(n.__actions__),i.__index__=n.__index__,i.__values__=n.__values__,i}function qD(n,i,a){(a?dr(n,i,a):i===t)?i=1:i=Wt(Me(i),0);var f=n==null?0:n.length;if(!f||i<1)return[];for(var g=0,w=0,A=K(Vo(f/i));g<f;)A[w++]=qr(n,g,g+=i);return A}function HD(n){for(var i=-1,a=n==null?0:n.length,f=0,g=[];++i<a;){var w=n[i];w&&(g[f++]=w)}return g}function jD(){var n=arguments.length;if(!n)return[];for(var i=K(n-1),a=arguments[0],f=n;f--;)i[f-1]=arguments[f];return Ln(Re(a)?br(a):[a],Qt(i,1))}var zD=Ke(function(n,i){return Nt(n)?Cs(n,Qt(i,1,Nt,!0)):[]}),KD=Ke(function(n,i){var a=Hr(i);return Nt(a)&&(a=t),Nt(n)?Cs(n,Qt(i,1,Nt,!0),we(a,2)):[]}),WD=Ke(function(n,i){var a=Hr(i);return Nt(a)&&(a=t),Nt(n)?Cs(n,Qt(i,1,Nt,!0),t,a):[]});function GD(n,i,a){var f=n==null?0:n.length;return f?(i=a||i===t?1:Me(i),qr(n,i<0?0:i,f)):[]}function VD(n,i,a){var f=n==null?0:n.length;return f?(i=a||i===t?1:Me(i),i=f-i,qr(n,0,i<0?0:i)):[]}function kD(n,i){return n&&n.length?na(n,we(i,3),!0,!0):[]}function YD(n,i){return n&&n.length?na(n,we(i,3),!0):[]}function JD(n,i,a,f){var g=n==null?0:n.length;return g?(a&&typeof a!="number"&&dr(n,i,a)&&(a=0,f=g),j6(n,i,a,f)):[]}function kp(n,i,a){var f=n==null?0:n.length;if(!f)return-1;var g=a==null?0:Me(a);return g<0&&(g=Wt(f+g,0)),$o(n,we(i,3),g)}function Yp(n,i,a){var f=n==null?0:n.length;if(!f)return-1;var g=f-1;return a!==t&&(g=Me(a),g=a<0?Wt(f+g,0):rr(g,f-1)),$o(n,we(i,3),g,!0)}function Jp(n){var i=n==null?0:n.length;return i?Qt(n,1):[]}function XD(n){var i=n==null?0:n.length;return i?Qt(n,X):[]}function QD(n,i){var a=n==null?0:n.length;return a?(i=i===t?1:Me(i),Qt(n,i)):[]}function ZD(n){for(var i=-1,a=n==null?0:n.length,f={};++i<a;){var g=n[i];f[g[0]]=g[1]}return f}function Xp(n){return n&&n.length?n[0]:t}function eS(n,i,a){var f=n==null?0:n.length;if(!f)return-1;var g=a==null?0:Me(a);return g<0&&(g=Wt(f+g,0)),$i(n,i,g)}function tS(n){var i=n==null?0:n.length;return i?qr(n,0,-1):[]}var rS=Ke(function(n){var i=mt(n,Lu);return i.length&&i[0]===n[0]?Su(i):[]}),nS=Ke(function(n){var i=Hr(n),a=mt(n,Lu);return i===Hr(a)?i=t:a.pop(),a.length&&a[0]===n[0]?Su(a,we(i,2)):[]}),iS=Ke(function(n){var i=Hr(n),a=mt(n,Lu);return i=typeof i=="function"?i:t,i&&a.pop(),a.length&&a[0]===n[0]?Su(a,t,i):[]});function sS(n,i){return n==null?"":t6.call(n,i)}function Hr(n){var i=n==null?0:n.length;return i?n[i-1]:t}function oS(n,i,a){var f=n==null?0:n.length;if(!f)return-1;var g=f;return a!==t&&(g=Me(a),g=g<0?Wt(f+g,0):rr(g,f-1)),i===i?B2(n,i,g):$o(n,Td,g,!0)}function aS(n,i){return n&&n.length?cp(n,Me(i)):t}var cS=Ke(Qp);function Qp(n,i){return n&&n.length&&i&&i.length?Pu(n,i):n}function uS(n,i,a){return n&&n.length&&i&&i.length?Pu(n,i,we(a,2)):n}function hS(n,i,a){return n&&n.length&&i&&i.length?Pu(n,i,t,a):n}var fS=bn(function(n,i){var a=n==null?0:n.length,f=mu(n,i);return fp(n,mt(i,function(g){return En(g,a)?+g:g}).sort(bp)),f});function lS(n,i){var a=[];if(!(n&&n.length))return a;var f=-1,g=[],w=n.length;for(i=we(i,3);++f<w;){var A=n[f];i(A,f,n)&&(a.push(A),g.push(f))}return fp(n,g),a}function ku(n){return n==null?n:s6.call(n)}function dS(n,i,a){var f=n==null?0:n.length;return f?(a&&typeof a!="number"&&dr(n,i,a)?(i=0,a=f):(i=i==null?0:Me(i),a=a===t?f:Me(a)),qr(n,i,a)):[]}function pS(n,i){return ra(n,i)}function gS(n,i,a){return Tu(n,i,we(a,2))}function yS(n,i){var a=n==null?0:n.length;if(a){var f=ra(n,i);if(f<a&&Jr(n[f],i))return f}return-1}function _S(n,i){return ra(n,i,!0)}function vS(n,i,a){return Tu(n,i,we(a,2),!0)}function wS(n,i){var a=n==null?0:n.length;if(a){var f=ra(n,i,!0)-1;if(Jr(n[f],i))return f}return-1}function mS(n){return n&&n.length?dp(n):[]}function bS(n,i){return n&&n.length?dp(n,we(i,2)):[]}function ES(n){var i=n==null?0:n.length;return i?qr(n,1,i):[]}function DS(n,i,a){return n&&n.length?(i=a||i===t?1:Me(i),qr(n,0,i<0?0:i)):[]}function SS(n,i,a){var f=n==null?0:n.length;return f?(i=a||i===t?1:Me(i),i=f-i,qr(n,i<0?0:i,f)):[]}function xS(n,i){return n&&n.length?na(n,we(i,3),!1,!0):[]}function IS(n,i){return n&&n.length?na(n,we(i,3)):[]}var OS=Ke(function(n){return Mn(Qt(n,1,Nt,!0))}),PS=Ke(function(n){var i=Hr(n);return Nt(i)&&(i=t),Mn(Qt(n,1,Nt,!0),we(i,2))}),AS=Ke(function(n){var i=Hr(n);return i=typeof i=="function"?i:t,Mn(Qt(n,1,Nt,!0),t,i)});function CS(n){return n&&n.length?Mn(n):[]}function TS(n,i){return n&&n.length?Mn(n,we(i,2)):[]}function RS(n,i){return i=typeof i=="function"?i:t,n&&n.length?Mn(n,t,i):[]}function Yu(n){if(!(n&&n.length))return[];var i=0;return n=Nn(n,function(a){if(Nt(a))return i=Wt(a.length,i),!0}),lu(i,function(a){return mt(n,uu(a))})}function Zp(n,i){if(!(n&&n.length))return[];var a=Yu(n);return i==null?a:mt(a,function(f){return kt(i,t,f)})}var NS=Ke(function(n,i){return Nt(n)?Cs(n,i):[]}),LS=Ke(function(n){return Nu(Nn(n,Nt))}),FS=Ke(function(n){var i=Hr(n);return Nt(i)&&(i=t),Nu(Nn(n,Nt),we(i,2))}),$S=Ke(function(n){var i=Hr(n);return i=typeof i=="function"?i:t,Nu(Nn(n,Nt),t,i)}),US=Ke(Yu);function MS(n,i){return _p(n||[],i||[],As)}function BS(n,i){return _p(n||[],i||[],Ns)}var qS=Ke(function(n){var i=n.length,a=i>1?n[i-1]:t;return a=typeof a=="function"?(n.pop(),a):t,Zp(n,a)});function eg(n){var i=v(n);return i.__chain__=!0,i}function HS(n,i){return i(n),n}function la(n,i){return i(n)}var jS=bn(function(n){var i=n.length,a=i?n[0]:0,f=this.__wrapped__,g=function(w){return mu(w,n)};return i>1||this.__actions__.length||!(f instanceof Je)||!En(a)?this.thru(g):(f=f.slice(a,+a+(i?1:0)),f.__actions__.push({func:la,args:[g],thisArg:t}),new Mr(f,this.__chain__).thru(function(w){return i&&!w.length&&w.push(t),w}))});function zS(){return eg(this)}function KS(){return new Mr(this.value(),this.__chain__)}function WS(){this.__values__===t&&(this.__values__=pg(this.value()));var n=this.__index__>=this.__values__.length,i=n?t:this.__values__[this.__index__++];return{done:n,value:i}}function GS(){return this}function VS(n){for(var i,a=this;a instanceof Xo;){var f=Vp(a);f.__index__=0,f.__values__=t,i?g.__wrapped__=f:i=f;var g=f;a=a.__wrapped__}return g.__wrapped__=n,i}function kS(){var n=this.__wrapped__;if(n instanceof Je){var i=n;return this.__actions__.length&&(i=new Je(this)),i=i.reverse(),i.__actions__.push({func:la,args:[ku],thisArg:t}),new Mr(i,this.__chain__)}return this.thru(ku)}function YS(){return yp(this.__wrapped__,this.__actions__)}var JS=ia(function(n,i,a){it.call(n,a)?++n[a]:wn(n,a,1)});function XS(n,i,a){var f=Re(n)?Ad:H6;return a&&dr(n,i,a)&&(i=t),f(n,we(i,3))}function QS(n,i){var a=Re(n)?Nn:Zd;return a(n,we(i,3))}var ZS=Op(kp),ex=Op(Yp);function tx(n,i){return Qt(da(n,i),1)}function rx(n,i){return Qt(da(n,i),X)}function nx(n,i,a){return a=a===t?1:Me(a),Qt(da(n,i),a)}function tg(n,i){var a=Re(n)?$r:Un;return a(n,we(i,3))}function rg(n,i){var a=Re(n)?E2:Qd;return a(n,we(i,3))}var ix=ia(function(n,i,a){it.call(n,a)?n[a].push(i):wn(n,a,[i])});function sx(n,i,a,f){n=Er(n)?n:ki(n),a=a&&!f?Me(a):0;var g=n.length;return a<0&&(a=Wt(g+a,0)),va(n)?a<=g&&n.indexOf(i,a)>-1:!!g&&$i(n,i,a)>-1}var ox=Ke(function(n,i,a){var f=-1,g=typeof i=="function",w=Er(n)?K(n.length):[];return Un(n,function(A){w[++f]=g?kt(i,A,a):Ts(A,i,a)}),w}),ax=ia(function(n,i,a){wn(n,a,i)});function da(n,i){var a=Re(n)?mt:sp;return a(n,we(i,3))}function cx(n,i,a,f){return n==null?[]:(Re(i)||(i=i==null?[]:[i]),a=f?t:a,Re(a)||(a=a==null?[]:[a]),up(n,i,a))}var ux=ia(function(n,i,a){n[a?0:1].push(i)},function(){return[[],[]]});function hx(n,i,a){var f=Re(n)?au:Nd,g=arguments.length<3;return f(n,we(i,4),a,g,Un)}function fx(n,i,a){var f=Re(n)?D2:Nd,g=arguments.length<3;return f(n,we(i,4),a,g,Qd)}function lx(n,i){var a=Re(n)?Nn:Zd;return a(n,ya(we(i,3)))}function dx(n){var i=Re(n)?kd:sD;return i(n)}function px(n,i,a){(a?dr(n,i,a):i===t)?i=1:i=Me(i);var f=Re(n)?$6:oD;return f(n,i)}function gx(n){var i=Re(n)?U6:cD;return i(n)}function yx(n){if(n==null)return 0;if(Er(n))return va(n)?Mi(n):n.length;var i=nr(n);return i==xe||i==Ie?n.size:Iu(n).length}function _x(n,i,a){var f=Re(n)?cu:uD;return a&&dr(n,i,a)&&(i=t),f(n,we(i,3))}var vx=Ke(function(n,i){if(n==null)return[];var a=i.length;return a>1&&dr(n,i[0],i[1])?i=[]:a>2&&dr(i[0],i[1],i[2])&&(i=[i[0]]),up(n,Qt(i,1),[])}),pa=Q2||function(){return Qe.Date.now()};function wx(n,i){if(typeof i!="function")throw new Ur(h);return n=Me(n),function(){if(--n<1)return i.apply(this,arguments)}}function ng(n,i,a){return i=a?t:i,i=n&&i==null?n.length:i,mn(n,u,t,t,t,t,i)}function ig(n,i){var a;if(typeof i!="function")throw new Ur(h);return n=Me(n),function(){return--n>0&&(a=i.apply(this,arguments)),n<=1&&(i=t),a}}var Ju=Ke(function(n,i,a){var f=z;if(a.length){var g=Fn(a,Gi(Ju));f|=R}return mn(n,f,i,a,g)}),sg=Ke(function(n,i,a){var f=z|ie;if(a.length){var g=Fn(a,Gi(sg));f|=R}return mn(i,f,n,a,g)});function og(n,i,a){i=a?t:i;var f=mn(n,$,t,t,t,t,t,i);return f.placeholder=og.placeholder,f}function ag(n,i,a){i=a?t:i;var f=mn(n,P,t,t,t,t,t,i);return f.placeholder=ag.placeholder,f}function cg(n,i,a){var f,g,w,A,N,B,Q=0,Z=!1,ne=!1,he=!0;if(typeof n!="function")throw new Ur(h);i=jr(i)||0,Et(a)&&(Z=!!a.leading,ne="maxWait"in a,w=ne?Wt(jr(a.maxWait)||0,i):w,he="trailing"in a?!!a.trailing:he);function ye(Lt){var Xr=f,xn=g;return f=g=t,Q=Lt,A=n.apply(xn,Xr),A}function Ee(Lt){return Q=Lt,N=$s(Ve,i),Z?ye(Lt):A}function He(Lt){var Xr=Lt-B,xn=Lt-Q,Og=i-Xr;return ne?rr(Og,w-xn):Og}function De(Lt){var Xr=Lt-B,xn=Lt-Q;return B===t||Xr>=i||Xr<0||ne&&xn>=w}function Ve(){var Lt=pa();if(De(Lt))return Ze(Lt);N=$s(Ve,He(Lt))}function Ze(Lt){return N=t,he&&f?ye(Lt):(f=g=t,A)}function Tr(){N!==t&&vp(N),Q=0,f=B=g=N=t}function pr(){return N===t?A:Ze(pa())}function Rr(){var Lt=pa(),Xr=De(Lt);if(f=arguments,g=this,B=Lt,Xr){if(N===t)return Ee(B);if(ne)return vp(N),N=$s(Ve,i),ye(B)}return N===t&&(N=$s(Ve,i)),A}return Rr.cancel=Tr,Rr.flush=pr,Rr}var mx=Ke(function(n,i){return Xd(n,1,i)}),bx=Ke(function(n,i,a){return Xd(n,jr(i)||0,a)});function Ex(n){return mn(n,V)}function ga(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new Ur(h);var a=function(){var f=arguments,g=i?i.apply(this,f):f[0],w=a.cache;if(w.has(g))return w.get(g);var A=n.apply(this,f);return a.cache=w.set(g,A)||w,A};return a.cache=new(ga.Cache||vn),a}ga.Cache=vn;function ya(n){if(typeof n!="function")throw new Ur(h);return function(){var i=arguments;switch(i.length){case 0:return!n.call(this);case 1:return!n.call(this,i[0]);case 2:return!n.call(this,i[0],i[1]);case 3:return!n.call(this,i[0],i[1],i[2])}return!n.apply(this,i)}}function Dx(n){return ig(2,n)}var Sx=hD(function(n,i){i=i.length==1&&Re(i[0])?mt(i[0],Pr(we())):mt(Qt(i,1),Pr(we()));var a=i.length;return Ke(function(f){for(var g=-1,w=rr(f.length,a);++g<w;)f[g]=i[g].call(this,f[g]);return kt(n,this,f)})}),Xu=Ke(function(n,i){var a=Fn(i,Gi(Xu));return mn(n,R,t,i,a)}),ug=Ke(function(n,i){var a=Fn(i,Gi(ug));return mn(n,E,t,i,a)}),xx=bn(function(n,i){return mn(n,m,t,t,t,i)});function Ix(n,i){if(typeof n!="function")throw new Ur(h);return i=i===t?i:Me(i),Ke(n,i)}function Ox(n,i){if(typeof n!="function")throw new Ur(h);return i=i==null?0:Wt(Me(i),0),Ke(function(a){var f=a[i],g=qn(a,0,i);return f&&Ln(g,f),kt(n,this,g)})}function Px(n,i,a){var f=!0,g=!0;if(typeof n!="function")throw new Ur(h);return Et(a)&&(f="leading"in a?!!a.leading:f,g="trailing"in a?!!a.trailing:g),cg(n,i,{leading:f,maxWait:i,trailing:g})}function Ax(n){return ng(n,1)}function Cx(n,i){return Xu(Fu(i),n)}function Tx(){if(!arguments.length)return[];var n=arguments[0];return Re(n)?n:[n]}function Rx(n){return Br(n,O)}function Nx(n,i){return i=typeof i=="function"?i:t,Br(n,O,i)}function Lx(n){return Br(n,S|O)}function Fx(n,i){return i=typeof i=="function"?i:t,Br(n,S|O,i)}function $x(n,i){return i==null||Jd(n,i,Yt(i))}function Jr(n,i){return n===i||n!==n&&i!==i}var Ux=ca(Du),Mx=ca(function(n,i){return n>=i}),gi=rp(function(){return arguments}())?rp:function(n){return At(n)&&it.call(n,"callee")&&!jd.call(n,"callee")},Re=K.isArray,Bx=fr?Pr(fr):V6;function Er(n){return n!=null&&_a(n.length)&&!Dn(n)}function Nt(n){return At(n)&&Er(n)}function qx(n){return n===!0||n===!1||At(n)&&lr(n)==q}var Hn=e6||ch,Hx=Vr?Pr(Vr):k6;function jx(n){return At(n)&&n.nodeType===1&&!Us(n)}function zx(n){if(n==null)return!0;if(Er(n)&&(Re(n)||typeof n=="string"||typeof n.splice=="function"||Hn(n)||Vi(n)||gi(n)))return!n.length;var i=nr(n);if(i==xe||i==Ie)return!n.size;if(Fs(n))return!Iu(n).length;for(var a in n)if(it.call(n,a))return!1;return!0}function Kx(n,i){return Rs(n,i)}function Wx(n,i,a){a=typeof a=="function"?a:t;var f=a?a(n,i):t;return f===t?Rs(n,i,t,a):!!f}function Qu(n){if(!At(n))return!1;var i=lr(n);return i==T||i==d||typeof n.message=="string"&&typeof n.name=="string"&&!Us(n)}function Gx(n){return typeof n=="number"&&Kd(n)}function Dn(n){if(!Et(n))return!1;var i=lr(n);return i==ae||i==le||i==j||i==_t}function hg(n){return typeof n=="number"&&n==Me(n)}function _a(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=W}function Et(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}function At(n){return n!=null&&typeof n=="object"}var fg=Fr?Pr(Fr):J6;function Vx(n,i){return n===i||xu(n,i,ju(i))}function kx(n,i,a){return a=typeof a=="function"?a:t,xu(n,i,ju(i),a)}function Yx(n){return lg(n)&&n!=+n}function Jx(n){if(ND(n))throw new Ce(c);return np(n)}function Xx(n){return n===null}function Qx(n){return n==null}function lg(n){return typeof n=="number"||At(n)&&lr(n)==je}function Us(n){if(!At(n)||lr(n)!=Ue)return!1;var i=Ko(n);if(i===null)return!0;var a=it.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&qo.call(a)==k2}var Zu=rn?Pr(rn):X6;function Zx(n){return hg(n)&&n>=-W&&n<=W}var dg=Es?Pr(Es):Q6;function va(n){return typeof n=="string"||!Re(n)&&At(n)&&lr(n)==Le}function Cr(n){return typeof n=="symbol"||At(n)&&lr(n)==Fe}var Vi=ai?Pr(ai):Z6;function eI(n){return n===t}function tI(n){return At(n)&&nr(n)==Pe}function rI(n){return At(n)&&lr(n)==$e}var nI=ca(Ou),iI=ca(function(n,i){return n<=i});function pg(n){if(!n)return[];if(Er(n))return va(n)?kr(n):br(n);if(Ss&&n[Ss])return $2(n[Ss]());var i=nr(n),a=i==xe?pu:i==Ie?Uo:ki;return a(n)}function Sn(n){if(!n)return n===0?n:0;if(n=jr(n),n===X||n===-X){var i=n<0?-1:1;return i*G}return n===n?n:0}function Me(n){var i=Sn(n),a=i%1;return i===i?a?i-a:i:0}function gg(n){return n?fi(Me(n),0,re):0}function jr(n){if(typeof n=="number")return n;if(Cr(n))return J;if(Et(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=Et(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=Ld(n);var a=zc.test(n);return a||Wc.test(n)?Te(n.slice(2),a?2:8):jc.test(n)?J:+n}function yg(n){return sn(n,Dr(n))}function sI(n){return n?fi(Me(n),-W,W):n===0?n:0}function nt(n){return n==null?"":Ar(n)}var oI=Ki(function(n,i){if(Fs(i)||Er(i)){sn(i,Yt(i),n);return}for(var a in i)it.call(i,a)&&As(n,a,i[a])}),_g=Ki(function(n,i){sn(i,Dr(i),n)}),wa=Ki(function(n,i,a,f){sn(i,Dr(i),n,f)}),aI=Ki(function(n,i,a,f){sn(i,Yt(i),n,f)}),cI=bn(mu);function uI(n,i){var a=zi(n);return i==null?a:Yd(a,i)}var hI=Ke(function(n,i){n=ht(n);var a=-1,f=i.length,g=f>2?i[2]:t;for(g&&dr(i[0],i[1],g)&&(f=1);++a<f;)for(var w=i[a],A=Dr(w),N=-1,B=A.length;++N<B;){var Q=A[N],Z=n[Q];(Z===t||Jr(Z,qi[Q])&&!it.call(n,Q))&&(n[Q]=w[Q])}return n}),fI=Ke(function(n){return n.push(t,Lp),kt(vg,t,n)});function lI(n,i){return Cd(n,we(i,3),nn)}function dI(n,i){return Cd(n,we(i,3),Eu)}function pI(n,i){return n==null?n:bu(n,we(i,3),Dr)}function gI(n,i){return n==null?n:ep(n,we(i,3),Dr)}function yI(n,i){return n&&nn(n,we(i,3))}function _I(n,i){return n&&Eu(n,we(i,3))}function vI(n){return n==null?[]:ea(n,Yt(n))}function wI(n){return n==null?[]:ea(n,Dr(n))}function eh(n,i,a){var f=n==null?t:li(n,i);return f===t?a:f}function mI(n,i){return n!=null&&Up(n,i,z6)}function th(n,i){return n!=null&&Up(n,i,K6)}var bI=Ap(function(n,i,a){i!=null&&typeof i.toString!="function"&&(i=Ho.call(i)),n[i]=a},nh(Sr)),EI=Ap(function(n,i,a){i!=null&&typeof i.toString!="function"&&(i=Ho.call(i)),it.call(n,i)?n[i].push(a):n[i]=[a]},we),DI=Ke(Ts);function Yt(n){return Er(n)?Vd(n):Iu(n)}function Dr(n){return Er(n)?Vd(n,!0):eD(n)}function SI(n,i){var a={};return i=we(i,3),nn(n,function(f,g,w){wn(a,i(f,g,w),f)}),a}function xI(n,i){var a={};return i=we(i,3),nn(n,function(f,g,w){wn(a,g,i(f,g,w))}),a}var II=Ki(function(n,i,a){ta(n,i,a)}),vg=Ki(function(n,i,a,f){ta(n,i,a,f)}),OI=bn(function(n,i){var a={};if(n==null)return a;var f=!1;i=mt(i,function(w){return w=Bn(w,n),f||(f=w.length>1),w}),sn(n,qu(n),a),f&&(a=Br(a,S|D|O,bD));for(var g=i.length;g--;)Ru(a,i[g]);return a});function PI(n,i){return wg(n,ya(we(i)))}var AI=bn(function(n,i){return n==null?{}:rD(n,i)});function wg(n,i){if(n==null)return{};var a=mt(qu(n),function(f){return[f]});return i=we(i),hp(n,a,function(f,g){return i(f,g[0])})}function CI(n,i,a){i=Bn(i,n);var f=-1,g=i.length;for(g||(g=1,n=t);++f<g;){var w=n==null?t:n[on(i[f])];w===t&&(f=g,w=a),n=Dn(w)?w.call(n):w}return n}function TI(n,i,a){return n==null?n:Ns(n,i,a)}function RI(n,i,a,f){return f=typeof f=="function"?f:t,n==null?n:Ns(n,i,a,f)}var mg=Rp(Yt),bg=Rp(Dr);function NI(n,i,a){var f=Re(n),g=f||Hn(n)||Vi(n);if(i=we(i,4),a==null){var w=n&&n.constructor;g?a=f?new w:[]:Et(n)?a=Dn(w)?zi(Ko(n)):{}:a={}}return(g?$r:nn)(n,function(A,N,B){return i(a,A,N,B)}),a}function LI(n,i){return n==null?!0:Ru(n,i)}function FI(n,i,a){return n==null?n:gp(n,i,Fu(a))}function $I(n,i,a,f){return f=typeof f=="function"?f:t,n==null?n:gp(n,i,Fu(a),f)}function ki(n){return n==null?[]:du(n,Yt(n))}function UI(n){return n==null?[]:du(n,Dr(n))}function MI(n,i,a){return a===t&&(a=i,i=t),a!==t&&(a=jr(a),a=a===a?a:0),i!==t&&(i=jr(i),i=i===i?i:0),fi(jr(n),i,a)}function BI(n,i,a){return i=Sn(i),a===t?(a=i,i=0):a=Sn(a),n=jr(n),W6(n,i,a)}function qI(n,i,a){if(a&&typeof a!="boolean"&&dr(n,i,a)&&(i=a=t),a===t&&(typeof i=="boolean"?(a=i,i=t):typeof n=="boolean"&&(a=n,n=t)),n===t&&i===t?(n=0,i=1):(n=Sn(n),i===t?(i=n,n=0):i=Sn(i)),n>i){var f=n;n=i,i=f}if(a||n%1||i%1){var g=Wd();return rr(n+g*(i-n+ct("1e-"+((g+"").length-1))),i)}return Au(n,i)}var HI=Wi(function(n,i,a){return i=i.toLowerCase(),n+(a?Eg(i):i)});function Eg(n){return rh(nt(n).toLowerCase())}function Dg(n){return n=nt(n),n&&n.replace(gn,T2).replace(iu,"")}function jI(n,i,a){n=nt(n),i=Ar(i);var f=n.length;a=a===t?f:fi(Me(a),0,f);var g=a;return a-=i.length,a>=0&&n.slice(a,g)==i}function zI(n){return n=nt(n),n&&vt.test(n)?n.replace(ri,R2):n}function KI(n){return n=nt(n),n&&Bt.test(n)?n.replace(It,"\\$&"):n}var WI=Wi(function(n,i,a){return n+(a?"-":"")+i.toLowerCase()}),GI=Wi(function(n,i,a){return n+(a?" ":"")+i.toLowerCase()}),VI=Ip("toLowerCase");function kI(n,i,a){n=nt(n),i=Me(i);var f=i?Mi(n):0;if(!i||f>=i)return n;var g=(i-f)/2;return aa(ko(g),a)+n+aa(Vo(g),a)}function YI(n,i,a){n=nt(n),i=Me(i);var f=i?Mi(n):0;return i&&f<i?n+aa(i-f,a):n}function JI(n,i,a){n=nt(n),i=Me(i);var f=i?Mi(n):0;return i&&f<i?aa(i-f,a)+n:n}function XI(n,i,a){return a||i==null?i=0:i&&(i=+i),i6(nt(n).replace(Ot,""),i||0)}function QI(n,i,a){return(a?dr(n,i,a):i===t)?i=1:i=Me(i),Cu(nt(n),i)}function ZI(){var n=arguments,i=nt(n[0]);return n.length<3?i:i.replace(n[1],n[2])}var e5=Wi(function(n,i,a){return n+(a?"_":"")+i.toLowerCase()});function t5(n,i,a){return a&&typeof a!="number"&&dr(n,i,a)&&(i=a=t),a=a===t?re:a>>>0,a?(n=nt(n),n&&(typeof i=="string"||i!=null&&!Zu(i))&&(i=Ar(i),!i&&Ui(n))?qn(kr(n),0,a):n.split(i,a)):[]}var r5=Wi(function(n,i,a){return n+(a?" ":"")+rh(i)});function n5(n,i,a){return n=nt(n),a=a==null?0:fi(Me(a),0,n.length),i=Ar(i),n.slice(a,a+i.length)==i}function i5(n,i,a){var f=v.templateSettings;a&&dr(n,i,a)&&(i=t),n=nt(n),i=wa({},i,f,Np);var g=wa({},i.imports,f.imports,Np),w=Yt(g),A=du(g,w),N,B,Q=0,Z=i.interpolate||Ai,ne="__p += '",he=gu((i.escape||Ai).source+"|"+Z.source+"|"+(Z===bt?Hc:Ai).source+"|"+(i.evaluate||Ai).source+"|$","g"),ye="//# sourceURL="+(it.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++su+"]")+`
`;n.replace(he,function(De,Ve,Ze,Tr,pr,Rr){return Ze||(Ze=Tr),ne+=n.slice(Q,Rr).replace(Vc,N2),Ve&&(N=!0,ne+=`' +
__e(`+Ve+`) +
'`),pr&&(B=!0,ne+=`';
`+pr+`;
__p += '`),Ze&&(ne+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),Q=Rr+De.length,De}),ne+=`';
`;var Ee=it.call(i,"variable")&&i.variable;if(!Ee)ne=`with (obj) {
`+ne+`
}
`;else if(Bc.test(Ee))throw new Ce(l);ne=(B?ne.replace(en,""):ne).replace(hr,"$1").replace(pn,"$1;"),ne="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var He=xg(function(){return rt(w,ye+"return "+ne).apply(t,A)});if(He.source=ne,Qu(He))throw He;return He}function s5(n){return nt(n).toLowerCase()}function o5(n){return nt(n).toUpperCase()}function a5(n,i,a){if(n=nt(n),n&&(a||i===t))return Ld(n);if(!n||!(i=Ar(i)))return n;var f=kr(n),g=kr(i),w=Fd(f,g),A=$d(f,g)+1;return qn(f,w,A).join("")}function c5(n,i,a){if(n=nt(n),n&&(a||i===t))return n.slice(0,Md(n)+1);if(!n||!(i=Ar(i)))return n;var f=kr(n),g=$d(f,kr(i))+1;return qn(f,0,g).join("")}function u5(n,i,a){if(n=nt(n),n&&(a||i===t))return n.replace(Ot,"");if(!n||!(i=Ar(i)))return n;var f=kr(n),g=Fd(f,kr(i));return qn(f,g).join("")}function h5(n,i){var a=Y,f=se;if(Et(i)){var g="separator"in i?i.separator:g;a="length"in i?Me(i.length):a,f="omission"in i?Ar(i.omission):f}n=nt(n);var w=n.length;if(Ui(n)){var A=kr(n);w=A.length}if(a>=w)return n;var N=a-Mi(f);if(N<1)return f;var B=A?qn(A,0,N).join(""):n.slice(0,N);if(g===t)return B+f;if(A&&(N+=B.length-N),Zu(g)){if(n.slice(N).search(g)){var Q,Z=B;for(g.global||(g=gu(g.source,nt(Lr.exec(g))+"g")),g.lastIndex=0;Q=g.exec(Z);)var ne=Q.index;B=B.slice(0,ne===t?N:ne)}}else if(n.indexOf(Ar(g),N)!=N){var he=B.lastIndexOf(g);he>-1&&(B=B.slice(0,he))}return B+f}function f5(n){return n=nt(n),n&&Dt.test(n)?n.replace(Tn,q2):n}var l5=Wi(function(n,i,a){return n+(a?" ":"")+i.toUpperCase()}),rh=Ip("toUpperCase");function Sg(n,i,a){return n=nt(n),i=a?t:i,i===t?F2(n)?z2(n):I2(n):n.match(i)||[]}var xg=Ke(function(n,i){try{return kt(n,t,i)}catch(a){return Qu(a)?a:new Ce(a)}}),d5=bn(function(n,i){return $r(i,function(a){a=on(a),wn(n,a,Ju(n[a],n))}),n});function p5(n){var i=n==null?0:n.length,a=we();return n=i?mt(n,function(f){if(typeof f[1]!="function")throw new Ur(h);return[a(f[0]),f[1]]}):[],Ke(function(f){for(var g=-1;++g<i;){var w=n[g];if(kt(w[0],this,f))return kt(w[1],this,f)}})}function g5(n){return q6(Br(n,S))}function nh(n){return function(){return n}}function y5(n,i){return n==null||n!==n?i:n}var _5=Pp(),v5=Pp(!0);function Sr(n){return n}function ih(n){return ip(typeof n=="function"?n:Br(n,S))}function w5(n){return op(Br(n,S))}function m5(n,i){return ap(n,Br(i,S))}var b5=Ke(function(n,i){return function(a){return Ts(a,n,i)}}),E5=Ke(function(n,i){return function(a){return Ts(n,a,i)}});function sh(n,i,a){var f=Yt(i),g=ea(i,f);a==null&&!(Et(i)&&(g.length||!f.length))&&(a=i,i=n,n=this,g=ea(i,Yt(i)));var w=!(Et(a)&&"chain"in a)||!!a.chain,A=Dn(n);return $r(g,function(N){var B=i[N];n[N]=B,A&&(n.prototype[N]=function(){var Q=this.__chain__;if(w||Q){var Z=n(this.__wrapped__),ne=Z.__actions__=br(this.__actions__);return ne.push({func:B,args:arguments,thisArg:n}),Z.__chain__=Q,Z}return B.apply(n,Ln([this.value()],arguments))})}),n}function D5(){return Qe._===this&&(Qe._=Y2),this}function oh(){}function S5(n){return n=Me(n),Ke(function(i){return cp(i,n)})}var x5=Uu(mt),I5=Uu(Ad),O5=Uu(cu);function Ig(n){return Ku(n)?uu(on(n)):nD(n)}function P5(n){return function(i){return n==null?t:li(n,i)}}var A5=Cp(),C5=Cp(!0);function ah(){return[]}function ch(){return!1}function T5(){return{}}function R5(){return""}function N5(){return!0}function L5(n,i){if(n=Me(n),n<1||n>W)return[];var a=re,f=rr(n,re);i=we(i),n-=re;for(var g=lu(f,i);++a<n;)i(a);return g}function F5(n){return Re(n)?mt(n,on):Cr(n)?[n]:br(Gp(nt(n)))}function $5(n){var i=++V2;return nt(n)+i}var U5=oa(function(n,i){return n+i},0),M5=Mu("ceil"),B5=oa(function(n,i){return n/i},1),q5=Mu("floor");function H5(n){return n&&n.length?Zo(n,Sr,Du):t}function j5(n,i){return n&&n.length?Zo(n,we(i,2),Du):t}function z5(n){return Rd(n,Sr)}function K5(n,i){return Rd(n,we(i,2))}function W5(n){return n&&n.length?Zo(n,Sr,Ou):t}function G5(n,i){return n&&n.length?Zo(n,we(i,2),Ou):t}var V5=oa(function(n,i){return n*i},1),k5=Mu("round"),Y5=oa(function(n,i){return n-i},0);function J5(n){return n&&n.length?fu(n,Sr):0}function X5(n,i){return n&&n.length?fu(n,we(i,2)):0}return v.after=wx,v.ary=ng,v.assign=oI,v.assignIn=_g,v.assignInWith=wa,v.assignWith=aI,v.at=cI,v.before=ig,v.bind=Ju,v.bindAll=d5,v.bindKey=sg,v.castArray=Tx,v.chain=eg,v.chunk=qD,v.compact=HD,v.concat=jD,v.cond=p5,v.conforms=g5,v.constant=nh,v.countBy=JS,v.create=uI,v.curry=og,v.curryRight=ag,v.debounce=cg,v.defaults=hI,v.defaultsDeep=fI,v.defer=mx,v.delay=bx,v.difference=zD,v.differenceBy=KD,v.differenceWith=WD,v.drop=GD,v.dropRight=VD,v.dropRightWhile=kD,v.dropWhile=YD,v.fill=JD,v.filter=QS,v.flatMap=tx,v.flatMapDeep=rx,v.flatMapDepth=nx,v.flatten=Jp,v.flattenDeep=XD,v.flattenDepth=QD,v.flip=Ex,v.flow=_5,v.flowRight=v5,v.fromPairs=ZD,v.functions=vI,v.functionsIn=wI,v.groupBy=ix,v.initial=tS,v.intersection=rS,v.intersectionBy=nS,v.intersectionWith=iS,v.invert=bI,v.invertBy=EI,v.invokeMap=ox,v.iteratee=ih,v.keyBy=ax,v.keys=Yt,v.keysIn=Dr,v.map=da,v.mapKeys=SI,v.mapValues=xI,v.matches=w5,v.matchesProperty=m5,v.memoize=ga,v.merge=II,v.mergeWith=vg,v.method=b5,v.methodOf=E5,v.mixin=sh,v.negate=ya,v.nthArg=S5,v.omit=OI,v.omitBy=PI,v.once=Dx,v.orderBy=cx,v.over=x5,v.overArgs=Sx,v.overEvery=I5,v.overSome=O5,v.partial=Xu,v.partialRight=ug,v.partition=ux,v.pick=AI,v.pickBy=wg,v.property=Ig,v.propertyOf=P5,v.pull=cS,v.pullAll=Qp,v.pullAllBy=uS,v.pullAllWith=hS,v.pullAt=fS,v.range=A5,v.rangeRight=C5,v.rearg=xx,v.reject=lx,v.remove=lS,v.rest=Ix,v.reverse=ku,v.sampleSize=px,v.set=TI,v.setWith=RI,v.shuffle=gx,v.slice=dS,v.sortBy=vx,v.sortedUniq=mS,v.sortedUniqBy=bS,v.split=t5,v.spread=Ox,v.tail=ES,v.take=DS,v.takeRight=SS,v.takeRightWhile=xS,v.takeWhile=IS,v.tap=HS,v.throttle=Px,v.thru=la,v.toArray=pg,v.toPairs=mg,v.toPairsIn=bg,v.toPath=F5,v.toPlainObject=yg,v.transform=NI,v.unary=Ax,v.union=OS,v.unionBy=PS,v.unionWith=AS,v.uniq=CS,v.uniqBy=TS,v.uniqWith=RS,v.unset=LI,v.unzip=Yu,v.unzipWith=Zp,v.update=FI,v.updateWith=$I,v.values=ki,v.valuesIn=UI,v.without=NS,v.words=Sg,v.wrap=Cx,v.xor=LS,v.xorBy=FS,v.xorWith=$S,v.zip=US,v.zipObject=MS,v.zipObjectDeep=BS,v.zipWith=qS,v.entries=mg,v.entriesIn=bg,v.extend=_g,v.extendWith=wa,sh(v,v),v.add=U5,v.attempt=xg,v.camelCase=HI,v.capitalize=Eg,v.ceil=M5,v.clamp=MI,v.clone=Rx,v.cloneDeep=Lx,v.cloneDeepWith=Fx,v.cloneWith=Nx,v.conformsTo=$x,v.deburr=Dg,v.defaultTo=y5,v.divide=B5,v.endsWith=jI,v.eq=Jr,v.escape=zI,v.escapeRegExp=KI,v.every=XS,v.find=ZS,v.findIndex=kp,v.findKey=lI,v.findLast=ex,v.findLastIndex=Yp,v.findLastKey=dI,v.floor=q5,v.forEach=tg,v.forEachRight=rg,v.forIn=pI,v.forInRight=gI,v.forOwn=yI,v.forOwnRight=_I,v.get=eh,v.gt=Ux,v.gte=Mx,v.has=mI,v.hasIn=th,v.head=Xp,v.identity=Sr,v.includes=sx,v.indexOf=eS,v.inRange=BI,v.invoke=DI,v.isArguments=gi,v.isArray=Re,v.isArrayBuffer=Bx,v.isArrayLike=Er,v.isArrayLikeObject=Nt,v.isBoolean=qx,v.isBuffer=Hn,v.isDate=Hx,v.isElement=jx,v.isEmpty=zx,v.isEqual=Kx,v.isEqualWith=Wx,v.isError=Qu,v.isFinite=Gx,v.isFunction=Dn,v.isInteger=hg,v.isLength=_a,v.isMap=fg,v.isMatch=Vx,v.isMatchWith=kx,v.isNaN=Yx,v.isNative=Jx,v.isNil=Qx,v.isNull=Xx,v.isNumber=lg,v.isObject=Et,v.isObjectLike=At,v.isPlainObject=Us,v.isRegExp=Zu,v.isSafeInteger=Zx,v.isSet=dg,v.isString=va,v.isSymbol=Cr,v.isTypedArray=Vi,v.isUndefined=eI,v.isWeakMap=tI,v.isWeakSet=rI,v.join=sS,v.kebabCase=WI,v.last=Hr,v.lastIndexOf=oS,v.lowerCase=GI,v.lowerFirst=VI,v.lt=nI,v.lte=iI,v.max=H5,v.maxBy=j5,v.mean=z5,v.meanBy=K5,v.min=W5,v.minBy=G5,v.stubArray=ah,v.stubFalse=ch,v.stubObject=T5,v.stubString=R5,v.stubTrue=N5,v.multiply=V5,v.nth=aS,v.noConflict=D5,v.noop=oh,v.now=pa,v.pad=kI,v.padEnd=YI,v.padStart=JI,v.parseInt=XI,v.random=qI,v.reduce=hx,v.reduceRight=fx,v.repeat=QI,v.replace=ZI,v.result=CI,v.round=k5,v.runInContext=U,v.sample=dx,v.size=yx,v.snakeCase=e5,v.some=_x,v.sortedIndex=pS,v.sortedIndexBy=gS,v.sortedIndexOf=yS,v.sortedLastIndex=_S,v.sortedLastIndexBy=vS,v.sortedLastIndexOf=wS,v.startCase=r5,v.startsWith=n5,v.subtract=Y5,v.sum=J5,v.sumBy=X5,v.template=i5,v.times=L5,v.toFinite=Sn,v.toInteger=Me,v.toLength=gg,v.toLower=s5,v.toNumber=jr,v.toSafeInteger=sI,v.toString=nt,v.toUpper=o5,v.trim=a5,v.trimEnd=c5,v.trimStart=u5,v.truncate=h5,v.unescape=f5,v.uniqueId=$5,v.upperCase=l5,v.upperFirst=rh,v.each=tg,v.eachRight=rg,v.first=Xp,sh(v,function(){var n={};return nn(v,function(i,a){it.call(v.prototype,a)||(n[a]=i)}),n}(),{chain:!1}),v.VERSION=s,$r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){v[n].placeholder=v}),$r(["drop","take"],function(n,i){Je.prototype[n]=function(a){a=a===t?1:Wt(Me(a),0);var f=this.__filtered__&&!i?new Je(this):this.clone();return f.__filtered__?f.__takeCount__=rr(a,f.__takeCount__):f.__views__.push({size:rr(a,re),type:n+(f.__dir__<0?"Right":"")}),f},Je.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),$r(["filter","map","takeWhile"],function(n,i){var a=i+1,f=a==b||a==ee;Je.prototype[n]=function(g){var w=this.clone();return w.__iteratees__.push({iteratee:we(g,3),type:a}),w.__filtered__=w.__filtered__||f,w}}),$r(["head","last"],function(n,i){var a="take"+(i?"Right":"");Je.prototype[n]=function(){return this[a](1).value()[0]}}),$r(["initial","tail"],function(n,i){var a="drop"+(i?"":"Right");Je.prototype[n]=function(){return this.__filtered__?new Je(this):this[a](1)}}),Je.prototype.compact=function(){return this.filter(Sr)},Je.prototype.find=function(n){return this.filter(n).head()},Je.prototype.findLast=function(n){return this.reverse().find(n)},Je.prototype.invokeMap=Ke(function(n,i){return typeof n=="function"?new Je(this):this.map(function(a){return Ts(a,n,i)})}),Je.prototype.reject=function(n){return this.filter(ya(we(n)))},Je.prototype.slice=function(n,i){n=Me(n);var a=this;return a.__filtered__&&(n>0||i<0)?new Je(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),i!==t&&(i=Me(i),a=i<0?a.dropRight(-i):a.take(i-n)),a)},Je.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Je.prototype.toArray=function(){return this.take(re)},nn(Je.prototype,function(n,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),f=/^(?:head|last)$/.test(i),g=v[f?"take"+(i=="last"?"Right":""):i],w=f||/^find/.test(i);g&&(v.prototype[i]=function(){var A=this.__wrapped__,N=f?[1]:arguments,B=A instanceof Je,Q=N[0],Z=B||Re(A),ne=function(Ve){var Ze=g.apply(v,Ln([Ve],N));return f&&he?Ze[0]:Ze};Z&&a&&typeof Q=="function"&&Q.length!=1&&(B=Z=!1);var he=this.__chain__,ye=!!this.__actions__.length,Ee=w&&!he,He=B&&!ye;if(!w&&Z){A=He?A:new Je(this);var De=n.apply(A,N);return De.__actions__.push({func:la,args:[ne],thisArg:t}),new Mr(De,he)}return Ee&&He?n.apply(this,N):(De=this.thru(ne),Ee?f?De.value()[0]:De.value():De)})}),$r(["pop","push","shift","sort","splice","unshift"],function(n){var i=Mo[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",f=/^(?:pop|shift)$/.test(n);v.prototype[n]=function(){var g=arguments;if(f&&!this.__chain__){var w=this.value();return i.apply(Re(w)?w:[],g)}return this[a](function(A){return i.apply(Re(A)?A:[],g)})}}),nn(Je.prototype,function(n,i){var a=v[i];if(a){var f=a.name+"";it.call(ji,f)||(ji[f]=[]),ji[f].push({name:i,func:a})}}),ji[sa(t,ie).name]=[{name:"wrapper",func:t}],Je.prototype.clone=f6,Je.prototype.reverse=l6,Je.prototype.value=d6,v.prototype.at=jS,v.prototype.chain=zS,v.prototype.commit=KS,v.prototype.next=WS,v.prototype.plant=VS,v.prototype.reverse=kS,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=YS,v.prototype.first=v.prototype.head,Ss&&(v.prototype[Ss]=GS),v},Bi=K2();Rt?((Rt.exports=Bi)._=Bi,ut._=Bi):Qe._=Bi}).call(Ft)})(Lc,Lc.exports);var X3=Object.defineProperty,Q3=Object.defineProperties,Z3=Object.getOwnPropertyDescriptors,wd=Object.getOwnPropertySymbols,e2=Object.prototype.hasOwnProperty,t2=Object.prototype.propertyIsEnumerable,md=(r,e,t)=>e in r?X3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lo=(r,e)=>{for(var t in e||(e={}))e2.call(e,t)&&md(r,t,e[t]);if(wd)for(var t of wd(e))t2.call(e,t)&&md(r,t,e[t]);return r},r2=(r,e)=>Q3(r,Z3(e));function An(r,e,t){var s;const o=Y1(r);return((s=e.rpcMap)==null?void 0:s[o.reference])||`${J3}?chainId=${o.namespace}:${o.reference}&projectId=${t}`}function ti(r){return r.includes(":")?r.split(":")[1]:r}function bd(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function n2(r,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(r));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function i2(r={},e={}){const t=Ed(r),s=Ed(e);return Lc.exports.merge(t,s)}function Ed(r){var e,t,s,o;const c={};if(!Ii(r))return c;for(const[h,l]of Object.entries(r)){const y=lc(h)?[h]:l.chains,p=l.methods||[],_=l.events||[],S=l.rpcMap||{},D=hs(h);c[D]=r2(lo(lo({},c[D]),l),{chains:hc(y,(e=c[D])==null?void 0:e.chains),methods:hc(p,(t=c[D])==null?void 0:t.methods),events:hc(_,(s=c[D])==null?void 0:s.events),rpcMap:lo(lo({},S),(o=c[D])==null?void 0:o.rpcMap)})}return c}function s2(r){return r.includes(":")?r.split(":")[2]:r}function o2(r){const e={};for(const[t,s]of Object.entries(r)){const o=s.methods||[],c=s.events||[],h=s.accounts||[],l=lc(t)?[t]:s.chains?s.chains:bd(s.accounts);e[t]={chains:l,methods:o,events:c,accounts:h}}return e}function Fc(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):r.includes(":")?Number(r.split(":")[1]):Number(r)}const Dd={},gt=r=>Dd[r],$c=(r,e)=>{Dd[r]=e};var Uc={exports:{}};(function(r,e){var t=typeof self<"u"?self:Ft,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(h){var l={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function y(b){return b&&DataView.prototype.isPrototypeOf(b)}if(l.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=ArrayBuffer.isView||function(b){return b&&p.indexOf(Object.prototype.toString.call(b))>-1};function S(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function D(b){return typeof b!="string"&&(b=String(b)),b}function O(b){var C={next:function(){var ee=b.shift();return{done:ee===void 0,value:ee}}};return l.iterable&&(C[Symbol.iterator]=function(){return C}),C}function I(b){this.map={},b instanceof I?b.forEach(function(C,ee){this.append(ee,C)},this):Array.isArray(b)?b.forEach(function(C){this.append(C[0],C[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(C){this.append(C,b[C])},this)}I.prototype.append=function(b,C){b=S(b),C=D(C);var ee=this.map[b];this.map[b]=ee?ee+", "+C:C},I.prototype.delete=function(b){delete this.map[S(b)]},I.prototype.get=function(b){return b=S(b),this.has(b)?this.map[b]:null},I.prototype.has=function(b){return this.map.hasOwnProperty(S(b))},I.prototype.set=function(b,C){this.map[S(b)]=D(C)},I.prototype.forEach=function(b,C){for(var ee in this.map)this.map.hasOwnProperty(ee)&&b.call(C,this.map[ee],ee,this)},I.prototype.keys=function(){var b=[];return this.forEach(function(C,ee){b.push(ee)}),O(b)},I.prototype.values=function(){var b=[];return this.forEach(function(C){b.push(C)}),O(b)},I.prototype.entries=function(){var b=[];return this.forEach(function(C,ee){b.push([ee,C])}),O(b)},l.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function H(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function z(b){return new Promise(function(C,ee){b.onload=function(){C(b.result)},b.onerror=function(){ee(b.error)}})}function ie(b){var C=new FileReader,ee=z(C);return C.readAsArrayBuffer(b),ee}function L(b){var C=new FileReader,ee=z(C);return C.readAsText(b),ee}function $(b){for(var C=new Uint8Array(b),ee=new Array(C.length),X=0;X<C.length;X++)ee[X]=String.fromCharCode(C[X]);return ee.join("")}function P(b){if(b.slice)return b.slice(0);var C=new Uint8Array(b.byteLength);return C.set(new Uint8Array(b)),C.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(b){this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:l.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:l.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():l.arrayBuffer&&l.blob&&y(b)?(this._bodyArrayBuffer=P(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||_(b))?this._bodyArrayBuffer=P(b):this._bodyText=b=Object.prototype.toString.call(b):this._bodyText="",this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var b=H(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?H(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ie)}),this.text=function(){var b=H(this);if(b)return b;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(b){var C=b.toUpperCase();return E.indexOf(C)>-1?C:b}function m(b,C){C=C||{};var ee=C.body;if(b instanceof m){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,C.headers||(this.headers=new I(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!ee&&b._bodyInit!=null&&(ee=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new I(C.headers)),this.method=u(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function V(b){var C=new FormData;return b.trim().split("&").forEach(function(ee){if(ee){var X=ee.split("="),W=X.shift().replace(/\+/g," "),G=X.join("=").replace(/\+/g," ");C.append(decodeURIComponent(W),decodeURIComponent(G))}}),C}function Y(b){var C=new I,ee=b.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(X){var W=X.split(":"),G=W.shift().trim();if(G){var J=W.join(":").trim();C.append(G,J)}}),C}R.call(m.prototype);function se(b,C){C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"OK",this.headers=new I(C.headers),this.url=C.url||"",this._initBody(b)}R.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},se.error=function(){var b=new se(null,{status:0,statusText:""});return b.type="error",b};var ue=[301,302,303,307,308];se.redirect=function(b,C){if(ue.indexOf(C)===-1)throw new RangeError("Invalid status code");return new se(null,{status:C,headers:{location:b}})},h.DOMException=c.DOMException;try{new h.DOMException}catch{h.DOMException=function(C,ee){this.message=C,this.name=ee;var X=Error(C);this.stack=X.stack},h.DOMException.prototype=Object.create(Error.prototype),h.DOMException.prototype.constructor=h.DOMException}function de(b,C){return new Promise(function(ee,X){var W=new m(b,C);if(W.signal&&W.signal.aborted)return X(new h.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function J(){G.abort()}G.onload=function(){var re={status:G.status,statusText:G.statusText,headers:Y(G.getAllResponseHeaders()||"")};re.url="responseURL"in G?G.responseURL:re.headers.get("X-Request-URL");var me="response"in G?G.response:G.responseText;ee(new se(me,re))},G.onerror=function(){X(new TypeError("Network request failed"))},G.ontimeout=function(){X(new TypeError("Network request failed"))},G.onabort=function(){X(new h.DOMException("Aborted","AbortError"))},G.open(W.method,W.url,!0),W.credentials==="include"?G.withCredentials=!0:W.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&l.blob&&(G.responseType="blob"),W.headers.forEach(function(re,me){G.setRequestHeader(me,re)}),W.signal&&(W.signal.addEventListener("abort",J),G.onreadystatechange=function(){G.readyState===4&&W.signal.removeEventListener("abort",J)}),G.send(typeof W._bodyInit>"u"?null:W._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=I,c.Request=m,c.Response=se),h.Headers=I,h.Request=m,h.Response=se,h.fetch=de,Object.defineProperty(h,"__esModule",{value:!0}),h})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,r.exports=e})(Uc,Uc.exports);var Sd=Pg(Uc.exports);const xd={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},Id=10;class Cn{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Zt.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!Sl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=Wn(e),c=await(await Sd(this.url,Object.assign(Object.assign({},xd),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!Sl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Wn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Sd(e,Object.assign(Object.assign({},xd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ji(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ao(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return _l(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Id&&this.events.setMaxListeners(Id)}}class a2{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=ti(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||An(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Cn(s,gt("disableProviderPing")))}}class c2{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||An(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Cn(s,gt("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=parseInt(ti(t));e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class u2{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=ti(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||An(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Cn(s,gt("disableProviderPing")))}}class h2{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=ti(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||An(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Cn(s,gt("disableProviderPing")))}}class f2{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t),o=ti(t);e[o]=this.createHttpProvider(o,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Cn(s,gt("disableProviderPing")))}}class l2{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=ti(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||An(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Cn(s,gt("disableProviderPing")))}}class d2{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=ti(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||An(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Cn(s,gt("disableProviderPing")))}}class p2{constructor(e){this.name="near",this.namespace=e.namespace,this.events=gt("events"),this.client=gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||An(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(dn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||An(e,this.namespace);return typeof s>"u"?void 0:new hn(new Cn(s,gt("disableProviderPing")))}}var g2=Object.defineProperty,y2=Object.defineProperties,_2=Object.getOwnPropertyDescriptors,Od=Object.getOwnPropertySymbols,v2=Object.prototype.hasOwnProperty,w2=Object.prototype.propertyIsEnumerable,Pd=(r,e,t)=>e in r?g2(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,po=(r,e)=>{for(var t in e||(e={}))v2.call(e,t)&&Pd(r,t,e[t]);if(Od)for(var t of Od(e))w2.call(e,t)&&Pd(r,t,e[t]);return r},Mc=(r,e)=>y2(r,_2(e));class go{constructor(e){this.events=new Zt.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ke.pino(ke.getDefaultLoggerOptions({level:e?.logger||_d})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new go(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:po({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){const o=new Date().getTime();this.request(e,s).then(c=>t(null,oo(o,c))).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ct("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=o2(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==pd)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(ei(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Nc.init({logger:this.providerOpts.logger||_d,relayUrl:this.providerOpts.relayUrl||V3,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>hs(t)))];$c("client",this.client),$c("events",this.events),$c("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=n2(t,this.session),o=bd(s),c=i2(this.namespaces,this.optionalNamespaces),h=Mc(po({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new c2({namespace:h});break;case"solana":this.rpcProviders[t]=new u2({namespace:h});break;case"cosmos":this.rpcProviders[t]=new h2({namespace:h});break;case"polkadot":this.rpcProviders[t]=new a2({namespace:h});break;case"cip34":this.rpcProviders[t]=new f2({namespace:h});break;case"elrond":this.rpcProviders[t]=new l2({namespace:h});break;case"multiversx":this.rpcProviders[t]=new d2({namespace:h});break;case"near":this.rpcProviders[t]=new p2({namespace:h});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&ei(o)&&this.events.emit("accountsChanged",o.map(s2))}else if(s.name==="chainChanged"){const o=t.chainId,c=t.event.data,h=hs(o),l=Fc(o)!==Fc(c)?`${h}:${Fc(c)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=Mc(po({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Mc(po({},Ct("USER_DISCONNECTED")),{data:e.topic}))}),this.on(dn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(h=>hs(h)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=hs(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${vd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${vd}/${e}`)}}const m2=go;jn.UniversalProvider=m2,jn.default=go,Object.defineProperty(jn,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
